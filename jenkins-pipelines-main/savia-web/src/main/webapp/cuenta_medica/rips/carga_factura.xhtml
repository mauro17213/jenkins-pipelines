<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR"> 
        <h:outputStylesheet name="css/rips.css"/>
        <h:outputScript name="js/calendar-localization.js"/>
        <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
        <center>
            <style>
                .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                    border: 1px solid #e5e2e2;
                }
                .ui-panelgrid .ui-panelgrid-footer {
                    text-align: center;
                    padding: 2px 5px;
                }
                .responsive_input, .responsive_input input {
                    width: 90%
                }
                
                .tabla_altura_fija_cm .ui-datatable-table {
                    min-height: 100px;
                }
                
                
                .btn-soporte, .btn-soporte span{
                    padding-top: 3px;
                }

                .bodyDialogFull{
                    height: 90%;
                    overflow: auto;
                }
                .ui-dialog.fullscreen-dialog {
                    width: 100% !important;
                    height: 100% !important;
                    top: 0 !important;
                    left: 0 !important;
                    margin: 0;
                    position: fixed !important;
                }
                .ui-dialog.fullscreen-dialog .ui-dialog-content,
                .ui-dialog-content{
                    /*width: 98% !important;*/
                    height: 95% !important;
                    padding-top: 0.2rem !important;
                }
                .ui-button.ui-state-disabled {
                    pointer-events: auto !important;
                }                    
                .bnt-badge-soporte{
                    background-color: #04997C;
                    color: white;
                    top: 10px !important;
                }
                .fila-seleccionada {
                    background-color: #b8d1f3 !important; /* Azul claro */
                }
            </style>
            <h:form id="frmRipsCargas" >
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{cmFeRipsCargaBean.modulo.descripcion}" style="text-align: left;display: inherit;padding-left: 10px;margin-bottom: 3px;margin-top: 3px;">#{cmFeRipsCargaBean.modulo.nombre}</span>
                        <p:spacer width="30"/>
                        <p:outputLabel value="Desde" for="fechaInicio" style="font-weight:bold"/>
                        <p:spacer width="5"/>
                        <p:calendar id="fechaInicio"
                                    locale="es"
                                    autocomplete="off"
                                    navigator="true"
                                    pattern="yyyy-MM-dd HH:mm"
                                    maxlength="10"
                                    style="max-width: 100px"
                                    value="#{cmFeRipsCargaBean.paramConsulta.parametroConsulta1}">
                            <f:convertDateTime type="dateTime" pattern="yyyy-MM-dd HH:mm" timeZone="America/Bogota" />
                            <p:ajax event="dateSelect" update="tablaRegistros"/>
                        </p:calendar>
                        <p:spacer width="80"/>
                        <p:outputLabel value="Hasta" for="fechaFin" style="font-weight:bold"/>
                        <p:spacer width="5"/>
                        <p:calendar id="fechaFin" autocomplete="off"
                                    locale="es"
                                    navigator="true"
                                    pattern="yyyy-MM-dd HH:mm"
                                    maxlength="10"
                                    style="width: 100px"
                                    value="#{cmFeRipsCargaBean.paramConsulta.parametroConsulta2}">
                            <f:convertDateTime type="dateTime" pattern="yyyy-MM-dd HH:mm" timeZone="America/Bogota" />
                            <p:ajax event="dateSelect" update="tablaRegistros"/>
                        </p:calendar>
                        <p:spacer width="10"/>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{cmFeRipsCargaBean.accionAdicional5}" title="Asignar Radicador" actionListener="#{cmFeRipsCargaBean.verCargasAsignar}" icon="ui-icon-person"/>
                        <p:commandButton rendered="#{cmFeRipsCargaBean.accionCrear}" title="Cargar Factura" actionListener="#{cmFeRipsCargaBean.crearFactura}" icon="ui-icon-document"/>
                        <p:commandButton rendered="#{cmFeRipsCargaBean.accionAdicional3}" title="Carga Masiva Facturas" actionListener="#{cmFeRipsCargaBean.crearFacturasMasivas}" icon="ui-icon-circle-arrow-n"/>                    
                        <p:commandButton rendered="#{cmFeRipsCargaBean.accionListar}" title="Refrescar" ajax="false" actionListener="#{cmFeRipsCargaBean.refrescar}" icon="ui-icon-refresh"/>
                    </f:facet>
                </p:toolbar>
                <p:dataTable var="obj" value="#{cmFeRipsCargaBean.lazyCmRips}" paginator="true" rows="#{cmFeRipsCargaBean.tamanoPagina}" 
                             emptyMessage="No se encontraron registros"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="30,50,100" id="tablaRegistros" lazy="true"
                             widgetVar="tablaWidget" scrollable="true"
                             scrollWidth="150%"
                             style="font-size:11px;"
                             rowKey="#{obj.id}" reflow="true">

                    <p:column style="text-align: center;">
                        <f:facet name="header">
                            <h:outputText value="Acciones"/>
                        </f:facet>               
                        <p:commandButton  title="Ver" actionListener="#{cmFeRipsCargaBean.ver(obj.id)}" icon="ui-icon-search" class="btn-soporte"/>
                        <p:commandButton  title="Gestionar" rendered="#{obj.esValidacionProceso and  cmFeRipsCargaBean.accionAdicional1 and cmFeRipsCargaBean.validarReglaAuxiliarRadicacion(obj) }"  actionListener="#{cmFeRipsCargaBean.verGestionar(obj.id)}" icon="ui-icon ui-icon-script" class="btn-soporte" />                        
                        <p:commandButton  title="Reintentar Carga" rendered="#{cesEstadoRecuperable and cmFeRipsCargaBean.accionAdicional1}" action="#{cmFeRipsCargaBean.guardarEstadorRecuperacionCarga(obj)}"   icon="ui-icon-alert"  immediate="true" style="margin-left: 5px;" class="btn-soporte">
                            <p:confirm header="Confirmación" message="Está seguro que desea reintentar carga?" />
                        </p:commandButton>
                         <p:commandButton  title="Reintentar Carga Por Validacion CUV" rendered="#{cmFeRipsCargaBean.esReintentPorCUVesCandidatoValido(obj) and cmFeRipsCargaBean.accionAdicional4}" action="#{cmFeRipsCargaBean.guardarReintentoPorValidacionCUV(obj)}"   icon="ui-icon-alert" class="btn-soporte" immediate="true" style="margin-left: 5px;">
                            <p:confirm header="Confirmación" message="Está seguro que desea reintentar carga?" />
                        </p:commandButton> 
                        <p:commandButton  title="Ver Transacciones" rendered="#{obj.tieneTransacciones and cmFeRipsCargaBean.accionAdicional2}" actionListener="#{cmFeRipsCargaBean.verWsTransaccion(obj.id)}" icon="ui-icon-transferthick-e-w" class="btn-soporte"/>
                        <p:badge id="cantidadPendientes" value="#{obj.soportesNumero}" class="bnt-badge-soporte" >
                            <p:commandButton id="btnVerSoporte" title="Número Soportes: #{obj.soportesNumero}" icon="pi pi-file-pdf" disabled="#{obj.soportesNumero == 0}" actionListener="#{cmFeRipsCargaBean.verSoportes(obj.id)}" class="btn-soporte"/>
                        </p:badge>
                    </p:column>
                    
                    <p:column headerText="Origen" filterBy="#{obj.origen}" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Manual" itemValue="0"/>
                                <f:selectItem itemLabel="Masivo" itemValue="1"/>  
                            </p:selectOneMenu>   
                        </f:facet>
                        <h:outputText value="#{obj.origenStr}" title="#{obj.origenStr}"/>
                    </p:column>
                    
                    <p:column headerText="Consecutivo" filterBy="#{obj.id}" style="text-align: center;width: 100px;">   
                        <f:facet name="filter">
                            <p:inputText label="Consecutivo" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.id}" title="#{obj.id}"/>       
                        <i class="pi pi-circle-on" style="#{cmFeRipsCargaBean.asignarIndicadorSinEnvioRadicacion(obj,cmFeRipsCargaBean.INDICADOR_PENDIENTE_FE)}" title="Pendiente FE" /> 
                        <i class="pi pi-circle-on" style="#{cmFeRipsCargaBean.asignarIndicadorSinEnvioRadicacion(obj,cmFeRipsCargaBean.INDICADOR_PENDIENTE_SOPORTES)}" title="Pendientes Soportes"/>  
                    </p:column>

                    <p:column headerText="Tipo" filterBy="#{obj.tipo}" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Factura" itemValue="0"/>
                                <f:selectItem itemLabel="Capita Inicial" itemValue="6"/>
                                <f:selectItem itemLabel="Capita por Período" itemValue="9"/>
                                <f:selectItem itemLabel="Capita Final" itemValue="7"/>
                                <f:selectItem itemLabel="Nota Crédito Capita" itemValue="8"/>
                                <f:selectItem itemLabel="Nota Crédito Parcial" itemValue="1"/>
                                <f:selectItem itemLabel="Nota Crédito Total" itemValue="2"/>
                                <f:selectItem itemLabel="Nota Ajuste" itemValue="3"/>
                                <f:selectItem itemLabel="Nota Crédito Acuerdo Voluntades" itemValue="4"/>
                                <f:selectItem itemLabel="Nota Débito" itemValue="5"/>    
                            </p:selectOneMenu>    
                        </f:facet>
                        <h:outputText value="#{obj.tipoStr}" title="#{obj.tipoStr}"/>
                    </p:column>

                    <p:column headerText="Nit" filterBy="#{obj.gnPrestadorSede.cntPrestador.numeroDocumento}">  
                        <f:facet name="filter">
                            <p:inputText label="Nit" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.gnPrestadorSede.cntPrestador.numeroDocumento}" />
                    </p:column>

                    <p:column headerText="Sede Prestador" filterBy="#{obj.gnPrestadorSede.nombreSede}">   
                        <f:facet name="filter">
                            <p:inputText label="Sede prestador" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.gnPrestadorSede.nombreSede}" title="#{obj.gnPrestadorSede.nombreSede}" />
                    </p:column>

                    <p:column headerText="Estado" filterBy="#{obj.estado}" width="100" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="En Cola" itemValue="0" /> 
                                <f:selectItem itemLabel="En Proceso" itemValue="1" /> 
                                <f:selectItem itemLabel="Validación Automática Error" itemValue="2" /> 
                                <f:selectItem itemLabel="Validación Automática Ok" itemValue="3" />  
                                <f:selectItem itemLabel="Validación Ministerio Error" itemValue="4" />
                                <f:selectItem itemLabel="Validación Proceso" itemValue="5" />
                                <f:selectItem itemLabel="En Cola Auditoría" itemValue="6" /> 
                                <f:selectItem itemLabel="Envío Auditoría Proceso" itemValue="7" /> 
                                <f:selectItem itemLabel="Envío Auditoría Error" itemValue="8" /> 
                                <f:selectItem itemLabel="Envío Auditoría Ok" itemValue="9" /> 
                                <f:selectItem itemLabel="Sin Respuesta Sap Error" itemValue="10" /> 
                                <f:selectItem itemLabel="Rechazado" itemValue="11" /> 
                                <f:selectItem itemLabel="Devuelto"   itemValue="12" /> 
                                <f:selectItem itemLabel="Registrada" itemValue="13" /> 
                                <f:selectItem itemLabel="Validación Nota Ministerio Error" itemValue="14" /> 
                                <f:selectItem itemLabel="Validación Nota Ministerio Ok" itemValue="15" /> 
                                <f:selectItem itemLabel="Validación Nota FE Error" itemValue="16" /> 
                                <f:selectItem itemLabel="Nota Registro Exitoso" itemValue="17" /> 
                                <f:selectItem itemLabel="Error De Carga" itemValue="18" /> 
                            </p:selectOneMenu>                              
                        </f:facet>
                        <h:outputText value="#{obj.estadoStr}" title="#{obj.estado}"/>
                    </p:column>

                    <p:column headerText="Nro. Contrato" filterBy="#{obj.contrato}" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:inputText label="Contrato" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText rendered="#{obj.contrato != ''}" value="#{obj.contrato}" title="#{obj.contrato}"/>
                        <h:outputText rendered="#{obj.contrato == ''}" value="N/A" title="N/A"/>
                    </p:column>
                    
                    <p:column headerText="Número Factura"  filterBy="#{obj.facturaNumero}" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:inputText label="Número Factura" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.facturaNumero}" title="#{obj.facturaNumero}"> </h:outputText>
                    </p:column> 
                    
                    <p:column headerText="Número Nota"  filterBy="#{obj.numeroNota}" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:inputText label="Número Nota" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.numeroNota}" title="#{obj.numeroNota}" style="cursor: pointer;"> </h:outputText>
                    </p:column> 

                    <p:column headerText="Valor" sortBy="#{obj.facturaValor}">   
                        <h:outputText value="#{obj.facturaValor}" title="#{obj.facturaValor}">
                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency" locale="es_CO" />
                        </h:outputText>
                    </p:column> 

                    <p:column headerText="Régimen" filterBy="#{obj.maeRegimenValor}">
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="CONTRIBUTIVO" itemValue="Contributivo" />
                                <f:selectItem itemLabel="SUBSIDIADO" itemValue="Subsidiado" />
                            </p:selectOneMenu>                              
                        </f:facet>
                        <h:outputText value="#{obj.maeRegimenValor}" title="#{obj.maeRegimenValor}" /> 
                    </p:column>
                    
                    <p:column headerText="Período Carga" sortBy="#{obj.capitaPeriodo}" filterBy="#{obj.capitaPeriodo}" style="text-align: center;">  
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 80%;" filter="true" filterMatchMode="contains" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{cmFeRipsCargaBean.listaMeses}" var="mes" itemLabel="#{mes.nombre}" itemValue="#{mes.id}" />                                        
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.capitaPeriodoStr}"/>
                    </p:column>

                    <p:column headerText="Modalidad" filterBy="#{obj.maeContratoModalidadValor}" style="text-align: center;">   
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="CAPITA" itemValue="Capita" />
                                <f:selectItem itemLabel="COVID" itemValue="Covid" />
                                <f:selectItem itemLabel="EVENTO" itemValue="Evento" /> 
                                <f:selectItem itemLabel="PAQUETE" itemValue="Paquetes" />
                                <f:selectItem itemLabel="PGP" itemValue="PGP" />     
                            </p:selectOneMenu>                              
                        </f:facet>
                        <h:outputText value="#{obj.maeContratoModalidadValor}" title="#{obj.maeContratoModalidadValor}" /> 
                    </p:column>


                    <p:column headerText="Cobertura" filterBy="#{obj.cobertura}" style="text-align: center;">
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Si" itemValue="false" />
                                <f:selectItem itemLabel="No" itemValue="true" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.coberturaStr}" title="#{obj.coberturaStr}" /> 
                    </p:column>
                    
                    <p:column headerText="Multiusuario" filterBy="#{obj.multiusuario}" style="text-align: center;">
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Si" itemValue="1" />
                                <f:selectItem itemLabel="No" itemValue="0" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.multiusuarioStr}" title="#{obj.multiusuarioStr}" /> 
                    </p:column>
                    
                    <p:column headerText="Soporte Fe" filterBy="#{obj.de5601SoporteFe}" style="text-align: center;">     
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Si" itemValue="true" />
                                <f:selectItem itemLabel="No" itemValue="false" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.de5601SoporteFeStr}" title="#{obj.de5601SoporteFeStr}"> 
                        </h:outputText>
                    </p:column>
                               
                    <p:column headerText="Fecha Hora Creación" sortBy="#{obj.fechaHoraCrea}" >     
                        <h:outputText value="#{obj.fechaHoraCrea}" title="#{obj.fechaHoraCrea}"> 
                            <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"  />
                        </h:outputText>
                    </p:column>
                    
                    <p:column headerText="Origen Carga" filterBy="#{obj.origenCarga}" style="text-align: center;">     
                        <f:facet name="filter">
                            <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidget').filter()" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Conexiones" itemValue="0" />
                                <f:selectItem itemLabel="WebService" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.origenCargaStr}" title="#{obj.origenCargaStr}"> 
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Usuario Crea">     
                        <h:outputText value="#{obj.usuarioCrea}" title="#{obj.usuarioCrea}"> 
                        </h:outputText>
                    </p:column>
                    
                    <p:column headerText="Auxiliar Radicación"  filterBy="#{obj.radicadorAsignado.nombre}">     
                        <f:facet name="filter">
                            <p:inputText label="Auxiliar Radicación" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.radicadorAsignado.nombre}" title="#{obj.radicadorAsignado.nombre}"> 
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Usuario Radica"  filterBy="#{obj.usuarioModifica}">     
                        <f:facet name="filter">
                            <p:inputText label="Usuario Radica" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.usuarioModifica}" title="#{obj.usuarioModifica}"> 
                        </h:outputText>
                    </p:column>

                </p:dataTable>
            </h:form>

            <p:dialog header="Cargar Factura" id="dialogoCrearFactura" widgetVar="dialogoCrearFactura" appendTo="@(body)" 
                      modal="true"  width="95%" dynamic="true" style="max-height: 90%;">
                <p:scrollPanel mode="native" style="height: 500px">
                    <h:form id="frmCrearFactura">
                        <p:panel id="pCrearDatos" header="Datos Carga" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelCrear" columns="4"
                                         layout="grid">
                                <p:row>
                                   <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Tipo Carga *" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:selectOneMenu id="tipo" class="mae-select" value="#{cmFeRipsCargaBean.objeto.tipo}"
                                                      requiredMessage="Por favor indique el tipo de carga">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" />
                                            <f:selectItem itemLabel="Factura" itemValue="0"/>
                                            <f:selectItem itemLabel="Capita Inicial" itemValue="6"/>
                                            <f:selectItem itemLabel="Capita por Período" itemValue="9"/>
                                            <f:selectItem itemLabel="Capita Final" itemValue="7"/>
                                            <f:selectItem itemLabel="Nota Crédito Capita" itemValue="8"/>
                                            <f:selectItem itemLabel="Nota Crédito Parcial" itemValue="1"/>
                                            <f:selectItem itemLabel="Nota Crédito Total" itemValue="2"/>
                                            <f:selectItem itemLabel="Nota Ajuste" itemValue="3"/>
                                            <f:selectItem itemLabel="Nota Crédito Acuerdo Voluntades" itemValue="4"/>
                                            <f:selectItem itemLabel="Nota Débito" itemValue="5"/>                                                                                  
                                            <p:ajax event="change" listener="#{cmFeRipsCargaBean.ejecutarAccionCambioTipoCarga()}" update="frmCrearFactura:tablaAdjuntos" />
                                        </h:selectOneMenu>
                                    </p:column>
                                    
                                    <p:column styleClass="ui-widget-header ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esTipoCargaNota}" id="labelNumeroFactura">
                                        <p:outputLabel value="Número Factura" style="font-weight:bold" for="numerofactura" />
                                    </p:column>
                                    <p:column styleClass="ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esTipoCargaNota}">
                                        <p:inputText id="numerofactura" value="#{cmFeRipsCargaBean.objeto.facturaNumero}"  required="true" requiredMessage="Número Factura: Este campo es obligatorio." ></p:inputText>
                                    </p:column>
                                    
                                </p:row>
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esTipoCapita}">
                                        <p:outputLabel value="Régimen" for="regimen" class="etiqueta" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass="ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esTipoCapita}">
                                        <h:selectOneMenu id="regimen" class="mae-select" value="#{cmFeRipsCargaBean.objeto.maeRegimenId}" required="true" requiredMessage="Debe ingresar la el régimen">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true"  />
                                            <f:selectItems value="#{cmFeRipsCargaBean.hashRegimenes.entrySet()}" 
                                                           itemValue="#{regimen.key}" 
                                                           itemLabel="#{cmFeRipsCargaBean.getMapMaestroValue(cmFeRipsCargaBean.hashRegimenes, regimen.key).nombre}" 
                                                           var="regimen"> 
                                            </f:selectItems>
                                        </h:selectOneMenu>  
                                    </p:column>  
                                    
                                    <p:column styleClass="ui-widget-header ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esTipoCapita}">
                                        <p:outputLabel value="Período Carga" for="periodo" class="etiqueta" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass="ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esTipoCapita}">
                                        <p:selectOneMenu id="periodo" value="#{cmFeRipsCargaBean.objeto.capitaPeriodo}" filter="true" filterMatchMode="contains" required="true" requiredMessage="Debe seleccionar el período">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmFeRipsCargaBean.listaPeriodoCarga}" var="periodo" itemLabel="#{periodo.nombre}" itemValue="#{periodo.id}" />
                                            <p:ajax event="change" update="periodo"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Prestador *" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <p:outputLabel id="prestador" value="#{cmFeRipsCargaBean.objetoPrestador.razonSocial}"/>
                                        <p:commandButton immediate="true" action="#{cmFeRipsCargaBean.consultarSedes()}" 
                                                         icon="ui-icon-home" style="float:right" title="Seleccionar sede"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Sede" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <p:outputLabel id="sede" value="#{cmFeRipsCargaBean.objetoPrestadorSede.nombreSede}" />
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel> 
                            <p:fileUpload id="botonCargarRips" label="Agregar archivos" uploadLabel="Subir" cancelLabel="Cancelar"
                                                fileLimitMessage="Máximo número de archivos excedido" 
                                                invalidFileMessage="Tipo de archivo inválido, extensiones válidas (#{cmFeRipsCargaBean.adjuntoExtensionValida}) para el tipo de carga."
                                                listener="#{cmFeRipsCargaBean.adicionarAdjunto}"
                                                mode="advanced" 
                                                update="tablaAdjuntos, @this"
                                                dragDropSupport="true" auto="true" multiple="true"
                                                fileLimit="#{cmFeRipsCargaBean.adjuntoCantidadValida}" sizeLimit="524288000" 
                                                allowTypes="#{cmFeRipsCargaBean.adjuntoExpresionValida}" rendered="#{cmFeRipsCargaBean.habilitarBotonAdjuntos}"/>

                            <p:dataTable id="tablaAdjuntos" class="tabla_altura_fija_cm"
                                         var="adjunto" value="#{cmFeRipsCargaBean.listaAdjuntos}" 
                                         widgetVar="tablaWidgetAdjuntos" scrollable="true" 
                                         emptyMessage="No se ha cargado ningun archivo rips">
                                <p:column headerText="Nombre" style="text-align: center;">
                                    <h:outputText value="#{adjunto.archivoNombre}"/>
                                </p:column>
                                <p:column headerText="Tipo" style="text-align: center;">
                                    <h:outputText value="#{adjunto.tipoStr}"/>
                                </p:column>
                                <p:column headerText="Usuario" style="text-align: center;">
                                    <h:outputText value="#{adjunto.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="F.H. Crea" style="text-align: center;">
                                    <h:outputText value="#{adjunto.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Borrar" action="#{cmFeRipsCargaBean.retirarAdjunto(adjunto.archivoNombre)}" icon="ui-icon-trash" update="tablaAdjuntos" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                        </p:confirmDialog>
                        <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton action="#{cmFeRipsCargaBean.guardar(cmFeRipsCargaBean.tipoCreacionFactura)}" value="Guardar" update="frmCrearFactura:pCrearDatos"/>
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoCrearFactura').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
            <p:dialog header="Cargar Facturas Masivas" id="dialogoCrearFacturaMasiva" widgetVar="dialogoCrearFacturaMasiva" appendTo="@(body)" 
                      modal="true"  width="95%" dynamic="true" style="max-height: 90%;">
                <p:scrollPanel mode="native" style="height: 350px">
                    <h:form id="frmCrearFacturaMasiva">
                        <p:panel id="pCrearDatos" header="Datos Carga" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelCrear" columns="4"
                                         layout="grid">
                                <p:row>
                                   <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Tipo Carga *" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:selectOneMenu id="tipo" class="mae-select" value="#{cmFeRipsCargaBean.objeto.tipo}"
                                                      requiredMessage="Por favor indique el tipo de carga">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" />
                                            <f:selectItem itemLabel="Factura" itemValue="0"/>                                                                                
                                            <p:ajax event="change" listener="#{cmFeRipsCargaBean.ejecutarAccionCambioTipoCargaMasiva()}" update="frmCrearFactura:tablaAdjuntos" />
                                        </h:selectOneMenu>
                                    </p:column>
                                    
                                </p:row>
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Prestador *" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <p:outputLabel id="prestador" value="#{cmFeRipsCargaBean.objetoPrestador.razonSocial}"/>
                                        <p:commandButton immediate="true" action="#{cmFeRipsCargaBean.consultarSedes()}" 
                                                         icon="ui-icon-home" style="float:right" title="Seleccionar sede"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Sede" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <p:outputLabel id="sede" value="#{cmFeRipsCargaBean.objetoPrestadorSede.nombreSede}" />
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel> 
                            <p:fileUpload id="botonCargarRips" label="Agregar archivos" uploadLabel="Subir" cancelLabel="Cancelar"
                                                fileLimitMessage="Máximo número de archivos excedido" 
                                                invalidFileMessage="Tipo de archivo inválido, extension válida (zip) para el tipo de carga."
                                                invalidSizeMessage="El Tamaño de archivo permitido es hasta 2M"
                                                listener="#{cmFeRipsCargaBean.adicionarAdjunto}"
                                                mode="advanced" 
                                                update="tablaAdjuntos, @this"
                                                dragDropSupport="true" auto="true" multiple="true"
                                                fileLimit="1"  sizeLimit="2097152"
                                                allowTypes="/(\.|\/)(zip)$/" rendered="#{cmFeRipsCargaBean.habilitarBotonAdjuntos}"/>

                            <p:dataTable id="tablaAdjuntos" class="tabla_altura_fija_cm"
                                         var="adjunto" value="#{cmFeRipsCargaBean.listaAdjuntos}" 
                                         widgetVar="tablaWidgetAdjuntos" scrollable="true" 
                                         emptyMessage="No se ha cargado ningun archivo rips">
                                <p:column headerText="Nombre" style="text-align: center;">
                                    <h:outputText value="#{adjunto.archivoNombre}"/>
                                </p:column>
                                <p:column headerText="Tipo" style="text-align: center;">
                                    <h:outputText value="#{adjunto.tipoStr}"/>
                                </p:column>
                                <p:column headerText="Usuario" style="text-align: center;">
                                    <h:outputText value="#{adjunto.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="F.H. Crea" style="text-align: center;">
                                    <h:outputText value="#{adjunto.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Borrar" action="#{cmFeRipsCargaBean.retirarAdjunto(adjunto.archivoNombre)}" icon="ui-icon-trash" update="tablaAdjuntos" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                        </p:confirmDialog>
                        <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton action="#{cmFeRipsCargaBean.guardarFacturaMasiva()}" value="Guardar" update="frmCrearFacturaMasiva:pCrearDatos"/>
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoCrearFacturaMasiva').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
             <p:dialog header="Errores Facturas Masivas" id="dialogoErroresFacturaMasiva" widgetVar="dialogoErroresFacturaMasiva" appendTo="@(body)" 
                       modal="true"  width="95%" dynamic="true" style="max-height: 90%;">
                 <p:scrollPanel mode="native" style="height: 350px">
                     <h:form id="frmErroresFacturaMasiva">

                        <p:dataTable id="tablaAdjuntos" class="tabla_altura_fija_cm"
                                      var="error" value="#{cmFeRipsCargaBean.listaErroresProcesamiento}" 
                                      widgetVar="tablaWidgetAdjuntos" scrollable="true" 
                                      emptyMessage="No se ha cargado ningun archivo rips" paginator="true" rows="50" rowsPerPageTemplate="10,30,50,100"
                                      currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                      paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" >
                             <p:column headerText="Nombre" style="text-align: center;" sortBy="#{error.nombre}">
                                 <h:outputText value="#{error.nombre}"/>
                             </p:column>
                             <p:column headerText="Descripcion" style="text-align: center;">
                                 <h:outputText value="#{error.descripcion}"/>
                             </p:column>
                         </p:dataTable>
                         
                         <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                             <f:facet name="footer">
                                 <p:row>
                                     <p:column style="text-align: center">
                                         <h:panelGroup style="display:block; text-align:center;">
                                             <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoErroresFacturaMasiva').hide()" immediate="true" style="margin-left: 5px;"/>
                                         </h:panelGroup>
                                     </p:column>
                                 </p:row>
                             </f:facet>
                         </p:panelGrid>
                     </h:form>
                 </p:scrollPanel>
             </p:dialog>

            <p:dialog header="Gestionar" id="dialogoGestionar" widgetVar="dialogoGestionar" appendTo="@(body)" 
                      modal="true"  width="100%;" draggable="false" dynamic="true">

                <h:form id="frmGestionar">
                    <p:panel id="pGestionar" header="Datos Rips" collapsed="false" toggleable="true" style=" min-width: 950px;margin:10px 0px">
                               
                        <p:panelGrid id="panelCrear" columns="4"
                                         layout="grid">
                            <p:row>
                                <p:column styleClass="ui-widget-header ui-g-3" >
                                    <p:outputLabel value="Consecutivo Id " style="font-weight:bold"/>
                                </p:column>
                                <p:column styleClass="ui-g-3">                                     
                                    <p:outputLabel value="#{cmFeRipsCargaBean.objeto.id}"/>                                      
                                </p:column>
                                <p:column styleClass="ui-widget-header ui-g-3" >
                                    <p:outputLabel value="Tipo Carga " style="font-weight:bold"/>
                                </p:column>
                                <p:column styleClass="ui-g-3">                                     
                                    <p:outputLabel value="#{cmFeRipsCargaBean.objeto.tipoStr}"/>                                      
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column styleClass="ui-widget-header ui-g-3" >
                                    <p:outputLabel value="Número Factura" style="font-weight:bold"/>
                                </p:column>
                                <p:column styleClass="ui-g-3">
                                    <h:outputText value="#{cmFeRipsCargaBean.objeto.facturaNumero}">
                                        <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency" locale="es_CO" />
                                    </h:outputText> 
                                </p:column>
                                <p:column styleClass="ui-widget-header ui-g-3" >
                                    <p:outputLabel value="Valor factura " style="font-weight:bold"/>
                                </p:column>
                                <p:column styleClass="ui-g-3">                                        
                                     <h:outputText value="#{cmFeRipsCargaBean.objeto.facturaValor}" title="#{cmFeRipsCargaBean.objeto.facturaValor}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="2"/>
                                     </h:outputText>
                                </p:column>
                            </p:row>
                              <p:row>
                                   <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Prestador" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                     
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.gnPrestadorSede.cntPrestador.razonSocial}"/>                                      
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Sede Prestador" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.gnPrestadorSede.nombreSede}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency" locale="es_CO" />
                                        </h:outputText> 
                                    </p:column>
                                </p:row>
                            <p:row>
                                   <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Nit Prestador" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                     
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.documentoPrestador}"/>                                      
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Modalidad" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.maeContratoModalidadValor}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency" locale="es_CO" />
                                        </h:outputText> 
                                    </p:column>
                            </p:row>
                            <p:row>
                                <p:column styleClass="ui-widget-header ui-g-3" >
                                    <p:outputLabel value="Régimen" style="font-weight:bold"/>
                                </p:column>
                                <p:column styleClass="ui-g-9">                                     
                                    <p:outputLabel value="#{cmFeRipsCargaBean.objeto.maeRegimenValor}"/>                                      
                                </p:column>
                            </p:row>   
                        </p:panelGrid>
                        
                        
                        <p:panelGrid id="panelVer" columns="6"
                                     layout="grid" style="margin-top:20px;">
                            <p:row>
                                <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel  value="Eps Erronea" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >
                                    <h:outputText value="#{cmFeRipsCargaBean.objeto.de1601EpsErroneaStr}"></h:outputText>
                                </p:column>
                               
                                 <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel value="Factura Radicada" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >
                                    <h:outputText value="#{cmFeRipsCargaBean.objeto.de5002RadicadaStr}"></h:outputText>
                                </p:column>
                              
                            </p:row>
                            
                            <p:row>
                                <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel value=" Factura Pagada" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >
                                    <h:outputText value="#{cmFeRipsCargaBean.objeto.de5001PagadaStr}"></h:outputText>
                                </p:column>
                                <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel value="Soporte Fe " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >
                                     <h:outputText value="#{cmFeRipsCargaBean.objeto.de5601SoporteFeStr}"></h:outputText>
                                     <p:commandButton action="#{cmFeRipsCargaBean.actualizarRequisitoFeDocumento(cmFeRipsCargaBean.objeto.id)}"  rendered="#{cmFeRipsCargaBean.accionAdicional1 and !cmFeRipsCargaBean.objeto.esDe5601SoporteFe()}" icon="ui-icon-gear" title="Validar Facturación Electrónica Documento" style="margin-left: 20px"/>
                                </p:column>                           
                            </p:row> 
                            
                            <p:row>
                                <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel value="Profesional Red" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >                                   
                                    <p:selectOneRadio  value="#{cmFeRipsCargaBean.objeto.de4401ProfesionalRed}" layout="lineDirection">
                                        <f:selectItem itemLabel="Si" itemValue="true"/>
                                        <f:selectItem itemLabel="No" itemValue="false"/>
                                    </p:selectOneRadio>
                                </p:column>
                                
                                <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel value="Profesional Independiente" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >   
                                    <p:selectOneRadio  value="#{cmFeRipsCargaBean.objeto.de4402ProfesionalIndependiente}" layout="lineDirection">
                                        <f:selectItem itemLabel="Si" itemValue="true"/>
                                        <f:selectItem itemLabel="No" itemValue="false"/>
                                    </p:selectOneRadio>
                                </p:column> 
                            </p:row>
                            <p:row>                             
                                <p:column styleClass="ui-widget-header ui-g-3">
                                    <p:outputLabel value="Soporte " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" >
                                    <p:selectOneRadio  value="#{cmFeRipsCargaBean.objeto.de5601Soportes}" layout="lineDirection">
                                        <f:selectItem itemLabel="Si" itemValue="true"/>
                                        <f:selectItem itemLabel="No" itemValue="false"/>
                                    </p:selectOneRadio>
                                </p:column>
                            </p:row>
                            <p:row>                             
                                <p:column styleClass="ui-widget-header ui-g-3"  rendered="#{cmFeRipsCargaBean.objeto.esUrlXml()}">
                                    <p:outputLabel value="Url Xml " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3"  rendered="#{cmFeRipsCargaBean.objeto.esUrlXml()}">
                                    <p:link target="_blank" href="#{cmFeRipsCargaBean.objeto.urlXml}">Xml</p:link>
                                </p:column>
                                <p:column styleClass="ui-widget-header ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esUrlJson()}" >
                                    <p:outputLabel value="Url Json " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                </p:column>
                                <p:column styleClass=" ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esUrlJson()}" >
                                    <p:link target="_blank" href="#{cmFeRipsCargaBean.objeto.urlJson}">Json</p:link>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        
                    </p:panel>

                    <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column style="text-align: center">
                                    <h:panelGroup style="display:block; text-align:center;">
                                        <p:commandButton action="#{cmFeRipsCargaBean.guardarRequisitosManuales}"  rendered="#{cmFeRipsCargaBean.accionAdicional1}" value="Guardar"/>
                                        <p:commandButton action="#{cmFeRipsCargaBean.guardarEnviar}"  rendered="#{cmFeRipsCargaBean.accionAdicional1}" value="Enviar"/>                                      
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoGestionar').hide()" immediate="true" style="margin-left: 5px;"/>                                    
                                    </h:panelGroup>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog header="Ver Carga" id="dialogoVer" widgetVar="dialogoVer" appendTo="@(body)" position="center" width="90%" modal="true"  dynamic="true">
                <p:scrollPanel mode="native" style="max-height:350px">
                    <h:form id="frmVer">
                        <p:panel id="pVer" header="Datos Carga" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                <p:commandButton id="auditoria" class="btnAuditoria" action="#{cmFeRipsCargaBean.getAuditoria(cmFeRipsCargaBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                            </p:outputPanel>
                            <p:panelGrid id="panelCrear" columns="4" layout="grid">                          
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Consecutivo Carga " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                     
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.id}"/>                                      
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-1" >
                                        <p:outputLabel value="Tipo Carga " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-1">                                     
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.tipoStr}"/>                                      
                                    </p:column>
                                     <p:column styleClass="ui-widget-header ui-g-1" >
                                        <p:outputLabel value="Estado Carga " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                     
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.estadoStr}"/>                                      
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Número Factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.facturaNumero}">
                                            <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency" locale="es_CO" />
                                        </h:outputText> 
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Valor factura " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                     
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.facturaValor}" title="#{cmFeRipsCargaBean.objeto.facturaValor}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="2"/>
                                        </h:outputText>                                    
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Fecha Emisión" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                     
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.fechaHoraEmision}"/>                                      
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Fecha Ministerio" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <p:outputLabel value="#{cmFeRipsCargaBean.objeto.fechaHoraMinisterio}"/> 
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Cobertura" for="cobertura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:outputText id="cobertura" value="#{cmFeRipsCargaBean.objeto.coberturaStr}"> </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Prestador " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                      
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.gnPrestadorSede.cntPrestador.razonSocial}"></h:outputText>
                                    </p:column>
                                </p:row>

                                <p:row>    
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Documento Prestador" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.documentoPrestador}"></h:outputText>   
                                    </p:column> 
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Sede" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">
                                        <h:outputText value="#{cmFeRipsCargaBean.objeto.gnPrestadorSede.nombreSede}"></h:outputText>   
                                    </p:column>                              
                                </p:row>

                                <p:row>   
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Modalidad" for="modalidad" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                                  
                                        <h:outputText  id="modalidad"  value="#{cmFeRipsCargaBean.objeto.maeContratoModalidadValor}"></h:outputText>            
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Régimen" for="regimen" class="etiqueta" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass="ui-g-3">                          
                                        <h:outputText id="regimen" value="#{cmFeRipsCargaBean.objeto.maeRegimenValor}"></h:outputText>                                         
                                    </p:column>
                                </p:row>

                                <p:row rendered="#{cmFeRipsCargaBean.objeto.devolucion}">                             
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Devolución " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3">
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.maeDevolucionValor}"> </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Observación " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3">
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.observacionDevolucion}"> </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{cmFeRipsCargaBean.objeto.rechazo}">                             
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha Rechazo " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3">
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.fechaHoraRechazo}"> </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Observación Rechazo" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3">
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.observacionRechazo}"> </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{cmFeRipsCargaBean.objeto.hayObservacion()}">                             
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Observación" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-9">
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.observacion}"> </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row>                             
                                    <p:column styleClass="ui-widget-header ui-g-3"  rendered="#{cmFeRipsCargaBean.objeto.esUrlXml()}">
                                        <p:outputLabel value="Url Xml " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3"  rendered="#{cmFeRipsCargaBean.objeto.esUrlXml()}">
                                        <p:link target="_blank" href="#{cmFeRipsCargaBean.objeto.urlXml}">Xml</p:link>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esUrlJson()}" >
                                        <p:outputLabel value="Url Json " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" rendered="#{cmFeRipsCargaBean.objeto.esUrlJson()}" >
                                        <p:link target="_blank" href="#{cmFeRipsCargaBean.objeto.urlJson}">Json</p:link>
                                    </p:column>
                                </p:row>
                                <p:row> 
                                    <p:column styleClass="ui-widget-header ui-g-3"  >
                                        <p:outputLabel value="Período " class="etiqueta" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3"  >
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.capitaPeriodoStr}"> </h:outputText>
                                    </p:column>
                                     <p:column styleClass="ui-widget-header ui-g-3"  >
                                        <p:outputLabel value="Consecutivo Período Asociado" class="etiqueta" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3"  >
                                        <h:outputText  value="#{cmFeRipsCargaBean.objeto.cargaPeriodo.id}"> </h:outputText>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>

                        </p:panel>
                        <h:panelGroup layout="block" id="Adjuntos" style="text-align: center;background: #f5f5f5;font-weight: bold;">
                            <p:panel id="pAdjuntos" header="Adjuntos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                <p:dataTable id="tablaAdjuntos" var="adjunto" value="#{cmFeRipsCargaBean.objeto.cmFeRipsCargaAdjuntos}" 
                                             widgetVar="tablaWidgetAdjuntos" 
                                             scrollable="true" 
                                             emptyMessage="No se encontraron anexos">
                                    <p:column headerText="Nombre Archivo" style="text-align: center;">
                                        <h:outputText value="#{adjunto.archivoNombre}"/>
                                    </p:column>
                                    <p:column headerText="Tipo" style="text-align: center;">
                                        <h:outputText value="#{adjunto.tipoStr}"/>
                                    </p:column>
                                    <p:column headerText="Acciones" style="text-align: center;">
                                        <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                            <p:fileDownload value="#{cmFeRipsCargaBean.descargarAdjunto(adjunto)}" />
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>   
                            </p:panel>
                        </h:panelGroup>
                        <h:panelGroup layout="block" id="Validaciones" rendered="#{cmFeRipsCargaBean.objeto.estadoMayorValidacionProceso}" style="text-align: center;background: #f5f5f5;">
                            <p:panel id="pValidaciones" header="Validaciones" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                <p:panelGrid id="panelValidaciones" columns="4" layout="grid">
                                    <p:row>
                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel  value="Eps Erronea" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de1601EpsErroneaStr}"></h:outputText>
                                        </p:column>

                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel value="Factura Radicada" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de5002RadicadaStr}"></h:outputText>
                                        </p:column>

                                    </p:row>

                                    <p:row>
                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel value=" Factura Pagada" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de5001PagadaStr}"></h:outputText>
                                        </p:column>
                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel value="Soporte Fe " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de5601SoporteFeStr}"></h:outputText>
                                        </p:column>                           
                                    </p:row> 

                                    <p:row>
                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel value="Soportes" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de5601SoportesStr}"></h:outputText>
                                        </p:column>
                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel value="Profesional Independiente " class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de4402ProfesionalIndependienteStr}"></h:outputText>
                                        </p:column>                           
                                    </p:row> 

                                    <p:row>
                                        <p:column styleClass="ui-widget-header ui-g-3">
                                            <p:outputLabel value="Profesional Red" class="etiqueta"  style="font-weight:bold"></p:outputLabel>
                                        </p:column>
                                        <p:column styleClass=" ui-g-3" >
                                            <h:outputText value="#{cmFeRipsCargaBean.objeto.de4401ProfesionalRedStr}"></h:outputText>
                                        </p:column>  
                                    </p:row> 

                                </p:panelGrid>  
                            </p:panel>
                        </h:panelGroup>
                        <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVer').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Consultar Sedes" widgetVar="dialogoIpsLista" appendTo="@(body)" modal="true" style="max-width: 90%;min-height:90vh!important;" dynamic="true">
                <p:scrollPanel mode="native" style="he">
                    <h:form id="frmPrestadorLista">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cmFeRipsCargaBean.refrescarPrestadoresYSedes()}"
                                             oncomplete="PF('tablaWidgetIPS').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <h:panelGroup id ="hPanelIps">
                            <p:panelGrid id="panelIpsLista" style="height:auto;" columns="1">

                                <p:dataTable id="tablaRegistrosIps" 
                                             widgetVar="tablaWidgetIPS" 
                                             var="objIPS" 
                                             value="#{cmFeRipsCargaBean.lazySedes}" 
                                             rowKey="#{objIPS.id}"
                                             rows="#{cmFeRipsCargaBean.tamanoPagina}" 
                                             paginator="true" 
                                             lazy="true" 
                                             reflow="true" 
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" 
                                             selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cmFeRipsCargaBean.adicionarSedePrestadorPorEvento}" />
                                    <p:column headerText="Código Habilitacion" filterBy="#{objIPS.codigoHabilitacionSede}">
                                        <f:facet name="filter">
                                            <p:inputText label="Código Habilitación" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetIPS').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objIPS.codigoHabilitacionSede}"/>
                                    </p:column>
                                    <p:column headerText="Tipo Documento" filterBy="#{objIPS.cntPrestador.maeTipoDocumentoValor}">
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('tablaWidgetIPS').filter()">
                                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItems value="#{cmFeRipsCargaBean.listaTiposDocumentoEmpresa}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.descripcion}" itemDescription="#{tipoDoc.descripcion}" />
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{objIPS.cntPrestador.maeTipoDocumentoValor}"/>
                                    </p:column>
                                    <p:column headerText="Numero Documento" filterBy="#{objIPS.cntPrestador.numeroDocumento}">
                                        <f:facet name="filter">
                                            <p:inputText label="Numero Documetno" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetIPS').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objIPS.cntPrestador.numeroDocumento}"/>
                                    </p:column>
                                    <p:column headerText="Razón Social" filterBy="#{objIPS.cntPrestador.razonSocial}">
                                        <f:facet name="filter">
                                            <p:inputText label="Razón Social" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetIPS').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objIPS.cntPrestador.razonSocial}"/>
                                    </p:column>
                                    <p:column headerText="Sede" filterBy="#{objIPS.nombreSede}">
                                        <f:facet name="filter">
                                            <p:inputText label="Sede" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetIPS').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objIPS.nombreSede}"/>
                                    </p:column>
                                    <p:column headerText="Departamento">
                                        <h:outputText value="#{cmFeRipsCargaBean.obtenerDepartamento(objIPS.ubicacionId)}"/>
                                    </p:column>
                                    <p:column headerText="Municipio" filterBy="#{obj.ubicacionId}">
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('tablaWidgetIPS').filter()" filter="true" filterMatchMode="startsWith">
                                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItems value="#{cmFeRipsCargaBean.listaUbicacion}" var="tipoUbiC1" itemValue="#{tipoUbiC1.id}" itemLabel="#{tipoUbiC1.descripcion}" itemDescription="#{tipoUbiC1.descripcion}" />
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{cmFeRipsCargaBean.obtenerMunicipio(objIPS.ubicacionId)}"/>
                                    </p:column>
                                    <p:column headerText="Dirección">
                                        <f:facet name="filter">
                                            <p:inputText label="Dirección" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetIPS').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objIPS.direccion}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panelGrid>
                            <p:panelGrid  style="width:100%;margin:10px 0px">
                                <f:facet name="footer">
                                    <p:row>
                                        <p:column colspan="6" style="text-align: center">
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoIpsLista').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </p:column>
                                    </p:row>
                                </f:facet>
                            </p:panelGrid>
                        </h:panelGroup>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Descripción" widgetVar="dlgMsg" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:100px">
                    <h:form id="frmMensaje"> 
                        <h:outputText id="mensaje" value="#{cmFeRipsCargaBean.mansajeGeneral}" />
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgMsg').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>
            
            <p:dialog header="Ver Transacción" widgetVar="dialogoVerTransaccion" id="dialogoVerTransaccionDetalles" appendTo="@(body)" position="center" width="70%" modal="true" style="max-height:50%;overflow:scroll;">
                <p:scrollPanel mode="native" style="height:600px">
                    <h:form id="frmVerTransaccion">
                        <p:dataTable var="transaccionDetalle" value="#{cmFeRipsCargaBean.lazyCmFeTransacciones}" 
                                     paginator="true" rows="#{cmFeRipsCargaBean.tamanoPagina}" 
                                     emptyMessage="No se encontraron registros"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="30,50,100,200" lazy="true"
                                     widgetVar="tablaWidgetTransaccionDetalles"
                                     id="tablaTransaccionDetalles" 
                                     rowIndexVar="rowIndex"
                                     style="font-size:12px;"
                                     rowKey="#{transaccionDetalle.id}" reflow="true">
                            
                            <p:column headerText="Id Transacción Detalle" style="text-align: center;">
                                <h:outputText value="#{transaccionDetalle.id}"/>
                            </p:column>

                            <p:column headerText="Estado Transacción" filterBy="#{transaccionDetalle.estado}" style="text-align: center;">
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('tablaWidgetTransaccionDetalles').filter()" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="Exito" itemValue="1" />
                                        <f:selectItem itemLabel="Fallido" itemValue="2" />
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{transaccionDetalle.estadoStr}" title="#{transaccionDetalle.estadoStr}"/>
                            </p:column>

                            <p:column  headerText="Json Envío" style="text-align: center;">
                                <p:commandButton  title="Ver Json Recibido"
                                                  actionListener="#{cmFeRipsCargaBean.verJson( 'Json Envio' , transaccionDetalle.jsonEnvioStr, transaccionDetalle.fechaHoraEnvio)}" 
                                                  icon="ui-icon-search"  async="false" />
                            </p:column>
                            <p:column  headerText="Fecha Envío" style="text-align: center">
                                <h:outputText value="#{transaccionDetalle.fechaHoraEnvio}"/>
                            </p:column>

                            <p:column  headerText="Json Respuesta" style="text-align: center;">
                                <p:commandButton  title="Ver Json Recibido"
                                                  actionListener="#{cmFeRipsCargaBean.verJson( 'Json Respuesta' , transaccionDetalle.jsonRespuestaStr, transaccionDetalle.fechaHoraRespuesta)}" 
                                                  icon="ui-icon-search"  async="false" />
                            </p:column>
                            <p:column  headerText="Fecha Respuesta"  style="text-align: center">
                                <h:outputText value="#{transaccionDetalle.fechaHoraRespuesta}"/>
                            </p:column>
                          
                        </p:dataTable>
                        <p:panelGrid style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerTransaccion').hide()" immediate="true"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
            <p:dialog header="Ver Json " id="dialogoVerJson" widgetVar="dialogoVerJson" appendTo="@(body)" position="center" modal="true">
                <h:form id="frmVerJson" style="height: 190px;">
                    <p:panelGrid id="panelVerJson" columns="4" layout="grid" styleClass="showcase-text-align-center">
                        <p:row>
                            <p:column styleClass="ui-widget-header ui-g-3" >
                                            <h:outputText value="Tipo Json" style="font-weight:bold"/>
                            </p:column>
                            <p:column styleClass="ui-g-3" >
                                <h:outputText value="#{cmFeRipsCargaBean.tituloJsonMensaje}" />
                            </p:column>
                            <p:column styleClass="ui-widget-header ui-g-3" >
                                 <h:outputText value="Fecha Envío" style="font-weight:bold"/>
                            </p:column>
                            <p:column styleClass="ui-g-3" >
                                 <h:outputText value="#{cmFeRipsCargaBean.fechaEnvio}" />
                            </p:column>
                        </p:row>
           
                        <p:row>
                            <p:column styleClass="ui-g-12" >
                                <p:inputTextarea cols="150" value="#{cmFeRipsCargaBean.jsonContenido}" readonly="true" style="max-height: 350px; overflow: scroll;"/>
                            </p:column>
                        </p:row>

                    </p:panelGrid>
                    <p:panelGrid style="width:100%;margin:10px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="4" style="text-align: center">
                                    <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerJson').hide()" immediate="true"/>
                                </p:column>
                            </p:row>
                        </f:facet> 
                    </p:panelGrid>
                </h:form>
            </p:dialog>   
            
            <p:dialog widgetVar="dialogoSoportes" header="Soportes" appendTo="@(body)" responsive="true" modal="true" width="90%">
                <p:scrollPanel mode="native" style="max-height:350px">
                    <h:form id="frmVerSoportes" style="padding: 10px;">
                        <p:panel id="panelSoportes" header="Soportes" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable var="soporte" value="#{cmFeRipsCargaBean.lazySoportes}" paginator="true" rows="#{cmFeRipsCargaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaSoportes" lazy="true"
                                         widgetVar="tablaWidgetSoportes"
                                         style="font-size:11px;"
                                         rowKey="#{soporte.id}" >

                                <p:column  headerText="Nombre" style="text-align: center;" filterBy="#{soporte.archivoNombre}">    
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidgetSoportes').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{soporte.archivoNombre}" title="#{soporte.archivoNombre}"/>
                                </p:column>
                                <p:column  headerText="Tipo Soporte" style="text-align: center;" filterBy="#{soporte.maeTipoSoporteId}">
                                    <f:facet name="filter">
                                       <p:selectOneMenu id="soporteSelect" filter="true" filterMatchMode="contains" class="mae-select" onchange="PF('tablaWidgetSoportes').filter()" style="width: 90%;" >
                                           <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true"  />
                                           <f:selectItems value="#{cmFeRipsCargaBean.hashTipoSoporte.entrySet()}" 
                                                           itemValue="#{soporteItem.key}" 
                                                           itemLabel="#{cmFeRipsCargaBean.getMapMaestroValue(cmFeRipsCargaBean.hashTipoSoporte, soporteItem.key).valor} -
                                                           #{cmFeRipsCargaBean.getMapMaestroValue(cmFeRipsCargaBean.hashTipoSoporte, soporteItem.key).nombre}" 
                                                           var="soporteItem"> 
                                            </f:selectItems>
                                        </p:selectOneMenu>  
                                    </f:facet>
                                    <h:outputText value="#{soporte.maeTipoSoporteCodigo}-#{soporte.maeTipoSoporteValor}" 
                                                  title="#{soporte.maeTipoSoporteCodigo}-#{soporte.maeTipoSoporteValor}"/>
                                </p:column>
                                <p:column  headerText="Fecha Creación" style="text-align: center;" >
                                    <h:outputText value="#{soporte.fechaHoraCrea}" title="#{soporte.fechaHoraCrea}">
                                        <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"  />
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Usuario Crea" style="text-align: center;">
                                    <h:outputText value="#{soporte.usuarioCrea}" title="#{soporte.usuarioCrea}"/>
                                </p:column> 
                                <p:column  headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cmFeRipsCargaBean.descargarSoporte(soporte)}" />
                                    </p:commandButton>
                                    <p:commandButton id="auditoriaSoporte" class="btnAuditoriaSoporte" action="#{cmFeRipsCargaBean.getAuditoria(soporte.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                    <p:commandButton  title="Ver" actionListener="#{cmFeRipsCargaBean.verPdf(soporte)}" icon="ui-icon-search"/>
                                </p:column>  
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoSoportes').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
            <!-- Dialogo visualizar documento -->
            <p:dialog header="Visualización Soportes" widgetVar="dialogoVisualizarDoc" appendTo="@(body)" resizable="false" styleClass="fullscreen-dialog"  width="100%" height="95%" position="center" modal="true">
                <div class="bodyDialogFull" >
                    <h:form id="frmVisualizaDoc" style="height: 100%">          
                        <iframe  src="data:application/pdf;base64,#{cmFeRipsCargaBean.contenidoPDF}"
                        width="100%" height="100%" style="border: none;"></iframe>
                    </h:form>
                </div>  
                <div class="nuevoFooter" style="text-align: center">
                    <p:button value="Salir" class="boton btn-oscuro" onclick="PF('dialogoVisualizarDoc').hide(); return false;"  />                    
                </div>
            </p:dialog>
            
            <p:dialog widgetVar="dialogoAsignarRadicador" header="Asignar Radicador" appendTo="@(body)" responsive="true" modal="true" width="90%">
                <p:scrollPanel mode="native" style="max-height:500px">
                    <h:form id="frmVerAsignarRadicador" style="padding: 10px;">
                        <p:panel style="width:100%;margin:10px 0px">  
                            <p:panel style="width:100%;text-align: right;">
                                <p:commandButton value="Asignar" actionListener="#{cmFeRipsCargaBean.verAsignarRadicadores()}" style="margin-left: 5px;"/>              
                                <p:commandButton value="Limpiar Selección Items"  actionListener="#{cmFeRipsCargaBean.limpiarSeleccionCargasAsignar()}"/>
                            </p:panel>
                           
                            <p:dataTable var="obj" value="#{cmFeRipsCargaBean.lazyCmCargasAsignar}" paginator="true" rows="#{cmFeRipsCargaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="30,50,100,500,1000" id="tablaRegistrosRadicador" lazy="true"
                                         widgetVar="tablaWidgetRadicador" scrollable="true"
                                         selection="#{cmFeRipsCargaBean.listaCargasSeleccionadaAsignar}"
                                         style="font-size:11px;"
                                         tableStyle="width: 100%;" 
                                          rowStyleClass="#{cmFeRipsCargaBean.getRowStyleClass(obj)}"
                                         rowKey="#{obj.id}" reflow="true">

                                <p:column width="40"  selectionMode="multiple"  style="text-align: center;"  exportable="false"/>                                 
                                
                                <p:ajax event="toggleSelect" listener="#{cmFeRipsCargaBean.procesarFacturasSeleccionadas}" />
                                <p:ajax event="rowSelectCheckbox" listener="#{cmFeRipsCargaBean.selectCheckbox}"/>
                                <p:ajax event="rowUnselectCheckbox" listener="#{cmFeRipsCargaBean.unSelectCheckbox}" />
                                <p:ajax event="rowSelect" listener="#{cmFeRipsCargaBean.onRowSelect}"  />
                                <p:ajax event="rowUnselect" listener="#{cmFeRipsCargaBean.onRowUnselect}" />
                                
                                <p:column headerText="Consecutivo" filterBy="#{obj.id}" style="text-align: center;">   
                                    <f:facet name="filter">
                                        <p:inputText label="Consecutivo" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidgetRadicador').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.id}" title="#{obj.id}"/>
                                </p:column>

                                <p:column headerText="Tipo" style="text-align: center;">   
                                    <h:outputText value="#{obj.tipoStr}" title="#{obj.tipoStr}"/>
                                </p:column>

                                <p:column headerText="Nit" filterBy="#{obj.gnPrestadorSede.cntPrestador.numeroDocumento}" style="text-align: center;">  
                                    <f:facet name="filter">
                                        <p:inputText label="Nit" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidgetRadicador').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.gnPrestadorSede.cntPrestador.numeroDocumento}" />
                                </p:column>

                                <p:column headerText="Sede Prestador" filterBy="#{obj.gnPrestadorSede.nombreSede}">   
                                    <f:facet name="filter">
                                        <p:inputText label="Sede prestador" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }" onchange="PF('tablaWidgetRadicador').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.gnPrestadorSede.nombreSede}" title="#{obj.gnPrestadorSede.nombreSede}" />
                                </p:column>

                                <p:column headerText="Estado" width="100" style="text-align: center;">   
                                    <f:facet name="filter">
                                        <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidgetRadicador').filter()" >
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Validación Proceso" itemValue="5" />
                                        </p:selectOneMenu>                              
                                    </f:facet>
                                    <h:outputText value="#{obj.estadoStr}" title="#{obj.estado}"/>
                                </p:column>
                               
                               <p:column headerText="Modalidad" filterBy="#{obj.maeContratoModalidadValor}" style="text-align: center;">   
                                   <f:facet name="filter">
                                       <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidgetRadicador').filter()" >
                                           <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                           <f:selectItem itemLabel="EVENTO" itemValue="Evento" /> 
                                           <f:selectItem itemLabel="PGP" itemValue="PGP" />     
                                       </p:selectOneMenu>                              
                                   </f:facet>
                                   <h:outputText value="#{obj.maeContratoModalidadValor}" title="#{obj.maeContratoModalidadValor}" /> 
                               </p:column>

                                <p:column headerText="Número Factura"  filterBy="#{obj.facturaNumero}" style="text-align: center;">   
                                    <f:facet name="filter">
                                        <p:inputText label="Número Factura" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidgetRadicador').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.facturaNumero}" title="#{obj.facturaNumero}"> </h:outputText>
                                </p:column> 

                               <p:column headerText="Cobertura" filterBy="#{obj.cobertura}" style="text-align: center;">
                                   <f:facet name="filter">
                                       <p:selectOneMenu style="width:70%;min-width:inherit;" onchange="PF('tablaWidgetRadicador').filter()" >
                                           <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                           <f:selectItem itemLabel="Si" itemValue="false" />
                                           <f:selectItem itemLabel="No" itemValue="true" />
                                       </p:selectOneMenu>
                                   </f:facet>
                                   <h:outputText value="#{obj.coberturaStr}" title="#{obj.coberturaStr}" /> 
                               </p:column>

                                <p:column headerText="Valor" sortBy="#{obj.facturaValor}" style="text-align: center;">   
                                    <h:outputText value="#{obj.facturaValor}" title="#{obj.facturaValor}">
                                        <f:convertNumber currencySymbol="$" groupingUsed="true" maxFractionDigits="2" type="currency" locale="es_CO" />
                                    </h:outputText>
                                </p:column> 
                                
                                <p:column headerText="Fecha Hora Creación" sortBy="#{obj.fechaHoraCrea}" >     
                                    <h:outputText value="#{obj.fechaHoraCrea}" title="#{obj.fechaHoraCrea}"> 
                                        <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"  />
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Auxiliar Radicación"  filterBy="#{obj.radicadorAsignado.nombre}">     
                                    <f:facet name="filter">
                                        <p:inputText label="Auxiliar Radicación" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidgetRadicador').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.radicadorAsignado.nombre}" title="#{obj.radicadorAsignado.nombre}"> 
                                    </h:outputText>
                                </p:column>
 
                            </p:dataTable>
                            <p:panelGrid  style="width:100%;margin:10px 0px">
                                <f:facet name="footer" >
                                    <p:row style="text-align: center">
                                        <p:column style="text-align: center">
                                            <p:commandButton value="Asignar" actionListener="#{cmFeRipsCargaBean.verAsignarRadicadores()}" style="margin-left: 5px;"/>
                                            <p:commandButton value="Limpiar Selección Items"  actionListener="#{cmFeRipsCargaBean.limpiarSeleccionCargasAsignar()}"/>
                                            <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoAsignarRadicador').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </p:column>
                                    </p:row>
                                </f:facet>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
                       

            <p:dialog header="Visualización Radicadores" widgetVar="dialogoVisualizarRadicadores" appendTo="@(body)" resizable="false"  width="70%" height="50%" position="center" modal="true">
                <p:scrollPanel mode="native" style="max-height:350px">
                    <h:form id="frmVerRadicadores" style="padding: 10px;">
                        
                        <p:panel id="pRadicadores" header="Datos Radicadores" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelCrear" columns="2"
                                         layout="grid">
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6">
                                        <p:outputLabel value="Seleccione Radicador" for="radicadores" class="etiqueta" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass="ui-g-6" >
                                        <p:selectOneMenu id="radicadores" value="#{cmFeRipsCargaBean.radicador}" filter="true" converter="cmGrupoUsuariosConverterCmFeGrupos" filterMatchMode="contains" required="true" requiredMessage="Debe seleccionar el radicador">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmFeRipsCargaBean.radicadores}" var="radicador" itemLabel="#{radicador.gnUsuario.nombre}" itemValue="#{radicador}" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                            </p:panelGrid> 
                        </p:panel>
                        
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Asignar" actionListener="#{cmFeRipsCargaBean.guardarAsigancionRadicador()}"  style="margin-left: 5px;"/>
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVisualizarRadicadores').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
        </center>

        <h:form id="exit">
            <p:remoteCommand  id="limpiarRender" name="limpiarRender" action="#{cmFeRipsCargaBean.salir()}"/>
        </h:form>

    </ui:define>

</ui:composition>
