<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="bodyJR">  
        <style type="text/css">    
            .verde{              
                color: #17FF00 !important;
            }
            .naranja{               
                color: #FF8300 !important;
            }
            .azul{
                color: #0059FF !important;
            }
            .amarillo{
                color: #FFE800 !important;
            }
            .celeste{
                color: #00FFE4 !important;
            }
            .morado{
                color: #BD00FF !important;
            }
            .rojo{
                color: #FF0000 !important;
            }
            .blanco {
                color: #ffffff !important ;
            }

        </style>

        <center>

            <p:panel>                 
                <h:form id="frmCotizaciones">
                    <p:toolbar>
                        <f:facet name="left">
                            <span title="#{cotizacionMipresBean.modulo.descripcion} #{cotizacionMipresBean.modulo.nombre}"></span>
                        </f:facet>
                        <f:facet name="right">
                            <p:commandButton 
                                rendered="#{cotizacionMipresBean.accionListar}" 
                                title="Refrescar" 
                                icon="ui-icon-refresh"
                                onclick="PF('tablaWidget').filter();"
                                process="@this tablaRegistros" 
                                update="tablaRegistros" />
                        </f:facet>
                    </p:toolbar>

                    <p:dataTable var="obj" value="#{cotizacionMipresBean.lazyRegistros}" paginator="true" 
                                 rows="#{cotizacionMipresBean.tamanoPagina}" 
                                 emptyMessage="No se encontraron registros"
                                 currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                                 widgetVar="tablaWidget"
                                 scrollable="true"
                                 rowKey="#{obj.id}" reflow="true">

                        <!-- ACCIONES -->
                        <p:column style="text-align: center;">
                            <f:facet name="header">
                                <h:outputText value="Acciones"/>
                            </f:facet>
                            <p:commandButton rendered="#{cotizacionMipresBean.accionVer}" title="Ver" actionListener="#{cotizacionMipresBean.ver(obj.id)}" icon="ui-icon-search"/>
                            <p:commandButton rendered="#{cotizacionMipresBean.accionAdicional1 and cotizacionMipresBean.validarEstadoSinCotizacion(obj.estado)}" title="Gestionar" actionListener="#{cotizacionMipresBean.gestionar(obj.id)}" icon="ui-icon ui-icon-script"/>
                            <p:commandButton 
                                id="btnRechazar"
                                rendered="#{cotizacionMipresBean.accionAdicional2 and cotizacionMipresBean.validarEstadoRechazoCotizacion(obj.estado)}"
                                title="Rechazar"
                                icon="ui-icon-closethick"
                                actionListener="#{cotizacionMipresBean.rechazar(obj.id)}"
                                update="frmCotizaciones">
                                <p:confirm header="Confirmación" message="¿Estás seguro de que deseas rechazar esta cotización?" icon="pi pi-exclamation-triangle"/>
                            </p:commandButton>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                            </p:confirmDialog>
                        </p:column>    

                        <!-- NUMERO PRESCRIPCIÓN -->
                        <p:column headerText="Numero Prescripción" filterBy="#{obj.numeroPrescripcion}">
                            <f:facet name="filter">
                                <p:inputText label="Documento" maxlength="128" style="width: 95%;" />
                            </f:facet>
                            <h:outputText title="#{obj.numeroPrescripcion}" value="#{obj.numeroPrescripcion}"/>
                        </p:column>

                        <!-- TIPO TECNOLOGÍA -->
                        <p:column headerText="Tipo Tecnología" filterBy="#{obj.tipoTecnologia}">
                            <f:facet name="filter">
                                <p:selectOneMenu style="width: 88%;">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Medicamentos" itemValue="1"/>
                                    <f:selectItem itemLabel="Procedimientos" itemValue="2"/>
                                    <f:selectItem itemLabel="Dispositivos" itemValue="3"/>
                                    <f:selectItem itemLabel="Productos nutricionales" itemValue="4"/>
                                    <f:selectItem itemLabel="Servicios Complementarios" itemValue="5"/>
                                </p:selectOneMenu>
                            </f:facet>
                            <div style="width: 120px; display: flex; align-items: center; justify-content: space-between;">
                                <h:outputText value="#{obj.nombreTipoTecnologia}" title="#{obj.nombreTipoTecnologia}"/>
                                <i class="pi pi-circle-on #{cotizacionMipresBean.establecerColorTecnologia(obj.tipoTecnologia)}" 
                                   title="#{obj.nombreTipoTecnologia}" style="margin-left: 10px;"></i>
                            </div>
                        </p:column>

                        <!-- NOMBRE TECNOLOGÍA -->
                        <p:column headerText="Nombre Tecnología" filterBy="#{obj.nombreTecnologia}" 
                                  style="width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            <f:facet name="filter">
                                <p:inputText label="nombreTecno" maxlength="128" style="width: 95%;" />
                            </f:facet>
                            <h:outputText title="#{obj.nombreTecnologia}" value="#{obj.nombreTecnologia}" 
                                          style="display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%;" />
                        </p:column>

                        <!-- ESTADO -->
                        <p:column headerText="Estado" filterBy="#{obj.estado}">
                            <f:facet name="filter">
                                <p:selectOneMenu style="width: 88%;">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Pendiente De Cotización" itemValue="11"/>
                                    <f:selectItem itemLabel="Con Cotización" itemValue="12"/>
                                    <f:selectItem itemLabel="Rechazo De Cotización" itemValue="13"/>
                                    <f:selectItem itemLabel="Direccionado Con Cotización" itemValue="14"/>
                                    <f:selectItem itemLabel="Direccionado Sin Cotización" itemValue="15"/>
                                    <f:selectItem itemLabel="Direccionado Sin Asignar Cotización Activa" itemValue="17"/>
                                    <f:selectItem itemLabel="NoDireccionado Sin Cotización" itemValue="18"/>
                                    <f:selectItem itemLabel="NoDireccionado Con Cotización" itemValue="19"/>
                                </p:selectOneMenu>
                            </f:facet>
                            <div style="width: 120px; display: flex; align-items: center; justify-content: space-between;"> 
                                <h:outputText value="#{obj.nombreTipoEstado}" title="#{obj.nombreTipoEstado}"/>
                                <i class="pi pi-circle-on #{cotizacionMipresBean.establecerColorEstado(obj.estado)}" 
                                   title="#{obj.nombreTipoEstado}" style=" margin-left: 10px"></i>
                            </div>
                        </p:column>

                    </p:dataTable>
                </h:form>     
            </p:panel>



            <p:dialog widgetVar="dialogoVer" appendTo="@(body)" modal="true" style="max-width: 95%;" resizable="false" dynamic="true">
                <header style="font-size: 30px">
                    <b>Ver</b>
                </header>

                <h:form id="frmAuditoriaVer" class="frmAuditoriaVer" style="margin-top: -15px; text-align: right;">
                    <p:outputLabel id="labelDatosAuditoriaVer" value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.datosAuditoria} "/>                    
                </h:form> 

                <p:scrollPanel mode="native" style="max-height: 400px;">
                    <h:form id="frmVer">

                        <p:panel id="pVer" header="Ver Solicitud Cotizaciòn" style="margin-bottom:10px;" collapsed="false" toggleable="true">  

                            <p:panel id="presc" header="PRESCRIPCIÒN" widgetVar="dialogoaf" style="width:auto;height:auto;"  >
                                <p:panelGrid id="panelVerpres" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Numero Prescripciòn" for="ssa"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="ssa"  value="#{cotizacionMipresBean.objetoPrescripcion.numeroPrescripcion}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Ambito" for="sa"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="sa"  value="#{cotizacionMipresBean.obtenerAmbito(cotizacionMipresBean.objetoPrescripcion.codAmbAte)}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Fecha Prescripción" for="fa" style="font-weight:bold"/>                                   
                                    <p:outputLabel id="fa">
                                        <h:outputText value="#{cotizacionMipresBean.objetoPrescripcion.fechaPrescripcion}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText> - 
                                        <h:outputText value="#{cotizacionMipresBean.objetoPrescripcion.horaPrescripcion}" />
                                    </p:outputLabel>


                                    <p:outputLabel value="Dx Principal" for="va"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="va"  value="#{cotizacionMipresBean.objetoPrescripcion.maDiagnosticoPrincipalValor}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Prescriptor" for="baa"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="baa"  value="#{cotizacionMipresBean.objetoPrescripcion.prestadorRazonSocial}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Tipo Tecnologia" for="baaa"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="baaa"  value="#{cotizacionMipresBean.objeto.nombreTipoTecnologia}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Tecnologia Prescrita" for="bea"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="bea"  value="#{cotizacionMipresBean.objeto.nombreTecnologia}">
                                    </p:outputLabel>                                  

                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="pAfiliadoVer" header="AFILIADO" widgetVar="dialogoafVer" style="width:auto;height:auto;"  >
                                <p:panelGrid id="panelVeraf" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Tipo Documento" for="doca"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="doca"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.maeTipoDocumentoValor}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Número Documento" for="Ndoca"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="Ndoca"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.numeroDocumento}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Nombre/s" for="namea"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="namea"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.primerNombre}  #{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.segundoNombre}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Apellido/s" for="snamea"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="snamea"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.primerApellido}  #{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.segundoApellido}">
                                    </p:outputLabel>                                   
                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="panelCodVer" header="TECNOLOGIA" style="margin-bottom:10px" rendered="#{cotizacionMipresBean.tipoEditable}" >                               
                                <p:panelGrid id="panelCodaTecnologiaVer" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Código" for="codDireCupsa"  style="font-weight:bold"/>                                                                       
                                    <p:outputLabel id="codDireCupsa"   style="width: 300px;" value="#{cotizacionMipresBean.objetoCotizacion.maTecnologiaCodigo}" >
                                    </p:outputLabel>

                                    <p:outputLabel value="Descripción" for="DesDireCupsa"  style="font-weight:bold"/>                                                                          
                                    <p:outputLabel id="DesDireCupsa"  value="#{cotizacionMipresBean.objetoCotizacion.maTecnologiaValor}" >
                                    </p:outputLabel>  

                                </p:panelGrid>   
                            </p:panel>

                            <p:panel id="panelCrearDireccionamientoPrestadorVer" header="PRESTADOR" style="margin-bottom:10px" rendered="#{cotizacionMipresBean.tipoEditable}" collapsed="false" toggleable="true">

                                <p:panelGrid id="panelDireccionamientoPrestadorVer" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Razón Social" for="RazonSociala"  style="font-weight:bold"/>                                   
                                    <p:outputLabel id="RazonSociala"  value="#{cotizacionMipresBean.objetoCotizacion.cntPrestadorSede.cntPrestador.razonSocial}" >
                                    </p:outputLabel>

                                    <p:outputLabel value="Código Prestador"  style="font-weight:bold"/>                                   
                                    <p:outputLabel id="codigoprestadora"  value="#{cotizacionMipresBean.objetoCotizacion.cntPrestadorSede.cntPrestador.numeroDocumento}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Sede" for="codHSedea"  style="font-weight:bold"/>                                  
                                    <p:outputLabel id="codHSedea"  value="#{cotizacionMipresBean.objetoCotizacion.cntPrestadorSede.nombreSede}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Direcciòn" for="teladma"  style="font-weight:bold"/>                                   
                                    <p:outputLabel id="teladma"  value="#{cotizacionMipresBean.objetoCotizacion.cntPrestadorSede.direccion}">
                                    </p:outputLabel>                               
                                </p:panelGrid>   
                            </p:panel>   

                            <p:panelGrid id="panelTarifa" columns="4" rendered="#{cotizacionMipresBean.tipoEditable}"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Tipo Tarifa" style="font-weight:bold"/>
                                <p:outputLabel id="tipoTarifa" value="#{cotizacionMipresBean.tipoTari(cotizacionMipresBean.objetoCotizacion.tipoTarifa)}"></p:outputLabel> 

                                <p:outputLabel value="% Tarifa" style="font-weight:bold"/>
                                <p:outputLabel id="porcentajeTarifaLabel" value="#{cotizacionMipresBean.objetoCotizacion.porcentajeNegociacion}%" ></p:outputLabel> 

                                <p:outputLabel value="Valor tecnología" for="valorTotalLabel" style="font-weight:bold"/>                           
                                <p:outputLabel id="valorTotalLabel">
                                    <h:outputText value="#{cotizacionMipresBean.objetoCotizacion.valorTecnologia}">
                                        <f:convertNumber type="currency" currencySymbol="$" locale="es_CO" groupingUsed="true" maxFractionDigits="0"/>
                                    </h:outputText>
                                </p:outputLabel>

                                <p:outputLabel value="Activo" style="font-weight:bold"/>
                                <p:outputLabel id="activoLabel">
                                    <h:outputText value="#{cotizacionMipresBean.objetoCotizacion.activo ? 'Sí' : 'No'}" />
                                </p:outputLabel>

                                <p:outputLabel value="Fecha Inicio" for="fechaInicioLabel" style="font-weight:bold"/>

                                <p:outputLabel id="fechaInicioLabel">
                                    <h:outputText value="#{cotizacionMipresBean.objetoCotizacion.fechaInicioVigencia}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText>
                                </p:outputLabel>

                                <p:outputLabel value="Fecha Final" for="fechaFinalLabel" style="font-weight:bold" />
                                <p:outputLabel id="fechaFinalLabel">
                                    <h:outputText value="#{cotizacionMipresBean.objetoCotizacion.fechaFinVigencia}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText>
                                    <h:outputText value="  ⚠ ¡Fuera de vigencia!" style="color:red; font-weight:bold" rendered="#{cotizacionMipresBean.isFueraDeVigencia(cotizacionMipresBean.objetoCotizacion.fechaFinVigencia)}" />
                                </p:outputLabel>

                                <p:column colspan="1">
                                    <p:outputLabel value="Observación" for="observacionLabel" style="font-weight:bold" />
                                </p:column>
                                <p:column colspan="3">
                                    <p:outputLabel id="observacionLabel"
                                                   >
                                        <h:outputText value="#{cotizacionMipresBean.objetoCotizacion.observacion}" escape="true" />
                                    </p:outputLabel>
                                </p:column>
                            </p:panelGrid> 
                        </p:panel>
                        <p:panel id="pSoporteVer" header="Soportes Fisicos" style="margin-bottom:10px;" collapsed="false" toggleable="true" >
                            <p:dataTable id="tablaSoportesVer" var="soportesVer" value="#{cotizacionMipresBean.mpCotizacionAdjuntosList}" widgetVar="tablaSoportesVer" resizableColumns="true" emptyMessage="No se encontraron registros" >
                                <p:column headerText="Archivos adjuntos">
                                    <h:outputText value="#{soportesVer.nombreArchivo}" />
                                </p:column>
                                <p:column headerText="Tipo documento">
                                    <h:outputText value="#{soportesVer.maeTipoArchivoValor}" />
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cotizacionMipresBean.descargarAdjunto(soportesVer)}" />
                                    </p:commandButton>
                                </p:column>                                    
                            </p:dataTable> 
                        </p:panel>
                        <p:panelGrid id="panelVer" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVer').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>



            <p:dialog id="dialogoGestionar" widgetVar="dialogoGestionar" class="modal-no-scroll" appendTo="@(body)"
                      modal="true" draggable="false" dynamic="true" style="max-height:90%; max-width: 1600px">
                <header style="font-size: 30px;">
                    <b>Gestionar</b>
                </header>
                <h:form id="frmAuditoriaGestionar" class="frmAuditoria" style="margin-top: -15px; text-align: right;">
                    <p:outputLabel id="labelDatosAuditoria" value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.datosAuditoria} "/>                    
                </h:form> 
                <p:scrollPanel mode="native" style="max-height: 400px;">
                    <h:form id="frmGestionar">
                        <p:panel id="pGestionar" header="Gestionar Cotizaciones" style="margin-bottom:10px;" collapsed="false" toggleable="true">  

                            <p:panel id="pres" header="PRESCRIPCIÒN" widgetVar="dialogoaf" style="width:auto;height:auto;"  >
                                <p:panelGrid id="panelCrearapres" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Numero Prescripciòn" for="ss"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="ss"  value="#{cotizacionMipresBean.objetoPrescripcion.numeroPrescripcion}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Ambito" for="s"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="s"  value="#{cotizacionMipresBean.objetoPrescripcion.codAmbAte}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Fecha Prescripción" for="f" style="font-weight:bold"/>                                   
                                    <p:outputLabel id="f">
                                        <h:outputText value="#{cotizacionMipresBean.objetoPrescripcion.fechaPrescripcion}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText> - 
                                        <h:outputText value="#{cotizacionMipresBean.objetoPrescripcion.horaPrescripcion}" />
                                    </p:outputLabel>


                                    <p:outputLabel value="Dx Principal" for="v"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="v"  value="#{cotizacionMipresBean.objetoPrescripcion.maDiagnosticoPrincipalValor}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Prescriptor" for="b"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="b"  value="#{cotizacionMipresBean.objetoPrescripcion.prestadorRazonSocial}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Tipo Tecnologia" for="ba"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="ba"  value="#{cotizacionMipresBean.objeto.nombreTipoTecnologia}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Tecnologia Prescrita" for="be"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="be"  value="#{cotizacionMipresBean.objeto.nombreTecnologia}">
                                    </p:outputLabel>                                   

                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="pAfiliado" header="AFILIADO" widgetVar="dialogoaf" style="width:auto;height:auto;"  >
                                <p:panelGrid id="panelCrearaf" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Tipo Documento" for="doc"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="doc"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.maeTipoDocumentoValor}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Número Documento" for="Ndoc"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="Ndoc"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.numeroDocumento}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Nombre/s" for="name"   style="font-weight:bold"/>                                   
                                    <p:outputLabel id="name"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.primerNombre}  #{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.segundoNombre}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Apellido/s" for="sname"   style="font-weight:bold"/>                                    
                                    <p:outputLabel id="sname"  value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.primerApellido}  #{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.segundoApellido}">
                                    </p:outputLabel>                                   
                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="panelCodDirecciona" header="TECNOLOGIA" style="margin-bottom:10px" >
                                <p:toolbar>
                                    <f:facet name="right">
                                        <p:commandButton id="btnMaMedicamento" immediate="true" action="#{cotizacionMipresBean.consultarMaMedicamento()}"  icon="ui-icon-plusthick" title="Maestra Medicamentos"  />
                                        <p:commandButton id="btnMatecnologia" immediate="true" action="#{cotizacionMipresBean.consultarMaTecnologia()}"  icon="ui-icon-gear" title="Maestra Tecnologias"  />
                                        <p:commandButton id="btnMaMpTecnologia" immediate="true" action="#{cotizacionMipresBean.consultarMpMaTecnologia()}"  icon="ui-icon-flag" title="Tecnologias Homologadas"  />
                                        <p:commandButton id="btnMaInsumo" immediate="true" action="#{cotizacionMipresBean.consultarMaInsumo}"  icon="ui-icon-circle-arrow-n" title="Maestra Insumos"  /> 
                                        <p:commandButton id="btnMaPaquete" immediate="true" action="#{cotizacionMipresBean.consultarMaPaquete}"  icon="ui-icon-copy" title="Paquetes"  />
                                    </f:facet>
                                </p:toolbar>
                                <p:panelGrid id="panelCodaTecnologia" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Código" for="codDireCups"  style="font-weight:bold"/>                                                                       
                                    <p:outputLabel id="codDireCups"   style="width: 300px;" value="#{cotizacionMipresBean.objetoCotizacion.maTecnologiaCodigo}"  >
                                    </p:outputLabel>

                                    <p:outputLabel value="Descripción" for="DesDireCups"  style="font-weight:bold"/>                                                                          
                                    <p:outputLabel id="DesDireCups"  value="#{cotizacionMipresBean.objetoCotizacion.maTecnologiaValor}" >
                                    </p:outputLabel>  

                                </p:panelGrid>   
                            </p:panel>

                            <p:panel id="panelCrearDireccionamientoPrestador" header="PRESTADOR" style="margin-bottom:10px" collapsed="false" toggleable="true">
                                <p:toolbar>
                                    <f:facet name="right">                                    
                                        <p:commandButton id="btnIpsPrestador" immediate="true" action="#{cotizacionMipresBean.consultarIPS()}" icon="ui-icon-home" title="IPS" style="width:40px" />
                                    </f:facet>
                                </p:toolbar>
                                <p:panelGrid id="panelDireccionamientoPrestador" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;"> 

                                    <p:outputLabel value="Razón Social" for="RazonSocial"  style="font-weight:bold"/>                                   
                                    <p:outputLabel id="RazonSocial"  value="#{cotizacionMipresBean.objetoPrestadorSede.nombreSede}" >
                                    </p:outputLabel>

                                    <p:outputLabel value="Código Prestador"  style="font-weight:bold"/>                                   
                                    <p:outputLabel id="codigoprestador"  value="#{cotizacionMipresBean.objetoPrestadorSede.codigoPrestador}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Cod Habilitación Sede" for="codHSede"  style="font-weight:bold"/>                                  
                                    <p:outputLabel id="codHSede"  value="#{cotizacionMipresBean.objetoPrestadorSede.codigoHabilitacionSede}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Teléfono Administrativo" for="teladm"  style="font-weight:bold"/>                                   
                                    <p:outputLabel id="teladm"  value="#{cotizacionMipresBean.objetoPrestadorSede.telefonoAdministrativo}">
                                    </p:outputLabel>

                                    <p:outputLabel value="Correo" for="Correo"  style="font-weight:bold"/>                                    
                                    <p:outputLabel id="Correo" value="#{cotizacionMipresBean.objetoPrestadorSede.correoElectronico}" >
                                    </p:outputLabel>                                  
                                </p:panelGrid>   
                            </p:panel>   

                            <p:panelGrid id="panelTarifa" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Tipo Tarifa" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:selectOneMenu id="tipoTarifa" value="#{cotizacionMipresBean.objetoCotizacion.tipoTarifa}"
                                                     disabled="#{cotizacionMipresBean.habilitarTarifa()}">
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="PROPIA" itemValue="0" />
                                        <f:selectItem itemLabel="SOAT" itemValue="1" />
                                        <f:selectItem itemLabel="ISS2000" itemValue="2" />
                                        <f:selectItem itemLabel="ISS2001" itemValue="3" />
                                        <p:ajax event="change" listener="#{cotizacionMipresBean.obtenerValorTecnologia()}" />
                                    </p:selectOneMenu> 
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="% Tarifa" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:inputNumber id="porcetanjeTarifa"  value="#{cotizacionMipresBean.objetoCotizacion.porcentajeNegociacion}" symbol="%" 
                                                   decimalPlaces="2" minValue="-99.99" emptyValue="0" maxValue="100" symbolPosition="s">
                                        <f:ajax event="keyup" delay="2000" listener="#{cotizacionMipresBean.calcularValor}" />
                                    </p:inputNumber>
                                </p:column>



                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Valor tecnología" for="valorTotal" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:inputNumber id="valorTotal" 
                                                   decimalPlaces="0" 
                                                   decimalSeparator="," 
                                                   symbolPosition="p" 
                                                   symbol="$" 
                                                   thousandSeparator="." 
                                                   value="#{cotizacionMipresBean.objetoCotizacion.valorTecnologia}" 
                                                   minValue="0" 
                                                   required="true"  
                                                   requiredMessage="Valor tecnología: Este campo es obligatorio">
                                    </p:inputNumber>
                                </p:column>

                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Activo" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:selectBooleanButton id="activo" value="#{cotizacionMipresBean.objetoCotizacion.activo}" onLabel="Si" offLabel="No"
                                                           onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" required="false">
                                    </p:selectBooleanButton>
                                </p:column>                                   


                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Fecha Inicio" for="fechaInicio" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:datePicker locale="es" pattern="yyyy-MM-dd" id="fechaInicio" value="#{cotizacionMipresBean.objetoCotizacion.fechaInicioVigencia}" required="true" requiredMessage="La Fecha Inicio: Este campo es obligatorio" />
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Fecha Final" for="fechaFinal" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:datePicker locale="es" id="fechaFinal" pattern="yyyy-MM-dd" value="#{cotizacionMipresBean.objetoCotizacion.fechaFinVigencia}" required="true" requiredMessage="La Fecha Final: Este campo es obligatorio" />
                                </p:column>


                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Observación" for="observacion" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-10">
                                    <p:inputTextarea  id="observacion" required="true" value="#{cotizacionMipresBean.objetoCotizacion.observacion}" maxlength="512" rows="5" style="width: 99%" requiredMessage="Observación: Este campo es obligatorio" >
                                        <f:validateLength minimum = "5" maximum = "512" />
                                    </p:inputTextarea>
                                </p:column>
                            </p:panelGrid> 

                        </p:panel>
                        <p:panel id="pSoporteGestionar" header="Soportes Fisicos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{cotizacionMipresBean.ventanaAdjunto()}" icon="ui-icon-copy" title="Agregar Adjunto"/>
                            </div>
                            <p:dataTable id="tablaSoportesGestionar" var="soportesGestionar" value="#{cotizacionMipresBean.mpCotizacionAdjuntosList}" widgetVar="tablaSoportesGestionar" resizableColumns="true" emptyMessage="No se encontraron registros" >
                                <p:column headerText="Archivos adjuntos">
                                    <h:outputText value="#{soportesGestionar.nombreArchivo}" />
                                </p:column>
                                <p:column headerText="Tipo documento">
                                    <h:outputText value="#{soportesGestionar.maeTipoArchivoValor}" />
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Borrar" immediate="true"
                                                     actionListener="#{cotizacionMipresBean.borrarSoporteCrear(soportesGestionar)}" icon="ui-icon-closethick">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable> 
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                            </p:confirmDialog>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton action="#{cotizacionMipresBean.guardar}" value="Guardar" update="pGestionar" validateClient="true"/>
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoGestionar').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>


            <!-- descripciones afiliado genericas -->
            <p:dialog header="Afiliado" widgetVar="dlgInfoAfiliado" class="modal-no-scroll" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:250px">
                    <h:form id="frmAfiliadoGeneral">
                        <p:panelGrid id="panelAfiliadoGeneral" style="width:100%;margin:10px 0px" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid">

                            <p:outputLabel value="Estado" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.maeEstadoAfiliacionValor}" />

                            <p:outputLabel value="Nombres" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.nombres}" />

                            <p:outputLabel value="Apellidos" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.apellidos}" />

                            <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.maeTipoDocumentoCodigo}" />

                            <p:outputLabel value="Documento" style="font-weight:bold" />
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.numeroDocumento}" />

                            <p:outputLabel value="Correo" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.email}" />

                            <p:outputLabel value="Dirección" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.direccionResidencia}" />                            

                            <p:outputLabel value="Regimen" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.maeRegimenValor}" />

                            <p:outputLabel value="Contrato" style="font-weight:bold"/>
                            <p:outputLabel value="#{cotizacionMipresBean.objetoPrescripcion.asegAfiliado.idAfiliado}" />

                        </p:panelGrid>                        
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgInfoAfiliado').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>


            <!-- Listar IPS -->
            <p:dialog header="Consultar Ips" widgetVar="dialogoIpsLista" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 470px;">
                    <h:form id="frmIpsLista">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cotizacionMipresBean.listarPrestador()}" oncomplete="PF('tablaWidgetI').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelIpsLista" style="height:auto;" columns="4"
                                     columnClasses="ui-grid-col-12"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid">

                            <p:dataTable id="tablaRegistrosIps" widgetVar="tablaWidgetI" var="objIPS" value="#{cotizacionMipresBean.lazyIPS}" rowKey="#{objIPS.id}"
                                         rows="#{cotizacionMipresBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect" listener="#{cotizacionMipresBean.onRowSelectIps}" />
                                <p:column headerText="Código Habilitacion">                                   
                                    <h:outputText value="#{objIPS.codigoHabilitacionSede}"/>
                                </p:column>
                                <p:column headerText="Tipo Documento" >                                   
                                    <h:outputText value="#{objIPS.cntPrestador.maeTipoDocumentoValor}"/>
                                </p:column>
                                <p:column headerText="Numero Documento" filterBy="#{objIPS.cntPrestador.numeroDocumento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Numero Documetno" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.numeroDocumento}"/>
                                </p:column>
                                <p:column headerText="Razón Social" filterBy="#{objIPS.cntPrestador.razonSocial}">
                                    <f:facet name="filter">
                                        <p:inputText label="Razón Social" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.razonSocial}"/>
                                </p:column>
                                <p:column headerText="Sede" filterBy="#{objIPS.nombreSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Sede" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.nombreSede}"/>
                                </p:column>                               
                                <p:column headerText="Dirección">
                                    <f:facet name="filter">
                                        <p:inputText label="Dirección" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.direccion}"/>
                                </p:column>
                            </p:dataTable>

                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoIpsLista').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>



            <!-- Crear Adjunto -->
            <p:dialog header="Crear Adjunto" widgetVar="dialogoAdjuntoGestionar" appendTo="@(body)" modal="true" width="90%">
                <h:form id="frmAdjuntoGestionar">
                    <p:panelGrid id="panelAdjuntoGestionar" columns="2" layout="grid" styleClass="showcase-text-align-center">                      
                        <p:row>
                            <p:column class="ui-g-3">
                                <p:outputLabel value="Archivo" for="adjuntoArchivo" style="font-weight:bold"/>
                            </p:column>
                            <p:column class="ui-g-9">
                                <p:fileUpload id="adjuntoArchivo" label="Adjunto" mode="advanced" multiple="true"
                                              listener="#{cotizacionMipresBean.cargarAdjunto}"                                           
                                              invalidFileMessage="Tipo inválido de archivo"
                                              fileLimitMessage="Máximo número de archivos excedido."
                                              uploadLabel="Subir"  cancelLabel="Cancelar"
                                              sizeLimit="7000000" fileLimit="5" allowTypes="/(\.|\/)(pdf|PDF|jpe?g|png|doc|DOC)$/"
                                              widgetVar="subirManual" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    <p:panelGrid  style="width:100%;margin:10px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="6" style="text-align: center">
                                    <p:commandButton value="Salir" type="button" onclick="PF('dialogoAdjuntoGestionar').hide()" immediate="true" style="margin-left: 5px;"/>
                                </p:column>
                            </p:row>
                        </f:facet>                        
                    </p:panelGrid>
                </h:form>
            </p:dialog>


            <!--Lista Ma medicamento-->
            <p:dialog header="CONSULTAR MEDICAMENTO" widgetVar="dialogoMaMedicamento" appendTo="@(body)" modal="true" style="max-width: 100%;max-height: 100%;" dynamic="true" >
                <p:scrollPanel mode="native" style="height:490px">
                    <h:form id="frmMaMedicamento">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cotizacionMipresBean.refrescarMaMedicamento()}" oncomplete="PF('tablaWidgetMaMedicamento').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelMaMedicamento" style="height:auto;" columns="1">
                            <p:row>
                                <p:dataTable id="tablaMaMedicamento" widgetVar="tablaWidgetMaMedicamento" var="objMaMed" value="#{cotizacionMipresBean.lazyMaMedicamento}" rowKey="#{objMaMed.id}"
                                             rows="#{cotizacionMipresBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cotizacionMipresBean.onRowSelectMaMedicamento}" />

                                    <p:column headerText="Cum"  filterBy="#{objMaMed.cum}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="cum" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMedicamento').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaMed.cum}"/>
                                    </p:column>


                                    <p:column headerText="Descripción Invima"  filterBy="#{objMaMed.descripcionInvima}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="descripcionInvima" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMedicamento').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaMed.descripcionInvima}"/>
                                    </p:column>                                                           

                                    <p:column headerText="Descripción Estandarizada"  filterBy="#{objMaMed.descripcionEstandarizada}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="descripcionEstandarizada" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMedicamento').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaMed.descripcionEstandarizada}"/>
                                    </p:column>

                                    <p:column headerText="Valor Concentración"  filterBy="#{objMaMed.maeConcentracionValor}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="maeConcentracionValor" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMedicamento').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaMed.maeConcentracionValor}"/>
                                    </p:column>                                    

                                    <p:column headerText="Forma Farmaceutica"  filterBy="#{objMaMed.maeFormaFarmaceuticaValor}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="maeFormaFarmaceuticaValor" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMedicamento').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaMed.maeFormaFarmaceuticaValor}"/>
                                    </p:column>

                                    <p:column headerText="Cobertura">                                                                              
                                        <h:outputText value="#{objMaMed.maeCoberturaValor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:row>
                        </p:panelGrid>                       
                        <h:panelGroup layout="block" id="facturas" style="text-align: center;background: #f5f5f5;font-weight: bold;">                    
                        </h:panelGroup>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!--Fin Lista Ma medicamento-->


            <!--Lista Ma tecnologia-->
            <p:dialog header="CONSULTAR TECNOLOGÍA" widgetVar="dialogoMaTecnologia" appendTo="@(body)" modal="true" style="max-width: 100%;max-height: 100%;" dynamic="true" >
                <p:scrollPanel mode="native" style="height:490px">
                    <h:form id="frmMaTecnologia">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cotizacionMipresBean.refrescarMaTecnologia()}" oncomplete="PF('tablaWidgetMaTecnologia').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelMaTecnologia" style="height:auto;" columns="1">
                            <p:row>
                                <p:dataTable id="tablaWidgetMaTecnologia" widgetVar="tablaWidgetMaTecnologia" var="objMatec" value="#{cotizacionMipresBean.lazyMaTecnologia}" rowKey="#{objMatec.id}"
                                             rows="#{cotizacionMipresBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cotizacionMipresBean.onRowSelectMaTecnologia}" />

                                    <p:column headerText="Cups" filterBy="#{objMatec.cups}">
                                        <f:facet name="filter">
                                            <p:inputText class="cups" label="cups" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetMaTecnologia').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objMatec.cups}"/>
                                    </p:column> 

                                    <p:column headerText="Descripción" filterBy="#{objMatec.cupsDescipcion}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText class="cupsDescipcion" label="cupsDescipcion" maxlength="256" style="width: 95%;" onchange="PF('tablaWidgetMaTecnologia').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMatec.cupsDescipcion}"/>
                                    </p:column>                                                  

                                    <p:column headerText="Cobertura">                                        
                                        <h:outputText value="#{objMatec.maeCoberturaValor}"/>
                                    </p:column>                                
                                </p:dataTable>
                            </p:row>
                        </p:panelGrid>                       
                        <h:panelGroup layout="block" id="facturas" style="text-align: center;background: #f5f5f5;font-weight: bold;">                    
                        </h:panelGroup>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!--Fin Lista Ma tecnologia-->


            <!--Lista Ma tecnologias mipres-->
            <p:dialog header="CONSULTAR HOMOLOGACIONES" widgetVar="dialogoMaMipresTecnologia" appendTo="@(body)" modal="true" style="max-width: 100%;max-height: 100%;" dynamic="true" >
                <p:scrollPanel mode="native" style="height:490px">
                    <h:form id="frmMamPMipres">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cotizacionMipresBean.refrescarMaTecnologiaMipres()}" oncomplete="PF('tablaWidgetMaMpMipres').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelMaMpMipres" style="height:auto;" columns="1">
                            <p:row>
                                <p:dataTable id="tablaWidgetMaMpMipres" widgetVar="tablaWidgetMaMpMipres" var="obj" value="#{cotizacionMipresBean.lazyMaTecnologiaMipres}" rowKey="#{obj.id}"
                                             rows="#{cotizacionMipresBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cotizacionMipresBean.onRowSelectMaMpMipres}" />

                                    <p:column headerText="Código Mipres"  filterBy="#{obj.codigoMipres}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="Codigo" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMpMipres').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{obj.codigoMipres}"/>
                                    </p:column>

                                    <p:column headerText="Descripción Homologa" filterBy="#{objMainsumo.descripcion}">                                        
                                        <h:outputText value="#{obj.descripcion}"/>
                                    </p:column>                           

                                    <p:column headerText="Cups Descripcion"  filterBy="#{obj.maTecnologia.propioDescripcion}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="descripcion" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaMpMipres').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{obj.maTecnologia.propioDescripcion}"/>
                                    </p:column>                                                                  
                                </p:dataTable>
                            </p:row>
                        </p:panelGrid>                       
                        <h:panelGroup layout="block" id="facturas" style="text-align: center;background: #f5f5f5;font-weight: bold;">                    
                        </h:panelGroup>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!--Fin Lista Ma tecnologias mipres-->


            <!--Lista Ma insumoMipres-->
            <p:dialog header="CONSULTAR INSUMO" widgetVar="dialogoMaInsumoMipres" appendTo="@(body)" modal="true" style="max-width: 100%;max-height: 100%;" dynamic="true" >
                <p:scrollPanel mode="native" style="height:490px">
                    <h:form id="frmMaInsumoMipres">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cotizacionMipresBean.refrescarMaInsumoMipres()}" oncomplete="PF('tablaWidgetMaInsumoMipres').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelMaInsumoMipres" style="height:auto;" columns="1">
                            <p:row>
                                <p:dataTable id="tablaWidgetMaInsumoMipres" widgetVar="tablaWidgetMaInsumoMipres" var="objMainsumo" value="#{cotizacionMipresBean.lazyMaInsumoMipres}" rowKey="#{objMainsumo.id}"
                                             rows="#{cotizacionMipresBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cotizacionMipresBean.onRowSelectMaInsumoMipres}" />

                                    <p:column headerText="Código Mipres"  filterBy="#{objMainsumo.codigoMipres}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="Codigo" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaInsumoMipres').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMainsumo.codigoMipres}"/>
                                    </p:column>

                                    <p:column headerText="Descripción Mipres" filterBy="#{objMainsumo.descripcionMipres}">                                        
                                        <h:outputText value="#{objMainsumo.descripcionMipres}"/>
                                    </p:column>                           

                                    <p:column headerText="Descripcion Completa"  filterBy="#{objMainsumo.maInsumo.descripcion}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="maeTipoValordescri" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaInsumoMipres').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMainsumo.maInsumo.descripcion}"/>
                                    </p:column>                                                                  
                                </p:dataTable>
                            </p:row>
                        </p:panelGrid>                       
                        <h:panelGroup layout="block" id="facturas" style="text-align: center;background: #f5f5f5;font-weight: bold;">                    
                        </h:panelGroup>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!--Fin Lista Ma insumoMipres-->

            <!--Lista Ma Paquetes Mipres-->
            <p:dialog header="CONSULTAR PAQUETE" widgetVar="dialogoMaPaqueteMipres" appendTo="@(body)" modal="true" style="max-width: 100%;max-height: 100%;" dynamic="true" >
                <p:scrollPanel mode="native" style="height:490px">
                    <h:form id="frmMaPaqueteMipres">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cotizacionMipresBean.refrescarMaPaqueteMipres()}" oncomplete="PF('tablaWidgetMaPaqueteMipres').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelMaPaqueteMipres" style="height:auto;" columns="1">
                            <p:row>
                                <p:dataTable id="tablaWidgetMaPaqueteMipres" widgetVar="tablaWidgetMaPaqueteMipres" var="objMaPaquete" value="#{cotizacionMipresBean.lazyMaPaqueteMipres}" rowKey="#{objMaPaquete.id}"
                                             rows="#{cotizacionMipresBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cotizacionMipresBean.onRowSelectMaPaqueteMipres}" />

                                    <p:column headerText="Código Mipres"  filterBy="#{objMaPaquete.codigoMipres}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="Codigo" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaPaqueteMipres').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaPaquete.codigoMipres}"/>
                                    </p:column>

                                    <p:column headerText="Descripción Mipres" filterBy="#{objMaPaquete.descripcionMipres}">                                        
                                        <h:outputText value="#{objMaPaquete.descripcionMipres}"/>
                                    </p:column>                           

                                    <p:column headerText="Nombre Paquete"  filterBy="#{objMaPaquete.maPaquete.nombre}" style="text-align: center; width: auto;">
                                        <f:facet name="filter">
                                            <p:inputText label="maeTipoValordescri" maxlength="256" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                        onchange();
                                                        return false;
                                                    }"  onchange="PF('tablaWidgetMaPaqueteMipres').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{objMaPaquete.maPaquete.nombre}"/>
                                    </p:column>                                                                  
                                </p:dataTable>
                            </p:row>
                        </p:panelGrid>                       
                        <h:panelGroup layout="block" id="facturas" style="text-align: center;background: #f5f5f5;font-weight: bold;">                    
                        </h:panelGroup>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!--Fin Lista Ma Paquetes Mipres-->

        </center>

    </ui:define>    
</ui:composition>
