<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR">
        <h:outputStylesheet name="css/rias.css"/>
        <center>
            <h:form id="frmGestion">
                <p:remoteCommand name="cerrarDialogoDiagnostico" action="#{gestionAfiliadosPEBean.cerrarDialogoDiagnostico()}"/>
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{gestionAfiliadosPEBean.modulo.descripcion}">#{gestionAfiliadosPEBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionListar}" title="Refrescar" ajax="true" actionListener="#{gestionAfiliadosPEBean.listar}" icon="ui-icon-refresh"/>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionCrear}" title="Crear" ajax="true" actionListener="#{gestionAfiliadosPEBean.crear()}" icon="ui-icon-document"/>
                    </f:facet>
                </p:toolbar>
                <p:dataTable  var="obj" value="#{gestionAfiliadosPEBean.lazyAfiliadosPE}" class="listaDatos" paginator="true" rows="#{gestionAfiliadosPEBean.tamanoPagina}" 
                              emptyMessage="No se encontraron registros"
                              currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                              paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                              widgetVar="tablaWidget"
                              style="font-size:11px;"
                              scrollable="true"
                              resizableColumns="false"
                              scrollWidth="140%"
                              rowKey="#{obj.id}" reflow="true">

                    <p:column headerText="Acciones" style="text-align: center; font-size:11px !important; width: 80px;">                            
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionVer}" title="Ver" actionListener="#{gestionAfiliadosPEBean.ver(obj.id)}" icon="ui-icon-search"/>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionEditar}" title="Editar" actionListener="#{gestionAfiliadosPEBean.editar(obj.id)}" icon="ui-icon-pencil"/>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionBorrar}" title="Borrar" action="#{gestionAfiliadosPEBean.borrar(obj.id)}" icon="ui-icon-trash">
                            <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                        </p:commandButton>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionAdicional1}" title="Adjuntos" action="#{gestionAfiliadosPEBean.abrirAdjuntos()}" icon="ui-icon-folder-open">
                            <f:setPropertyActionListener value="#{obj}" target="#{gestionAfiliadosPEBean.objeto}" />
                        </p:commandButton>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionAdicional2}" title="Gestiones" action="#{gestionAfiliadosPEBean.abrirGestion()}" icon="ui-icon-script">
                            <f:setPropertyActionListener value="#{obj}" target="#{gestionAfiliadosPEBean.objeto}" />
                        </p:commandButton>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionAdicional3 and obj.aucHospitalizacion != null}" title="Ver Hopitalización" actionListener="#{gestionAfiliadosPEBean.verListadoHospitalizacion(obj)}" icon="ui-icon-heart"/>
                        <p:commandButton rendered="#{gestionAfiliadosPEBean.accionAdicional5}" disabled="#{!obj.activo}" title="Cambio programa" actionListener="#{gestionAfiliadosPEBean.crearCambioPrograma(obj.id)}" icon="ui-icon-transferthick-e-w"/>                        
                    </p:column>

                    <p:column headerText="Fuente Origen" filterBy="#{obj.fuenteOrigen}" >  
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 80%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaFuenteOrigen}" var="tipoFuente" itemValue="#{tipoFuente.id}" itemLabel="#{tipoFuente.nombre}" itemDescription="#{tipoFuente.descripcion}" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.obtenerNombreFuenteOrigen(obj.fuenteOrigen)}" title="#{gestionAfiliadosPEBean.obtenerNombreFuenteOrigen(obj.fuenteOrigen)}"/>
                    </p:column>

                    <p:column headerText="Tipo Documento" filterBy="#{obj.asegAfiliado.maeTipoDocumento}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaTiposDocumento}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.getTipoDocumento(obj.asegAfiliado.maeTipoDocumento)}" title="#{gestionAfiliadosPEBean.getTipoDocumento(obj.asegAfiliado.maeTipoDocumento)}"/>
                    </p:column>

                    <p:column headerText="Documento" sortBy="#{obj.asegAfiliado.numeroDocumento}" filterBy="#{obj.asegAfiliado.numeroDocumento}" >
                        <f:facet name="filter">
                            <p:inputText label="Documento" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.numeroDocumento}" title="#{obj.asegAfiliado.numeroDocumento}"/>
                    </p:column>

                    <p:column headerText="Nombres" sortBy="#{obj.asegAfiliado.nombres}" filterBy="#{obj.asegAfiliado.nombres}" >
                        <f:facet name="filter">
                            <p:inputText label="Nombres" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.nombres} " title="#{obj.asegAfiliado.nombres}"/>
                    </p:column>

                    <p:column headerText="Apellidos" sortBy="#{obj.asegAfiliado.apellidos}" filterBy="#{obj.asegAfiliado.apellidos}" >
                        <f:facet name="filter">                            
                            <p:inputText label="Apellidos" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.apellidos} " title="#{obj.asegAfiliado.apellidos}"/>
                    </p:column>

                    <p:column headerText="Fecha Nacimiento" sortBy="#{obj.asegAfiliado.fechaNacimiento}" >                    
                        <h:outputText value="#{obj.asegAfiliado.fechaNacimiento}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Género" sortBy="#{obj.asegAfiliado.maeGeneroId}" filterBy="#{obj.asegAfiliado.maeGeneroId}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaTiposGenero}" var="tipoGenero" itemValue="#{tipoGenero.id}" itemLabel="#{tipoGenero.nombre}" itemDescription="#{tipoGenero.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.maeGeneroValor}"/>
                    </p:column>

                    <p:column headerText="Municipio Afiliación" sortBy="#{obj.asegAfiliado.afiliacionUbicacion.nombre}" >
                        <f:facet name="filter">
                            <p:inputText label="Municipio Afiliación" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.afiliacionUbicacion.nombre} " title="#{obj.asegAfiliado.afiliacionUbicacion.nombre}"/>
                    </p:column>

                    <p:column headerText="Estado Afiliación" sortBy="#{obj.asegAfiliado.maeEstadoAfiliacion}" filterBy="#{obj.asegAfiliado.maeEstadoAfiliacion}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaEstadosAfiliacion}" var="esta" itemValue="#{esta.id}" itemLabel="#{esta.nombre}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.getEstadoAfiliacion(obj.asegAfiliado.maeEstadoAfiliacion)}" title="#{gestionAfiliadosPEBean.getEstadoAfiliacion(obj.asegAfiliado.maeEstadoAfiliacion)}"/>
                    </p:column>

                    <p:column headerText="Régimen" sortBy="#{obj.asegAfiliado.maeRegimenValor}" filterBy="#{obj.asegAfiliado.maeRegimenId}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaRegimen}" var="reg" itemValue="#{reg.id}" itemLabel="#{reg.nombre}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.maeRegimenValor}" title="#{obj.asegAfiliado.maeRegimenValor}"/>
                    </p:column>

                    <p:column headerText="Activo Programa" sortBy="#{obj.activo}" filterBy="#{obj.activo}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="No" itemValue="0"  />
                                <f:selectItem itemLabel="Si" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.getEstadoRecursiva(obj.activo)}" title="#{obj.activo}"/>
                    </p:column>

                    <p:column headerText="Programa Especial" sortBy="#{obj.pePrograma.descripcionPrograma}" filterBy="#{obj.pePrograma.descripcionPrograma}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" filter="true" filterMatchMode="contains" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaPePrograma}" var="prog" itemValue="#{prog.id}" itemLabel="#{prog.descripcionPrograma}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.pePrograma.descripcionPrograma}" title="#{obj.pePrograma.descripcionPrograma}"/>
                    </p:column>

                    <p:column headerText="Diagnosticos" filterBy="#{obj.peAfiliadoDiagnosticoList}" style="font-size:11px !important;  width: 90px;">
                        <f:facet name="filter">
                            <p:inputText label="Diagnostico" maxlength="64" style="width: 99%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <p:dataList value="#{obj.peAfiliadoDiagnosticoList}" var="itemDiag" type="ordered" emptyMessage="No hay items asociados" class="intemsDireccionados" >
                            <span title="#{itemDiag.maDiagnosticosValor}">#{itemDiag.maDiagnosticosCodigo}</span>
                        </p:dataList>                       
                    </p:column>

                    <p:column headerText="IPS" sortBy="#{obj.cntPrestadorSede.id}" filterBy="#{obj.cntPrestadorSede.nombreSede}" style="width: 90px; text-align: center;">
                        <f:facet name="filter">
                            <p:inputText label="IPS" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.cntPrestadorSede.nombreSede}" title="#{obj.cntPrestadorSede.nombreSede}"/>
                    </p:column>

                    <p:column headerText="Responsable Programa" sortBy="#{obj.gnUsuario.nombre}" filterBy="#{obj.gnUsuario.nombre}" style="width: 90px; ">
                        <f:facet name="filter">
                            <p:inputText label="Responsable Programa" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.pePrograma.usuariosId.nombre}" title="#{obj.gnUsuario.nombre}"/>
                    </p:column>

                    <p:column headerText="Hospitalizado" filterBy="#{obj.aucHospitalizacion.id}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="No" itemValue="0"  />
                                <f:selectItem itemLabel="Si" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.validarHospitalizado(obj.aucHospitalizacion)}" title="#{gestionAfiliadosPEBean.validarHospitalizado(obj.aucHospitalizacion)}"/>
                    </p:column>

                    <p:column headerText="Tipo Paciente" filterBy="#{obj.tipoPaciente}" style="width: 90px;">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Nuevo" itemValue="0"  />
                                <f:selectItem itemLabel="Prevalente" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.getTipoPaciente(obj.tipoPaciente)}" title="#{gestionAfiliadosPEBean.getTipoPaciente(obj.tipoPaciente)}"/>
                    </p:column>

                    <p:column headerText="Adherente" filterBy="#{obj.adherente}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="No" itemValue="0"  />
                                <f:selectItem itemLabel="Si" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(obj.adherente)}" title="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(obj.adherente)}"/>
                    </p:column>

                    <p:column headerText="Disentimiento" filterBy="#{obj.disentimiento}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="No" itemValue="0"  />
                                <f:selectItem itemLabel="Si" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(obj.disentimiento)}" title="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(obj.disentimiento)}"/>
                    </p:column>


                    <p:column headerText="Fecha Ingreso" sortBy="#{obj.fechaInicioPrograma}" >                    
                        <h:outputText value="#{obj.fechaInicioPrograma}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
            </h:form>

            <!-- Ver -->
            <p:dialog header="Ver"   widgetVar="dialogoVer" appendTo="@(body)" position="center" width="95%" modal="true" style="height: auto;" >
                <h:form class="frmAuditoria" style="margin-top: -15px; text-align: right;">
                    <p:commandButton id="auditoria" class="btnAuditoria" action="#{gestionAfiliadosPEBean.getAuditoria(gestionAfiliadosPEBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                </h:form>
                <div class="bodyDialog" >
                    <h:form id="frmVerAfiliado">
                        <p:panel id="pnlAfiliado" header="Datos afiliado" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Tipo Documento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getTipoDocumento(gestionAfiliadosPEBean.objeto.asegAfiliado.maeTipoDocumento)}"/>                                        

                                <h:outputText value="Número Documento"  class="header-back" />
                                <h:outputText id="txtNumeroDocumento" value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.numeroDocumento}" style="width: 181px;"/>

                                <h:outputText value="Fecha Nacimiento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Nombres"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.nombres}"/>

                                <h:outputText value="Apellidos"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.apellidos}"/>

                                <h:outputText value="Edad"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.calcularEdadEnDiasMesesAnios(gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento)}" />

                                <h:outputText value="Género"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGeneroValor}"/>

                                <h:outputText value="Régimen"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeRegimenValor}"/>

                                <h:outputText value="Estado Afiliación"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoAfiliacion(gestionAfiliadosPEBean.objeto.asegAfiliado.maeEstadoAfiliacion)}" style="color: red !important; font-weight: bold !important;" />

                                <h:outputText value="Grupo Poblacional"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGrupoPoblacionalValor}"/>

                                <h:outputText value="Grupo Etnico"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeEtniaValor}"/>

                                <h:outputText value="Dirección"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.direccionResidencia}"/>

                                <h:outputText value="Municipio Afiliación"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>

                                <h:outputText value="Zona"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeZonaValor}"/>

                                <h:outputText value="Tiene Portabilidad"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerBoolean(gestionAfiliadosPEBean.objeto.asegAfiliado.tienePortabilidad)}"/>

                                <h:outputText value="Sede Prestador Portabilidad"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.nombreSede}"/>

                                <h:outputText value="Munipio Portabilidad"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.ubicacionId)}"/>

                                <h:outputText value="Correo Electrónico"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.email}"/>

                            </p:panelGrid>
                            <p:panel id="pnlVerIpsAtencionPrimaria" header="IPS Atención Primaria" style="margin-top: 10px;margin-bottom: 10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;">

                                    <p:outputLabel value="IPS Atención Primaria" style="font-weight:bold"/>
                                    <p:outputLabel value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.primariaPrestadorSede.nombreSede}"/>

                                    <p:outputLabel value="Modelo de Liquidación"  style="font-weight:bold"/>
                                    <p:outputLabel value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeModeloLiquidacionValor}" />

                                </p:panelGrid>
                            </p:panel>

                            <p:panel header="Contactos Aseguramiento" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactosVerAseg" var="contacto" class="listaDatos" value="#{gestionAfiliadosPEBean.listaContactos}" widgetVar="tablaContactosVerAseg" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numeroContacto}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>

                            <p:panel header="Contactos Programa" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactosVerPro" var="contacto" class="listaDatos" value="#{gestionAfiliadosPEBean.listaContactosPrograma}" widgetVar="tablaContactosVerPro" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Acciones" style="text-align: center;">
                                            <p:commandButton  class="btnAuditoria" action="#{gestionAfiliadosPEBean.getAuditoria(contacto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                        </p:column>
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numero}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>                                        
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>                            

                        </p:panel>                        
                    </h:form>
                    <h:form id="frmVer">                        
                        <p:panel id="pnlMatricula" header="Matricula Programa Especial" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Programa Especial" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.pePrograma.descripcionPrograma}"/>  

                                <h:outputText value="Responsable Programa" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.gnUsuario.nombre}" />

                                <h:outputText value="Ips Programa" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.cntPrestadorSede.nombreSede}" />

                                <h:outputText value="Fecha Inicio Programa" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.fechaInicioPrograma}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Fecha fin" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.fechaFinPrograma}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Sexo Aplica" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getSexoAplicaPrograma(gestionAfiliadosPEBean.objeto.pePrograma.sexoAplica)}"/>

                                <h:outputText value="Fecha Diagnostico" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.fechaDiagnostico}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Estado Diagnostico" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.estadoDiagnosticoStr}"/>

                                <h:outputText value="Región Corporal" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.maeRegionCorporalValor}"/>

                                <h:outputText value="Medio Diagnóstico" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.maeMedioDxValor}"/>

                                <h:outputText value="Activo" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoRecursiva(gestionAfiliadosPEBean.objeto.activo)}"/>

                                <h:outputText value="Causa" class="header-back" />
                                <p:column>
                                    <h:outputText rendered="#{gestionAfiliadosPEBean.objeto.activo}" value="#{gestionAfiliadosPEBean.getCausasRecursiva(gestionAfiliadosPEBean.objeto.maeCausaActivoId)}"/>
                                    <h:outputText rendered="#{!gestionAfiliadosPEBean.objeto.activo}" value="#{gestionAfiliadosPEBean.getCausasRecursiva(gestionAfiliadosPEBean.objeto.maeCausaInactivoId)}"/>
                                </p:column>

                                <h:outputText value="Tipo Paciente" class="header-back" />
                                <h:outputText  value="#{gestionAfiliadosPEBean.getTipoPaciente(gestionAfiliadosPEBean.objeto.tipoPaciente)}"/>

                                <h:outputText value="Adherente" class="header-back" />
                                <h:outputText  value="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(gestionAfiliadosPEBean.objeto.adherente)}" />

                                <h:outputText value="Disentimiento" class="header-back" />
                                <h:outputText  value="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(gestionAfiliadosPEBean.objeto.disentimiento)}" />

                                <h:outputText value="Planificación Familiar" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.getBooleanToStr(gestionAfiliadosPEBean.objeto.planificacionFamiliar)}" />

                                <h:outputText rendered="#{gestionAfiliadosPEBean.objeto.pePrograma.id eq 50}" value="Sentencia"  class="header-back" />
                                <h:outputText rendered="#{gestionAfiliadosPEBean.objeto.pePrograma.id eq 50}" value="#{gestionAfiliadosPEBean.getSentenciasRecursiva(gestionAfiliadosPEBean.objeto.idSentencia)}" />

                            </p:panelGrid>                        
                        </p:panel>

                        <p:panel id="pnlTrasladosProgramasVer" header="Traslado Programas" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable var="traslado" value="#{gestionAfiliadosPEBean.lazyTrasladoPrograma}" paginator="true" rows="#{gestionAfiliadosPEBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         paginatorPosition="bottom"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistrosHospitalizacion" lazy="true"
                                         widgetVar="tablaWidgetHospitalizacion"
                                         style="font-size:11px; text-align: center;"
                                         rowKey="#{traslado.id}" reflow="true">

                                <p:column headerText="Programa Origen">
                                    <h:outputText value="#{traslado.programaOrigen.descripcionPrograma}" title="#{traslado.programaOrigen.descripcionPrograma}" />
                                </p:column>

                                <p:column headerText="Programa Destino">
                                    <h:outputText value="#{traslado.programaDestino.descripcionPrograma}" title="#{traslado.programaDestino.descripcionPrograma}" />
                                </p:column>

                                <p:column headerText="Observacion">
                                    <h:outputText value="#{traslado.observacion}" title="#{traslado.observacion}" />
                                </p:column>

                                <p:column headerText="Fecha Hora">
                                    <h:outputText value="#{traslado.fechaHoraCrea}" title="#{traslado.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm" timeZone="America/Bogota" />
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Usuario">
                                    <h:outputText value="#{traslado.usuarioCrea}" title="#{traslado.usuarioCrea}"/>
                                </p:column>

                            </p:dataTable>
                        </p:panel>

                        <p:panel id="pnlSiVigilaVer" header="Información Sivigila" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelSivigila" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Notificado" class="header-back" />
                                <h:outputText  value="#{gestionAfiliadosPEBean.objeto.notificadoSivigilaStr}" />

                                <h:outputText value="Estado" class="header-back" />
                                <h:outputText  value="#{gestionAfiliadosPEBean.getEstadoSivigilaStr(gestionAfiliadosPEBean.objeto.estadoSivigila)}" />

                                <h:outputText value="Causa Descarte" class="header-back" />
                                <h:outputText  value="#{gestionAfiliadosPEBean.objeto.maeCausaDescarteValor}" />

                            </p:panelGrid>
                        </p:panel>

                        <p:panel id="pDiagnosticoVer" header="Diagnostico" style="margin-bottom:10px;" collapsed="false" toggleable="false">
                            <p:dataTable id="tablaDiagnosticosVer" var="diagnosticoVer" class="listaDatos" value="#{gestionAfiliadosPEBean.objeto.peAfiliadoDiagnosticoList}" 
                                         widgetVar="tablaDiagnosticosVer" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoVer.maDiagnosticosCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoVer.maDiagnosticosValor}" />
                                </p:column>       
                                <p:column headerText="Denominación CAC ">
                                    <h:outputText value="#{diagnosticoVer.peAfiliadosProgramasId.maDiagnosticoPrincipal.maCacValor}" />
                                </p:column>  
                                <p:column headerText="Principal">
                                    <p:selectBooleanCheckbox id="principalDiangosticoCrear" label="Es Principal" value="#{diagnosticoVer.principal}" disabled="true" >
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:dataTable> 
                        </p:panel>

                        <!-- variables específicas -->
                        <p:panel id="pnlVariable" header="Variables Específicas" style="margin-bottom:10px;" toggleable="true" >
                            <p:dataTable id="tablaValoresVariablesVer" var="valor" value="#{gestionAfiliadosPEBean.listadoValoresVariables}" 
                                         widgetVar="tablaValoresVariablesVer" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Variable" filterBy="#{valor.descripcion}" filterMatchMode="contains">
                                    <f:facet name="filter">
                                        <p:inputText label="Descripcion" maxlength="64" style="width: 50%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaValoresVariablesVer').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{valor.descripcion}" />
                                </p:column>
                                <p:column headerText="Valor">
                                    <h:outputText rendered="#{valor.tipo eq 0}" value="#{gestionAfiliadosPEBean.getValorFechaStr(valor)}" title="#{gestionAfiliadosPEBean.getTituloFechaStr(valor)}" >
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota" />
                                    </h:outputText>
                                    <h:outputText rendered="#{valor.tipo eq 1}" value="#{gestionAfiliadosPEBean.getValorEnteroStr(valor)}" />
                                    <h:outputText rendered="#{valor.tipo eq 2}" value="#{gestionAfiliadosPEBean.getValorDecimalStr(valor)}" />
                                    <h:outputText rendered="#{valor.tipo eq 3}" value="#{valor.texto}" />
                                    <h:outputText rendered="#{valor.tipo eq 4}" value="#{valor.textoLargo}"/>
                                    <h:outputText rendered="#{valor.tipo eq 5}" value="#{valor.valorCalculo}" >
                                        <f:convertNumber maxFractionDigits="2" minFractionDigits="0" locale="en_US"/>
                                        #{valor.valorCalculo}
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton rendered="#{valor.fechaHoraModifica != null}" title="Ver Historial Edición" immediate="true" action="#{gestionAfiliadosPEBean.mostrarHistorialValoresVariables(valor)}" 
                                                     icon="ui-icon-search"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid style="width: 100%;">
                            <f:facet name="footer">                                                                
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoVer').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog>

            <!-- Crear -->
            <p:dialog header="Crear" widgetVar="dialogoCrear"  appendTo="@(body)" position="center" width="90%" modal="true" style="height: auto;">
                <div class="bodyDialog" >
                    <h:form id="frmAfiliado">
                        <p:panel id="pnlAfiliado" header="Datos afiliado" style="margin-bottom:10px;" toggleable="true">
                            <div align="right"> 
                                <p:commandButton rendered="#{gestionAfiliadosPEBean.accionCrear}" immediate="true" ajax="true" actionListener="#{gestionAfiliadosPEBean.consultarAfiliado()}" icon="ui-icon-person" title="Agregar Afiliado" style="margin-bottom: 0.4rem;"/>
                            </div>
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Tipo Documento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerTipoDocumentoAfiliado(gestionAfiliadosPEBean.objeto.asegAfiliado.maeTipoDocumento)}"/>

                                <h:outputText value="Número Documento"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.numeroDocumento}"/>

                                <h:outputText value="Fecha Nacimiento"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Nombres" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.nombres}"/>

                                <h:outputText value="Apellidos"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.apellidos}"/>

                                <h:outputText value="Edad"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.calcularEdadEnDiasMesesAnios(gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento)}" />

                                <h:outputText value="Género"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGeneroValor}"/>

                                <h:outputText value="Régimen"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeRegimenValor}"/>

                                <h:outputText value="Estado Afiliación"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoAfiliacion(gestionAfiliadosPEBean.objeto.asegAfiliado.maeEstadoAfiliacion)}" style="color: red; font-weight: bold;" />

                                <h:outputText value="Grupo Poblacional"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGrupoPoblacionalValor}"/>

                                <h:outputText value="Grupo Etnico"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeEtniaValor}"/>

                                <h:outputText value="Dirección"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.direccionResidencia}"/>

                                <h:outputText value="Municipio Afiliación"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>

                                <h:outputText value="Zona"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeZonaValor}"/>

                                <h:outputText value="Tiene Portabilidad"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerBoolean(gestionAfiliadosPEBean.objeto.asegAfiliado.tienePortabilidad)}"/>

                                <h:outputText value="Sede Prestador Portabilidad"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.nombreSede}"/>

                                <h:outputText value="Munipio Portabilidad"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.ubicacionId)}"/>

                                <h:outputText value="Correo Electrónico"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.email}"/>

                            </p:panelGrid>

                            <p:panel id="pnlVerIpsAtencionPrimaria" header="IPS Atención Primaria" style="margin-top: 10px;margin-bottom: 10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;">

                                    <p:outputLabel value="IPS Atención Primaria" style="font-weight:bold"/>
                                    <p:outputLabel value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.primariaPrestadorSede.nombreSede}"/>

                                    <p:outputLabel value="Modelo de Liquidación"  style="font-weight:bold"/>
                                    <p:outputLabel value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeModeloLiquidacionValor}" />

                                </p:panelGrid>
                            </p:panel>

                            <p:panel header="Contactos Aseguramiento" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactosAseg" var="contacto"  class="listaDatos"  value="#{gestionAfiliadosPEBean.listaContactos}" widgetVar="tablaContactosAseg" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numeroContacto}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>

                            <p:panel header="Contactos Programa" toggleable="true" style="height:auto; margin-bottom:0.4rem; margin-top: 0.4rem;">
                                <div align="right"> 
                                    <p:commandButton title="Agregar Contacto" actionListener="#{gestionAfiliadosPEBean.adicionarContacto()}" icon="ui-icon-document" immediate="true" style="margin-bottom: 0.4rem;"/>
                                </div>
                                <p:scrollPanel mode="native"> 
                                    <p:dataTable id="tablaContactosCrearPro" var="contacto"  class="listaDatos" value="#{gestionAfiliadosPEBean.listaContactosPrograma}" widgetVar="tablaContactosCrearPro" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Acciones" style="text-align: center;">                                            
                                            <p:commandButton rendered="#{contacto.nuevo}" title="Retirar Contacto" action="#{gestionAfiliadosPEBean.retirarContacto(contacto.id)}" icon="ui-icon-close" immediate="true">
                                                <p:confirm header="Confirmación" message="Está seguro que desea retirar?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                            <p:commandButton rendered="#{!contacto.nuevo}" title="Borrar Contacto" action="#{gestionAfiliadosPEBean.borrarContacto(contacto.id)}" icon="ui-icon-trash" immediate="true">
                                                <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                            <p:commandButton  class="btnAuditoria" action="#{gestionAfiliadosPEBean.getAuditoria(contacto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                        </p:column>
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numero}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>                            
                        </p:panel>
                    </h:form>
                    <h:form id="frmCrear">                        
                        <p:panel id="pnlMatricula" header="Matricula Programa Especial" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Programa Especial" class="header-back" />
                                <p:selectOneMenu id="SomPrograma" value="#{gestionAfiliadosPEBean.objeto.pePrograma.id}" required="true" requiredMessage="Debe seleccionar el programa especial" filter="true" filterMatchMode="contains"  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaPePrograma}" var="progResC" itemLabel="#{progResC.descripcionPrograma}" itemValue="#{progResC.id}" />
                                    <p:ajax listener="#{gestionAfiliadosPEBean.consultarResponsablesProg(gestionAfiliadosPEBean.objeto.pePrograma.id)}" update="SomResponsable,lbsexoAplicac,pnlVariable,pnlMatricula"/>
                                </p:selectOneMenu>

                                <h:outputText value="Responsable Programa"  class="header-back" />
                                <p:selectOneMenu id="SomResponsable" value="#{gestionAfiliadosPEBean.objeto.gnUsuario.id}" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listResponsablesProg}" var="resp" itemLabel="#{resp.usuariosId.nombre}" itemValue="#{resp.usuariosId.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Ips Programa" class="header-back" />
                                <p:selectOneMenu id="SomIps" required="true" value="#{gestionAfiliadosPEBean.objeto.cntPrestadorSede.id}" requiredMessage="Debe seleccionar la Ips del programa" filter="true" filterMatchMode="contains" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listPrestadorSede}" var="sede" itemLabel="#{sede.cntPrestadorSedesId.nombreSede}" itemValue="#{sede.cntPrestadorSedesId.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Fecha Inicio Programa" class="header-back" />
                                <p:calendar id="fechaInicio"
                                            autocomplete="off"
                                            navigator="true"
                                            pattern="yyyy-MM-dd"
                                            size="30"
                                            maxlength="10"
                                            maxdate="#{gestionAfiliadosPEBean.fechaHoy}"
                                            value="#{gestionAfiliadosPEBean.objeto.fechaInicioPrograma}"
                                            required="true"
                                            requiredMessage="Debe seleccionar la fecha inicio del programa"
                                            >
                                    <p:ajax event="dateSelect" listener="#{gestionAfiliadosPEBean.validarTipoPaciente()}" update="fechaFin,sltipopaciente" />
                                </p:calendar>

                                <h:outputText value="Fecha fin" class="header-back" />
                                <p:calendar id="fechaFin"
                                            autocomplete="off"
                                            navigator="true"
                                            pattern="yyyy-MM-dd"
                                            size="30"
                                            maxlength="10"
                                            value="#{gestionAfiliadosPEBean.objeto.fechaFinPrograma}"
                                            mindate="#{gestionAfiliadosPEBean.objeto.fechaInicioPrograma}"/>

                                <h:outputText value="Sexo Aplica" class="header-back" />
                                <h:outputText id="lbsexoAplicac" value="#{gestionAfiliadosPEBean.getSexoAplicaPrograma(gestionAfiliadosPEBean.objeto.pePrograma.sexoAplica)}"/>

                                <h:outputText value="Fecha Diagnostico" class="header-back" />
                                <p:calendar id="fechaDx"
                                            autocomplete="off"
                                            navigator="true"
                                            pattern="yyyy-MM-dd"
                                            size="30" 
                                            maxdate="#{gestionAfiliadosPEBean.fechaHoy}"
                                            maxlength="10"
                                            readonlyInput="true"
                                            yearRange="1800:c"
                                            value="#{gestionAfiliadosPEBean.objeto.fechaDiagnostico}">
                                    <p:ajax event="dateSelect" update="fechaFin" />
                                </p:calendar>

                                <h:outputText value="Estado Diagnostico" class="header-back" />
                                <p:selectOneMenu id="estadoDiagnostico" required="false" value="#{gestionAfiliadosPEBean.objeto.estadoDiagnostico}" filter="true" filterMatchMode="contains">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaEstadoDiagnostico}" var="estado" itemLabel="#{estado.nombre}" itemValue="#{estado.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Región Corporal" class="header-back" />
                                <p:selectOneMenu id="auRC" required="false" value="#{gestionAfiliadosPEBean.objeto.maeRegionCorporalId}" filter="true" filterMatchMode="contains">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaRegionCorporal}" var="rcor" itemLabel="#{rcor.nombre}" itemValue="#{rcor.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Medio Diagnóstico" class="header-back" />
                                <p:selectOneMenu id="auMedioDx" required="false" value="#{gestionAfiliadosPEBean.objeto.maeMedioDxId}" filter="true" filterMatchMode="contains" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaMedioDiagnostico}" var="mdiag" itemLabel="#{mdiag.nombre}" itemValue="#{mdiag.id}" />
                                </p:selectOneMenu> 

                                <h:outputText value="Activo" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoRecursiva(gestionAfiliadosPEBean.objeto.activo)}"/>

                                <h:outputText value="Causa"  class="header-back"  />
                                <p:selectOneMenu id="SomCausasActivo" 
                                                 value="#{gestionAfiliadosPEBean.objeto.maeCausaActivoId}"   
                                                 styleClass="#{gestionAfiliadosPEBean.causaActivo}"
                                                 required="true" 
                                                 requiredMessage="Causa: Este campo es requerido, debe seleccionar un valor."
                                                 >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listCausasActivo}" var="CausaA" itemLabel="#{CausaA.nombre}" itemValue="#{CausaA.id}" /> 
                                </p:selectOneMenu>

                                <h:outputText value="Tipo Paciente" class="header-back" />
                                <h:outputText id="sltipopaciente" value="#{gestionAfiliadosPEBean.getTipoPaciente(gestionAfiliadosPEBean.objeto.tipoPaciente)}"/>

                                <h:outputText value="Adherente" class="header-back"  />
                                <p:selectBooleanButton id="blAdherente" value="#{gestionAfiliadosPEBean.objeto.adherente}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />


                                <h:outputText value="Disentimiento"  class="header-back" />
                                <p:selectBooleanButton id="blDisentimiento" value="#{gestionAfiliadosPEBean.objeto.disentimiento}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />

                                <h:outputText value="Planificación Familiar"   class="header-back" />
                                <p:selectBooleanButton id="blPlanficacionFamiliar" value="#{gestionAfiliadosPEBean.objeto.planificacionFamiliar}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />

                                <h:outputText rendered="#{gestionAfiliadosPEBean.objeto.pePrograma.id eq 50}" value="Sentencia"  class="header-back" />
                                <p:selectOneMenu rendered="#{gestionAfiliadosPEBean.objeto.pePrograma.id eq 50}" id="selSentencias" value="#{gestionAfiliadosPEBean.objeto.idSentencia}" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{0}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaSentencias}" var="sentencia" itemValue="#{sentencia.id}" itemLabel="#{sentencia.nombre}"  itemDescription="#{sentencia.descripcion}"/>     
                                </p:selectOneMenu>

                            </p:panelGrid>                        
                        </p:panel>

                        <p:panel id="pnlSiVigila" header="Información Sivigila" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelSivigila" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Notificado" class="header-back" />
                                <p:selectOneMenu id="CNotiSivi" value="#{gestionAfiliadosPEBean.objeto.notificadoSivigila}" required="true" requiredMessage="Debe seleccionar el valor para el campo Notificado."  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaNotificacionSivigila}" var="notisivi" itemValue="#{notisivi.id}" itemLabel="#{notisivi.nombre}" itemDescription="#{notisivi.descripcion}" />
                                    <p:ajax  listener="#{gestionAfiliadosPEBean.validarEstadoSivigila()}" update="SelEstadoSivi,SelCauDescarte"/>
                                </p:selectOneMenu>

                                <h:outputText value="Estado" class="header-back" />
                                <p:selectOneMenu id="SelEstadoSivi" value="#{gestionAfiliadosPEBean.objeto.estadoSivigila}" filter="false" filterMatchMode="contains" disabled="${gestionAfiliadosPEBean.activoEstadoSivigila}"  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaEstadoSivigila}" var="estasivi" itemValue="#{estasivi.id}" itemLabel="#{estasivi.nombre}" itemDescription="#{estasivi.descripcion}" />
                                    <p:ajax  listener="#{gestionAfiliadosPEBean.validarCausaDecarte()}" update="SelCauDescarte"/>
                                </p:selectOneMenu>

                                <h:outputText value="Causa Descarte" class="header-back" />
                                <p:selectOneMenu id="SelCauDescarte" value="#{gestionAfiliadosPEBean.objeto.maeCausaDescarteId}" disabled="${gestionAfiliadosPEBean.activoCausaDescarte}"  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaCausaDescarte}" var="cauDes" itemValue="#{cauDes.id}" itemLabel="#{cauDes.nombre}" itemDescription="#{cauDes.descripcion}" />
                                </p:selectOneMenu>

                            </p:panelGrid>
                        </p:panel>

                        <p:panel id="pDiagnosticoCrear" header="Diagnostico" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <div align="right"> 
                                <p:commandButton  immediate="true" actionListener="#{gestionAfiliadosPEBean.consultarDiagnostico()}" icon="ui-icon-clipboard" title="Agregar Diagnostico" style="margin-bottom: 0.4rem;"/>
                            </div>                            
                            <p:dataTable id="tablaDiagnosticosCrear" var="diagnosticoCrear" value="#{gestionAfiliadosPEBean.objeto.peAfiliadoDiagnosticoList}" 
                                         widgetVar="tablaDiagnosticosCrear" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoCrear.maDiagnosticosCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoCrear.maDiagnosticosValor}" />
                                </p:column>
                                <p:column headerText="Denominación CAC ">
                                    <h:outputText value="#{diagnosticoCrear.peAfiliadosProgramasId.maDiagnosticoPrincipal.maCacValor}" />
                                </p:column>                               
                                <p:column headerText="Principal">
                                    <p:selectBooleanCheckbox id="principalDiangosticoCrear" label="Es Principal" value="#{diagnosticoCrear.principal}">
                                        <p:ajax event="change" listener="#{gestionAfiliadosPEBean.cambiarPrincipalDiagnostico(diagnosticoCrear.maDiagnosticosId)}" update="tablaDiagnosticosCrear"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Borrar" immediate="true" action="#{gestionAfiliadosPEBean.borrarDiagnostico(diagnosticoCrear.maDiagnosticosId)}" icon="ui-icon-closethick">
                                        <p:confirm header="Confirmación" message="¿Está seguro que desea eliminar el registro?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable> 
                        </p:panel>

                        <!-- variables específicas -->
                        <p:panel id="pnlVariable" header="Variables Específicas" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable id="tablaValoresVariablesCrear" var="valor" value="#{gestionAfiliadosPEBean.listadoValoresVariables}" 
                                         widgetVar="tablaValoresVariablesCrear" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Variable" rendered="#{valor.tipo != 5}" filterBy="#{valor.descripcion}" filterMatchMode="contains">
                                    <f:facet name="filter">
                                        <p:inputText label="Descripcion" maxlength="64" style="width: 50%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaValoresVariablesCrear').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{valor.descripcion}" styleClass="#{valor.clase}"/>
                                </p:column>
                                <p:column headerText="Valor" rendered="#{valor.tipo != 5}">
                                    <p:calendar
                                        rendered="#{valor.tipo eq 0}"
                                        inputStyleClass="#{valor.clase}"
                                        autocomplete="off"
                                        navigator="true"
                                        pattern="yyyy-MM-dd"
                                        size="20"
                                        maxlength="10"
                                        readonlyInput="false"
                                        yearRange="1800:c"
                                        value="#{valor.fecha}"
                                        disabled="#{!valor.activa}">
                                    </p:calendar>
                                    <p:inputNumber rendered="#{valor.tipo eq 1}" value="#{valor.entero}" inputStyleClass="#{valor.clase}" minValue="0" maxValue="2147483647" disabled="#{!valor.activa}"/>
                                    <p:inputNumber rendered="#{valor.tipo eq 2}" value="#{valor.decimal}"  inputStyleClass="#{valor.clase}" minValue="0" maxValue="9999.99" decimalPlaces="2" disabled="#{!valor.activa}"/>
                                    <p:inputText rendered="#{valor.tipo eq 3}" value="#{valor.texto}" styleClass="#{valor.clase}" maxlength="128" disabled="#{!valor.activa}"/>
                                    <p:inputText rendered="#{valor.tipo eq 4}" value="#{valor.textoLargo}" styleClass="#{valor.clase}" maxlength="1024" disabled="#{!valor.activa}"/>
                                </p:column> 
                                <p:column headerText="Acciones" style="text-align: center" rendered="#{valor.tipo != 5}">
                                    <p:commandButton rendered="#{valor.activa and valor.recurrente}" title="Agregar Recurrencia"  action="#{gestionAfiliadosPEBean.agregarRecurrencia(valor)}" 
                                                     icon="ui-icon-document" process="tablaValoresVariablesCrear" update="tablaValoresVariablesCrear" resetValues="false"/>
                                    <p:commandButton rendered="#{valor.activa and valor.recurrente and gestionAfiliadosPEBean.mostrarBtnDisminuir(valor)}" title="Disminuir Recurrencia" 
                                                     action="#{gestionAfiliadosPEBean.disminuirRecurrencia(valor)}"
                                                     icon="ui-icon-minus" process="tablaValoresVariablesCrear" update="tablaValoresVariablesCrear" resetValues="false"/>
                                </p:column>
                            </p:dataTable> 

                        </p:panel>
                        <p:panelGrid id="panelCrear" style="width: 100%;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar" type="button" onclick="guardarRemote()" validateClient="true"/>
                                        <p:remoteCommand name="guardarRemote" actionListener="#{gestionAfiliadosPEBean.guardar}" update="@form" />
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoCrear').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog>

            <!-- Editar -->
            <p:dialog header="Editar" widgetVar="dialogoEditar" appendTo="@(body)" position="center" width="90%" modal="true" style="height: auto;" >
                <h:form class="frmAuditoria" style="margin-top: -15px; text-align: right;">
                    <p:commandButton id="auditoria" class="btnAuditoria" action="#{gestionAfiliadosPEBean.getAuditoria(gestionAfiliadosPEBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" style="margin-bottom: 0.4rem;" />
                </h:form>
                <div class="bodyDialog" >
                    <h:form id="frmEditarAfiliado">
                        <p:panel id="pnlAfiliado" header="Datos afiliado" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Tipo Documento"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerTipoDocumentoAfiliado(gestionAfiliadosPEBean.objeto.asegAfiliado.maeTipoDocumento)}"/>

                                <h:outputText value="Número Documento"   class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.numeroDocumento}"/>

                                <h:outputText value="Fecha Nacimiento"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Nombres"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.nombres}"/>

                                <h:outputText value="Apellidos"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.apellidos}"/>

                                <h:outputText value="Edad"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.calcularEdadEnDiasMesesAnios(gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento)}" />

                                <h:outputText value="Género"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGeneroValor}"/>

                                <h:outputText value="Régimen" style="font-weight:bold"/>
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeRegimenValor}"/>

                                <h:outputText value="Estado Afiliación"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoAfiliacion(gestionAfiliadosPEBean.objeto.asegAfiliado.maeEstadoAfiliacion)}" style="color: red; font-weight: bold;"  />

                                <h:outputText value="Grupo Poblacional"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGrupoPoblacionalValor}"/>

                                <h:outputText value="Grupo Etnico"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeEtniaValor}"/>

                                <h:outputText value="Dirección"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.direccionResidencia}"/>

                                <h:outputText value="Municipio Afiliación"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>

                                <h:outputText value="Zona"  class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeZonaValor}"/>

                                <h:outputText value="Tiene Portabilidad"   class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerBoolean(gestionAfiliadosPEBean.objeto.asegAfiliado.tienePortabilidad)}"/>

                                <h:outputText value="Sede Prestador Portabilidad"   class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.nombreSede}"/>

                                <h:outputText value="Munipio Portabilidad"   class="header-back"  />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.ubicacionId)}"/>

                                <h:outputText value="Correo Electrónico"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.email}"/>

                            </p:panelGrid>
                            <p:panel id="pnlVerIpsAtencionPrimaria" header="IPS Atención Primaria" style="margin-top: 10px;margin-bottom: 10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid"
                                             style="border:0px none; background-color:transparent;">

                                    <p:outputLabel value="IPS Atención Primaria" style="font-weight:bold"/>
                                    <p:outputLabel value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.primariaPrestadorSede.nombreSede}"/>

                                    <p:outputLabel value="Modelo de Liquidación"  style="font-weight:bold"/>
                                    <p:outputLabel value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeModeloLiquidacionValor}" />

                                </p:panelGrid>
                            </p:panel>
                            <p:panel header="Contactos Aseguramiento" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactosAseg" var="contacto"  class="listaDatos" value="#{gestionAfiliadosPEBean.listaContactos}" widgetVar="tablaContactosAseg" scrollable="true" emptyMessage="No se encontraron registros">

                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numeroContacto}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>

                            <p:panel header="Contactos Programa" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <div align="right"> 
                                    <p:commandButton title="Agregar Contacto" actionListener="#{gestionAfiliadosPEBean.adicionarContacto()}" icon="ui-icon-document" immediate="true" style="margin-bottom: 0.4rem;" />
                                </div>
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactos" var="contacto"  class="listaDatos" value="#{gestionAfiliadosPEBean.listaContactosPrograma}" widgetVar="tablaContactos" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Acciones" style="text-align: center;">
                                            <p:commandButton rendered="#{!contacto.nuevo}" title="Borrar Contacto" action="#{gestionAfiliadosPEBean.borrarContacto(contacto.id)}" icon="ui-icon-trash" immediate="true">
                                                <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                            <p:commandButton rendered="#{contacto.nuevo}" title="Retirar Contacto" action="#{gestionAfiliadosPEBean.retirarContacto(contacto.id)}" icon="ui-icon-close" immediate="true">
                                                <p:confirm header="Confirmación" message="Está seguro que desea retirar?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                            <p:commandButton  class="btnAuditoria" action="#{gestionAfiliadosPEBean.getAuditoria(contacto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                        </p:column>
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numero}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>
                        </p:panel>                    
                    </h:form>
                    <h:form id="frmEditar">                        
                        <p:panel id="pnlMatricula" header="Matricula Programa Especial" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Programa Especial"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getProgramaRecursiva(gestionAfiliadosPEBean.objeto.pePrograma.id)}" />

                                <h:outputText value="Responsable Programa"  class="header-back"  />
                                <p:selectOneMenu id="SomResponsable" value="#{gestionAfiliadosPEBean.objeto.gnUsuario.id}"  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listResponsablesProg}" var="resp" itemLabel="#{resp.usuariosId.nombre}" itemValue="#{resp.usuariosId.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Ips Programa"  class="header-back" />
                                <p:selectOneMenu id="SomIps" required="true" value="#{gestionAfiliadosPEBean.objeto.cntPrestadorSede.id}" filter="true" filterMatchMode="contains" requiredMessage="Debe seleccionar la Ips del programa"  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listPrestadorSede}" var="sede" itemLabel="#{sede.cntPrestadorSedesId.nombreSede}" itemValue="#{sede.cntPrestadorSedesId.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Fecha Inicio Programa"  class="header-back" />
                                <p:calendar id="fechaInicio"
                                            autocomplete="off"
                                            navigator="true"
                                            pattern="yyyy-MM-dd"
                                            size="30"
                                            maxlength="10"
                                            maxdate="#{gestionAfiliadosPEBean.fechaHoy}"
                                            value="#{gestionAfiliadosPEBean.objeto.fechaInicioPrograma}"
                                            required="true"
                                            requiredMessage="Debe indicar la fecha inicio del programa"
                                            >
                                    <p:ajax event="dateSelect" listener="#{gestionAfiliadosPEBean.validarTipoPaciente()}" update="sltipopaciente" />
                                </p:calendar>

                                <h:outputText value="Fecha fin"  class="header-back" />
                                <p:calendar id="fechaFin"
                                            autocomplete="off"
                                            navigator="true"
                                            pattern="yyyy-MM-dd"
                                            size="30"
                                            maxlength="10"
                                            readonlyInput="false"
                                            value="#{gestionAfiliadosPEBean.objeto.fechaFinPrograma}"
                                            mindate="#{gestionAfiliadosPEBean.objeto.fechaInicioPrograma}">                                            
                                </p:calendar>

                                <h:outputText value="Sexo Aplica"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getSexoAplicaPrograma(gestionAfiliadosPEBean.objeto.pePrograma.sexoAplica)}"/>

                                <h:outputText value="Fecha Diagnostico"  class="header-back" />
                                <p:column>
                                    <p:calendar id="fechaDx"
                                                autocomplete="off"
                                                navigator="true"
                                                pattern="yyyy-MM-dd"
                                                size="30"
                                                maxdate="#{gestionAfiliadosPEBean.fechaHoy}"
                                                maxlength="10"
                                                readonlyInput="true"
                                                yearRange="1800:c"
                                                value="#{gestionAfiliadosPEBean.objeto.fechaDiagnostico}">
                                        <p:ajax event="dateSelect" update="fechaFin" />
                                    </p:calendar>
                                </p:column>

                                <h:outputText value="Estado Diagnostico" class="header-back" />
                                <p:selectOneMenu id="estadoDiagnostico" required="false" value="#{gestionAfiliadosPEBean.objeto.estadoDiagnostico}" filter="true" filterMatchMode="contains">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaEstadoDiagnostico}" var="estado" itemLabel="#{estado.nombre}" itemValue="#{estado.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Región Corporal"  class="header-back" />
                                <p:selectOneMenu  required="false" value="#{gestionAfiliadosPEBean.objeto.maeRegionCorporalId}" filter="true" filterMatchMode="contains" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaRegionCorporal}" var="rcor" itemLabel="#{rcor.nombre}" itemValue="#{rcor.id}" />
                                </p:selectOneMenu>

                                <h:outputText value="Medio Diagnóstico"  class="header-back" />
                                <p:selectOneMenu id="auMedioDx" required="false" value="#{gestionAfiliadosPEBean.objeto.maeMedioDxId}" filter="true" filterMatchMode="contains" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaMedioDiagnostico}" var="mdiag" itemLabel="#{mdiag.nombre}" itemValue="#{mdiag.id}" />
                                </p:selectOneMenu> 

                                <h:outputText value="Activo"  class="header-back" />
                                <p:selectBooleanButton id="blActivo" value="#{gestionAfiliadosPEBean.objeto.activo}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" >
                                    <p:ajax listener="#{gestionAfiliadosPEBean.changeActivo()}" update="SomCausasActivoE,SomCausasInActivoE,sltipopaciente"/>
                                </p:selectBooleanButton>

                                <h:outputText value="Causa"   class="header-back" />
                                <p:column>
                                    <p:selectOneMenu id="SomCausasActivoE" value="#{gestionAfiliadosPEBean.objeto.maeCausaActivoId}" 
                                                     styleClass="#{gestionAfiliadosPEBean.causaActivo}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{0}" noSelectionOption="true" />
                                        <f:selectItems value="#{gestionAfiliadosPEBean.listCausasActivo}" var="CausaA" itemLabel="#{CausaA.nombre}" itemValue="#{CausaA.id}" />   
                                    </p:selectOneMenu>
                                    <p:selectOneMenu id="SomCausasInActivoE" value="#{gestionAfiliadosPEBean.objeto.maeCausaInactivoId}" 
                                                     styleClass="#{gestionAfiliadosPEBean.causaInActivo}">
                                        <f:selectItem itemLabel=" -- " itemValue="#{0}" noSelectionOption="true" />
                                        <f:selectItems value="#{gestionAfiliadosPEBean.listCausasInactivo}" var="CausaI" itemLabel="#{CausaI.nombre}" itemValue="#{CausaI.id}" />     
                                    </p:selectOneMenu>
                                </p:column>

                                <h:outputText value="Tipo Paciente"  class="header-back" />
                                <h:outputText id="sltipopaciente" value="#{gestionAfiliadosPEBean.getTipoPaciente(gestionAfiliadosPEBean.objeto.tipoPaciente)}" />

                                <h:outputText value="Adherente"   class="header-back"  />
                                <p:selectBooleanButton id="blAdherente" value="#{gestionAfiliadosPEBean.objeto.adherente}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />

                                <h:outputText value="Disentimiento"   class="header-back" />
                                <p:selectBooleanButton id="blDisentimiento" value="#{gestionAfiliadosPEBean.objeto.disentimiento}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />

                                <h:outputText value="Planificación Familiar"   class="header-back" />
                                <p:selectBooleanButton id="blPlanficacionFamiliar" value="#{gestionAfiliadosPEBean.objeto.planificacionFamiliar}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" />

                                <h:outputText rendered="#{gestionAfiliadosPEBean.objeto.pePrograma.id eq 50}" value="Sentencia"  class="header-back" />
                                <p:selectOneMenu rendered="#{gestionAfiliadosPEBean.objeto.pePrograma.id eq 50}" id="selSentencias" value="#{gestionAfiliadosPEBean.objeto.idSentencia}" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{0}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaSentencias}" var="sentencia" itemValue="#{sentencia.id}" itemLabel="#{sentencia.nombre}"  itemDescription="#{sentencia.descripcion}"/>     
                                </p:selectOneMenu>

                            </p:panelGrid>                        
                        </p:panel>

                        <p:panel id="pnlSiVigilaEdit" header="Información Sivigila" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelSivigila" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Notificado" class="header-back" />
                                <p:selectOneMenu id="ENotiSivi" value="#{gestionAfiliadosPEBean.objeto.notificadoSivigila}" required="true" requiredMessage="Debe seleccionar el valor para el campo Notificado."  >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaNotificacionSivigila}" var="notisivi" itemValue="#{notisivi.id}" itemLabel="#{notisivi.nombre}" itemDescription="#{notisivi.descripcion}" />
                                    <p:ajax event="change" listener="#{gestionAfiliadosPEBean.validarEstadoSivigila()}" update="SelEstadoSiviEdit,SelCauDescarteEdit"/>
                                </p:selectOneMenu>

                                <h:outputText value="Estado" class="header-back" />
                                <p:selectOneMenu id="SelEstadoSiviEdit" value="#{gestionAfiliadosPEBean.objeto.estadoSivigila}" disabled="${gestionAfiliadosPEBean.activoEstadoSivigila}" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaEstadoSivigila}" var="estasivi" itemValue="#{estasivi.id}" itemLabel="#{estasivi.nombre}" itemDescription="#{estasivi.descripcion}" />
                                    <p:ajax event="change" listener="#{gestionAfiliadosPEBean.validarCausaDecarte()}" update="SelCauDescarteEdit"/>
                                </p:selectOneMenu>

                                <h:outputText value="Causa Descarte" class="header-back" />
                                <p:selectOneMenu id="SelCauDescarteEdit" value="#{gestionAfiliadosPEBean.objeto.maeCausaDescarteId}" disabled="${gestionAfiliadosPEBean.activoCausaDescarte}"   >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaCausaDescarte}" var="cauDes" itemValue="#{cauDes.id}" itemLabel="#{cauDes.nombre}" itemDescription="#{cauDes.descripcion}" />
                                </p:selectOneMenu>

                            </p:panelGrid>
                        </p:panel>

                        <p:panel id="pDiagnosticoCrear" header="Diagnostico" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <div align="right"> 
                                <p:commandButton  immediate="true" actionListener="#{gestionAfiliadosPEBean.consultarDiagnostico()}" icon="ui-icon-clipboard" title="Agregar Diagnostico" style="margin-bottom: 0.4rem;"/>
                            </div>
                            <p:dataTable id="tablaDiagnosticosCrear" var="diagnosticoCrear"  class="listaDatos"  value="#{gestionAfiliadosPEBean.objeto.peAfiliadoDiagnosticoList}" 
                                         widgetVar="tablaDiagnosticosCrear" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoCrear.maDiagnosticosCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoCrear.maDiagnosticosValor}" />
                                </p:column>
                                <p:column headerText="Denominación CAC">
                                    <h:outputText value="#{diagnosticoCrear.peAfiliadosProgramasId.maDiagnosticoPrincipal.maCacValor} " />
                                </p:column>                                  
                                <p:column headerText="Principal">
                                    <p:selectBooleanCheckbox id="principalDiangosticoCrear" label="Es Principal" value="#{diagnosticoCrear.principal}">
                                        <p:ajax event="change" listener="#{gestionAfiliadosPEBean.cambiarPrincipalDiagnostico(diagnosticoCrear.maDiagnosticosId)}" update="tablaDiagnosticosCrear"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Borrar" immediate="true" action="#{gestionAfiliadosPEBean.borrarDiagnostico(diagnosticoCrear.maDiagnosticosId)}" icon="ui-icon-closethick">
                                        <p:confirm header="Confirmación" message="¿Está seguro que desea eliminar el registro?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable> 
                        </p:panel> 

                        <!-- variables específicas -->
                        <p:panel id="pnlVariable" header="Variables Específicas" style="margin-bottom:10px;" toggleable="true">

                            <p:dataTable id="tablaValoresVariablesEditar" var="valor" value="#{gestionAfiliadosPEBean.listadoValoresVariables}" 
                                         widgetVar="tablaValoresVariablesEditar" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Variable" rendered="#{valor.tipo != 5}" filterBy="#{valor.descripcion}" filterMatchMode="contains">
                                    <f:facet name="filter">
                                        <p:inputText label="Descripcion" maxlength="64" style="width: 50%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaValoresVariablesEditar').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{valor.descripcion}" styleClass="#{valor.clase}"/>
                                </p:column>
                                <p:column headerText="Valor" rendered="#{valor.tipo != 5}">
                                    <p:calendar
                                        rendered="#{valor.tipo eq 0}"
                                        inputStyleClass="#{valor.clase}"
                                        autocomplete="off"
                                        navigator="true"
                                        pattern="yyyy-MM-dd"
                                        size="20"
                                        maxlength="10"
                                        readonlyInput="false"
                                        yearRange="1800:c"
                                        value="#{valor.fecha}"
                                        disabled="#{gestionAfiliadosPEBean.validarEdicionVariable(valor)}" >
                                    </p:calendar>
                                    <p:inputNumber rendered="#{valor.tipo eq 1}" value="#{valor.entero}" inputStyleClass="#{valor.clase}" minValue="0" maxValue="2147483647" disabled="#{gestionAfiliadosPEBean.validarEdicionVariable(valor)}" />
                                    <p:inputNumber rendered="#{valor.tipo eq 2}" value="#{valor.decimal}" inputStyleClass="#{valor.clase}" minValue="0" maxValue="9999.99" decimalPlaces="2" disabled="#{gestionAfiliadosPEBean.validarEdicionVariable(valor)}" />
                                    <p:inputText rendered="#{valor.tipo eq 3}" value="#{valor.texto}" styleClass="#{valor.clase}" maxlength="128" disabled="#{gestionAfiliadosPEBean.validarEdicionVariable(valor)}" />
                                    <p:inputText rendered="#{valor.tipo eq 4}" value="#{valor.textoLargo}" styleClass="#{valor.clase}" maxlength="1024" disabled="#{gestionAfiliadosPEBean.validarEdicionVariable(valor)}" />
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center" rendered="#{valor.tipo != 5}">
                                    <p:commandButton rendered="#{valor.activa and valor.recurrente}" title="Agregar Recurrencia"  action="#{gestionAfiliadosPEBean.agregarRecurrencia(valor)}" 
                                                     icon="ui-icon-document" process="tablaValoresVariablesEditar" update="tablaValoresVariablesEditar" resetValues="false"/>
                                    <p:commandButton rendered="#{valor.activa and valor.recurrente and gestionAfiliadosPEBean.mostrarBtnDisminuir(valor)}" title="Disminuir Recurrencia" 
                                                     action="#{gestionAfiliadosPEBean.disminuirRecurrencia(valor)}"
                                                     icon="ui-icon-minus" process="tablaValoresVariablesEditar" update="tablaValoresVariablesEditar" resetValues="false"/>
                                    <p:commandButton rendered="#{valor.fechaHoraModifica != null}" title="Ver Historial Edición" immediate="true" action="#{gestionAfiliadosPEBean.mostrarHistorialValoresVariables(valor)}" 
                                                     icon="ui-icon-search"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panelGrid id="panelCrear" style="width: 100%;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Modificar" type="button" onclick="modificarRemote()" validateClient="true"/>
                                            <p:remoteCommand name="modificarRemote" actionListener="#{gestionAfiliadosPEBean.modificar}" update="@form" />
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoEditar').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog>

            <!-- Adjuntos -->
            <p:dialog  widgetVar="dialogoAdjuntos"  appendTo="@(body)"  width="90%"  modal="true" class="modal-no-scroll">
                <header style="font-size: 30px;">
                    <b>Adjuntos</b>
                </header>
                <h:form id="frmAuditoriaVer" class="frmAuditoria" style="margin-top: -15px; margin-bottom: 15px; text-align: right;">
                    <h:outputText id="labelDatosAuditoria" value="#{gestionAfiliadosPEBean.objeto.datosAuditoria}"/>
                    <p:commandButton id="btnauditoria" class="btnAuditoria" action="#{gestionAfiliadosPEBean.mostrarAfiliadoGeneral()}" icon="ui-icon-person" title="Afiliado" />
                </h:form>
                <p:scrollPanel mode="native" style="height:500px;" >
                    <h:form id="frmAdjunto">
                        <p:panel id="pnlSubir" header="Datos afiliado" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAdjuntos" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Tipo"   class="header-back" /> 
                                <p:selectOneMenu id="somTipo" value="#{gestionAfiliadosPEBean.objectoAdjunto.maeTipoArchivoId}" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaTipoAdjunto}" var ="tiad" itemLabel="#{tiad.descripcionCorta}" itemValue="#{tiad.id}"/>
                                    <p:ajax event="change" update="somTipo"/>
                                </p:selectOneMenu>

                                <h:outputText value="Archivo"  class="header-back" /> 
                                <p:fileUpload id="adjuntoArchivo" label="Adjunto" mode="advanced"
                                              skinSimple="true"
                                              value="#{gestionAfiliadosPEBean.archivoAdjunto}"
                                              listener="#{gestionAfiliadosPEBean.cargarArchivoDocumento}"
                                              multiple="false"
                                              auto="true"                                              
                                              invalidFileMessage="Tipo inválido de archivo."
                                              fileLimitMessage="Máximo número de archivos excedido."
                                              invalidSizeMessage="Tamaño del archivo no permitivo, tamaño máximo permitido es : 10 mb."
                                              uploadLabel="Subir"  cancelLabel="Cancelar"
                                              allowTypes="/(\.|\/)(pdf|PDF)$/"
                                              sizeLimit="10000000"
                                              widgetVar="subirManual" />                                    
                            </p:panelGrid>

                            <br/>
                            <p:dataTable var="adj" widgetVar="tablaArchivo" class="listaDatos" value="#{gestionAfiliadosPEBean.peAdjuntos}">
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{gestionAfiliadosPEBean.getTipoAdjuntoRecursiva(adj.maeTipoArchivoId)}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{adj.nombre}#{adj.extensión}"/>
                                </p:column>
                                <p:column>
                                    <p:commandButton icon="ui-icon-closethick" title="Borrar Adjunto" action="#{gestionAfiliadosPEBean.borrarAdjunto(adj.nombre)}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlAdjuntosEx" header="Adjuntos" style="margin-bottom:10px;" toggleable="true">
                            <br/>
                            <p:dataTable var="adj" widgetVar="tablaArchivo" class="listaDatos" value="#{gestionAfiliadosPEBean.objeto.listaPeAdjunto}">
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{adj.maeTipoArchivoValor}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{adj.nombre}#{adj.extensión}"/>
                                </p:column>                                
                                <p:column headerText="Usuario Crea">
                                    <h:outputText value="#{adj.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="Fecha Crea">
                                    <h:outputText value="#{adj.fechaHoraCrea}"/>
                                </p:column>
                                <p:column style="text-align: center;">
                                    <p:commandButton icon="ui-icon-arrowstop-1-s" 
                                                     title="Descargar Adjunto" 
                                                     action="#{gestionAfiliadosPEBean.descargarAdjunto(adj)}" 
                                                     ajax="false" 
                                                     process="@this"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panelGrid id="panelCrearAdjuntar" style="width: 100%;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Guardar" type="button" onclick="GuardarAdjuntoRemote()" validateClient="true"/>
                                            <p:remoteCommand name="GuardarAdjuntoRemote" action="#{gestionAfiliadosPEBean.guardarAdjunto()}" />
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoAdjuntos').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>                
            </p:dialog>

            <!-- Gestionar -->
            <p:dialog header="Gestionar" id="dlgGestionar" widgetVar="dialogoGestiones" appendTo="@(body)" width="90%"  modal="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form class="frmAuditoria" style="margin-top: 10px; text-align: right;">
                        <p:commandButton id="auditoria" class="btnAuditoria" action="#{gestionAfiliadosPEBean.getAuditoria(gestionAfiliadosPEBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" style="margin-bottom: 0.4rem;" />
                    </h:form>
                    <h:form id="frmGestionAfiliado">
                        <p:panel id="pnlAfiliado" header="Datos afiliado" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <h:outputText value="Tipo Documento" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getTipoDocumento(gestionAfiliadosPEBean.objeto.asegAfiliado.maeTipoDocumento)}"/>                                        

                                <h:outputText value="Número Documento" class="header-back" />
                                <h:outputText id="txtNumeroDocumento" value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.numeroDocumento}" style="width: 181px;"/>

                                <h:outputText value="Fecha Nacimiento" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Nombres" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.nombres}"/>

                                <h:outputText value="Apellidos" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.apellidos}"/>

                                <h:outputText value="Edad" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.calcularEdadEnDiasMesesAnios(gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento)}" />

                                <h:outputText value="Género" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeGeneroValor}"/>

                                <h:outputText value="Régimen" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeRegimenValor}"/>

                                <h:outputText value="Estado Afiliación" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoAfiliacion(gestionAfiliadosPEBean.objeto.asegAfiliado.maeEstadoAfiliacion)}" style="color: red !important; font-weight: bold !important;" />

                                <h:outputText value="Dirección" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.direccionResidencia}"/>

                                <h:outputText value="Municipio Afiliación" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>

                                <h:outputText value="Zona" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeZonaValor}"/>

                                <h:outputText value="Tiene Portabilidad" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerBoolean(gestionAfiliadosPEBean.objeto.asegAfiliado.tienePortabilidad)}"/>

                                <h:outputText value="Sede Prestador Portabilidad" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.nombreSede}"/>

                                <h:outputText value="Munipio Portabilidad" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getUbicacionRecursiva(gestionAfiliadosPEBean.objeto.asegAfiliado.portabilidadPrestadorSede.ubicacionId)}"/>

                                <h:outputText value="Correo Electrónico"   class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.email}"/>

                            </p:panelGrid>

                            <p:panel header="Contactos Aseguramiento" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactosVerAseg" var="contacto" value="#{gestionAfiliadosPEBean.listaContactos}" widgetVar="tablaContactosVerAseg" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numeroContacto}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>

                            <p:panel header="Contactos Programa" toggleable="true" style="height:auto; margin-top: 0.4rem;">
                                <p:scrollPanel mode="native">
                                    <p:dataTable id="tablaContactosVerPro" var="contacto" value="#{gestionAfiliadosPEBean.listaContactosPrograma}" widgetVar="tablaContactosVerPro" scrollable="true" emptyMessage="No se encontraron registros">
                                        <p:column headerText="Número Contacto">
                                            <h:outputText value="#{contacto.numero}"/>
                                        </p:column>
                                        <p:column headerText="Tipo">
                                            <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                        </p:column>
                                        <p:column headerText="Observación">
                                            <h:outputText value="#{contacto.observacion}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:panel>                            

                        </p:panel>   

                        <p:panel id="pnlMatricula" header="Matricula Programa Especial" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="pnlGestionAfiliado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <h:outputText value="Programa Especial" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.pePrograma.descripcionPrograma}"/>                                        

                                <h:outputText value="Responsable Programa" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.pePrograma.usuariosId.nombre}" />

                                <h:outputText value="Activo" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getEstadoRecursiva(gestionAfiliadosPEBean.objeto.activo)}"/>

                                <h:outputText value="Causa" class="header-back" />
                                <h:outputText rendered="#{gestionAfiliadosPEBean.objeto.activo}" value="#{gestionAfiliadosPEBean.getCausasRecursiva(gestionAfiliadosPEBean.objeto.maeCausaActivoId)}"/>
                                <h:outputText rendered="#{!gestionAfiliadosPEBean.objeto.activo}" value="#{gestionAfiliadosPEBean.getCausasRecursiva(gestionAfiliadosPEBean.objeto.maeCausaInactivoId)}"/>

                                <h:outputText value="Fecha Inicio Programa" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.fechaInicioPrograma}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Fecha fin" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.fechaFinPrograma}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Fecha Diagnostico" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objeto.fechaDiagnostico}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                </h:outputText>

                                <h:outputText value="Región Corporal" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getRegionCorporalRecursiva(gestionAfiliadosPEBean.objeto.maeRegionCorporalId)}"/>

                                <h:outputText value="Medio Diagnóstico" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getMedioDxRecursiva(gestionAfiliadosPEBean.objeto.maeMedioDxId)}"/>

                            </p:panelGrid>  

                            <p:panel id="pnlSiVigilaVer" header="Información Sivigila" style="margin-bottom:10px; margin-top: 10px;" toggleable="true">
                                <p:panelGrid id="panelSivigila" columns="4"
                                             columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Notificado" class="header-back" />
                                    <h:outputText  value="#{gestionAfiliadosPEBean.objeto.notificadoSivigilaStr}" />

                                    <h:outputText value="Estado" class="header-back" />
                                    <h:outputText  value="#{gestionAfiliadosPEBean.getEstadoSivigilaStr(gestionAfiliadosPEBean.objeto.estadoSivigila)}" />

                                    <h:outputText value="Causa Descarte" class="header-back" />
                                    <h:outputText  value="#{gestionAfiliadosPEBean.objeto.maeCausaDescarteValor}" />

                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="pDiagnosticosGestion" header="Diagnosticos" style="margin-bottom:10px; margin-top: 0.4rem;" collapsed="false" toggleable="false">
                                <p:dataTable id="tablaDiagnosticosGestion" var="diagnosticoVer"  class="listaDatos" 
                                             value="#{gestionAfiliadosPEBean.objeto.peAfiliadoDiagnosticoList}" 
                                             widgetVar="tablaDiagnosticosVer" resizableColumns="false" 
                                             scrollable="true"
                                             scrollHeight="100"
                                             emptyMessage="No se encontraron registros" style="text-align: center" >
                                    <p:column headerText="Código">
                                        <h:outputText value="#{diagnosticoVer.maDiagnosticosCodigo}" />
                                    </p:column>
                                    <p:column headerText="Descripción">
                                        <h:outputText value="#{diagnosticoVer.maDiagnosticosValor}" />
                                    </p:column>                                
                                    <p:column headerText="Principal">
                                        <p:selectBooleanCheckbox id="principalDiangosticoCrear" label="Es Principal" value="#{diagnosticoVer.principal}" disabled="true" >
                                        </p:selectBooleanCheckbox>
                                    </p:column>
                                </p:dataTable> 
                            </p:panel>
                        </p:panel>
                        <p:panel id="pnlGestion" header="Gestiones" style="margin-bottom:10px;" toggleable="true">
                            <div align="right"> 
                                <p:commandButton rendered="#{gestionAfiliadosPEBean.accionAdicional2 and gestionAfiliadosPEBean.objeto.puedeGestionar}" title="Crear Gestión" action="#{gestionAfiliadosPEBean.crearGestion()}" icon="ui-icon-plusthick"/>
                            </div>
                            <p:dataTable var="objG" value="#{gestionAfiliadosPEBean.objeto.listaPeGestion}"                                             
                                         emptyMessage="No se encontraron registros"  class="listaDatos" 
                                         id="tablaGestiones"
                                         widgetVar="tablaGWidget"
                                         style="font-size:11px; text-align: center;"
                                         rowKey="#{objG.id}">
                                <p:column headerText="Acciones">
                                    <p:commandButton rendered="${gestionAfiliadosPEBean.puedeGestionar(objG) or gestionAfiliadosPEBean.accionAdicional4}" title="Editar" actionListener="#{gestionAfiliadosPEBean.editarGestion(objG.id)}" icon="ui-icon-pencil"/>
                                    <p:commandButton id="audGestion" class="btnAuditoria" action="#{gestionAfiliadosPEBean.auditoriaGestion(objG)}" icon="ui-icon-comment" title="Auditoría" />                                                                        
                                </p:column>
                                <p:column headerText="Origen">
                                    <h:outputText value="#{gestionAfiliadosPEBean.getFuenteOrigenGestion(objG.fuenteOriegen)}"/>                                    
                                </p:column>
                                <p:column headerText="Tipo">                                    
                                    <ui:fragment rendered="#{objG.fechaHoraModifica != null}">
                                        <i class="pi pi-circle-on" style="color: red;" />
                                    </ui:fragment> 
                                    <h:outputText value="#{objG.maeTipoValor}"/>
                                </p:column>
                                <p:column headerText="Usuario" filterBy="#{objG.usuariosId.nombre}" filterMatchMode="contains" >
                                    <f:facet name="filter">
                                        <p:inputText label="Usuario" maxlength="64" style="width: 95%;" 
                                                     oninput="this.value = this.value.replace(/[^a-zA-Z\s]/g, '');"
                                                     onkeypress="if (/[^a-zA-Z\s]/.test(event.key))
                                                                 event.preventDefault();
                                                             if (event.keyCode === 13 || event.keyCode === 9) {
                                                                 onchange();
                                                                 return false;
                                                             }"
                                                     onchange="PF('tablaGWidget').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{objG.usuariosId.nombre}"/>
                                </p:column>
                                <p:column headerText="Fecha Hora">
                                    <h:outputText value="#{objG.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{objG.descripcion}"/>                                       
                                    <p:commandButton rendered="#{objG.fechaHoraModifica != null}" id="btnHistorialGestion" class="btnAuditoria" action="#{gestionAfiliadosPEBean.verHistoricoEdiciones(objG.id)}" icon="ui-icon-search" title="Historial Edición" style="margin-left: 0.2rem;" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid style="width: 100%;">
                            <f:facet name="footer">                                                                
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoGestiones').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>                        
                    </h:form>                     
                </p:scrollPanel>                
            </p:dialog>

            <!-- Gestiones -->
            <p:dialog header="Gestiones" widgetVar="dialogoCrearGestion" appendTo="@(body)" width="50%"  modal="true" class="modal-no-scroll">
                <h:form id="frmGestiones">
                    <p:panelGrid id="panelGestion" columns="2"
                                 columnClasses="ui-grid-col-3,ui-grid-col-9"
                                 layout="grid"
                                 styleClass="ui-panelgrid-blank ui-fluid" >

                        <h:outputText value="Tipo"   class="header-back"/> 
                        <p:selectOneMenu id="somTipo" required="true" value="#{gestionAfiliadosPEBean.objetoGestion.tipo}" 
                                         filter="true" filterMatchMode="contains" autoWidth="false"   >
                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                            <f:selectItems value="#{gestionAfiliadosPEBean.listaGestionTipo}" var="tipGestion" itemValue="#{tipGestion.id}" itemLabel="#{tipGestion.nombre}" itemDescription="#{tipGestion.descripcion}"/>
                        </p:selectOneMenu>

                        <h:outputText value="Observación"   class="header-back"/>
                        <p:inputTextarea id="descripcion" label="Descripción" value="#{gestionAfiliadosPEBean.objetoGestion.descripcion}" style="width: 99%;" cols="40" maxlength="1024"/>
                    </p:panelGrid>
                    <p:panelGrid id="panelGestionAdjuntar" style="width: 99%;">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="4" style="text-align: center">
                                    <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                        <p:commandButton value="Guardar" type="button" onclick="GuardarGestionRemote()" validateClient="true"/>
                                        <p:remoteCommand name="GuardarGestionRemote" action="#{gestionAfiliadosPEBean.guardarGestiones()}" />
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoCrearGestion').hide()" immediate="true"/>
                                    </h:panelGroup>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <!-- Editar Gestion -->
            <p:dialog header="Editar Gestión" widgetVar="dialogoEditarGestion" appendTo="@(body)" width="50%"  modal="true" class="modal-no-scroll">
                <h:form id="frmEditGestiones">
                    <p:panelGrid id="panelEditGestion" columns="2"
                                 columnClasses="ui-grid-col-3,ui-grid-col-9"
                                 layout="grid"
                                 styleClass="ui-panelgrid-blank ui-fluid" >

                        <h:outputText value="Tipo"   class="header-back"/> 
                        <h:outputText value="#{gestionAfiliadosPEBean.objetoGestion.maeTipoValor}"/>

                        <h:outputText value="Observación"  class="header-back"/>
                        <p:inputTextarea id="textEditObservacion" label="Observación" value="#{gestionAfiliadosPEBean.objetoGestion.descripcion}" style="width: 99%;" cols="40" maxlength="1024" required="true" requiredMessage="Debe indicar un valor en el campo Observación." />
                    </p:panelGrid>
                    <p:panelGrid id="panelGestionAdjuntar" style="width: 99%;">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="4" style="text-align: center">
                                    <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                        <p:commandButton value="Guardar" type="button" onclick="ModificarGestionRemote()" validateClient="true"/>
                                        <p:remoteCommand name="ModificarGestionRemote" action="#{gestionAfiliadosPEBean.modificarGestion()}" update="@form" />
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoEditarGestion').hide()" immediate="true"/>
                                    </h:panelGroup>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <!-- Confirmar estado afiliado -->
            <p:dialog header="Confirmación" widgetVar="dialogoConfirma" closable="false" appendTo="@(body)" modal="true">
                <h:form id="frmConfirma">
                    <p:panelGrid id="panelAfiliado" columns="1" layout="grid" styleClass="showcase-text-align-center">
                        <h:outputText value="El usuario se encuentra en estado #{gestionAfiliadosPEBean.estadoAfiliado}. ¿Desea continuar?" />
                    </p:panelGrid>
                    <p:panelGrid style="width: 100%;">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="2" style="text-align: center">
                                    <p:commandButton value="Si" action="#{gestionAfiliadosPEBean.continuar()}"/>
                                    <p:commandButton value="No" action="#{gestionAfiliadosPEBean.cancelar()}" style="margin-left: 5px;"/>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <!-- Confirmar -->
            <p:dialog header="Confirmación" widgetVar="dialogoProgAfil" closable="false" appendTo="@(body)" modal="true">
                <h:form id="frmConfirmaPA">
                    <p:panelGrid id="panelAfiliado" columns="1" layout="grid" styleClass="showcase-text-align-center">
                        <h:outputText value="#{gestionAfiliadosPEBean.mensajeConfirma}" />
                        <h:outputText value="¿Desea continuar?" style="font-weight:bold"/>
                    </p:panelGrid>
                    <p:panelGrid style="width: 100%;">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="2" style="text-align: center">
                                    <p:commandButton value="Si" action="#{gestionAfiliadosPEBean.guardar()}" onclick="PF('dialogoProgAfil').hide()"/>
                                    <p:commandButton value="No" type="button" onclick="PF('dialogoProgAfil').hide()" immediate="true"/>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <!-- Dialogo confirmar -->
            <p:dialog header="Advertencia" widgetVar="dialogoProgAfilActivo" closable="false" appendTo="@(body)" modal="true">
                <h:form id="frmConfirmaPAA">
                    <p:panelGrid id="panelAfiliado" columns="1" layout="grid" styleClass="showcase-text-align-center">
                        <h:outputText value="#{gestionAfiliadosPEBean.mensajeConfirma}" />
                    </p:panelGrid>
                    <p:panelGrid style="width: 100%;">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="2" style="text-align: center">
                                    <p:commandButton value="Aceptar" type="button" onclick="PF('dialogoProgAfilActivo').hide()" immediate="true"/>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <!--Lista Afiliados Crear-->
            <p:dialog header="Consultar Afiliados" widgetVar="dialogoAfiliadoLista" appendTo="@(body)" position="center" width="95%" modal="true" style="height: auto;"  >
                <p:scrollPanel mode="native" style="max-height: 520px; padding-bottom: 0px !important;">
                    <h:form id="frmAfiliadoLista">
                        <div align="right">
                            <p:commandButton rendered="#{gestionAfiliadosPEBean.accionListar}" title="Refrescar" actionListener="#{gestionAfiliadosPEBean.refrescarAfiliado()}" oncomplete="PF('tablaWidgetAfiliado').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelAfiliadoLista" style="height:auto;" columns="1">
                            <p:dataTable id="tablaRegistrosAfiliados" widgetVar="tablaWidgetAfiliado" var="afiliado" value="#{gestionAfiliadosPEBean.lazyAfiliados}" rowKey="#{afiliado.id}"
                                         rows="#{gestionAfiliadosPEBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage="No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect" listener="#{gestionAfiliadosPEBean.onRowSelectAfiliado}" />
                                <p:column headerText="Tipo Documento" sortBy="#{afiliado.maeTipoDocumento}" filterBy="#{afiliado.maeTipoDocumento}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetAfiliado').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{gestionAfiliadosPEBean.listaTiposDocumento}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.descripcion}" itemDescription="#{tipoDoc.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{gestionAfiliadosPEBean.obtenerTipoDocumentoAfiliado(afiliado.maeTipoDocumento)}"/>
                                </p:column>
                                <p:column headerText="Número Documento" sortBy="#{afiliado.numeroDocumento}" filterBy="#{afiliado.numeroDocumento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Número Documento" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetAfiliado').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{afiliado.numeroDocumento}"/>
                                </p:column>
                                <p:column headerText="Código Único" sortBy="#{afiliado.idAfiliado}" filterBy="#{afiliado.idAfiliado}">
                                    <f:facet name="filter">
                                        <p:inputText label="Código Único" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetAfiliado').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.idAfiliado}"/>
                                </p:column>
                                <p:column headerText="Primer Nombre" sortBy="#{afiliado.primerNombre}" filterBy="#{afiliado.primerNombre}">
                                    <f:facet name="filter">
                                        <p:inputText label="Primer nombre" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetAfiliado').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.primerNombre}"/>
                                </p:column>
                                <p:column headerText="Segundo Nombre" sortBy="#{afiliado.segundoNombre}" filterBy="#{afiliado.segundoNombre}">
                                    <f:facet name="filter">
                                        <p:inputText label="Segundo nombre" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetAfiliado').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.segundoNombre}"/>
                                </p:column>
                                <p:column headerText="Primer Apellido" sortBy="#{afiliado.primerApellido}" filterBy="#{afiliado.primerApellido}">
                                    <f:facet name="filter">
                                        <p:inputText label="Primer Apellido" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetAfiliado').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.primerApellido}"/>
                                </p:column>
                                <p:column headerText="Segundo Apellido" sortBy="#{afiliado.segundoApellido}" filterBy="#{afiliado.segundoApellido}">
                                    <f:facet name="filter">
                                        <p:inputText label="Segundo Apellido" maxlength="128" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetAfiliado').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.segundoApellido}"/>
                                </p:column>
                                <p:column headerText="Genero" sortBy="#{afiliado.genero}" filterBy="#{afiliado.genero}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetAfiliado').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{gestionAfiliadosPEBean.listaTiposGenero}" var="tipoGe" itemValue="#{tipoGe.id}" itemLabel="#{tipoGe.nombre}" itemDescription="#{tipoGe.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.maeGeneroValor}"/>
                                </p:column>
                                <p:column headerText="Estado" sortBy="#{afiliado.maeEstadoAfiliacion}" filterBy="#{afiliado.maeEstadoAfiliacion}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetAfiliado').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{gestionAfiliadosPEBean.listaEstadosAfiliacion}" var="tipoAfi" itemValue="#{tipoAfi.id}" itemLabel="#{tipoAfi.nombre}" itemDescription="#{tipoAfi.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{gestionAfiliadosPEBean.obtenerEstadoAfiliado(afiliado.maeEstadoAfiliacion)}"/>
                                </p:column>
                                <p:column headerText="Regimen" sortBy="#{afiliado.maeRegimenValor}" filterBy="#{afiliado.maeRegimenId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetAfiliado').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{gestionAfiliadosPEBean.listaRegimen}" var="regimen" itemValue="#{regimen.id}" itemLabel="#{regimen.nombre}" itemDescription="#{regimen.descripcion}"/>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{afiliado.maeRegimenValor}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- Dialogo para crear Contacto -->
            <p:dialog header="Crear Contacto"  widgetVar="dialogoCrearContacto" appendTo="@(body)" modal="true" width="70%" dynamic="true">
                <p:scrollPanel mode="native" >
                    <h:form id="frmCrearContacto">
                        <p:panelGrid id="panelCrearContacto" columns="4"
                                     columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid" >

                            <h:outputText value="Tipo"  class="header-back" />
                            <p:selectOneMenu id="tipoContacto" label="Tipo" required="true" value="#{gestionAfiliadosPEBean.contacto.maeTipoContactoId}" 
                                             editable="fase" requiredMessage="Tipo: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" --  " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{gestionAfiliadosPEBean.listaTiposContacto}" var="TIPO_CONTACTO" itemValue="#{TIPO_CONTACTO.id}" itemLabel="#{TIPO_CONTACTO.nombre}" itemDescription="#{TIPO_CONTACTO.descripcion}" />
                            </p:selectOneMenu>

                            <h:outputText value="Número de Contacto" class="header-back" />
                            <p:inputText id="numeroContacto" label="Número de Contacto" value="#{gestionAfiliadosPEBean.contacto.numero}" maxlength="10" required="true" requiredMessage="Número de Contacto: Este campo es obligatorio." >
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <h:outputText value="Observación" class="header-back" />
                            <p:inputTextarea id="observacion" label="Observación" value="#{gestionAfiliadosPEBean.contacto.observacion}" maxlength="128" required="false" requiredMessage="Observación: Este campo es obligatorio." />
                        </p:panelGrid>
                        <p:panelGrid style="width:100%; margin:10px 0px;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center;">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Guardar" type="button" onclick="guardarContactoRemote()" validateClient="true"/>
                                            <p:remoteCommand name="guardarContactoRemote" action="#{gestionAfiliadosPEBean.guardarContacto()}" update="panelCrearContacto"/>
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoCrearContacto').hide()" immediate="true" style="margin-left: 5px;"/>                                           
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel> 
            </p:dialog>

            <!-- Ver Listado Hospitalizacion -->
            <p:dialog header="Hospitalización" widgetVar="dialogoHospitalizacion" appendTo="@(body)" modal="true" width="90%" dynamic="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height: 500px">
                    <h:form id="frmHospitalizacion">
                        <p:dataTable var="obj" value="#{gestionAfiliadosPEBean.lazyHospitalizacion}" paginator="true" rows="#{gestionAfiliadosPEBean.tamanoPagina}" 
                                     emptyMessage="No se encontraron registros"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistrosHospitalizacion" lazy="true"
                                     widgetVar="tablaWidgetHospitalizacion"
                                     style="font-size:11px;"
                                     rowKey="#{obj.id}" reflow="true">
                            <p:column headerText="Acciones" style="text-align: center;">
                                <p:commandButton rendered="#{gestionAfiliadosPEBean.accionAdicional3}" title="Ver" actionListener="#{gestionAfiliadosPEBean.verHospitalizacion(obj)}" icon="ui-icon-search"/>
                            </p:column>

                            <p:column headerText="Número" filterBy="#{obj.id}">
                                <f:facet name="filter">
                                    <p:inputNumber label="Id" maxlength="64" style="width: 80%;" onkeypress="if (event.keyCode === 13) {
                                                return false;
                                            }" onchange="PF('tablaWidgetHospitalizacion').filter()"/>
                                </f:facet>
                                <h:outputText value="#{obj.id}" title="#{obj.id}" />
                            </p:column>

                            <p:column headerText="Estado Auditoria" filterBy="#{obj.estadoAuditoria}">
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('tablaWidgetHospitalizacion').filter()" style="width: 80%;">
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel=" Ingresado " itemValue="1"  />
                                        <f:selectItem itemLabel=" En Gestión " itemValue="2"  />
                                        <f:selectItem itemLabel=" Egresado " itemValue="3"  />
                                        <f:selectItem itemLabel=" Cerrado " itemValue="4"  />
                                        <f:selectItem itemLabel=" Anulado " itemValue="5"  />
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{obj.estadoAuditoriaStr}" title="#{obj.estadoAuditoriaStr}" />
                            </p:column>

                            <p:column headerText="Fecha Ingreso" sortBy="#{obj.aucIngresoId.fechaIngreso}">
                                <h:outputText value="#{obj.aucIngresoId.fechaIngreso}" title="#{obj.aucIngresoId.fechaIngreso}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm" timeZone="America/Bogota" />
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Dias Hospitalizacion">
                                <h:outputText value="#{obj.diasHospitalizacion}" title="#{obj.diasHospitalizacion}"/>
                            </p:column>

                            <p:column headerText="Estado Afiliado" filterBy="#{obj.estado}">
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('tablaWidgetHospitalizacion').filter()" style="width: 80%;">
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel=" Hospitalizado " itemValue="1"  />
                                        <f:selectItem itemLabel=" Egresado " itemValue="2"  />
                                        <f:selectItem itemLabel=" Anulado " itemValue="3"  />
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{obj.estadoStr}" title="#{obj.estadoStr}"/>
                            </p:column>

                            <p:column headerText="Sede" filterBy="#{obj.cntPrestadorSedeId.nombreSede}">
                                <f:facet name="filter">
                                    <p:inputText label="Sede" maxlength="64" style="width: 80%;" onkeypress="if (event.keyCode === 13) {
                                                return false;
                                            }" onchange="PF('tablaWidgetHospitalizacion').filter()"/>
                                </f:facet>
                                <h:outputText value="#{obj.cntPrestadorSedeId.nombreSede}" title="#{obj.cntPrestadorSedeId.nombreSede}"/>
                            </p:column>

                            <p:column headerText="Auditor">
                                <h:outputText value="#{obj.gnUsuariosAuditorId.nombre}" title="#{obj.gnUsuariosAuditorId.nombre}" />
                            </p:column>

                        </p:dataTable>
                        <p:panelGrid id="panelPrograma" style="width:100%;margin-top: 10px ;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoHospitalizacion').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- Ver Hospitalización -->
            <p:dialog class="elDialogo" widgetVar="dialogoVerHospitalizacion" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <header style="font-size: 30px;">
                    <b>Hospitalización</b>
                </header>
                <h:form id="frmAuditoriaHospitalizacion" class="frmAuditoria" style="margin-top: -15px; margin-bottom: 15px; text-align: right;">
                    <h:outputText id="labelDatosAuditoria" value="#{gestionAfiliadosPEBean.objeto.datosAuditoria}"/>
                    <p:commandButton id="auditoria" class="btnAuditoria" action="#{gestionAfiliadosPEBean.mostrarAfiliadoGeneral()}" icon="ui-icon-person" title="Afiliado" />
                </h:form>
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmVerHospitalizacion">                        

                        <!-- Hospitalizacion -->
                        <p:panel id="pHospitalizacionVer" header="HOSPITALIZACION" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelHospitalizacionVer" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Nro Hospitalización"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.id}"/>

                                <h:outputText value="Estado Auditoria"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.estadoAuditoriaStr}"/>

                                <h:outputText value="Código Evento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.codigoEvento}"/>

                                <h:outputText value="Estado"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.estadoStr}"/>

                                <h:outputText value="Auditor"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.gnUsuariosAuditorId.nombre}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!-- Ips -->
                        <p:panel id="pIpsVer" header="IPS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelIpsVer" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Tipo Documento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.cntPrestador.maeTipoDocumentoValor}" />

                                <h:outputText value="Número Documento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.cntPrestador.numeroDocumento}" />

                                <h:outputText value="Razón Social"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.cntPrestador.razonSocial}" />

                                <h:outputText value="Departamento"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerDepartamento(gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.ubicacionId)}" />

                                <h:outputText value="Municipio"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.obtenerMunicipio(gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.ubicacionId)}" />

                                <h:outputText value="Dirección"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.direccion}" />

                                <h:outputText value="Código Habilitación"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.codigoHabilitacionSede}" />

                                <h:outputText value="Nombre Sede"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.cntPrestadorSedeId.nombreSede}" />

                            </p:panelGrid>
                        </p:panel>
                        <!-- Ingresos -->
                        <p:panel id="pIngresoVer" header="INGRESO" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelIngresoVer" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Fecha Ingreso"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.fechaIngreso}"/>

                                <h:outputText value="Reingreso"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.ingresoStr}"/>

                                <h:outputText value="Tipo Ingreso"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.maeTipoIngresoValor}"/>

                                <h:outputText value="Modalidad"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.maeCntModalidadValor}"/>

                                <h:outputText value="Remisión no Pertinente"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.maeRemisionNoPertinenteValor}"/>

                                <h:outputText value="Charlson"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.indiceCharlson}"/>

                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pIngresoDescripcionVer" header="DESCRIPCION REMISIÓN NO PERTINENTE" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelIngresoDescripcionVer" columns="1" 
                                         layout="grid" 
                                         columnClasses="ui-grid-col-12"
                                         styleClass="showcase-text-align-center">
                                <h:outputText  value="Descripción" style="font-weight:bold" rendered="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.habilitarDescripcion > 0}"  class="header-back" />
                                <p:inputTextarea value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.descripcion}" maxlength="1024" rows="5" disabled="false" style="width: 100%;" readonly="true" />
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pDiagnosticoVer" header="DIAGNOSTICO INGRESO" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaDiagnosticosVer" var="diagnosticoVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucIngresoId.aucDiagnosticosList}" widgetVar="tablaDiagnosticosVer" resizableColumns="true" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoVer.maDiagnosticoCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoVer.maDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Tipo diagnostico">
                                    <h:outputText value="#{diagnosticoVer.maeTipoDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Es Principal">
                                    <p:selectBooleanCheckbox id="principalDiangosticoVer" label="Es Principal" value="#{diagnosticoVer.principal}" disabled="true">
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:dataTable> 
                        </p:panel>
                        <!-- Seguimientos -->
                        <p:panel id="pSeguimientoVer" header="SEGUIMIENTOS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaSeguimientosVer" var="seguimientoVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionSeguimientoList}" widgetVar="tablaSeguimientoVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{seguimientoVer.maeTipoSeguimientoValor}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{seguimientoVer.descripcionCorto}" />
                                    <p:commandButton rendered="#{seguimientoVer.descripcionCorto.length() > 0 }" actionListener="#{gestionAfiliadosPEBean.mostrarMensaje(seguimientoVer.descripcion)}" icon="ui-icon-comment"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{seguimientoVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{seguimientoVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Estancias -->
                        <p:panel id="pEstanciaVer" header="ESTANCIAS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaEstanciaVer" var="estanciaVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionEstanciaList}" widgetVar="tablaEstanciaVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Fecha Ingreso">
                                    <h:outputText value="#{estanciaVer.fechaIngreso}" />
                                </p:column>
                                <p:column headerText="Fecha Egreso">
                                    <h:outputText value="#{estanciaVer.fechaEgreso}" />
                                </p:column>
                                <p:column headerText="Dias">
                                    <h:outputText value="#{estanciaVer.dias}" />
                                </p:column>
                                <p:column headerText="Servicio">
                                    <h:outputText value="#{estanciaVer.maeServicioValor}" />
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{estanciaVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{estanciaVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>

                        </p:panel>
                        <!-- justificacion estancias prolongadas -->
                        <p:panel id="pJustificacionEstanciaProlongadaVer" header="JUSTIFICACION ESTANCIAS PROLONGADAS" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaJustificacionEstanciaProlongadaVer" var="justificacionEstanciaProlongadaVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionJustificacionEstanciasProlongadaList}" widgetVar="tablaJustificacionEstanciaProlongadaVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Causa">
                                    <h:outputText value="#{justificacionEstanciaProlongadaVer.maeCausaEstanciaProlongadaValor}" />
                                </p:column>
                                <p:column headerText="Propuesta">
                                    <h:outputText value="#{justificacionEstanciaProlongadaVer.maePropuestaIntervensionValor}" />
                                </p:column>
                                <p:column headerText="Resumen Clínico">
                                    <h:outputText value="#{justificacionEstanciaProlongadaVer.resumenClinicoCorto}" />
                                    <p:commandButton rendered="#{justificacionEstanciaProlongadaVer.resumenClinicoCorto.length() > 0 }" actionListener="#{gestionAfiliadosPEBean.mostrarMensaje(justificacionEstanciaProlongadaVer.resumenClinico)}" icon="ui-icon-comment"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{justificacionEstanciaProlongadaVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{justificacionEstanciaProlongadaVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Patologias -->
                        <p:panel id="pPatologiaVer" header="PATOLOGIAS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaPatologiaVer" var="patologiaVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionPatologiaList}" widgetVar="tablaPatologiaVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Patologia">
                                    <h:outputText value="#{patologiaVer.maePatologiaValor}" />
                                </p:column>
                                <p:column headerText="Estado">
                                    <h:outputText value="#{patologiaVer.estadoStr}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{patologiaVer.descripcionCorto}" />
                                    <p:commandButton rendered="#{patologiaVer.descripcionCorto.length() > 0 }" actionListener="#{gestionAfiliadosPEBean.mostrarMensaje(patologiaVer.descripcion)}" icon="ui-icon-comment"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{patologiaVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{patologiaVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Inoportunidades -->
                        <p:panel id="pInoportunidadVer" header="INOPORTUNIDADES" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaInoportunidadVer" var="inoportunidadVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionInoportunidadList}" widgetVar="tablaInoportunidadVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{inoportunidadVer.maeTipoInoportunidadValor}" />
                                </p:column>
                                <p:column headerText="Dias">
                                    <h:outputText value="#{inoportunidadVer.diasInoportunidad}" />
                                </p:column>
                                <p:column headerText="Fecha Inicio">
                                    <h:outputText value="#{inoportundadVer.fechaInicioInoportunidad}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Fecha Fin">
                                    <h:outputText value="#{inoportunidadVer.fechaFinInoportunidad}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Observación">
                                    <h:outputText value="#{inoportunidadVer.observacionCorto}" />
                                    <p:commandButton rendered="#{inoportunidadVer.observacionCorto.length() > 0 }" actionListener="#{gestionAfiliadosPEBean.mostrarMensaje(inoportunidadVer.observacion)}" icon="ui-icon-comment"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{inoportunidadVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{inoportunidadVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Adversos -->
                        <p:panel id="pAdversoVer" header="ADVERSOS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaAdversoVer" var="adversoVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHosptalizacionAdversoList}" widgetVar="tablaAdversoVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Fecha Evento">
                                    <h:outputText value="#{adversoVer.fechaEvento}" />
                                </p:column>
                                <p:column headerText="Categoria">
                                    <h:outputText value="#{adversoVer.maeCategoriaEventoValor}" />
                                </p:column>
                                <p:column headerText="Subcategoria">
                                    <h:outputText value="#{adversoVer.maeSubcategoriaEventoValor}" />
                                </p:column>
                                <p:column headerText="Conclusión">
                                    <h:outputText value="#{adversoVer.maeConclusionEventoValor}" />
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{adversoVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{adversoVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Objeciones -->
                        <p:panel id="pObjecionVer" header="OBJECIONES" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaObjecionVer" var="objecionVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionObjecionList}" widgetVar="tablaObjecionVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{objecionVer.tipoTecnologiaStr}" />
                                </p:column>
                                <p:column headerText="Codigo Tecnologia">
                                    <h:outputText value="#{objecionVer.maTecnologiaCodigo}" />
                                </p:column>
                                <p:column headerText="Cantidad">
                                    <h:outputText value="#{objecionVer.cantidadSolicitada}" />
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{objecionVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{objecionVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Servicios -->
                        <p:panel id="pServicioVer" header="SERVICIOS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaServicioVer" var="servicioVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucHospitalizacionServicioList}" widgetVar="tablaServicioVer" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{servicioVer.tipoTecnologiaStr}" />
                                </p:column>
                                <p:column headerText="Codigo Tecnologia">
                                    <h:outputText value="#{servicioVer.maTecnologiaCodigo}" />
                                </p:column>
                                <p:column headerText="Fecha Prestación">
                                    <h:outputText value="#{servicioVer.fechaPrestacion}" />
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{servicioVer.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{servicioVer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Egreso -->
                        <p:panel id="pEgresoVer" header="EGRESO" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelEgresoVer" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Número Certificado"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.numCertificado}"/>

                                <h:outputText value="Fecha Egreso"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.fechaEgreso}"/>

                                <h:outputText value="Destino"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.maeDestinoEgresoValor}"/>

                                <h:outputText value="Conducta"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.maeConductaEgresoValor}"/>

                                <h:outputText value="Especialidad"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.maEspecialidadesValor}"/>

                                <h:outputText value="Fallecido"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.fallecidoStr}"/>

                                <h:outputText value="Valor Estancia"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.valorEstancia}"/>

                                <h:outputText value="Facturado"  class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.facturado}"/>

                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pDiagnosticoEgresoVer" header="DIAGNOSTICO EGRESO" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaDiagnosticosEgresoVer" var="diagnosticoEgresoVer" value="#{gestionAfiliadosPEBean.objetoHospitalizacion.aucEgresoId.aucDiagnosticosList}" widgetVar="tablaDiagnosticosVer" resizableColumns="true" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoEgresoVer.maDiagnosticoCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoEgresoVer.maDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Tipo diagnostico">
                                    <h:outputText value="#{diagnosticoEgresoVer.maeTipoDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Es Principal">
                                    <p:selectBooleanCheckbox id="principalDiangosticoVer" label="Es Principal" value="#{diagnosticoEgresoVer.principal}" disabled="true">
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:dataTable> 
                        </p:panel>
                        <!--Acciones-->
                        <p:panelGrid id="panelAccionesVer" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoVerHospitalizacion').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- descripciones genericas -->
            <p:dialog header="Descripción" widgetVar="dlgMsg" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native">
                    <h:form id="frmObservacion">
                        <p:panelGrid id="panelObservacion" columns="1" layout="grid" styleClass="showcase-text-align-center">
                            <p:inputTextarea  value="#{gestionAfiliadosPEBean.descripcionGenerica}" readonly="true" style="width: 100%;" />
                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgMsg').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>

            <!-- descripciones afiliado genericas -->
            <p:dialog header="Afiliado" widgetVar="dlgInfoAfiliado" class="modal-no-scroll" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:300px">
                    <h:form id="frmAfiliadoGeneral">
                        <p:panelGrid id="panelAfiliadoGeneral" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid" >

                            <h:outputText value="Estado"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeEstadoAfiliacionValor}" style="color: red !important; font-weight: bold !important;"  />

                            <h:outputText value="Nombres"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.nombres}" />

                            <h:outputText value="Apellidos"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.apellidos}" />

                            <h:outputText value="Tipo Documento"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeTipoDocumentoCodigo}" />

                            <h:outputText value="Documento"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.numeroDocumento}" />

                            <h:outputText value="Correo"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.email}" />

                            <h:outputText value="Dirección"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.direccionResidencia}" />

                            <h:outputText value="Ubicación"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.obtenerMunicipioDepartamento(gestionAfiliadosPEBean.objeto.asegAfiliado.residenciaUbicacion.id)}" />

                            <h:outputText value="Regimen"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.maeRegimenValor}" />

                            <h:outputText value="Contrato"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.idAfiliado}" />

                            <h:outputText value="Fecha Nacimiento"  class="header-back" />
                            <h:outputText value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.fechaNacimiento}" />

                        </p:panelGrid>
                        <p:panel header="Contactos Aseguramiento" toggleable="true" style="height:auto;">
                            <p:scrollPanel mode="native">
                                <p:dataTable id="tablaContactosGeneralAseg" var="contacto" 
                                             value="#{gestionAfiliadosPEBean.objeto.asegAfiliado.listaAsegAfiliadoContacto}" 
                                             widgetVar="tablaContactosGestionarAseg" scrollable="true" 
                                             emptyMessage="No se encontraron registros"
                                             style="font-size: 11px"
                                             >
                                    <p:column headerText="Número Contacto" style="font-size: 11px" >
                                        <h:outputText value="#{contacto.numeroContacto}"/>
                                    </p:column>
                                    <p:column headerText="Tipo" style="font-size: 11px" >
                                        <h:outputText value="#{contacto.maeTipoContactoValor}" style="font-size: 11px" />
                                    </p:column>
                                    <p:column headerText="Observación" style="font-size: 11px" >
                                        <h:outputText value="#{contacto.observacion}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:scrollPanel>
                        </p:panel>
                        <p:panel header="Contactos Programa" toggleable="true" style="height:auto;">
                            <p:scrollPanel mode="native">
                                <p:dataTable id="tablaContactoPersonaGeneral" widgetVar="tablaContactoPersonaGeneral" var="contacto" value="#{gestionAfiliadosPEBean.listaContactosPrograma}" scrollable="true" style="margin-bottom:20px;" emptyMessage="No se encontraron registros">
                                    <p:column headerText="Número Contacto" style="font-size: 11px" >
                                        <h:outputText value="#{contacto.numero}"  style="font-size: 11px" />
                                    </p:column>
                                    <p:column headerText="Tipo" style="font-size: 11px" >
                                        <h:outputText value="#{contacto.maeTipoContactoValor}"  style="font-size: 11px" />
                                    </p:column>
                                    <p:column headerText="Observación" style="font-size: 11px" >
                                        <h:outputText value="#{contacto.observacion}"  style="font-size: 11px" />
                                    </p:column>
                                </p:dataTable>
                            </p:scrollPanel>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgInfoAfiliado').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>

            <!-- Observacion para eliminar gestion-->
            <p:dialog header="Eliminar Gestión" widgetVar="confEliGestion" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <h:form id="frmEliminaGestion">
                    <p:panelGrid id="panelRechazarSugerido" columns="2" layout="grid" styleClass="showcase-text-align-center">

                        <h:outputText value="Observación"  class="header-back" />
                        <p:inputTextarea id="obselimiGestion" rows="5" cols="100" value="#{gestionAfiliadosPEBean.objetoGestion.borradoObservacion}" counter="display1Anular" maxlength="510" counterTemplate="{0} caracteres faltantes." autoResize="true" required="true" requiredMessage="Observación: Este campo es obligatorio"/>
                        <br/>
                        <h:outputText id="display1Anular" />

                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="2" style="text-align: center">
                                    <p:commandButton value="Eliminar" action="#{gestionAfiliadosPEBean.borrarGestion()}" validateClient="true" update="@form" />     
                                    <p:commandButton value="Cancelar" type="button" onclick="PF('confEliGestion').hide()" immediate="true" style="margin-left: 5px;"/>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>                
            </p:dialog>

            <!-- Gestionar -->
            <p:dialog header="Historial Edición" id="dlgHistorialEdiGestion" widgetVar="dialogoHistoricoEdicion" appendTo="@(body)" width="90%"  modal="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmHistoEdiGestion">                        
                        <p:dataTable var="objHG" value="#{gestionAfiliadosPEBean.listaHistoricoGestion}"     
                                     paginator="true" rows="#{gestionAfiliadosPEBean.tamanoPagina}" 
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,30,50,100" 
                                     emptyMessage="No se encontraron registros"
                                     id="tablaHistoricoGestiones"
                                     widgetVar="tablaGWidget"
                                     style="font-size:11px; text-align: center;"
                                     rowKey="#{objG.id}">

                            <p:column headerText="Observación">
                                <h:outputText value="#{objHG.descripcion}"/>                                    
                            </p:column>
                            <p:column headerText="Usuario">
                                <h:outputText value="#{objHG.usuarioCrea}"/>
                            </p:column>                                
                            <p:column headerText="Fecha Hora">
                                <h:outputText value="#{objHG.fechaHoraCrea}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                </h:outputText>
                            </p:column>                                
                        </p:dataTable>
                        <p:panelGrid style="width: 100%;">
                            <f:facet name="footer">                                                                
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoHistoricoEdicion').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>                        
                    </h:form>                     
                </p:scrollPanel>                
            </p:dialog>

            <!-- Historial edicion valores variable -->
            <p:dialog header="Historial Edición" id="dlgHistoricoValoresVariable" widgetVar="dialogoHistoricoValoresVariable" appendTo="@(body)" width="90%"  modal="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmHistoricoValoresVariable">                        
                        <p:dataTable var="valorHistorico" value="#{gestionAfiliadosPEBean.listadoValoresVariablesHistorico}"     
                                     paginator="true" rows="#{gestionAfiliadosPEBean.tamanoPagina}" 
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,30,50,100" 
                                     emptyMessage="No se encontraron registros"
                                     id="tablaHistoricoValoresVariables"
                                     widgetVar="tablaGWidget"
                                     style="font-size:11px; text-align: center;"
                                     rowKey="#{historicoValor.id}">

                            <p:column headerText="Nombre">
                                <h:outputText value="#{gestionAfiliadosPEBean.nombreVariable}"/>                                    
                            </p:column>
                            <p:column headerText="Valor">
                                <h:outputText value="#{valorHistorico.valor}"/>                                    
                            </p:column>
                            <p:column headerText="Usuario">
                                <h:outputText value="#{valorHistorico.usuarioCrea}"/>
                            </p:column>                                
                            <p:column headerText="Fecha Hora" sortBy="#{valorHistorico.fechaHoraCrea}">
                                <h:outputText value="#{valorHistorico.fechaHoraCrea}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                </h:outputText>
                            </p:column>                                
                        </p:dataTable>
                        <p:panelGrid style="width: 100%;">
                            <f:facet name="footer">                                                                
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoHistoricoValoresVariable').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>                        
                    </h:form>                     
                </p:scrollPanel>                
            </p:dialog>
            <!-- dialog cambio de programa -->
            <p:dialog  widgetVar="dialogoCambioPrograma"  appendTo="@(body)"  modal="true"  width="90%" dynamic="true">
                <header style="font-size: 30px;">
                    <b>Cambio de programa</b>
                </header>
                <h:form id="frmVerAfiliadoCambioPrograma" class="frmAuditoria" style="margin-top: -15px; margin-bottom: 15px; text-align: right;">
                    <h:outputText id="labelDatosAuditoria" value="#{gestionAfiliadosPEBean.objeto.datosAuditoria}"/>
                    <p:commandButton id="btnauditoria" class="btnAuditoria" action="#{gestionAfiliadosPEBean.mostrarAfiliadoGeneral()}" icon="ui-icon-person" title="Afiliado" />
                </h:form>
                <p:scrollPanel mode="native" style="height:auto" >
                    <h:form id="frmCambioPrograma">
                        <p:panel id="pnlSeleccionPrograma" header="Programa destino" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelSeleccionPrograma" columns="3"
                                         columnClasses="ui-grid-col-4,ui-grid-col-7,ui-grid-col-1"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <p:outputLabel value="Lista Agrupador" for="selPrograma" style="font-weight:bold" /> 
                                <p:selectOneMenu id="selPrograma" value="#{gestionAfiliadosPEBean.idProgramaDestino}"
                                                 filter="true" filterMatchMode="contains"
                                                 >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{gestionAfiliadosPEBean.listaProgramasAgrupador}" var="programaSeleccionado" itemLabel="#{programaSeleccionado.descripcionPrograma}" itemValue="#{programaSeleccionado.id}" />
                                    <p:ajax listener="#{gestionAfiliadosPEBean.seleccionarProgramaDestino}" update="panelBotones" />
                                </p:selectOneMenu>

                                <p:outputPanel id="panelBotones" layout="block">
                                    <p:spacer id="spacerBtnDetallePrograma" width="1" rendered="#{gestionAfiliadosPEBean.idProgramaDestino == null}" />
                                    <p:commandButton id="btnDetallePrograma" rendered="#{gestionAfiliadosPEBean.idProgramaDestino != null}"
                                                     icon="ui-icon-search" title="Ver detalle programa" immediate="true" ajax="true" 
                                                     oncomplete="PF('dialogoDetallePrograma').show()" update="frmDetallePrograma"
                                                     style="display: inline-flex; align-items: center; justify-content: center;  width: 6vw; height: 2vh; font-size: 1vw; padding: 0.5vw;" />
                                </p:outputPanel>

                                <p:outputLabel value="Observación" for="txtAreaObservacion" style="font-weight:bold" />
                                <p:inputTextarea id="txtAreaObservacion" value="#{gestionAfiliadosPEBean.programaTraslado.observacion}" rows="5" cols="30" required="true" maxlength="512" requiredMessage="La observación es requerida"/>

                            </p:panelGrid>

                        </p:panel>

                        <p:panel id="pDiagnosticoCrear" header="Diagnostico" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <div align="right"> 
                                <p:commandButton  immediate="true" actionListener="#{gestionAfiliadosPEBean.consultarDiagnostico()}" icon="ui-icon-clipboard" title="Agregar Diagnostico" style="margin-bottom: 0.4rem;"/>
                            </div>
                            <p:dataTable id="tablaDiagnosticosCrear" var="diagnosticoCrear"  class="listaDatos"  value="#{gestionAfiliadosPEBean.objeto.peAfiliadoDiagnosticoList}" 
                                         widgetVar="tablaDiagnosticosCrear" resizableColumns="false" 
                                         emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoCrear.maDiagnosticosCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoCrear.maDiagnosticosValor}" />
                                </p:column>                                
                                <p:column headerText="Principal">
                                    <p:selectBooleanCheckbox id="principalDiangosticoCrear" label="Es Principal" value="#{diagnosticoCrear.principal}">
                                        <p:ajax event="change" listener="#{gestionAfiliadosPEBean.cambiarPrincipalDiagnostico(diagnosticoCrear.maDiagnosticosId)}" update="tablaDiagnosticosCrear"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Borrar" immediate="true" action="#{gestionAfiliadosPEBean.borrarDiagnostico(diagnosticoCrear.maDiagnosticosId)}" icon="ui-icon-closethick" update="tablaDiagnosticosCrear">
                                        <p:confirm header="Confirmación" message="¿Está seguro que desea eliminar el registro?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable> 
                        </p:panel> 

                        <p:panelGrid id="panelCrearAdjuntar" style="width: 100%;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Guardar" type="button" onclick="GuardarCambioPrograma()" validateClient="true"/>
                                            <p:remoteCommand name="GuardarCambioPrograma" action="#{gestionAfiliadosPEBean.guardarCambioPrograma()}" update="frmCambioPrograma"/>
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoCambioPrograma').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>                
            </p:dialog>
            
            <!-- Detalle programa seleccionado -->
            <p:dialog header="Programa" widgetVar="dialogoDetallePrograma" appendTo="@(body)" modal="true"  width="95%" dynamic="true">
                <p:scrollPanel mode="native" style="height:auto">
                    <h:form id="frmDetallePrograma">
                        <p:panel id="pnlDetallePrograma" header="Detalle programa" style="margin-bottom:10px;" toggleable="true" rendered="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.id != null}">
                            <p:panelGrid id="panelGridVerDetallePrograma" columns="4"
                                         columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <h:outputText value="Id" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.id}" />

                                <h:outputText value="Activo" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.activoStr}" />

                                <h:outputText value="Código" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.codigoPrograma}" />

                                <h:outputText value="Agrupador" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.maeAgrupadorValor}" />

                                <h:outputText value="Descripción" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.descripcionPrograma}" />

                                <h:outputText value="Categoria" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.maeCategoriaValor}" />

                                <h:outputText value="Tipo" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.maeTipoProgramaValor}"  />

                                <h:outputText value="Lider de Programa" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.usuariosId.nombre}"  />

                                <h:outputText value="Registro Afiliado Solicitud" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getRegistrosAfiliados(gestionAfiliadosPEBean.programaTraslado.programaDestino.registroAfiliadoSolicitud)}"  />

                                <h:outputText value="Registro Afiliado Hospitalización" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getRegistrosAfiliados(gestionAfiliadosPEBean.programaTraslado.programaDestino.registroAfiliadoHospitalizacion)}"  />

                                <h:outputText value="Sexo Aplica" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getSexoAplicaDescripcion(gestionAfiliadosPEBean.programaTraslado.programaDestino.sexoAplica)}" />

                                <h:outputText value="Cantidad Registros" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.getCantidadRegistrosStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.cantidadRegistro)}" />

                                <h:outputText value="Aplica Rescate" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.aplicaRescate)}" />

                                <h:outputText value="Direcciona" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.direcciona)}" />

                                <h:outputText value="Registro Afiliado Afiliación" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.registroAfiliadoAfiliacion)}" />

                                <h:outputText value="Aplica Rescate Anexo3 Ambulatorio" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.aplicaRescateAnexo3Ambulatorio)}"  />

                                <h:outputText value="Aplica Rescate Anexo3 Hospitalario" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.aplicaRescateAnexo3Hospitalario)}"/>

                                <h:outputText value="Aplica Rescate Anexo2 Urgencias" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.aplicaRescateAnexo2Urgencia)}"/>

                                <h:outputText value="Aplica Recobro" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.aplicaRecobro)}"/>

                                <h:outputText value="Exonerado Copago" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{gestionAfiliadosPEBean.programaTraslado.programaDestino.getBooleanToStr(gestionAfiliadosPEBean.programaTraslado.programaDestino.exoneradoCopago)}"/>

                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
            <ui:include src="../maestro/seleccion/sel_diagnosticos.xhtml" />
        </center>

        <script>
            // Esperar a que el documento esté listo
            $(document).ready(function () {
                // Función para desplazar el contenido del modal hacia arriba al abrirlo
                var modalContent = $('.bodyDialog');
                modalContent.scrollTop(0); // Desplaza el contenido hacia arriba
            });
        </script>

    </ui:define>
</ui:composition>
