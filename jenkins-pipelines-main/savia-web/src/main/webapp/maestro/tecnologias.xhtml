<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR">
        <center>
            <style>
                .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                    border: 1px solid #e5e2e2;
                }

            </style>
            <script type="text/javascript">
                //<![CDATA[ 
                function noPuntuacion(e) {
                    var key = window.Event ? e.which : e.keyCode
                    return (key != 44 && key != 46 && key != 59)
                }
                ;
                function soloNumeros(e) {
                    var key = window.Event ? e.which : e.keyCode
                    return (key >= 48 && key <= 57)
                }
                ;
                //]]>
            </script>
            <h:form id="frmTecnologias">
                <p:remoteCommand name="cerrarDialogoSoat" action="#{tecnologiasBean.cerrarDialogoMaSoatTarifario()}"/>
                <p:remoteCommand name="cerrarDialogoIss2001" action="#{tecnologiasBean.cerrarDialogoMaIss2001Tarifario()}"/>
                <p:remoteCommand name="cerrarDialogoIss2000" action="#{tecnologiasBean.cerrarDialogoMaIss2000Tarifario()}"/>
                <p:remoteCommand name="cerrarDialogoServiciosHabilitacion" action="#{tecnologiasBean.cerrarDialogoMaServicioHabilitacion()}"/>
                <p:remoteCommand name="cerrarDialogoGrupo" action="#{tecnologiasBean.cerrarDialogoSelGrupo()}"/>
                <p:remoteCommand name="cerrarDialogoSelCodigoMipres" action="#{tecnologiasBean.cerrarDialogoSelCodigoMipres()}"/>
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{tecnologiasBean.modulo.descripcion}">#{tecnologiasBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{tecnologiasBean.accionListar}" title="Refrescar" ajax="false" actionListener="#{tecnologiasBean.refrescar}" icon="ui-icon-refresh"/>
                        <p:commandButton rendered="#{tecnologiasBean.accionCrear}" title="Crear" ajax="false" actionListener="#{tecnologiasBean.crear}" icon="ui-icon-document"/>
                    </f:facet>
                </p:toolbar>
                <p:dataTable var="obj" value="#{tecnologiasBean.lazyTecnologias}" paginator="true" rows="#{tecnologiasBean.tamanoPagina}" 
                             emptyMessage="No se encontraron registros"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                             widgetVar="tablaWidget"
                             style="font-size:11px;"
                             scrollable="true"
                             scrollWidth="100%"
                             rowKey="#{obj.id}" reflow="true">

                    <p:column style="text-align: center;">
                        <f:facet name="header">
                            <h:outputText value="Acciones"/>
                        </f:facet>    
                        <p:commandButton rendered="#{tecnologiasBean.accionVer}" title="Detalle Afiliado" actionListener="#{tecnologiasBean.ver(obj.id)}" icon="ui-icon-search"/>
                        <p:commandButton rendered="#{tecnologiasBean.accionEditar}" title="Realizar Novedad" actionListener="#{tecnologiasBean.editar(obj.id)}" icon="ui-icon-pencil"/>
                        <p:commandButton rendered="#{tecnologiasBean.accionBorrar}" title="Borrar" action="#{tecnologiasBean.borrar(obj.id)}" icon="ui-icon-trash">
                            <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                        </p:commandButton>
                    </p:column>

                    <p:column headerText="Cups" sortBy="#{obj.cups}" filterBy="#{obj.cups}">
                        <f:facet name="filter">
                            <p:inputText label="Cups" maxlength="8" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.cups}" title="#{obj.cups}"/>
                    </p:column>
                    <p:column headerText="Cups Descripción" sortBy="#{obj.cupsDescipcion}" filterBy="#{obj.cupsDescipcion}">
                        <f:facet name="filter">
                            <p:inputText label="Cups Descripción" maxlength="512" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.cupsDescipcion}" title="#{obj.cupsDescipcion}"/>
                    </p:column>
                    <p:column headerText="Código Propio" sortBy="#{obj.codigoPropio}" filterBy="#{obj.codigoPropio}">
                        <f:facet name="filter">
                            <p:inputText label="Código Propio" maxlength="16" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.codigoPropio}" title="#{obj.codigoPropio}"/>
                    </p:column>
                    <p:column headerText="Propio Descripción" sortBy="#{obj.propioDescripcion}" filterBy="#{obj.propioDescripcion}">
                        <f:facet name="filter">
                            <p:inputText label="Propio Descripción" maxlength="512" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.propioDescripcion}" title="#{obj.propioDescripcion}"/>
                    </p:column>

                    <p:column headerText="Aplica Subsidiado" filterBy="#{obj.aplicaSubsidiado}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" Si " itemValue="1"  />
                                <f:selectItem itemLabel=" No " itemValue="0" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{tecnologiasBean.getValorBandera(obj.aplicaSubsidiado)}" title="#{tecnologiasBean.getValorBandera(obj.aplicaSubsidiado)}"/>
                    </p:column>
                    <p:column headerText="Aplica Contributivo" filterBy="#{obj.aplicaContributivo}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" Si " itemValue="1"  />
                                <f:selectItem itemLabel=" No " itemValue="0" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{tecnologiasBean.getValorBandera(obj.aplicaContributivo)}" title="#{tecnologiasBean.getValorBandera(obj.aplicaContributivo)}"/>
                    </p:column>
                    <p:column headerText="Sexo aplica" filterBy="#{obj.sexoAplica}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" Masculino " itemValue="0"  />
                                <f:selectItem itemLabel=" Femenino " itemValue="1" />
                                <f:selectItem itemLabel=" Ambos " itemValue="2" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{tecnologiasBean.getSexoAplica(obj.sexoAplica)}" title="#{tecnologiasBean.getSexoAplica(obj.sexoAplica)}"/>
                    </p:column>
                    <p:column headerText="Nivel Complejidad" sortBy="#{obj.nivelComplejidad}" filterBy="#{obj.nivelComplejidad}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" 1 " itemValue="1"  />
                                <f:selectItem itemLabel=" 2 " itemValue="2" />
                                <f:selectItem itemLabel=" 3 " itemValue="3" />
                                <f:selectItem itemLabel=" 4 " itemValue="4" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.nivelComplejidad}" title="#{obj.nivelComplejidad}"/>
                    </p:column>
                    <p:column headerText="Edad Desde" sortBy="#{obj.edadDesde}" filterBy="#{obj.edadDesde}">
                        <f:facet name="filter">
                            <p:inputText label="Edad Desde" maxlength="8" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.edadDesde}" title="#{obj.edadDesde}"/>
                    </p:column>
                    <p:column headerText="Edad Hasta" sortBy="#{obj.edadHasta}" filterBy="#{obj.edadHasta}">
                        <f:facet name="filter">
                            <p:inputText label="Edad Hasta" maxlength="8" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.edadHasta}" title="#{obj.edadHasta}"/>
                    </p:column>
                    <p:column headerText="Unidad Desde" sortBy="#{obj.unidadDesde}" filterBy="#{obj.unidadDesde}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" Año " itemValue="1"  />
                                <f:selectItem itemLabel=" Mes " itemValue="2" />
                                <f:selectItem itemLabel=" Día " itemValue="3" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{tecnologiasBean.getUnidad(obj.unidadDesde)}" title="#{tecnologiasBean.getUnidad(obj.unidadDesde)}"/>
                    </p:column>
                    <p:column headerText="Unidad Hasta" sortBy="#{obj.unidadHasta}" filterBy="#{obj.unidadHasta}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" Año " itemValue="1"  />
                                <f:selectItem itemLabel=" Mes " itemValue="2" />
                                <f:selectItem itemLabel=" Día " itemValue="3" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{tecnologiasBean.getUnidad(obj.unidadHasta)}" title="#{tecnologiasBean.getUnidad(obj.unidadHasta)}"/>
                    </p:column>
                    <p:column headerText="Código Financiador" sortBy="#{obj.codigoFinanciador}" filterBy="#{obj.codigoFinanciador}">
                        <f:facet name="filter">
                            <p:inputText label="Código Financiador" maxlength="20" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.codigoFinanciador}" title="#{obj.codigoFinanciador}"/>
                    </p:column>
                    <p:column headerText="Frecuencia" sortBy="#{obj.frecuencia}" filterBy="#{obj.frecuencia}">
                        <f:facet name="filter">
                            <p:inputText label="Frecuencia" maxlength="8" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.frecuencia}" title="#{obj.frecuencia}"/>
                    </p:column>
                    <p:column headerText="Tarifa ISS2001" sortBy="#{obj.maIss2001Tarifario.monto}" >
                        <h:outputText value="#{obj.maIss2001Tarifario.monto}" title="#{obj.maIss2001Tarifario.monto}"/>
                    </p:column>
                    <p:column headerText="Tarifa ISS2000" sortBy="#{obj.maIss2000Tarifario.monto}" >
                        <h:outputText value="#{obj.maIss2000Tarifario.monto}" title="#{obj.maIss2000Tarifario.monto}"/>
                    </p:column>
                    <p:column headerText="Tarifa SOAT" >
                        <h:outputText value="#{obj.maSoatTarifario.listaValoresPorAnio}" title="#{obj.maSoatTarifario.listaValoresPorAnio}"/>
                    </p:column>
                    <p:column headerText="Cobertura" filterBy="#{obj.maeCoberturaId}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tecnologiasBean.listaCoberturas}" var="TIPO" itemValue="#{TIPO.id}" itemLabel="#{TIPO.nombre}" itemDescription="#{TIPO.descripcion}" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{tecnologiasBean.getCobertura(obj.maeCoberturaId)}" title="#{tecnologiasBean.getCobertura(obj.maeCoberturaId)}"/>
                    </p:column>
                    <p:column headerText="Activo" filterBy="#{obj.activo}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel=" Si " itemValue="1"  />
                                <f:selectItem itemLabel=" No " itemValue="0" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.activoStr}" title="#{obj.activoStr}"/>
                    </p:column>
                    <p:column headerText="Vigencia Autorización" filterBy="#{obj.vigenciaAutorizacion}">
                        <f:facet name="filter">
                            <p:inputText label="Vigencia Autorización" maxlength="3" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" >
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>
                        </f:facet>
                        <h:outputText value="#{obj.vigenciaAutorizacion}" title="#{obj.vigenciaAutorizacion}"/>
                    </p:column>
                </p:dataTable>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
            </h:form>

            <!-- Pantalla Ver -->
            <p:dialog header="Ver" widgetVar="dialogoVer" appendTo="@(body)" modal="true"  width="60%">
                <p:scrollPanel mode="native" style="height:350px">
                    <h:form class="frmAuditoria" style="text-align: right;">
                        <p:commandButton id="auditoria" class="btnAuditoria" action="#{tecnologiasBean.getAuditoria(tecnologiasBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>
                    <h:form id="frmVer">
                        <p:panelGrid id="panelTecnologias" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid" >

                            <p:outputLabel value="Código Propio" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.codigoPropio}" />

                            <p:outputLabel value="CUPS" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.cups}" />

                            <p:outputLabel value="Propio Descripción" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.propioDescripcion}" />

                            <p:outputLabel value="CUPS Descripción" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.cupsDescipcion}" />

                            <p:outputLabel value="Aplica Subsidiado" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getValorBandera(tecnologiasBean.objeto.aplicaSubsidiado)}" />

                            <p:outputLabel value="Aplica Contributivo" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getValorBandera(tecnologiasBean.objeto.aplicaContributivo)}" />

                            <p:outputLabel value="Sexo Aplica" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getSexoAplica(tecnologiasBean.objeto.sexoAplica)}" />

                            <p:outputLabel value="Nivel Complejidad" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.nivelComplejidad}" />

                            <p:outputLabel value="Edad Desde" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.edadDesde}" />

                            <p:outputLabel value="Edad Hasta" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.edadHasta}" />

                            <p:outputLabel value="Unidad Desde" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getUnidad(tecnologiasBean.objeto.unidadDesde)}" />

                            <p:outputLabel value="Unidad Hasta" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getUnidad(tecnologiasBean.objeto.unidadHasta)}" />

                            <p:outputLabel value="Código Financiador" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.codigoFinanciador}" />

                            <p:outputLabel value="Frecuencia" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.frecuencia}" />

                            <p:outputLabel value="Tipo Frecuencia" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getUnidad(tecnologiasBean.objeto.tipoFrecuencia)}"/>

                            <p:outputLabel value="Frecuencia 2" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.frecuencia2}" />

                            <p:outputLabel value="Tipo Frecuencia 2" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.getUnidad(tecnologiasBean.objeto.tipoFrecuencia2)}"/>

                            <p:outputLabel value="Cobertura" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.maeCoberturaValor}" />

                            <p:outputLabel value="Activo" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.activoStr}" />

                            <p:outputLabel value="Vigencia Autorización" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.vigenciaAutorizacion}" />

                            <p:outputLabel value="Tarifa ISS2001" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.maIss2001Tarifario.monto}" />

                            <p:outputLabel value="Tarifa ISS2000" style="font-weight:bold"/>
                            <p:outputLabel value="#{tecnologiasBean.objeto.maIss2000Tarifario.monto}" />

                            <p:outputLabel value="Tarifa SOAT" style="font-weight:bold"/>
                            <h:outputText value="#{tecnologiasBean.objeto.maSoatTarifario.listaValoresPorAnio}" />

                        </p:panelGrid>
                        <p:panel id="pnlVerGrupos" header="Grupos" style="margin:10px 0px" toggleable="true">
                            <p:dataTable id="tablaGrupos" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaTecnologiaGrupo}" 
                                         var="grupo" widgetVar="tablaGrupos" rowKey="#{grupo.id}">
                                <p:column headerText="Código">
                                    <h:outputText value="#{grupo.maeGrupoTecnologiaCodigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{grupo.maeGrupoTecnologiaValor}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlVerServicios" header="Servicios" style="margin:10px 0px" toggleable="true">
                            <p:dataTable id="tablaServicios" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaServicios}" 
                                         var="servicio" widgetVar="tablaServicios" rowKey="#{servicio.id}">
                                <p:column headerText="Código">
                                    <h:outputText value="#{servicio.codigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{servicio.nombreCorto}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlVerTecnologiaMipres" header="Códigos Mipres" style="margin:10px 0px" toggleable="true">
                            <p:dataTable id="tablaTecnologiaCodigoMipres" 
                                         style="margin: 10px;" value="#{tecnologiasBean.objeto.listaTecnologiaMipres}" 
                                         var="codigoMipres" widgetVar="tablaTecnologiaCodigoMipres" rowKey="#{codigoMipres.id}">
                                <p:column headerText="Código">
                                    <h:outputText value="#{codigoMipres.codigoMipres}"/>
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{codigoMipres.descripcion}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoVer').hide()" immediate="true" />
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- Pantalla Crear -->
            <p:dialog header="Crear" widgetVar="dialogoCrear" appendTo="@(body)" modal="true"  width="60%" dynamic="true">
                <p:scrollPanel mode="native" style="height:350px">
                    <h:form id="frmCrear">
                        <p:panelGrid id="panelCrear" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid" >

                            <p:outputLabel value="Código Propio" for="codigoPropio" style="font-weight:bold"/>
                            <p:inputText id="codigoPropio" label="Código Propio" value="#{tecnologiasBean.objeto.codigoPropio}" maxlength="32" required="true" requiredMessage="Código Propio: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9_ ]/i"/>
                            </p:inputText>

                            <p:outputLabel value="CUPS" for="cups" style="font-weight:bold"/>
                            <p:inputText id="cups" label="CUPS" value="#{tecnologiasBean.objeto.cups}" maxlength="8" required="true" requiredMessage="CUPS: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9_]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Propio Descripción" for="propioDescripcion" style="font-weight:bold"/>
                            <p:inputText id="propioDescripcion" label="Propio Descripción" value="#{tecnologiasBean.objeto.propioDescripcion}" maxlength="512" required="true" requiredMessage="Propio Descripción: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9\_\(\)\-\+\[\]\/\%\?\.\,\#&amp;&quot; ]/i"/>
                            </p:inputText>

                            <p:outputLabel value="CUPS Descripción" for="cupsDescripcion" style="font-weight:bold"/>
                            <p:inputText id="cupsDescripcion" label="CUPS Descripción" value="#{tecnologiasBean.objeto.cupsDescipcion}" maxlength="512" required="true" requiredMessage="CUPS Descripción: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9\_\(\)\-\+\[\]\/\%\?\.\,\#&amp;&quot; ]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Aplica Subsidiado" for="aplicaSubsidiado" style="font-weight:bold"/>
                            <p:selectBooleanButton id="aplicaSubsidiado" value="#{tecnologiasBean.objeto.aplicaSubsidiado}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" />

                            <p:outputLabel value="Aplica Contributivo" for="aplicaContributivo" style="font-weight:bold"/>
                            <p:selectBooleanButton id="aplicaContributivo" value="#{tecnologiasBean.objeto.aplicaContributivo}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" />

                            <p:outputLabel value="Sexo Aplica" for="sexoAplica" style="font-weight:bold"/>
                            <p:selectOneMenu id="sexoAplica" label="Sexo Aplica" value="#{tecnologiasBean.objeto.sexoAplica}"
                                             required="true" requiredMessage="Sexo Aplica: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Masculino" itemValue="0" />
                                <f:selectItem itemLabel="Femenino" itemValue="1" />
                                <f:selectItem itemLabel="Ambos" itemValue="2" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Nivel Complejidad" for="nivelComplejidad" style="font-weight:bold"/>
                            <p:selectOneMenu id="nivelComplejidad" label="Nivel Complejidad" value="#{tecnologiasBean.objeto.nivelComplejidad}"
                                             required="true" requiredMessage="Nivel Complejidad: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="1" itemValue="1" />
                                <f:selectItem itemLabel="2" itemValue="2" />
                                <f:selectItem itemLabel="3" itemValue="3" />
                                <f:selectItem itemLabel="4" itemValue="4" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Edad Desde" for="edadDesde" style="font-weight:bold"/>
                            <p:inputText id="edadDesde" label="Edad Desde" value="#{tecnologiasBean.objeto.edadDesde}" maxlength="8" required="true" requiredMessage="Edad Desde: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Edad Hasta" for="edadHasta" style="font-weight:bold"/>
                            <p:inputText id="edadHasta" label="Edad Hasta" value="#{tecnologiasBean.objeto.edadHasta}" maxlength="8" required="true" requiredMessage="Edad Hasta: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Unidad Desde" for="unidadDesde" style="font-weight:bold"/>
                            <p:selectOneMenu id="unidadDesde" label="Unidad Desde" value="#{tecnologiasBean.objeto.unidadDesde}"
                                             required="true" requiredMessage="Unidad Desde: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Unidad Hasta" for="unidadHasta" style="font-weight:bold"/>
                            <p:selectOneMenu id="unidadHasta" label="Unidad Hasta" value="#{tecnologiasBean.objeto.unidadHasta}"
                                             required="true" requiredMessage="Unidad Hasta: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Código Financiador" for="codigoFinanciador" style="font-weight:bold"/>
                            <p:inputText id="codigoFinanciador" label="Código Financiador" value="#{tecnologiasBean.objeto.codigoFinanciador}" maxlength="20" required="true" requiredMessage="Código Financiador: Este campo es obligatorio.">
                            </p:inputText>

                            <p:outputLabel value="Frecuencia" for="frecuencia" style="font-weight:bold"/>
                            <p:inputText id="frecuencia" label="Frecuencia" value="#{tecnologiasBean.objeto.frecuencia}" maxlength="8" required="true" requiredMessage="Frecuencia: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Tipo Frecuencia" for="tipoFrecuencia" style="font-weight:bold"/>
                            <p:selectOneMenu id="tipoFrecuencia" label="Tipo Frecuencia" value="#{tecnologiasBean.objeto.tipoFrecuencia}"
                                             required="true" requiredMessage="Tipo Frecuencia: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Frecuencia 2" for="frecuencia2" style="font-weight:bold"/>
                            <p:inputText id="frecuencia2" label="Frecuencia 2" value="#{tecnologiasBean.objeto.frecuencia2}" maxlength="8" required="false" requiredMessage="Frecuencia 2: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Tipo Frecuencia 2" for="tipoFrecuencia2" style="font-weight:bold"/>
                            <p:selectOneMenu id="tipoFrecuencia2" label="Tipo Frecuencia" value="#{tecnologiasBean.objeto.tipoFrecuencia2}"
                                             required="false" requiredMessage="Tipo Frecuencia 2: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Cobertura" for="cobertura" style="font-weight:bold"/>
                            <p:selectOneMenu id="cobertura" label="Cobertura" required="true" value="#{tecnologiasBean.objeto.maeCoberturaId}" 
                                             editable="fase" style="width: 170px;" requiredMessage="Cobertura: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tecnologiasBean.listaCoberturas}" var="TIPO" itemValue="#{TIPO.id}" itemLabel="#{TIPO.nombre}" itemDescription="#{TIPO.descripcion}" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Activo" for="activo" style="font-weight:bold"/>
                            <p:selectBooleanButton id="activo" value="#{tecnologiasBean.objeto.activo}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" />

                            <p:outputLabel value="Vigencia Autorización" for="vigenciaAutorizacion" style="font-weight:bold"/>
                            <p:inputText id="vigenciaAutorizacion" label="Vigencia Autorización" value="#{tecnologiasBean.objeto.vigenciaAutorizacion}" maxlength="3" required="true" requiredMessage="Vigencia Autorización: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Tarifa ISS2000" for="tarifaIss2000" style="font-weight:bold"/>
                            <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaIss2000Tarifario()}" icon="ui-icon-home" title="Tarifa ISS2000" style="width:60px"/>
                            <p:inputText id="tarifaIss2000" label="Tarifa ISS2000" value="#{tecnologiasBean.retornarCadena(tecnologiasBean.objeto.maIss2000Tarifario.codigo,tecnologiasBean.objeto.maIss2000Tarifario.descripcion)}" disabled="true" />
                            <p:spacer/>

                            <p:outputLabel value="Tarifa ISS2001" for="tarifaIss2001"/>
                            <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaIss2001Tarifario()}" icon="ui-icon-home" title="Tarifa ISS2001" style="width:60px"/>
                            <p:inputText id="tarifaIss2001" label="Tarifa ISS2001" value="#{tecnologiasBean.retornarCadena(tecnologiasBean.objeto.maIss2001Tarifario.codigo,tecnologiasBean.objeto.maIss2001Tarifario.descripcion)}" disabled="true" />
                            <p:spacer/>

                            <p:outputLabel value="Tarifa SOAT" for="tarifaSoat" style="font-weight:bold"/>
                            <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaSoatTarifario()}" icon="ui-icon-home" title="Tarifa SOAT" style="width:60px"/>
                            <p:inputText id="tarifaSoat" label="Tarifa SOAT" value="#{tecnologiasBean.retornarCadena(tecnologiasBean.objeto.maSoatTarifario.codigo,tecnologiasBean.objeto.maSoatTarifario.descripcion)}" disabled="true" />
                            <p:spacer/>

                        </p:panelGrid>
                        <p:panel id="pnlGrupos" header="Grupos" style="margin:10px 0px" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{tecnologiasBean.consultarGrupos()}" icon="ui-icon-clipboard" title="Grupos"/>
                            </div>
                            <p:dataTable id="tablaGrupos" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaTecnologiaGrupo}" 
                                         var="grupo" widgetVar="tablaGrupos" rowKey="#{grupo.id}">
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton icon="ui-icon-close" immediate="true" title="Retirar Grupo" action="#{tecnologiasBean.borrarGrupo(grupo)}"/>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{grupo.maeGrupoTecnologiaCodigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{grupo.maeGrupoTecnologiaValor}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlServicios" header="Servicios" style="margin:10px 0px" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaServicioHabilitacion()}" icon="ui-icon-clipboard" title="Servicios"/>
                            </div>
                            <p:dataTable id="tablaServicios" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaServicios}" 
                                         var="servicio" widgetVar="tablaServicios" rowKey="#{servicio.id}">
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton icon="ui-icon-close" immediate="true" title="Retirar Servicio" action="#{tecnologiasBean.borrarServicio(servicio)}"/>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{servicio.codigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{servicio.nombreCorto}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlTecnologiaMipres" header="Códigos Mipres" style="margin:10px 0px" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMpCodigoInsumo()}" icon="ui-icon-clipboard" title="Códigos Mipres"/>
                            </div>
                            <p:dataTable id="tablaTecnologiaCodigoMipres" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaCodigoInsumo}" 
                                         var="codigoMipres" widgetVar="tablaTecnologiaCodigoMipres" rowKey="#{codigoMipres.id}">
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton icon="ui-icon-close" immediate="true" title="Retirar Código" action="#{tecnologiasBean.borrarCodigoMipres(codigoMipres)}"/>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{codigoMipres.codigoMipres}"/>
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{codigoMipres.descripcion}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid id="panelCrear2" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton onclick="guardarRemote()" type="button" value="Guardar" validateClient="true"/>
                                            <p:remoteCommand name="guardarRemote" action ="#{tecnologiasBean.guardar()}" update="panelCrear,panelCrear2,pnlServicios,pnlGrupos"/>
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoCrear').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- Pantalla Editar -->
            <p:dialog header="Editar" widgetVar="dialogoEditar" appendTo="@(body)" modal="true"  width="60%" dynamic="true">
                <p:scrollPanel mode="native" style="height:350px">
                    <h:form class="frmAuditoria" style="text-align: right;">
                        <p:commandButton id="auditoria" class="btnAuditoria" action="#{tecnologiasBean.getAuditoria(tecnologiasBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>
                    <h:form id="frmEditar">
                        <p:panelGrid id="panelEditar" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid" >

                            <p:outputLabel value="Código Propio" for="codigoPropio"  style="font-weight:bold"/>
                            <p:inputText id="codigoPropio" label="Código Propio" value="#{tecnologiasBean.objeto.codigoPropio}" maxlength="32" required="true" requiredMessage="Código Propio: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9_ ]/i"/>
                            </p:inputText>

                            <p:outputLabel value="CUPS" for="cups"  style="font-weight:bold"/>
                            <p:inputText id="cups" label="CUPS" value="#{tecnologiasBean.objeto.cups}" maxlength="8" required="false" disabled="true"/>

                            <p:outputLabel value="Propio Descripción" for="propioDescripcion"  style="font-weight:bold"/>
                            <p:inputText id="propioDescripcion" label="Propio Descripción" value="#{tecnologiasBean.objeto.propioDescripcion}" maxlength="512" required="true" requiredMessage="Propio Descripción: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9\_\(\)\-\+\[\]\/\%\?\.\,\#&amp;&quot; ]/i"/>
                            </p:inputText>

                            <p:outputLabel value="CUPS Descripción" for="cupsDescripcion"  style="font-weight:bold"/>
                            <p:inputText id="cupsDescripcion" label="CUPS Descripción" value="#{tecnologiasBean.objeto.cupsDescipcion}" maxlength="512" required="true" requiredMessage="CUPS Descripción: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[a-z0-9\_\(\)\-\+\[\]\/\%\?\.\,\#&amp;&quot; ]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Aplica Subsidiado" for="aplicaSubsidiado"  style="font-weight:bold"/>
                            <p:selectBooleanButton id="aplicaSubsidiado" value="#{tecnologiasBean.objeto.aplicaSubsidiado}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" />

                            <p:outputLabel value="Aplica Contributivo" for="aplicaContributivo"  style="font-weight:bold"/>
                            <p:selectBooleanButton id="aplicaContributivo" value="#{tecnologiasBean.objeto.aplicaContributivo}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" />

                            <p:outputLabel value="Sexo Aplica" for="sexoAplica"  style="font-weight:bold"/>
                            <p:selectOneMenu id="sexoAplica" label="Sexo Aplica" value="#{tecnologiasBean.objeto.sexoAplica}"
                                             required="true" requiredMessage="Sexo Aplica: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Masculino" itemValue="0" />
                                <f:selectItem itemLabel="Femenino" itemValue="1" />
                                <f:selectItem itemLabel="Ambos" itemValue="2" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Nivel Complejidad" for="nivelComplejidad"  style="font-weight:bold"/>
                            <p:selectOneMenu id="nivelComplejidad" label="Nivel Complejidad" value="#{tecnologiasBean.objeto.nivelComplejidad}"
                                             required="true" requiredMessage="Nivel Complejidad: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="1" itemValue="1" />
                                <f:selectItem itemLabel="2" itemValue="2" />
                                <f:selectItem itemLabel="3" itemValue="3" />
                                <f:selectItem itemLabel="4" itemValue="4" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Edad Desde" for="edadDesde"  style="font-weight:bold"/>
                            <p:inputText id="edadDesde" label="Edad Desde" value="#{tecnologiasBean.objeto.edadDesde}" maxlength="8" required="true" requiredMessage="Edad Desde: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Edad Hasta" for="edadHasta"  style="font-weight:bold"/>
                            <p:inputText id="edadHasta" label="Edad Hasta" value="#{tecnologiasBean.objeto.edadHasta}" maxlength="8" required="true" requiredMessage="Edad Hasta: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Unidad Desde" for="unidadDesde"  style="font-weight:bold"/>
                            <p:selectOneMenu id="unidadDesde" label="Unidad Desde" value="#{tecnologiasBean.objeto.unidadDesde}"
                                             required="true" requiredMessage="Unidad Desde: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Unidad Hasta" for="unidadHasta"  style="font-weight:bold"/>
                            <p:selectOneMenu id="unidadHasta" label="Unidad Hasta" value="#{tecnologiasBean.objeto.unidadHasta}"
                                             required="true" requiredMessage="Unidad Hasta: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Código Financiador" for="codigoFinanciador"  style="font-weight:bold"/>
                            <p:inputText id="codigoFinanciador" label="Código Financiador" value="#{tecnologiasBean.objeto.codigoFinanciador}" maxlength="20" required="true" requiredMessage="Código Financiador: Este campo es obligatorio.">
                            </p:inputText>

                            <p:outputLabel value="Frecuencia" for="frecuencia"  style="font-weight:bold"/>
                            <p:inputText id="frecuencia" label="Frecuencia" value="#{tecnologiasBean.objeto.frecuencia}" maxlength="8" required="true" requiredMessage="Frecuencia: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Tipo Frecuencia" for="tipoFrecuencia"  style="font-weight:bold"/>
                            <p:selectOneMenu id="tipoFrecuencia" label="Tipo Frecuencia" value="#{tecnologiasBean.objeto.tipoFrecuencia}"
                                             required="true" requiredMessage="Tipo Frecuencia: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Frecuencia 2" for="frecuencia2"  style="font-weight:bold"/>
                            <p:inputText id="frecuencia2" label="Frecuencia 2" value="#{tecnologiasBean.objeto.frecuencia2}" maxlength="8" required="false" requiredMessage="Frecuencia 2: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Tipo Frecuencia 2" for="tipoFrecuencia2"  style="font-weight:bold"/>
                            <p:selectOneMenu id="tipoFrecuencia2" label="Tipo Frecuencia" value="#{tecnologiasBean.objeto.tipoFrecuencia2}"
                                             required="false" requiredMessage="Tipo Frecuencia 2: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Año" itemValue="1" />
                                <f:selectItem itemLabel="Mes" itemValue="2" />
                                <f:selectItem itemLabel="Día" itemValue="3" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Cobertura" for="cobertura"  style="font-weight:bold"/>
                            <p:selectOneMenu id="cobertura" label="Cobertura" required="true" value="#{tecnologiasBean.objeto.maeCoberturaId}" 
                                             editable="fase" style="width: 170px;" requiredMessage="Cobertura: Este campo es obligatorio.">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tecnologiasBean.listaCoberturas}" var="TIPO" itemValue="#{TIPO.id}" itemLabel="#{TIPO.nombre}" itemDescription="#{TIPO.descripcion}" />
                            </p:selectOneMenu>

                            <p:outputLabel value="Activo" for="activo"  style="font-weight:bold"/>
                            <p:selectBooleanButton id="activo" value="#{tecnologiasBean.objeto.activo}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" />

                            <p:outputLabel value="Vigencia Autorización" for="vigenciaAutorizacion"  style="font-weight:bold"/>
                            <p:inputText id="vigenciaAutorizacion" label="Vigencia Autorización" value="#{tecnologiasBean.objeto.vigenciaAutorizacion}" maxlength="3" required="true" requiredMessage="Vigencia Autorización: Este campo es obligatorio.">
                                <p:keyFilter regEx="/[0-9]/i"/>
                            </p:inputText>

                            <p:outputLabel value="Tarifa ISS2000" for="tarifaIss2000"  style="font-weight:bold"/>
                            <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaIss2000Tarifario()}" icon="ui-icon-home" title="Tarifa ISS2000" style="width:60px"/>
                            <p:inputText id="tarifaIss2000" label="Tarifa ISS2000" value="#{tecnologiasBean.retornarCadena(tecnologiasBean.objeto.maIss2000Tarifario.codigo,tecnologiasBean.objeto.maIss2000Tarifario.descripcion)}" disabled="true" />
                            <p:spacer/>

                            <p:outputLabel value="Tarifa ISS2001" for="tarifaIss2001"/>
                            <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaIss2001Tarifario()}" icon="ui-icon-home" title="Tarifa ISS2001" style="width:60px"/>
                            <p:inputText id="tarifaIss2001" label="Tarifa ISS2001" value="#{tecnologiasBean.retornarCadena(tecnologiasBean.objeto.maIss2001Tarifario.codigo,tecnologiasBean.objeto.maIss2001Tarifario.descripcion)}" disabled="true" />
                            <p:spacer/>

                            <p:outputLabel value="Tarifa SOAT" for="tarifaSoat"/>
                            <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaSoatTarifario()}" icon="ui-icon-home" title="Tarifa SOAT" style="width:60px"/>
                            <p:inputText id="tarifaSoat" label="Tarifa SOAT" value="#{tecnologiasBean.retornarCadena(tecnologiasBean.objeto.maSoatTarifario.codigo,tecnologiasBean.objeto.maSoatTarifario.descripcion)}" disabled="true" />
                            <p:spacer/>
                        </p:panelGrid>
                        <p:panel id="pnlGrupos" header="Grupos" style="margin:10px 0px" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{tecnologiasBean.consultarGrupos()}" icon="ui-icon-clipboard" title="Grupos"/>
                            </div>
                            <p:dataTable id="tablaGrupos" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaTecnologiaGrupo}" 
                                         var="grupo" widgetVar="tablaGrupos" rowKey="#{grupo.id}">
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton icon="ui-icon-close" immediate="true" rendered="#{grupo.nuevoRegistro}" title="Retirar Grupo" action="#{tecnologiasBean.borrarGrupo(grupo)}"/>
                                    <p:commandButton rendered="#{!grupo.nuevoRegistro}" title="Borrar Grupo" action="#{tecnologiasBean.eliminarGrupo(grupo)}" icon="ui-icon-trash" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{grupo.maeGrupoTecnologiaCodigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{grupo.maeGrupoTecnologiaValor}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlServicios" header="Servicios" style="margin:10px 0px" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMaServicioHabilitacion()}" icon="ui-icon-clipboard" title="Servicios"/>
                            </div>
                            <p:dataTable id="tablaServicios" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaServicios}" 
                                         var="servicio" widgetVar="tablaServicios" rowKey="#{servicio.id}">
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton icon="ui-icon-close" immediate="true" rendered="#{servicio.nuevoRegistro}" title="Retirar Servicio" action="#{tecnologiasBean.borrarServicio(servicio)}"/>
                                    <p:commandButton rendered="#{!servicio.nuevoRegistro}" title="Borrar Servicio" action="#{tecnologiasBean.eliminarServicio(servicio)}" icon="ui-icon-trash" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{servicio.codigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{servicio.nombreCorto}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pnlTecnologiaMipres" header="Códigos Mipres" style="margin:10px 0px" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{tecnologiasBean.consultarMpCodigoInsumo()}" icon="ui-icon-clipboard" title="Códigos Mipres"/>
                            </div>
                            <p:dataTable id="tablaTecnologiaCodigoMipres" 
                                         style="margin: 10px;" value="#{tecnologiasBean.listaCodigoInsumo}" 
                                         var="codigoMipres" widgetVar="tablaTecnologiaCodigoMipres" rowKey="#{codigoMipres.id}">
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton icon="ui-icon-close" immediate="true" title="Retirar Código" action="#{tecnologiasBean.eliminarCodigosMipres(codigoMipres)}"/>
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{codigoMipres.codigoMipres}"/>
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{codigoMipres.descripcion}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid id="panelEditar2" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton onclick="modificarRemote()" type="button" value="Guardar" validateClient="true"/>
                                            <p:remoteCommand name="modificarRemote" action ="#{tecnologiasBean.modificar()}" update="panelEditar,panelEditar2,pnlServicios,pnlGrupos"/>
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoEditar').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- Dialogo Consultar Grupos -->
            <p:dialog header="Consultar Grupos" widgetVar="dialogoGrupos" appendTo="@(body)" modal="true"  width="60%" dynamic="true">
                <p:scrollPanel mode="native" style="height:280px">
                    <h:form id="frmGrupos">
                        <p:panel id="pnlGruposSel" header="Grupos" style="margin:10px 0px;">
                            <p:dataTable id="tablaGruposSel" 
                                         style="margin: 10px; width: 100%" value="#{tecnologiasBean.listaGrupoTecnologia}" 
                                         var="grupoSel" widgetVar="tablaGruposSel" rowKey="#{grupoSel.id}" paginator="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage="No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect" listener="#{tecnologiasBean.onRowSelectGrupos}" oncomplete="cerrarDialogoGrupo()"/>
                                <p:column headerText="Código" filterBy="#{grupoSel.valor}">
                                    <h:outputText value="#{grupoSel.valor}"/>
                                </p:column>
                                <p:column headerText="Nombre" filterBy="#{grupoSel.nombre}">
                                    <h:outputText value="#{grupoSel.nombre}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid id="panelEditar2" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoGrupos').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <ui:include src="../maestro/seleccion/sel_iss2000.xhtml" />
            <ui:include src="../maestro/seleccion/sel_iss2001.xhtml" />
            <ui:include src="../maestro/seleccion/sel_soat.xhtml" />
            <ui:include src="../maestro/seleccion/sel_servicios_habilitacion.xhtml" />
            <ui:include src="../mipres/seleccion/sel_codigo_mipres.xhtml" />
        </center>
    </ui:define>
</ui:composition>
