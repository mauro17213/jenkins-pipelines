<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR"> 
        <h:outputStylesheet name="css/rips.css"/>
        <h:outputStylesheet name="css/solicitudes.css"/>
        <h:outputStylesheet name="css/general.css"/>
        <h:outputScript name="js/calendar-localization.js"/>
        <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
        <center>
            <style>
                .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                    border: 1px solid #e5e2e2;
                }
                .ui-panelgrid .ui-panelgrid-footer {
                    text-align: center;
                    padding: 2px 5px;
                }
                div#frmAuCotizaciones\:j_idt44_content {
                    border: 0px !important;
                    background: #fafafa!important;
                }
                div#frmAuCotizaciones\:j_idt46 {
                    background: #fafafa!important;
                    border: 0px!important;
                }
                td {
                    border: 1px solid #dddddd!important;
                }
                div#j_idt220 {
                    max-height: 510px!important;
                }
                div#j_idt37 {
                    min-height: 87vh
                }
                .ui-datepicker {
                    min-width: 250px!important;
                }
                div#j_idt38 {
                    min-height: 89vh!important;
                }
                .ui-splitter-panel.card > .ui-scrollpanel {
                    min-height: 89vh!important;
                }



            </style>
            <!-- Listar -->
            <h:form id="frmAuCotizaciones">               
                <p:toolbar style="width: 100%;">
                    <f:facet name="left" >
                        <p:panelGrid>
                            <p:row>
                                <p:column class="ui-g-12">
                                    <span title="#{auCotizacionBean.modulo.descripcion}" style="text-align: left;display: inherit;margin-bottom: 3px;margin-top: 3px;">#{auCotizacionBean.modulo.nombre}</span>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{auCotizacionBean.accionListar}" title="Refrescar" ajax="false" immediate="true"
                                         actionListener="#{auCotizacionBean.listar}" icon="ui-icon-refresh"/>
                    </f:facet>
                </p:toolbar>
                <p:dataTable var="obj" value="#{auCotizacionBean.lazyAuAnexo3}" paginator="true" rows="#{auCotizacionBean.tamanoPagina}" 
                             emptyMessage="No se encontraron registros"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                             widgetVar="tablaWidget"
                             style="font-size:11px;"
                             scrollable="true" scrollWidth="100%"
                             rowKey="#{obj.id}" reflow="true">   

                    <p:column style="text-align: center;">
                        <f:facet name="header">
                            <h:outputText value="Acciones"/>
                        </f:facet>    
                        <p:commandButton rendered="#{auCotizacionBean.accionVer}" title="Ver Solicitud" actionListener="#{auCotizacionBean.ver(obj.auAnexo3Id.id)}" icon="ui-icon ui-icon-search"/>
                        <p:commandButton rendered="#{auCotizacionBean.accionVer  and auCotizacionBean.validarEstadoCotizacion(obj.estado)}" title="Ver Cotización" actionListener="#{auCotizacionBean.verCotizacion(obj.id)}" icon="ui-icon ui-icon-document"/>
                        <p:commandButton rendered="#{auCotizacionBean.accionAdicional1 and auCotizacionBean.validarEstadoSinCotizacion(obj.estado)}" title="Gestionar" actionListener="#{auCotizacionBean.gestionar(obj.id)}" icon="ui-icon ui-icon-script"/>
                        <p:commandButton rendered="#{auCotizacionBean.accionAdicional2 and auCotizacionBean.validarEstadoCotizacion(obj.estado)}" title="Gestionar Adjunto" actionListener="#{auCotizacionBean.gestionarAdjuntos(obj.id)}" icon="ui-icon-clipboard"/>
                        <p:commandButton rendered="#{auCotizacionBean.accionAdicional3 and auCotizacionBean.validarEstadoSinCotizacion(obj.estado)}" title="Rechazar" actionListener="#{auCotizacionBean.verRechazo(obj.id)}" icon="ui-icon-closethick"/>
                        <p:commandButton rendered="#{auCotizacionBean.accionAdicional4 and obj.auItemBitacorasList.size() > 0}" title="Ver bitacoras" actionListener="#{auCotizacionBean.verBitacoras(obj)}" icon="ui-icon-folder-collapsed"/>
                    </p:column>

                    <p:column headerText="Numero solicitud" filterBy="#{obj.auAnexo3Id.id}">   
                        <f:facet name="filter">
                            <p:inputText label="Anexo3" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.id}" title="#{obj.auAnexo3Id.id}"/>
                    </p:column>

                    <p:column headerText="Ámbito" filterBy="#{obj.auAnexo3Id.maeAmbitoAtencionValor}" >    
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{auCotizacionBean.hashTipoAmbito.entrySet()}" 
                                               itemValue="#{tipoAmbito.key}"
                                               itemLabel="#{auCotizacionBean.getMapMaestroValue(auCotizacionBean.hashTipoAmbito, tipoAmbito.key).nombre}" 
                                               var="tipoAmbito"> 
                                </f:selectItems>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.maeAmbitoAtencionValor}" title="#{obj.auAnexo3Id.maeAmbitoAtencionValor}"/>
                    </p:column>

                    <p:column headerText="Tipo Documento" filterBy="#{obj.auAnexo3Id.asegAfiliadoId.maeTipoDocumento}">  
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{auCotizacionBean.hashTipoDocumentos.entrySet()}" 
                                               itemValue="#{tipoDocumento.key}"
                                               itemLabel="#{auCotizacionBean.getMapMaestroValue(auCotizacionBean.hashTipoDocumentos, tipoDocumento.key).nombre}" 
                                               var="tipoDocumento"> 
                                </f:selectItems>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.asegAfiliadoId.maeTipoDocumentoCodigo}" title="#{obj.auAnexo3Id.asegAfiliadoId.maeTipoDocumentoCodigo}"/>
                    </p:column>

                    <p:column headerText="Número Documento" filterBy="#{obj.auAnexo3Id.asegAfiliadoId.numeroDocumento}">  
                        <f:facet name="filter">
                            <p:inputText label="Cuenta" maxlength="128" onkeypress="if (event.keyCode == 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.asegAfiliadoId.numeroDocumento}" title="#{obj.auAnexo3Id.asegAfiliadoId.numeroDocumento}"/>
                    </p:column>

                    <p:column headerText="Apellidos" filterBy="#{obj.auAnexo3Id.asegAfiliadoId.primerApellido}">  
                        <f:facet name="filter">
                            <p:inputText label="Cuenta" maxlength="128" onkeypress="if (event.keyCode == 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.asegAfiliadoId.apellidos}" title="#{obj.auAnexo3Id.asegAfiliadoId.apellidos}"/>
                    </p:column>

                    <p:column headerText="Nombres" filterBy="#{obj.auAnexo3Id.asegAfiliadoId.primerNombre}">  
                        <f:facet name="filter">
                            <p:inputText label="Cuenta" maxlength="128" onkeypress="if (event.keyCode == 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.asegAfiliadoId.nombres}" title="#{obj.auAnexo3Id.asegAfiliadoId.nombres}"/>
                    </p:column>

                    <p:column headerText="Municipio afiliación" filterBy="#{obj.auAnexo3Id.asegAfiliadoId.afiliacionUbicacion.nombre}">  
                        <f:facet name="filter">
                            <p:inputText label="Cuenta" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.asegAfiliadoId.afiliacionUbicacion.nombre}" 
                                      title="#{obj.auAnexo3Id.asegAfiliadoId.afiliacionUbicacion.nombre}"/>
                    </p:column>
                    
                    <p:column headerText="Portabilidad" filterBy="#{obj.auAnexo3Id.asegAfiliadoId.tienePortabilidad}">  
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="No" itemValue="0" />
                                <f:selectItem itemLabel="Si" itemValue="1" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.asegAfiliadoId.tienePortabilidadStr}" 
                                      title="#{obj.auAnexo3Id.asegAfiliadoId.tienePortabilidadStr}"/>
                    </p:column>
                    
                    <p:column headerText="Fecha Solicitud" filterBy="#{obj.auAnexo3Id.fechaSolicitud}">  
                        <f:facet name="filter">
                            <p:inputText label="Fecha Solicitud" maxlength="10" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.fechaSolicitud}" 
                                      title="#{obj.auAnexo3Id.fechaSolicitud}">
                        </h:outputText>
                        <i class="#{auCotizacionBean.alertaFecha(obj.auAnexo3Id.fechaSolicitud)}" style="color:#e85050;font-size:16px;"></i>
                    </p:column>

                    <p:column headerText="Fecha Radicación" filterBy="#{obj.auAnexo3Id.fechaHoraCrea}">
                        <f:facet name="filter">
                            <p:inputText label="Fecha Radicación" maxlength="10" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.fechaHoraCrea}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm" timeZone="America/Bogota" />
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Estado" filterBy="#{obj.estado}"> 
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="Pendiente de Cotización" itemValue="7" />
                                <f:selectItem itemLabel="Con Cotización" itemValue="8" />
                                <f:selectItem itemLabel="Rechazo de Cotización" itemValue="10" />
                                <f:selectItem itemLabel="Con Pago Anticipado" itemValue="19" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.estadoStr}" title="#{obj.estado}"/>
                    </p:column>

                    <p:column headerText="Tipo Tecnología" filterBy="#{obj.tipoTecnologia}">   
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{auCotizacionBean.listaTipoTecnologia}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo.id}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.tipoTecnologiaStr}" title="#{obj.tipoTecnologiaStr}"/>
                    </p:column>

                    <p:column headerText="Tecnología" filterBy="#{obj.maTecnologiaValor}">  
                        <f:facet name="filter">
                            <p:inputText label="Tecnologia" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.maTecnologiaValor}" title="#{obj.maTecnologiaValor}"/>
                    </p:column>

                    <p:column headerText="Nivel de atención" filterBy="#{obj.nivel}">   
                        <f:facet name="filter">
                            <p:inputText label="Nivel de atención" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.nivel}" title="#{obj.nivel}"/>
                    </p:column>

                    <p:column headerText="Diagnostico" filterBy="#{obj.maDiagnosticoValor}">
                        <f:facet name="filter">
                            <p:inputText label="Diagnostico" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.maDiagnosticoValor}" title="#{obj.maDiagnosticoValor}">
                        </h:outputText>
                    </p:column>

                    <p:column headerText="IPS Solicitante" filterBy="#{obj.auAnexo3Id.cntPrestadorSedeId.cntPrestador.razonSocial}">
                        <f:facet name="filter">
                            <p:inputText label="IPS Solicitante" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.auAnexo3Id.cntPrestadorSedeId.cntPrestador.razonSocial}" title="#{obj.auAnexo3Id.cntPrestadorSedeId.cntPrestador.razonSocial}">
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </h:form>
            <!-- Ver Solicitud -->
            <p:dialog header="Ver Solicitud" widgetVar="dialogoVerSolicitud" appendTo="@(body)" modal="true" width="90%" dynamic="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height: 500px" >
                    <h:form id="frmVer">
                        <!--Afiliado-->
                        <p:panel id="pAfiliadoVer" header="Afiliado" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelAfiliadoVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel id="tipoDocumentoVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.maeTipoDocumentoCodigo}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold"/>
                                <p:outputLabel id="numeroDocumentoVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.numeroDocumento}" />

                                <p:outputLabel value="Contrato Afiliado" style="font-weight:bold"/>
                                <p:outputLabel id="codigoAfiliadoVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.idAfiliado}"/>

                                <p:outputLabel value="Nombres" style="font-weight:bold"/>
                                <p:outputLabel id="nombresVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.nombres}"/>

                                <p:outputLabel value="Apellidos" style="font-weight:bold"/>
                                <p:outputLabel id="apellidosVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.apellidos}"/>

                                <p:outputLabel value="Fecha Nacimiento" style="font-weight:bold"/>
                                <p:outputLabel id="fechaNacimientoVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.fechaNacimiento}"/>

                                <p:outputLabel value="Dirección" style="font-weight:bold"/>
                                <p:outputLabel id="direccionVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.direccionResidencia}"/>

                                <p:outputLabel value="Regimen" style="font-weight:bold"/>
                                <p:outputLabel id="regimenVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.maeRegimenValor}"/>

                                <p:outputLabel value="Genero" style="font-weight:bold"/>
                                <p:outputLabel id="generoVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.maeGeneroValor}"/>

                                <p:outputLabel value="Edad" style="font-weight:bold"/>
                                <p:outputLabel id="edadVer" value="#{auCotizacionBean.calcularEdad(auCotizacionBean.objetoAnexo3.asegAfiliadoId.fechaNacimiento)}"/>

                                <p:outputLabel value="Email" style="font-weight:bold"/>
                                <p:outputLabel id="emailVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.email}"/>

                                <p:outputLabel value="Teléfono Fijo" style="font-weight:bold"/>
                                <p:outputLabel id="telefonoVer" value="#{auCotizaciondBean.objetoAnexo3.asegAfiliadoId.telefonoFijo}"/>

                                <p:outputLabel value="Celular" style="font-weight:bold"/>
                                <p:outputLabel id="celularVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.telefonoMovil}"/>

                                <p:outputLabel value="Nivel Sisbén" style="font-weight:bold"/>
                                <p:outputLabel id="nivelSisbenVer" value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.nivelSisben}"/>

                                <p:outputLabel value="Discapacidad" style="font-weight:bold"/>
                                <p:outputLabel id="discapacidadVer" value="#{auCotizacionBean.obtenerBoolean(auCotizacionBean.objetoAnexo3.asegAfiliadoId.discapacidad)}"/>

                                <p:outputLabel value="Tipo Afiliado" style="font-weight:bold"/>
                                <p:outputLabel id="tipoAfiliadoVer" 
                                               value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.maeTipoAfiliadoValor}"/>

                                <p:outputLabel value="Estado Afiliacion" style="font-weight:bold"/>
                                <p:outputLabel id="estadoAfiliacionVer" 
                                               value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.maeEstadoAfiliacionValor}" style="font-weight:bold"/>

                                <p:outputLabel value="Grupo Poblacional" style="font-weight:bold"/>
                                <p:outputLabel id="grupoPoblacionalVer" 
                                               value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.maeGrupoPoblacionalValor}"/>

                                <p:outputLabel value="IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.primariaPrestadorSede.nombreSede}"/>

                                <p:outputLabel value="Dirección IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.primariaPrestadorSede.direccion}"/>

                                <p:outputLabel value="Teléfono IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{auCotizacionBean.objetoAnexo3.asegAfiliadoId.primariaPrestadorSede.telefonoAdministrativo}"/>

                                <p:outputLabel value="Ciudad/Municipio IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{auCotizacionBean.obtenerMunicipio(auCotizacionBean.objetoAnexo3.asegAfiliadoId.primariaPrestadorSede.ubicacionId)}"/>

                                <p:outputLabel value="Departamento IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{auCotizacionBean.obtenerDepartamento(auCotizacionBean.objetoAnexo3.asegAfiliadoId.primariaPrestadorSede.ubicacionId)}"/>

                            </p:panelGrid>                            
                        </p:panel>
                        <!--Acompañante-->
                        <p:panel id="pAcompananteVer" header="Acompañante" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelAcompananteVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Nombre Completo" style="font-weight:bold"/>
                                <p:outputLabel id="nombreAcompananteVer" value="#{auCotizacionBean.objetoAnexo3.nombreAcompanante}" />

                                <p:outputLabel value="Teléfono Fijo" style="font-weight:bold"/>
                                <p:outputLabel id="telefonoAcompananteVer" value="#{auCotizacionBean.objetoAnexo3.telefonoAcompanante}"/>

                                <p:outputLabel value="Celular" style="font-weight:bold"/>
                                <p:outputLabel id="celularAmponanteVer" value="#{auCotizacionBean.objetoAnexo3.celularAcompanente}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Tipo de solicitud-->
                        <p:panel id="pTipoSolVer" header="Tipo de solicitud" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelTipoSolVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Servicio de atención" style="font-weight:bold"/>
                                <p:outputLabel id="serAtenVer" value="#{auCotizacionBean.objetoAnexo3.maServicioHabilitadoValor}"/>

                                <p:outputLabel value="Ámbito" style="font-weight:bold"/>
                                <p:outputLabel id="ambitoVer" value="#{auCotizacionBean.objetoAnexo3.maeAmbitoAtencionValor}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Solicitud-->
                        <p:panel id="pSolVer" header="Solicitud" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelSolVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Número Solicitud" style="font-weight:bold"/>
                                <p:outputLabel id="numSolicitudVer" value="#{auCotizacionBean.objetoAnexo3.numero}"/>

                                <p:outputLabel value="Fecha Orden Medica" style="font-weight:bold"/>
                                <p:outputLabel id="fechaOrdenVer" value="#{auCotizacionBean.objetoAnexo3.fechaSolicitud}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--IPS Solicita-->
                        <p:panel id="pIpsVer" header="IPS Solicita" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelipsVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel id="tipoDocumentoIpsVer" value="#{auCotizacionBean.obtenerTipoDocumentoIps(auCotizacionBean.objetoAnexo3.cntPrestadorSedeId.cntPrestador.maeTipoDocumentoId)}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold"/>
                                <p:outputLabel id="numeroDocumentoIpsVer" value="#{auCotizacionBean.objetoAnexo3.cntPrestadorSedeId.cntPrestador.numeroDocumento}"/>

                                <p:outputLabel value="Razón Social" style="font-weight:bold"/>
                                <p:outputLabel id="razonSocialVer" value="#{auCotizacionBean.objetoAnexo3.cntPrestadorSedeId.cntPrestador.razonSocial}" />

                                <p:outputLabel value="Departamento" style="font-weight:bold"/>
                                <p:outputLabel id="departamentoIpsVer" value="#{auCotizacionBean.obtenerDepartamento(auCotizacionBean.objetoAnexo3.cntPrestadorSedeId.ubicacionId)}" />

                                <p:outputLabel value="Municipio" style="font-weight:bold"/>
                                <p:outputLabel id="municipioIpsVer" value="#{auCotizacionBean.obtenerMunicipio(auCotizacionBean.objetoAnexo3.cntPrestadorSedeId.ubicacionId)}" />

                                <p:outputLabel value="Dirección" style="font-weight:bold"/>
                                <p:outputLabel id="direccionIpsVer" value="#{auCotizacionBean.objetoAnexo3.cntPrestadorSedeId.direccion}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Datos del profesional-->
                        <p:panel id="pProfesionalVer" header="Información Profesional" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelProfesionalVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel id="tipoDocumentoProfVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.maeTipoDocumentoValor}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold"/>
                                <p:outputLabel id="numeroDocumentoProfVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.documento}"/>

                                <p:outputLabel value="Primer Nombre" style="font-weight:bold"/>
                                <p:outputLabel id="primerNombreProfesionalVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.primerNombre}" />

                                <p:outputLabel value="Segundo Nombre" for="segundoNombreProfesionalVer" style="font-weight:bold"/>
                                <p:outputLabel id="segundoNombreProfesionalVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.segundoNombre}" />

                                <p:outputLabel value="Primer Apellido" style="font-weight:bold"/>
                                <p:outputLabel id="primerApellidoProfesionalVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.primerApellido}" />

                                <p:outputLabel value="Segundo Apellido" style="font-weight:bold"/>
                                <p:outputLabel id="segundoApellidoProfesionalVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.segundoApellido}" />

                                <p:outputLabel value="Número RM" style="font-weight:bold"/>
                                <p:outputLabel id="registroProfVer" value="#{auCotizacionBean.objetoAnexo3.cntProfesionaleId.registroMedico}"/>

                                <p:outputLabel value="Especialidad" for="especialidadProfVer" style="font-weight:bold"/>
                                <p:outputLabel id="especialidadProfVer" value="#{auCotizacionBean.objetoAnexo3.objetoEspecialidad.nombre}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Infomarcion de la atencion-->
                        <p:panel id="pInfoAtenVer" header="Información de la atención" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelInfoAtenVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Origen de la atención" style="font-weight:bold"/>
                                <p:outputLabel id="origenAtenVer" value="#{auCotizacionBean.objetoAnexo3.maeOrigenAtencionValor}" />

                                <p:outputLabel value="Prioridad de la atención" style="font-weight:bold"/>
                                <p:outputLabel id="prioridadAtenVer" value="Prioridad de la atención"/>

                                <p:outputLabel value="Tipo Servicio Solicitado" style="font-weight:bold"/>
                                <p:outputLabel id="servicioAtenVer" value="#{auCotizacionBean.objetoAnexo3.maServicioSolicitadoValor}"/>

                                <p:outputLabel value="Ubicación del paciente" for="ubicacionAtenVer" style="font-weight:bold"/>
                                <p:outputLabel id="ubicacionAtenVer" value="#{auCotizacionBean.objetoAnexo3.maeUbicacionValor}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Diagnostico-->
                        <p:panel id="pDiagnosticoVer" header="Diagnostico" style="margin-bottom:10px;" collapsed="false" toggleable="true">                           
                            <p:dataTable id="tablaDiagnosticosVer" var="diagnosticoVer" value="#{auCotizacionBean.objetoAnexo3.auAnexo3DiagnosticosList}" widgetVar="tablaDiagnosticosVer" resizableColumns="true" emptyMessage="No se encontraron registros" style="text-align: center" >
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnosticoVer.maDiagnosticosCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{diagnosticoVer.maDiagnosticosValor}" />
                                </p:column>
                                <p:column headerText="Tipo diagnostico">
                                    <h:outputText value="#{diagnosticoVer.maeTipoDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Es Principal">
                                    <h:outputText value="#{auCotizacionBean.obtenerBoolean(diagnosticoVer.principal)}" />
                                </p:column>
                            </p:dataTable> 
                        </p:panel>
                        <!--Prescripciones-->
                        <p:panel id="pPrescripcionVer" header="Prescripciones" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaTecnologiasVer" var="tecnologiasVer" value="#{auCotizacionBean.objetoAnexo3.auAnexo3ItemsList}" widgetVar="tablaProcedimientosVer" resizableColumns="true" emptyMessage="No se encontraron procedimientos" style="text-align: center">
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{auCotizacionBean.obtenerTipoTencnologia(tecnologiasVer.tipoTecnologia)}" />
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{tecnologiasVer.maTecnologiaCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{tecnologiasVer.maTecnologiaValor}" />
                                </p:column>
                                <p:column headerText="Cantidad">
                                    <h:outputText value="#{tecnologiasVer.cantidadSolicitada}" />
                                </p:column>
                                <p:column headerText="Diagnóstico">
                                    <h:outputText value="#{tecnologiasVer.maDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Estado">
                                    <h:outputText value="#{tecnologiasVer.getEstadoStr()}" />
                                </p:column>
                                <p:column headerText="Acciones">
                                    <p:commandButton rendered="#{tecnologiasVer.posfechado}" actionListener="#{auCotizacionBean.verPosfechados(tecnologiasVer)}" icon="ui-icon-clipboard" title="Ver Posfechados"/>
                                    <p:commandButton rendered="#{tecnologiasVer.auItemBitacorasList.size() > 0}" actionListener="#{auCotizacionBean.verBitacoras(tecnologiasVer)}" icon="ui-icon-folder-collapsed" title="Ver Bitacoras"/>
                                    <p:commandButton id="auditoria" class="btnAuditoria" action="#{auCotizacionBean.getAuditoria(tecnologiasVer.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                </p:column>
                            </p:dataTable>       
                        </p:panel>
                        <!--Programa especial-->
                        <p:panel id="pProgramaEspecialVer" header="Programa Especial - RIAS" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelProgramaEspecialVer" columns="2" layout="grid" styleClass="showcase-text-align-center">

                                <p:outputLabel value="Programa Especial" style="font-weight:bold"/>
                                <p:outputLabel id="programaVer" value="#{auCotizacionBean.objetoAnexo3.peProgramaEspecialValor}"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Justificacion-->
                        <p:panel id="pJustifiacionVer" header="Justificación Clínica" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelJustificacionVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-12"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:inputTextarea value="#{auCotizacionBean.objetoAnexo3.justificacionClinica}" disabled="true"/>

                            </p:panelGrid>
                        </p:panel>
                        <!--Soportes fisicos-->
                        <p:panel id="pSoporteVer" header="Soportes Fisicos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaSoportesVer" var="soportesVer" value="#{auCotizacionBean.objetoAnexo3.auSolicitudAdjuntosList}" widgetVar="tablaSoportesVer" resizableColumns="true" emptyMessage="No se encontraron registros" >
                                <p:column headerText="Archivos adjuntos">
                                    <h:outputText value="#{soportesVer.nombre}" />
                                </p:column>
                                <p:column headerText="Tipo documento">
                                    <h:outputText value="#{soportesVer.maeTipoArchivoValor}" />
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{auCotizacionBean.descargarAdjuntoAnexo3(soportesVer)}" />
                                    </p:commandButton>
                                </p:column>                                    
                            </p:dataTable> 
                        </p:panel>
                        <!--Tutelas-->
                        <p:panel id="pTutelaVer" header="Tutelas" style="margin-bottom:10px;" collapsed="true" toggleable="true">
                            <p:panelGrid id="panelTutelaVer" style="width:100%;margin:10px 0px">

                            </p:panelGrid>
                        </p:panel>
                        <!--Acciones-->
                        <p:panelGrid id="panelVer" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerSolicitud').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Gestionar -->
            <p:dialog id="dialogoGestionar" widgetVar="dialogoGestionar" class="modal-no-scroll" appendTo="@(body)"
                      modal="true" draggable="false" dynamic="true" style="max-height:90%; max-width: 1600px">
                <header style="font-size: 30px;">
                    <b>Gestionar</b>
                </header>
                <h:form id="frmAuditoriaGestionar" class="frmAuditoria" style="margin-top: -15px; text-align: right;">
                    <p:outputLabel id="labelDatosAuditoria" value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.datosAuditoria} "/>
                    <p:commandButton id="auditoria" class="btnAuditoria" action="#{auCotizacionBean.mostrarAfiliadoGeneral()}" icon="ui-icon-person" title="Afiliado" />
                </h:form> 
                <p:scrollPanel mode="native" style="max-height: 400px;">
                    <h:form id="frmGestionar">
                        <p:panel id="pGestionar" header="Gestionar Cotizaciones" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid style="width: 100%;" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Código #{auCotizacionBean.validarTipoItemAgrupador(auCotizacionBean.objeto.tipoTecnologia)?'agrupador':'tecnología'}" style="font-weight:bold;"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{auCotizacionBean.objeto.maTecnologiaCodigo}">
                                        </p:outputLabel>
                                        <ui:fragment rendered="#{auCotizacionBean.validarTipoItemAgrupador(auCotizacionBean.objeto.tipoTecnologia)}">
                                            <p:column styleClass="ui-widget-header">
                                                <p:outputLabel value="Código tecnología" for="medicamentoAgrupador" style="font-weight:bold; position: relative; left: 30px"/>
                                            </p:column>
                                            <p:column >
                                                <p:selectOneMenu id="medicamentoAgrupador" value="#{auCotizacionBean.objetoCotizacion.maMedicamentoId}" style="width: 50%; left: 50px;"
                                                                 required="true" requiredMessage="Código tecnología: este campo es obligatorio">
                                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                                    <f:selectItems value="#{auCotizacionBean.listaMedicamentoDeAgrupador}" var="med" itemValue="#{med.id}" itemLabel="#{med.cum}" itemDescription="#{med.descripcionEstandarizada}"/>
                                                </p:selectOneMenu>  
                                            </p:column>
                                        </ui:fragment>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Código Prestador" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.cntPrestadorSedeId.cntPrestador.codigoMinSalud}"></p:outputLabel>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="IPS Solicita" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-10">
                                        <p:outputLabel style="width:99%" value="#{auCotizacionBean.objeto.auAnexo3Id.cntPrestadorSedeId.nombreSede}"></p:outputLabel>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tipo tecnología" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{auCotizacionBean.objeto.tipoTecnologiaStr}">
                                        </p:outputLabel> 
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Descripción tecnología" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel style="width:99%" value="#{auCotizacionBean.objeto.maTecnologiaValor}"></p:outputLabel>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Posfechado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:commandButton disabled="#{!auCotizacionBean.objeto.posfechado}" immediate="true" actionListener="#{auCotizacionBean.verPosfechados(auCotizacionBean.objeto)}" icon="ui-icon-clipboard" title="Ver Posfechados" style="width:40px"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tipo tarifa" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:selectOneMenu id="tipoTarifa" value="#{auCotizacionBean.objetoCotizacion.tipoTarifa}"
                                                 disabled="#{auCotizacionBean.habilitarTarifa()}">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="PROPIA" itemValue="0" />
                                            <f:selectItem itemLabel="SOAT" itemValue="1" />
                                            <f:selectItem itemLabel="ISS2000" itemValue="2" />
                                            <f:selectItem itemLabel="ISS2001" itemValue="3" />
                                            <p:ajax event="change" listener="#{auCotizacionBean.obtenerValorTecnologia()}" />
                                        </p:selectOneMenu> 
                                    </p:column>
                                     <p:column class="ui-g-2">
                                         <p:outputLabel value="% Tarifa" style="font-weight:bold"/>
                                    </p:column>
                                     <p:column class="ui-g-2">
                                         <p:inputNumber id="porcetanjeTarifa" disabled="#{auCotizacionBean.habilitarTarifa()}" value="#{auCotizacionBean.objetoCotizacion.porcentajeNegociacion}" symbol="%" 
                                               decimalPlaces="2" minValue="-99.99" emptyValue="0" maxValue="100" symbolPosition="s">
                                            <f:ajax event="keyup" delay="2000" listener="#{auCotizacionBean.calcularValor}" />
                                        </p:inputNumber>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Aplicar Anticipo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                       <p:selectBooleanButton disabled="#{auCotizacionBean.habilitarBotonAnticipos()}" id="fallecidoEgresoGestionar" onLabel="Sí" offLabel="No" offIcon="ui-icon-closethick" onIcon="ui-icon-check" value="#{auCotizacionBean.objetoCotizacion.habilitarCamposAnticipos}" style="width:60px">
                                            <p:ajax event="change" update="btnRelacionarAnticipo btnIpsPrestador valorTotal pagoAnticipado tipoTarifa porcetanjeTarifa"/>
                                        </p:selectBooleanButton>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Relacionar Anticipo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:commandButton id="btnRelacionarAnticipo" immediate="true" action="#{auCotizacionBean.consultarAnticipos()}" icon="pi pi-credit-card" title="Anticipo" style="width:40px" disabled="#{!auCotizacionBean.objetoCotizacion.habilitarCamposAnticipos}"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Número Anticipo" style="font-weight:bold"/>
                                    </p:column>
                                     <p:column class="ui-g-2">
                                        <p:outputLabel id="numeroAnticipo" value="#{auCotizacionBean.objetoCotizacion.antAnticiposId.id}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="IPS Prestador" for="ips" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-10">
                                        <p:outputLabel id="ips" value="#{auCotizacionBean.objetoPrestadorSede.nombreSede}"/>
                                        <p:commandButton id="btnIpsPrestador" immediate="true" action="#{auCotizacionBean.consultarIPS()}" icon="ui-icon-home" title="IPS" style="width:40px" disabled="#{auCotizacionBean.objetoCotizacion.habilitarCamposAnticipos}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor tecnología" for="valorTotal" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:inputNumber id="valorTotal" decimalPlaces="2" decimalSeparator="," 
                                               symbolPosition="p" symbol="$" thousandSeparator="."
                                               value="#{auCotizacionBean.objetoCotizacion.valorTecnologia}" minValue="0" 
                                               required="true" disabled="#{auCotizacionBean.habilitarValorTotal()}" requiredMessage="Valor tecnología: Este campo es obligatorio">
                                        </p:inputNumber>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Activo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:selectBooleanButton id="activo" value="#{auCotizacionBean.objetoCotizacion.activo}" onLabel="Si" offLabel="No"
                                                       onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" required="false">
                                        </p:selectBooleanButton>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Pago Anticipado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:selectBooleanButton id="pagoAnticipado" value="#{auCotizacionBean.objetoCotizacion.pagoAnticipado}" onLabel="Si" offLabel="No"
                                                       onIcon="ui-icon-check" offIcon="ui-icon-close"  style="width:60px" required="false" disabled="#{auCotizacionBean.objetoCotizacion.habilitarCamposAnticipos}">
                                        </p:selectBooleanButton>
                                    </p:column>
                                </p:row>
                               <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha Inicio" for="fechaInicio" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:datePicker locale="es" pattern="yyyy-MM-dd" id="fechaInicio" value="#{auCotizacionBean.objetoCotizacion.fechaInicioVigencia}" required="true" requiredMessage="La Fecha Inicio: Este campo es obligatorio" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha Final" for="fechaFinal" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:datePicker locale="es" id="fechaFinal" pattern="yyyy-MM-dd" value="#{auCotizacionBean.objetoCotizacion.fechaFinVigencia}" required="true" requiredMessage="La Fecha Final: Este campo es obligatorio" />
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Observación" for="observacion" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-10">
                                        <p:inputTextarea  id="observacion" required="true" value="#{auCotizacionBean.objetoCotizacion.observacion}" maxlength="512" rows="5" style="width: 99%" requiredMessage="Observación: Este campo es obligatorio" >
                                            <f:validateLength minimum = "5" maximum = "512" />
                                        </p:inputTextarea>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pSoporteGestionar" header="Soportes Fisicos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{auCotizacionBean.ventanaAdjunto()}" icon="ui-icon-copy" title="Agregar Adjunto"/>
                            </div>
                            <p:dataTable id="tablaSoportesGestionar" var="soportesGestionar" value="#{auCotizacionBean.objetoCotizacion.auSolicitudAdjuntosList}" widgetVar="tablaSoportesGestionar" resizableColumns="true" emptyMessage="No se encontraron registros" >
                                <p:column headerText="Archivos adjuntos">
                                    <h:outputText value="#{soportesGestionar.nombre}" />
                                </p:column>
                                <p:column headerText="Tipo documento">
                                    <h:outputText value="#{soportesGestionar.maeTipoArchivoValor}" />
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center">
                                    <p:commandButton title="Borrar" immediate="true"
                                                     actionListener="#{auCotizacionBean.borrarSoporteCrear(soportesGestionar)}" icon="ui-icon-closethick">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable> 
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                            </p:confirmDialog>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton action="#{auCotizacionBean.guardar}" value="Guardar"/>
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoGestionar').hide()" immediate="true" style="margin-left: 5px;"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Ver Cotizacion -->
            <p:dialog header="Ver Cotización" id="dialogoVerCotizacion" widgetVar="dialogoVerCotizacion" class="modal-no-scroll" appendTo="@(body)"
                      modal="true"  width="95%;overflow-x:hidden;" draggable="false" dynamic="true" style="max-width:1600px;">
                <f:facet name="header" >
                    <h:outputText value="Ver cotización"> </h:outputText>
                </f:facet>
                <h:form id="frmVerCotizacion">
                    <p:panel id="pVerCotizacion" header="Ver Cotización" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                        <p:panelGrid columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid">

                            <p:outputLabel value="Código tecnología" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objetoCotizacion.maTecnologiaCodigo}" >
                            </p:outputLabel>                                

                            <p:outputLabel value="Código prestador" style="font-weight:bold"/>
                            <h:inputText value="#{auCotizacionBean.objetoCotizacion.cntPrestadorSede.codigoPrestador}"
                                         readonly="true"></h:inputText>

                            <p:outputLabel value="Sede prestador" style="font-weight:bold"/>
                            <p:outputLabel style="width:99%" value="#{auCotizacionBean.objetoCotizacion.cntPrestadorSede.nombreSede}"></p:outputLabel>

                            <p:outputLabel value="Descripción tecnología" style="font-weight:bold"/>
                            <p:outputLabel style="width:99%" value="#{auCotizacionBean.objetoCotizacion.maTecnologiaValor}"></p:outputLabel>

                            <p:outputLabel value="% Tarifa" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objetoCotizacion.porcentajeNegociacion}">
                            </p:outputLabel>

                            <p:outputLabel value="Fecha Inicio" for="fechaInicio" style="font-weight:bold"/>
                            <p:datePicker readonly="true" locale="es" pattern="yyyy-MM-dd" id="fechaInicio" value="#{auCotizacionBean.objetoCotizacion.fechaInicioVigencia}" />

                            <p:outputLabel value="Fecha Final" for="fechaFinal" style="font-weight:bold"/>
                            <p:datePicker locale="es" readonly="true" id="fechaFinal" pattern="yyyy-MM-dd" value="#{auCotizacionBean.objetoCotizacion.fechaFinVigencia}" />

                            <p:outputLabel value="Valor tecnología" style="font-weight:bold"/>
                            <p:inputNumber id="valorTotal" decimalPlaces="2" symbolPosition="p" symbol="$" thousandSeparator="."
                                           value="#{auCotizacionBean.objetoCotizacion.valorTecnologia}" required="true" requiredMessage="Por favor ingrese el valor de la tecnología">
                            </p:inputNumber>

                            <p:outputLabel value="Activo" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.obtenerValorBoolean(auCotizacionBean.objetoCotizacion.activo)}">
                            </p:outputLabel>

                            <p:outputLabel value="Pago Anticipado" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.obtenerValorBoolean(auCotizacionBean.objetoCotizacion.pagoAnticipado)}">
                            </p:outputLabel>
                            
                            <p:outputLabel value="Número Anticipo" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objetoCotizacion.antAnticiposId.id}">
                            </p:outputLabel>
                            
                            <p:outputLabel value="Observación" for="observacion" style="font-weight:bold"/>
                            <h:outputText id="observacion" style="width:99%;" value="#{auCotizacionBean.objetoCotizacion.observacion}">
                            </h:outputText>

                        </p:panelGrid>
                    </p:panel>

                    <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column style="text-align: center">
                                    <h:panelGroup style="display:block; text-align:center;">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerCotizacion').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </h:panelGroup>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
            <!-- Gestionar Adjuntos -->
            <p:dialog header="Gestionar Adjuntos" id="dialogoGestionarAdjuntos" widgetVar="dialogoGestionarAdjuntos" class="modal-no-scroll" appendTo="@(body)"
                      modal="true"  width="95%;overflow-x:hidden;" draggable="false" dynamic="true" style="max-width:1600px;">
                <h:form id="frmGestionarAdjuntos">
                    <p:panel id="pSoportesGestionarAdjuntos" header="Soportes Fisicos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                        <div align="right"> 
                            <p:commandButton immediate="true" action="#{auCotizacionBean.ventanaAdjunto()}" icon="ui-icon-copy" title="Agregar Adjunto"/>
                        </div>
                        <p:dataTable id="tablaSoportesGestionar" var="soportesGestionarAdjuntos" value="#{auCotizacionBean.objetoCotizacion.auSolicitudAdjuntosList}" widgetVar="tablaSoportesGestionar" resizableColumns="true" emptyMessage="No se encontraron registros" >
                            <p:column headerText="Archivos adjuntos">
                                <h:outputText value="#{soportesGestionarAdjuntos.nombre}" />
                            </p:column>
                            <p:column headerText="Tipo documento">
                                <h:outputText value="#{soportesGestionarAdjuntos.maeTipoArchivoValor}" />
                            </p:column>
                            <p:column headerText="Acciones" style="text-align: center">
                                <p:commandButton rendered="#{soportesGestionarAdjuntos.id == null}" title="Borrar" immediate="true"
                                                 actionListener="#{auCotizacionBean.borrarSoporte(soportesGestionarAdjuntos)}" icon="ui-icon-closethick">
                                    <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton rendered="#{soportesGestionarAdjuntos.id != null}" title="Borrar" actionListener="#{auCotizacionBean.borrarSoporte(soportesGestionarAdjuntos)}" icon="ui-icon-trash">
                                    <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                    <p:fileDownload value="#{auCotizacionBean.descargarAdjunto(soportesGestionarAdjuntos)}" />
                                </p:commandButton>
                            </p:column>
                        </p:dataTable> 
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                        </p:confirmDialog>
                    </p:panel>
                    <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column style="text-align: center">
                                    <h:panelGroup style="display:block; text-align:center;">
                                        <p:commandButton action="#{auCotizacionBean.guardarAdjuntos}" value="Guardar"/>
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoGestionarAdjuntos').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </h:panelGroup>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>                    
            </p:dialog>
            <!-- Listar IPS -->
            <p:dialog header="Consultar Ips" widgetVar="dialogoIpsLista" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 470px;">
                    <h:form id="frmIpsLista">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{auCotizacionBean.refrescarIps()}" oncomplete="PF('tablaWidgetI').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelIpsLista" style="height:auto;" columns="4"
                                     columnClasses="ui-grid-col-12"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid">

                            <p:dataTable id="tablaRegistrosIps" widgetVar="tablaWidgetI" var="objIPS" value="#{auCotizacionBean.lazyIPS}" rowKey="#{objIPS.id}"
                                         rows="#{auCotizacionBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect" listener="#{auCotizacionBean.onRowSelectIps}" />
                                <p:column headerText="Código Habilitacion" filterBy="#{objIPS.codigoHabilitacionSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Código Habilitación" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.codigoHabilitacionSede}"/>
                                </p:column>
                                <p:column headerText="Tipo Documento" filterBy="#{objIPS.cntPrestador.maeTipoDocumentoValor}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetI').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{referenciaContraRefBean.listaTiposDocumentoEmpresa}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.descripcion}" itemDescription="#{tipoDoc.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.maeTipoDocumentoValor}"/>
                                </p:column>
                                <p:column headerText="Numero Documento" filterBy="#{objIPS.cntPrestador.numeroDocumento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Numero Documetno" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.numeroDocumento}"/>
                                </p:column>
                                <p:column headerText="Razón Social" filterBy="#{objIPS.cntPrestador.razonSocial}">
                                    <f:facet name="filter">
                                        <p:inputText label="Razón Social" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.razonSocial}"/>
                                </p:column>
                                <p:column headerText="Sede" filterBy="#{objIPS.nombreSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Sede" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.nombreSede}"/>
                                </p:column>
                                <p:column headerText="Departamento">
                                    <h:outputText value="#{auCotizacionBean.obtenerDepartamento(objIPS.ubicacionId)}"/>
                                </p:column>
                                <p:column headerText="Municipio" filterBy="#{objIPS.ubicacion.id}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetI').filter()" filter="true" filterMatchMode="startsWith">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{referenciaContraRefBean.listaUbicacion}" var="tipoUbiC1" itemValue="#{tipoUbiC1.id}" itemLabel="#{tipoUbiC1.descripcion}" itemDescription="#{tipoUbiC1.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{auCotizacionBean.obtenerMunicipio(objIPS.ubicacionId)}"/>
                                </p:column>
                                <p:column headerText="Dirección">
                                    <f:facet name="filter">
                                        <p:inputText label="Dirección" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.direccion}"/>
                                </p:column>
                            </p:dataTable>

                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoIpsLista').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Crear Adjunto -->
            <p:dialog header="Crear Adjunto" widgetVar="dialogoAdjuntoGestionar" appendTo="@(body)" modal="true" width="90%">
                <h:form id="frmAdjuntoGestionar">
                    <p:panelGrid id="panelAdjuntoGestionar" columns="2" layout="grid" styleClass="showcase-text-align-center">
                        <p:row>
                            <p:column class="ui-g-3">
                                <p:outputLabel value="Tipo Documento" for="tipoDocumentoAdjunto" style="font-weight:bold"/>
                            </p:column>
                            <p:column class="ui-g-9">
                                <p:selectOneMenu id="tipoDocumentoAdjunto" label="Tipo Documento" value="#{auCotizacionBean.maeTipoDocumentoArchivo}">                                    
                                    <p:ajax event="change" process="tipoDocumentoAdjunto"/>
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />    
                                    <f:selectItems value="#{auCotizacionBean.listaTipoDocumentoArchivo}" var="tipArc" itemValue="#{tipArc.id}" itemLabel="#{tipArc.nombre}" itemDescription="#{tipArc.descripcion}"/>                                   
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column class="ui-g-3">
                                <p:outputLabel value="Archivo" for="adjuntoArchivo" style="font-weight:bold"/>
                            </p:column>
                            <p:column class="ui-g-9">
                                <p:fileUpload id="adjuntoArchivo" label="Adjunto" mode="advanced" multiple="true"
                                      listener="#{auCotizacionBean.cargarAdjunto}"                                           
                                      invalidFileMessage="Tipo inválido de archivo"
                                      fileLimitMessage="Máximo número de archivos excedido."
                                      uploadLabel="Subir"  cancelLabel="Cancelar"
                                      sizeLimit="7000000" fileLimit="5" allowTypes="/(\.|\/)(pdf|PDF|jpe?g|png|doc|DOC)$/"
                                      widgetVar="subirManual" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    <p:panelGrid  style="width:100%;margin:10px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column colspan="6" style="text-align: center">
                                    <p:commandButton value="Salir" type="button" onclick="PF('dialogoAdjuntoGestionar').hide()" immediate="true" style="margin-left: 5px;"/>
                                </p:column>
                            </p:row>
                        </f:facet>                        
                    </p:panelGrid>
                </h:form>
            </p:dialog>
            <!-- Mensaje bitacora  rechazar -->
            <p:dialog header="Justificación - Bitácora" widgetVar="dialogoMensajeBitacoraRechazo" appendTo="@(body)" modal="true" width="90%" dynamic="true" onShow="PF('tablaWidget').filter()">
                <h:form id="frmMensajeBitacoraRechazo">
                    <p:panel id="pInformacionMensajeBitacoraRechazo" header="Observación" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                        <p:panelGrid id="panelInformacionMensajeBitacoraRechazo" columns="1" layout="grid" styleClass="showcase-text-align-center">
                            <p:inputTextarea rows="5" cols="155" value="#{auCotizacionBean.observacion}" counter="display1MensajeBitacoraRechazo" maxlength="1024" counterTemplate="{0} caracteres faltantes." autoResize="true" required="true" requiredMessage="Observacion: Este campo es obligatorio"/>
                            <h:outputText id="display1MensajeBitacoraRechazo" />
                        </p:panelGrid>
                        <p:panelGrid id="panelAccionesMensajeBitacoraRechazo" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center;">
                                        <p:commandButton value="Aceptar" actionListener="#{auCotizacionBean.rechazar()}"/>                                       
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoMensajeBitacoraRechazo').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>                            
                    </p:panel>
                </h:form>
            </p:dialog>
            <!-- Ver bitacoras -->
            <p:dialog header="Bitacora" widgetVar="dialogoVerBitacorass" appendTo="@(body)" modal="true" width="90%" dynamic="true" class="modal-no-scroll">
                <p:scrollPanel mode="native">
                    <h:form id="frmVerBitacoras">  
                        <p:panel id="pTablaBitacora" header="Lista Bitacora" style="margin-bottom:10px;" collapsed="false" toggleable="true">                            
                            <p:dataTable id="tablaBitacora" var="bitacora" value="#{auCotizacionBean.objeto.auItemBitacorasList}" widgetVar="widgetVarBitacora"
                                         resizableColumns="true" emptyMessage="No se encontraron registros" 
                                         sortBy="#{bitacora.id}">
                                <p:column headerText="Tipo"  filterBy="#{bitacora.tipo}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('widgetVarBitacora').filter()" style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Solicitud Devolución" itemValue="1"/>
                                            <f:selectItem itemLabel="Respuesta Devolución" itemValue="2"/>
                                            <f:selectItem itemLabel="Solicitud Cotización" itemValue="3"/>
                                            <f:selectItem itemLabel="Respuesta Cotización" itemValue="4"/>
                                            <f:selectItem itemLabel="Derivación" itemValue="5"/>
                                            <f:selectItem itemLabel="Rechazo Item" itemValue="6"/>
                                            <f:selectItem itemLabel="Cambio Estado" itemValue="8"/>
                                            <f:selectItem itemLabel="Respuesta Direccionado" itemValue="9"/>
                                            <f:selectItem itemLabel="Información Direccionado" itemValue="10"/>
                                            <f:selectItem itemLabel="Comentario" itemValue="11"/>
                                            <f:selectItem itemLabel="Respuesta Seguimiento" itemValue="12"/>
                                            <f:selectItem itemLabel="Negacion Item" itemValue="13"/>
                                            <f:selectItem itemLabel="Alternativa" itemValue="14"/>
                                            <f:selectItem itemLabel="Control Registros Entregas" itemValue="15"/>
                                            <f:selectItem itemLabel="Vigencia Cotización" itemValue="16"/>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{bitacora.getStrTipo()}" />
                                </p:column>
                                <p:column headerText="Descripcion">
                                    <h:outputText value="#{bitacora.descripcion}" />
                                </p:column>
                                <p:column headerText="Usuario Crea">
                                    <h:outputText value="#{bitacora.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Fecha Hora">
                                    <h:outputText value="#{bitacora.fechaHoraCrea}" />
                                </p:column>
                            </p:dataTable> 
                        </p:panel>
                        <p:panelGrid id="panelDevoluciones" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerBitacorass').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </p:scrollPanel>
            </p:dialog>  
            <!-- Ver Posfechado -->
            <p:dialog header="Ver Posfechados" widgetVar="dialogoVerPosfechados" appendTo="@(body)" modal="true" width="90%" dynamic="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height: 500px" >
                    <h:form id="frmVerPosfechados">
                        <!-- Lista Posfechado -->
                        <p:panel id="pListaPosfechados" header="Lista Posfechados" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaPosfechados" var="posfechadoVer" value="#{auCotizacionBean.listaPosfechados}" widgetVar="tablaPosfechados" resizableColumns="true" emptyMessage="No se encontraron procedimientos" style="text-align: center" reflow="true">
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{posfechadoVer.tipoTecnologiaStr}" />
                                </p:column>
                                <p:column headerText="Código">
                                    <h:outputText value="#{posfechadoVer.maTecnologiaCodigo}" />
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:outputText value="#{posfechadoVer.maTecnologiaValor}" />
                                </p:column>
                                <p:column headerText="Fecha Posfechado">
                                    <h:outputText value="#{auCotizacionBean.convertirFecha(posfechadoVer.fechaPosfechado)}" />
                                </p:column>
                                <p:column headerText="Cantidad">
                                    <h:outputText value="#{posfechadoVer.cantidadSolicitada}" />
                                </p:column>
                                <p:column headerText="Estado">
                                    <h:outputText value="#{posfechadoVer.getEstadoStr()}" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!-- Acciones -->
                        <p:panelGrid id="panelAccionesVerPosfechados" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerPosfechados').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- descripciones afiliado genericas -->
            <p:dialog header="Afiliado" widgetVar="dlgInfoAfiliado" class="modal-no-scroll" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:250px">
                    <h:form id="frmAfiliadoGeneral">
                        <p:panelGrid id="panelAfiliadoGeneral" style="width:100%;margin:10px 0px" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid">

                            <p:outputLabel value="Estado" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.maeEstadoAfiliacionValor}" />

                            <p:outputLabel value="Nombres" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.nombres}" />

                            <p:outputLabel value="Apellidos" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.apellidos}" />

                            <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.maeTipoDocumentoCodigo}" />

                            <p:outputLabel value="Documento" style="font-weight:bold" />
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.numeroDocumento}" />

                            <p:outputLabel value="Correo" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.email}" />

                            <p:outputLabel value="Dirección" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.direccionResidencia}" />

                            <p:outputLabel value="Ubicación" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.obtenerUbicacion(auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.residenciaUbicacion.id)}" />

                            <p:outputLabel value="Regimen" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.maeRegimenValor}" />

                            <p:outputLabel value="Contrato" style="font-weight:bold"/>
                            <p:outputLabel value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.idAfiliado}" />

                        </p:panelGrid>
                        <p:panel header="Contactos Aseguramiento" toggleable="true" style="height:auto;">
                            <p:scrollPanel mode="native">
                                <p:dataTable id="tablaContactosGeneralAseg" var="contacto" value="#{auCotizacionBean.objeto.auAnexo3Id.asegAfiliadoId.listaAsegAfiliadoContacto}" widgetVar="tablaContactosGestionarAseg" scrollable="true" emptyMessage="No se encontraron registros">
                                    <p:column headerText="Número Contacto">
                                        <h:outputText value="#{contacto.numeroContacto}"/>
                                    </p:column>
                                    <p:column headerText="Tipo">
                                        <h:outputText value="#{contacto.maeTipoContactoValor}"/>
                                    </p:column>
                                    <p:column headerText="Observación">
                                        <h:outputText value="#{contacto.observacion}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:scrollPanel>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgInfoAfiliado').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>
             <!--Lista anticipos gestionar-->
            <p:dialog header="Consultar Afiliados" widgetVar="dialogoAnticiposLista" class="center" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true" >
                <p:scrollPanel mode="native" style="max-height: 520px; padding-bottom: 0px !important;">
                    <h:form id="frmAnticiposLista">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{auCotizacionBean.refrescarAnticipo()}" oncomplete="PF('tablaWidgetAnticipo').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelAnticiposLista" columns="1" style="height:auto;">
                            <p:dataTable id="tablaRegistrosAnticipos" widgetVar="tablaWidgetAnticipo" var="anticipo" value="#{auCotizacionBean.lazyAnticipos}" rowKey="#{anticipo.id}"
                                         rows="#{auCotizacionBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage="No se encontraron registros" selectionMode="single">
                                
                                <p:column style="text-align: center;">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>    
                                    <p:commandButton rendered="#{auCotizacionBean.accionVer}" title="Ver Detalle" actionListener="#{auCotizacionBean.verVentanaAnticipoItem(anticipo.id)}" icon="ui-icon ui-icon-search"/>
                                    <p:commandButton rendered="#{auCotizacionBean.accionVer}" title="Seleccionar" actionListener="#{auCotizacionBean.selectAnticipo(anticipo)}" icon="ui-icon-check"/>
                                </p:column>
                                
                                <p:column headerText="Número Anticipo" filterBy="#{anticipo.id}">
                                    <f:facet name="filter">
                                        <p:inputNumber label="Número Anticipo" decimalPlaces="0" style="width: 95%;" onchange="PF('tablaWidgetAnticipo').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{anticipo.id}"/>
                                </p:column>
                                
                                <p:column headerText="Tipo" filterBy="#{anticipo.tipo}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetAnticipo').filter()" style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel=" Individual " itemValue="1" />
                                            <f:selectItem itemLabel=" Paquete " itemValue="2" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{anticipo.tipoStr}"/>
                                </p:column>
                               
                                <p:column headerText="Clase"  filterBy="#{anticipo.maeClasificacionId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetAnticipo').filter()" style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{auCotizacionBean.listaClasificacion}" var="clase" itemValue="#{clase.id}" itemLabel="#{clase.nombre}" itemDescription="#{clase.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{anticipo.maeClasificacionValor}"/>
                                </p:column>
                                <p:column headerText="Prestador"  filterBy="#{anticipo.cntPrestadoresId.razonSocial}">
                                    <f:facet name="filter">
                                        <p:inputText label="Primer nombre" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetAnticipo').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{anticipo.cntPrestadoresId.razonSocial}"/>
                                </p:column>
                                <p:column headerText="Valor Pagado" sortBy="#{anticipo.valorPagado}">
                                    <h:outputText value="#{anticipo.valorPagado}" >
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Valor Disponible" sortBy="#{anticipo.valorDisponible}">
                                    <h:outputText value="#{anticipo.valorDisponible}" >
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                               <p:column headerText="F.H. Crea" sortBy="#{anticipo.fechaHoraCrea}">                        
                                    <h:outputText value="#{anticipo.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
             
             <!-- descripciones afiliado genericas -->
            <p:dialog header="Informacion Detalle" widgetVar="dlgInfoAnticipoItem" class="modal-no-scroll" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:250px">
                    <h:form id="frmAnticipoItem">
                        <p:panelGrid id="panelAnticipoItem" style="width:100%;margin:10px 0px" >
                            <p:row>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Número Detalle" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:outputLabel value="#{auCotizacionBean.objetoAnticipoItem.id}"/>
                                </p:column>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Tipo" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:outputLabel value="#{auCotizacionBean.objetoAnticipoItem.tipoTecnologiaStr}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Codigo" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:outputLabel value="#{auCotizacionBean.objetoAnticipoItem.maTecnologiaCodigo}" />
                                </p:column>
                                <p:column class="ui-g-2">
                                   <p:outputLabel value="Tecnología" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:outputLabel value="#{auCotizacionBean.objetoAnticipoItem.maTecnologiaValor}" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Codigo Medicamento" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:outputLabel value="#{auCotizacionBean.objetoAnticipoItem.maMedicamentoCodigo}" />
                                </p:column>
                                <p:column class="ui-g-2">
                                   <p:outputLabel value="Medicamento" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-4">
                                    <p:outputLabel value="#{auCotizacionBean.objetoAnticipoItem.maMedicamentoValor}" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column class="ui-g-2">
                                    <p:outputLabel value="Valor Tecnologia" style="font-weight:bold"/>
                                </p:column>
                                <p:column class="ui-g-10">
                                    <p:inputNumber symbol="$" value="#{auCotizacionBean.objetoAnticipoItem.valorTecnologiaCotizada}" readonly="true" />
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgInfoAnticipoItem').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>
        </center>
    </ui:define>
</ui:composition>
