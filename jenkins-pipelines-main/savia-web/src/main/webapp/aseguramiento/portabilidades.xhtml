<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR">
        <center>
            <style> 
                .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                    border: 1px solid #e5e2e2;
                }
                .ui-panelgrid .ui-panelgrid-footer {
                    text-align: center;
                    padding: 2px 5px;
                }

            </style>
            <script type="text/javascript">
                //<![CDATA[ 
                function noPuntuacion(e) {
                    var key = window.Event ? e.which : e.keyCode
                    return (key != 44 && key != 46 && key != 59)
                }
                ;
                function soloNumeros(e) {
                    var key = window.Event ? e.which : e.keyCode
                    return (key >= 48 && key <= 57)
                }
                ;
                function mayus(e) {
                    e.value = e.value.toUpperCase();
                }
                ;
                //]]>
            </script>
            <h:form id="frmPortabilidad">
                <p:remoteCommand name="cerrarDialogoAfiliado" action="#{portabilidadBean.cerrarDialogoAfiliado()}"/>
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{portabilidadBean.modulo.descripcion}">#{portabilidadBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{portabilidadBean.accionListar}" title="Refrescar" ajax="false" actionListener="#{portabilidadBean.refrescar}" icon="ui-icon-refresh"/>
                        <p:commandButton rendered="#{portabilidadBean.accionCrear}" title="Crear" ajax="false" actionListener="#{portabilidadBean.crear}" icon="ui-icon-document"/>
                    </f:facet>
                </p:toolbar>
                <p:remoteCommand name="abrirDireccion" action ="#{portabilidadBean.crearDireccion()}" />
                <p:dataTable var="obj" value="#{portabilidadBean.lazyPortabilidad}" paginator="true" rows="#{portabilidadBean.tamanoPagina}" 
                             emptyMessage="No se encontraron registros"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                             widgetVar="tablaWidget"
                             style="font-size:11px;"
                             scrollable="true"
                             scrollWidth="100%"
                             rowKey="#{obj.id}" reflow="true">

                    <p:column style="text-align: center;">
                        <f:facet name="header">
                            <h:outputText value="Acciones"/>
                        </f:facet>    
                        <p:commandButton rendered="#{portabilidadBean.accionVer}" title="Ver" actionListener="#{portabilidadBean.ver(obj.id)}" icon="ui-icon-search"/>
                        <p:commandButton rendered="#{portabilidadBean.accionAdicional2 and (obj.maeEstadoPortabilidadCodigo == '1' || obj.maeEstadoPortabilidadCodigo == '2' || portabilidadBean.habilitarBotonParaProrroga(obj))}" title="Gestionar" actionListener="#{portabilidadBean.editar(obj.id)}" icon="ui-icon-script"/>
                        <p:commandButton rendered="#{portabilidadBean.accionBorrar}" title="Borrar" action="#{portabilidadBean.borrar(obj.id)}" icon="ui-icon-trash">
                            <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                        </p:commandButton>
                        <p:commandButton rendered="#{portabilidadBean.accionAdicional1}" title="Generar Formulario Portabilidad" ajax="true" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-document">
                            <p:fileDownload value="#{portabilidadBean.generarReporte(obj)}" />
                        </p:commandButton>
                    </p:column>

                    <p:column headerText="Radicado" sortBy="#{obj.id}" filterBy="#{obj.id}">
                        <f:facet name="filter">
                            <p:inputText maxlength="64" style="width: 95%;" onkeypress="
                                    if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.id}" title="#{obj.id}"/>
                    </p:column>

                    <p:column headerText="Estado Portabilidad" filterBy="#{obj.maeEstadoPortabilidadId}">
                        <f:facet name="filter">
                            <p:selectOneMenu editable="false" style="margin-right: 10px; width: 90%;" onchange="PF('tablaWidget').filter()">
                                <f:selectItem itemLabel="--" itemValue="#{null}" />
                                <f:selectItems value="#{portabilidadBean.listaEstadoPortabilidad}" var="estadoPort" itemValue="#{estadoPort.id}" itemLabel="#{estadoPort.nombre}" itemDescription="#{estadoPort.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeEstadoPortabilidadValor}" title="#{obj.maeEstadoPortabilidadValor}"/>
                    </p:column>
                    <p:column headerText="Tipo Documento" filterBy="#{obj.asegAfiliado.maeTipoDocumento}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.listaTiposDocumento}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.maeTipoDocumentoValor}" title="#{obj.asegAfiliado.maeTipoDocumentoValor}"/>
                    </p:column>
                    <p:column headerText="Documento" sortBy="#{obj.asegAfiliado.numeroDocumento}" filterBy="#{obj.asegAfiliado.numeroDocumento}">
                        <f:facet name="filter">
                            <p:inputText label="Documento" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.numeroDocumento}" title="#{obj.asegAfiliado.numeroDocumento}"/>
                    </p:column>

                    <p:column headerText="Nombres" sortBy="#{obj.asegAfiliado.nombres}" filterBy="#{obj.asegAfiliado.nombres}">
                        <f:facet name="filter">
                            <p:inputText label="Nombres" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.nombres} " title="#{obj.asegAfiliado.nombres}"/>
                    </p:column>

                    <p:column headerText="Apellidos" sortBy="#{obj.asegAfiliado.apellidos}" filterBy="#{obj.asegAfiliado.apellidos}">
                        <f:facet name="filter">
                            <p:inputText label="Apellidos" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.apellidos} " title="#{obj.asegAfiliado.apellidos}"/>
                    </p:column>

                    <p:column headerText="Género" filterBy="#{obj.asegAfiliado.maeGeneroId}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.listaTiposGenero}" var="genero" itemValue="#{genero.id}" itemLabel="#{genero.nombre}" itemDescription="#{genero.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.asegAfiliado.maeGeneroValor}" title="#{obj.asegAfiliado.maeGeneroValor}"/>
                    </p:column>

                    <p:column headerText="Municipio Portabilidad" sortBy="#{obj.ubicacion.nombre}" filterBy="#{obj.ubicacion.nombre}">
                        <f:facet name="filter">
                            <p:inputText label="Documento" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <p:outputLabel value="#{portabilidadBean.getUbicacionRecursiva(obj.ubicacion.id)}"/>
                    </p:column>

                    <p:column headerText="IPS Portabilidad" sortBy="#{obj.cntPrestadorSede.nombreSede}" filterBy="#{obj.cntPrestadorSede.nombreSede}">
                        <f:facet name="filter">
                            <p:inputText label="Documento" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tablaWidget').filter()" />
                        </f:facet>
                        <p:outputLabel value="#{obj.cntPrestadorSede.nombreSede}"/>
                    </p:column>

                    <p:column headerText="Periodo Inicial" sortBy="#{obj.periodoInicial}">
                        <h:outputText value="#{obj.periodoInicial}" title="#{obj.periodoInicial}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Periodo Final" sortBy="#{obj.periodoFinal}">
                        <h:outputText value="#{obj.periodoFinal}" title="#{obj.periodoFinal}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Fecha Cancelación" sortBy="#{obj.fechaCancelacion}">
                        <h:outputText value="#{obj.fechaCancelacion}" title="#{obj.fechaCancelacion}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Tipo Portabilidad" filterBy="#{obj.maeTipoPortabilidadId}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" editable="false" 
                                             style="margin-right: 10px; width: 90%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.listaTipoPortabilidad}" var="portabilidad" itemValue="#{portabilidad.id}" itemLabel="#{portabilidad.nombre}" itemDescription="#{portabilidad.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeTipoPortabilidadValor}" title="#{obj.maeTipoPortabilidadValor}"/>
                    </p:column>

                    <p:column headerText="Origen Solicitud" filterBy="#{obj.maeOrigenSolicitudId}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" editable="false" style="margin-right: 10px; width: 90%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.listaOrigenPortabilidad}" var="origenSol" itemValue="#{origenSol.id}" itemLabel="#{origenSol.nombre}" itemDescription="#{origenSol.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeOrigenSolicitudValor}" title="#{obj.maeOrigenSolicitudValor}"/>
                    </p:column>

                    <p:column headerText="Envio Correo" >
                        <h:outputText value="#{obj.envioCorreoString}" title="#{obj.envioCorreoString}"/>
                    </p:column>

                </p:dataTable>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
            </h:form>

            <p:dialog header="Ver" widgetVar="dialogoVer" appendTo="@(body)" width="80%" modal="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form class="frmAuditoria" style=" text-align: right;">
                        <p:commandButton id="auditoria" class="btnAuditoria" action="#{portabilidadBean.getAuditoria(portabilidadBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>
                    <h:form id="frmVer">
                        <p:panel id="pnlVerDatosAfiliado" header="Datos del Afiliado" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelVer1" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.maeTipoDocumentoValor}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.numeroDocumento}" />

                                <p:outputLabel value="Primer Apellido" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.primerApellido}"/>

                                <p:outputLabel value="Segundo Apellido" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.segundoApellido}"/>

                                <p:outputLabel value="Primer Nombre" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.primerNombre}"/>

                                <p:outputLabel value="Segundo Nombre" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.segundoNombre}"/>

                                <p:outputLabel value="Fecha Nacimiento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.fechaNacimiento}"/>

                                <p:outputLabel value="Edad" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.calcularEdadEnDiasMesesAnios(portabilidadBean.objeto.asegAfiliado.fechaNacimiento)}"/>

                                <p:outputLabel value="Municipio Afiliación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.getUbicacionRecursiva(portabilidadBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>

                                <p:outputLabel value="Estado Afiliación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.maeEstadoAfiliacionValor}"/>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlVerRegistroSolicitudPort" header="Registro Solicitud de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelVer2" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Motivo Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.maeMotivoPortabilidadValor}" />                                    

                                <p:outputLabel value="Periodo Inicial" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.periodoInicial}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>

                                <p:outputLabel value="Periodo Final" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.periodoFinal}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>

                                <p:outputLabel value="Origen" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.maeOrigenSolicitudValor}" />

                                <p:outputLabel value="Municipio Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.getUbicacionRecursiva(portabilidadBean.objeto.ubicacion.id)}"/>

                                <p:outputLabel value="Dirección" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.direccion}" />

                                <p:outputLabel value="Teléfono" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.telefonoContacto}" />

                                <p:outputLabel value="Celular" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.telefonoContacto2}" />

                                <p:outputLabel value="Correo Electrónico" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.correoElectronico}" />

                                <p:outputLabel value="Tipo Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel id="lblTipoPortabilidad" value="#{portabilidadBean.objeto.maeTipoPortabilidadValor}"/>

                                <p:outputLabel value="Observación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.observacionUsuario}" />
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlVerAsignacionPortabilidad" header="Asignación de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelVer3" columns="2" layout="grid" styleClass="showcase-text-align-center">

                                <p:outputLabel value="Sede IPS Asignada" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.cntPrestadorSede.nombreSede}" />

                                <p:outputLabel value="Estado Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.maeEstadoPortabilidadValor}"/>

                                <p:outputLabel value="Observación Aseguramiento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.observacionAseguramiento}" />
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlVerProrrogaPortabilidad" header="Prórroga" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelVer6" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Fecha Solicitud Prórroga Actual" style="font-weight:bold"/>
                                <h:outputLabel value="#{portabilidadBean.objeto.fechaSolicitudProrrogaAnterior}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputLabel>

                                <p:outputLabel value="Meses de Prórroga Actual" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.mesesProrrogaAnterior}"/>

                                <p:outputLabel value="Fecha Solicitud Prórroga" style="font-weight:bold"/>
                                <h:outputLabel value="#{portabilidadBean.objeto.fechaSolicitudProrroga}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputLabel>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlVerCancelacionPortabilidad" header="Cancelación de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelVer4" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Fecha Solicitud Cancelación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.fechaSolicitudCancelacion}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>

                                <p:outputLabel value="Fecha Cancelación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.fechaCancelacion}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>

                                <p:outputLabel value="Usuario Cancela" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.usuarioCancela}"/>

                                <p:outputLabel value="Observación Cancelación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.observacionCancelacion}" />
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelVer5" style="width:100%;height:auto; border:1px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoVer').hide()" immediate="true"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Crear" widgetVar="dialogoCrear" appendTo="@(body)" width="90%" modal="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmAfiliado">
                        <p:panel id="pnlCrearDatosAfiliado" header="Datos del Afiliado" style="margin-bottom:10px;" toggleable="true">
                            <div align="right"> 
                                <p:commandButton immediate="true" action="#{portabilidadBean.consultarAfiliado()}" icon="ui-icon-person" title="Afiliado"/>
                            </div>
                            <p:panelGrid id="panelAfiliado" columns="4">
                                <p:outputLabel value="Tipo Documento" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.maeTipoDocumentoValor}"/>
                                <p:outputLabel value="Número Documento" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.numeroDocumento}"/>
                                
                                <p:outputLabel value="Primer Apellido" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.primerApellido}"/>
                                <p:outputLabel value="Segundo Apellido" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.segundoApellido}"/>

                                <p:outputLabel value="Primer Nombre" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.primerNombre}"/>
                                <p:outputLabel value="Segundo Nombre" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.segundoNombre}"/>
                                
                                <p:outputLabel value="Fecha Nacimiento" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.fechaNacimiento}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>
                                <p:outputLabel value="Edad" />
                                <p:outputLabel value="#{portabilidadBean.calcularEdadEnDiasMesesAnios(portabilidadBean.objeto.asegAfiliado.fechaNacimiento)}"/>
                                
                                <p:outputLabel value="Municipio Afiliación" />
                                <p:outputLabel value="#{portabilidadBean.getUbicacionRecursiva(portabilidadBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>
                                <p:outputLabel value="Estado Afiliación" />
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.maeEstadoAfiliacionValor}"/>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>

                    <h:form id="frmCrear">
                        <p:panel id="pnlCrearRegistroSolicitudPort" header="Registro Solicitud de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelCrear1" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <p:outputLabel value="Motivo Portabilidad" for="motivoPotabilidad" style="font-weight:bold"/>
                                <p:selectOneMenu id="motivoPotabilidad"
                                                 value="#{portabilidadBean.objeto.maeMotivoPortabilidadId}"
                                                 editable="false">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{portabilidadBean.listaMotivoPortabilidad}" var="por" itemValue="#{por.id}" itemLabel="#{por.nombre}" />
                                </p:selectOneMenu>

                                <p:outputLabel value="Periodo Inicial" for="calPeriodoInicial" style="font-weight:bold"/>
                             <p:calendar id="calPeriodoInicial" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" maxlength="10" value="#{portabilidadBean.objeto.periodoInicial}" required="true">
                                    <p:ajax event="dateSelect" listener="#{portabilidadBean.calcularTipoPortabilidad()}" update="lblTipoPortabilidad,calPeriodoFinal" />  
                                </p:calendar>

                                <p:outputLabel value="Periodo Final" for="calPeriodoFinal" style="font-weight:bold"/>
                                <p:calendar id="calPeriodoFinal" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" maxlength="10" value="#{portabilidadBean.objeto.periodoFinal}" mindate="#{portabilidadBean.objeto.periodoInicial}" required="true">
                                    <p:ajax event="dateSelect" listener="#{portabilidadBean.calcularTipoPortabilidad()}" update="lblTipoPortabilidad" />
                                </p:calendar>

                                <p:outputLabel value="Origen" for="somOrigenCrear" style="font-weight:bold"/>
                                <p:selectOneMenu id="somOrigenCrear" value="#{portabilidadBean.objeto.maeOrigenSolicitudId}" editable="false" required="true">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{portabilidadBean.listaOrigenPortabilidad}" var="origenSol" itemValue="#{origenSol.id}" itemLabel="#{origenSol.nombre}" itemDescription="#{origenSol.descripcion}"/>
                                </p:selectOneMenu>

                                <p:outputLabel value="Municipio Portabilidad" for="municipioPortabilidad" style="font-weight:bold"/>
                                <p:autoComplete id="municipioPortabilidad" dropdown="false" 
                                                value="#{portabilidadBean.objeto.ubicacion}"
                                                completeMethod="#{portabilidadBean.completarUbicacion}"
                                                var="ubica" 
                                                itemLabel="#{portabilidadBean.getUbicacionRecursiva(ubica.id)}" 
                                                itemValue="#{ubica}" 
                                                converter="ubicacionConverterPortabilidad" 
                                                forceSelection="true"
                                                required="true" >
                                    <p:ajax event="itemSelect" listener="#{portabilidadBean.cargarSedes()}" update="sedeIpsPrimaria"/>
                                </p:autoComplete>

                                <p:commandButton process="@this,txtDireccion" title="Dirección*" action="#{portabilidadBean.crearDireccion()}" value="Dirección"/>
                                <p:inputText id="txtDireccion" value="#{portabilidadBean.objeto.direccion}" readonly="true" required="true" />

                                <p:outputLabel value="Teléfono" for="telefono" style="font-weight:bold"/>
                                <p:inputText id="telefono" value="#{portabilidadBean.objeto.telefonoContacto}" onkeypress="return soloNumeros(event)" maxlength="10"/>

                                <p:outputLabel value="Celular" for="celular" style="font-weight:bold"/>
                                <p:inputText id="celular" value="#{portabilidadBean.objeto.telefonoContacto2}" onkeypress="return soloNumeros(event)" maxlength="10"/>

                                <p:outputLabel value="Correo Electrónico" for="correoElectronico" style="font-weight:bold"/>
                                <p:inputText id="correoElectronico" value="#{portabilidadBean.objeto.correoElectronico}" label="Correo electrónico" maxlength="256" required="true">
                                    <f:validator validatorId="validarCorreo"/>
                                </p:inputText>

                                <p:outputLabel value="Tipo Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel id="lblTipoPortabilidad" value="#{portabilidadBean.objeto.maeTipoPortabilidadValor}"/>

                                <p:outputLabel value="Observación" style="font-weight:bold"/>
                                <p:column class="ui-g-10">
                                    <p:inputTextarea rows="5" cols="155" onkeypress="return noPuntuacion(event)" value="#{portabilidadBean.objeto.observacionUsuario}" counter="display1Crear1" maxlength="256" counterTemplate="{0} caracteres faltantes." autoResize="true" required="false" style="width:98%"/>
                                    <h:outputText id="display1Crear1" />
                                </p:column>

                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlCrearAsignacionPortabilidad" header="Asignación de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelCrear2" columns="4" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" styleClass="ui-panelgrid-blank ui-fluid">

                                        <p:outputLabel value="Sede IPS Asignada" for="sedeIpsPrimaria" />

                                        <p:selectOneMenu id="sedeIpsPrimaria" 
                                                        value="#{portabilidadBean.objeto.cntPrestadorSede}"
                                                        converter="cntPrestadorSedesConverter" required="#{!portabilidadBean.cancelacionORechazo}" disabled="#{portabilidadBean.cancelacionORechazo}"
                                                        editable="false" filter="true" filterMatchMode="contains" style="width:300px;">
                                           <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                           <f:selectItems value="#{portabilidadBean.listaCntPrestadorSedes}" var="sede" itemValue="#{sede}" itemLabel="#{sede.cntPrestador.razonSocial} - #{sede.nombreSede}" />
                                        </p:selectOneMenu>

                                        <p:outputLabel value="Estado Portabilidad" for="somEstadoPortabilidad" />

                                        <p:selectOneMenu id="somEstadoPortabilidad"
                                                             value="#{portabilidadBean.objeto.maeEstadoPortabilidadId}" 
                                                              editable="false" required="true">
                                            <f:selectItem itemLabel='--' itemValue='#{null}' noSelectionOption="true" />
                                            <f:selectItems value="#{portabilidadBean.listaEstadoPortabilidadInterno}" var="estadoPort" itemValue="#{estadoPort.id}" itemLabel="#{estadoPort.nombre}" itemDescription="#{estadoPort.descripcion}"/>
                                        </p:selectOneMenu>

                                        <p:outputLabel value="Observación Aseguramiento" />
                                    <p:column class="ui-g-10">
                                        <p:inputTextarea rows="5" cols="155" onkeypress="return noPuntuacion(event)" value="#{portabilidadBean.objeto.observacionAseguramiento}" counter="display1Crear" maxlength="256" counterTemplate="{0} caracteres faltantes." autoResize="true" required="false" style="width:98%"/>
                                        <h:outputText id="display1Crear" />
                                    </p:column>
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelCrear3" style="width:100%;height:auto; border:1px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Guardar" type="button" onclick="guardarRemote()" validateClient="true"/>
                                        <p:remoteCommand name="guardarRemote" action ="#{portabilidadBean.guardar}" update="panelCrear1,panelCrear2,panelCrear3"/>
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoCrear').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Editar" widgetVar="dialogoEditar" appendTo="@(body)" width="90%" modal="true" class="modal-no-scroll">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form class="frmAuditoria" style=" text-align: right;">
                        <p:commandButton id="auditoria" class="btnAuditoria" action="#{portabilidadBean.getAuditoria(portabilidadBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>
                    <h:form id="frmEditar">
                        <p:panel id="pnlEditarDatosAfiliado" header="Datos del Afiliado" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelEditar1" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.getTipoDocumento(portabilidadBean.objeto.asegAfiliado.maeTipoDocumento)}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.numeroDocumento}" />

                                <p:outputLabel value="Primer Apellido" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.primerApellido}"/>

                                <p:outputLabel value="Segundo Apellido" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.segundoApellido}"/>

                                <p:outputLabel value="Primer Nombre" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.primerNombre}"/>

                                <p:outputLabel value="Segundo Nombre" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.segundoNombre}"/>

                                <p:outputLabel value="Fecha Nacimiento" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.fechaNacimiento}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>

                                <p:outputLabel value="Edad" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.calcularEdadEnDiasMesesAnios(portabilidadBean.objeto.asegAfiliado.fechaNacimiento)}"/>

                                <p:outputLabel value="Municipio Afiliación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.getUbicacionRecursiva(portabilidadBean.objeto.asegAfiliado.afiliacionUbicacion.id)}"/>

                                <p:outputLabel value="Estado Afiliación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.asegAfiliado.maeEstadoAfiliacionValor}"/>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlEditarRegistroSolicitudPort" header="Registro Solicitud de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelEditar2" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Motivo Portabilidad" for="motivoPotabilidad" style="font-weight:bold"/>
                                <p:selectOneMenu id="motivoPotabilidad"
                                                 value="#{portabilidadBean.objeto.maeMotivoPortabilidadId}"
                                                 editable="false">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{portabilidadBean.listaMotivoPortabilidad}" var="por" itemValue="#{por.id}" itemLabel="#{por.nombre}" />
                                </p:selectOneMenu>

                                <p:outputLabel value="Periodo Inicial" for="calPeriodoInicial" style="font-weight:bold"/>
                                <p:calendar id="calPeriodoInicial" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" maxlength="10" value="#{portabilidadBean.objeto.periodoInicial}" required="true">
                                    <p:ajax event="dateSelect" listener="#{portabilidadBean.calcularTipoPortabilidad()}" update="lblTipoPortabilidadUpd,calPeriodoFinalUpd" />  
                                </p:calendar>

                                <p:outputLabel value="Periodo Final" for="calPeriodoFinalUpd" style="font-weight:bold"/>
                                <p:calendar id="calPeriodoFinalUpd" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" maxlength="10" value="#{portabilidadBean.objeto.periodoFinal}" mindate="#{portabilidadBean.objeto.periodoInicial}" required="true">
                                    <p:ajax event="dateSelect" listener="#{portabilidadBean.calcularTipoPortabilidad()}" update="lblTipoPortabilidadUpd" />
                                </p:calendar>

                                <p:outputLabel value="Origen" for="somOrigenCrear" style="font-weight:bold"/>
                                <p:selectOneMenu id="somOrigenCrear" value="#{portabilidadBean.objeto.maeOrigenSolicitudId}" editable="false" required="true">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{portabilidadBean.listaOrigenPortabilidad}" var="origenSol" itemValue="#{origenSol.id}" itemLabel="#{origenSol.nombre}" itemDescription="#{origenSol.descripcion}"/>
                                </p:selectOneMenu>

                                <p:outputLabel value="Municipio Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.getUbicacionRecursiva(portabilidadBean.objeto.ubicacion.id)}"/>

                                <p:commandButton process="@this,txtDireccion" title="Dirección*" action="#{portabilidadBean.crearDireccion()}" value="Dirección"/>
                                <p:inputText id="txtDireccion" value="#{portabilidadBean.objeto.direccion}" readonly="true" required="true" />

                                <p:outputLabel value="Teléfono" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.telefonoContacto}" />

                                <p:outputLabel value="Celular" for="celular" style="font-weight:bold"/>
                                <p:inputText id="celular" value="#{portabilidadBean.objeto.telefonoContacto2}" onkeypress="return soloNumeros(event)" maxlength="10"/>

                                <p:outputLabel value="Correo Electrónico" for="correoElectronico" style="font-weight:bold"/>
                                <p:inputText id="correoElectronico" value="#{portabilidadBean.objeto.correoElectronico}" label="Correo electrónico" maxlength="256" required="true">
                                    <f:validator validatorId="validarCorreo"/>
                                </p:inputText>

                                <p:outputLabel value="Tipo Portabilidad" style="font-weight:bold"/>
                                <p:outputLabel id="lblTipoPortabilidadUpd" value="#{portabilidadBean.objeto.maeTipoPortabilidadValor}"/>

                                <p:outputLabel value="Observación" style="font-weight:bold"/>
                                <p:column class="ui-g-10">
                                    <p:inputTextarea rows="5" cols="155" onkeypress="return noPuntuacion(event)" value="#{portabilidadBean.objeto.observacionUsuario}" counter="display1Editar1" maxlength="256" counterTemplate="{0} caracteres faltantes." autoResize="true" required="false" style="width:98%"/>
                                    <h:outputText id="display1Editar1" />
                                </p:column>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlEditarAsignacionPortabilidad" header="Asignación de Portabilidad" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelEditar3" columns="4" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">
                                
                                        <p:outputLabel value="Sede IPS Asignada" for="sedeIpsPrimaria" style="font-weight:bold"/>
                                
                                        <p:selectOneMenu id="sedeIpsPrimaria"
                                            value="#{portabilidadBean.objeto.cntPrestadorSede}"
                                            converter="cntPrestadorSedesConverter" filter="true" filterMatchMode="contains"
                                            editable="false" required="#{!portabilidadBean.cancelacionORechazo}" disabled="#{portabilidadBean.cancelacionORechazo}" >
                                               <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                               <f:selectItems value="#{portabilidadBean.listaCntPrestadorSedes}" var="sede" itemValue="#{sede}" itemLabel="#{sede.cntPrestador.razonSocial} - #{sede.nombreSede}" />
                                        </p:selectOneMenu>
                                
                                        <p:outputLabel value="Estado Portabilidad" for="somEstadoPortabilidadEdit" style="font-weight:bold"/>
                                
                                    <p:column class="ui-g-4">
                                        <p:remoteCommand name="cargarCancelar" action ="#{portabilidadBean.cargarEstadoCancelar()}"/>
                                        <p:selectOneMenu id="somEstadoPortabilidadEdit"
                                                         value="#{portabilidadBean.objeto.maeEstadoPortabilidadId}" 
                                                         editable="false" required="true">
                                            <f:selectItem itemLabel='--' itemValue='#{null}' noSelectionOption="true"/>
                                            <f:selectItems value="#{portabilidadBean.listaEstadoPortabilidadInterno}" var="estadoPort" itemValue="#{estadoPort.id}" itemLabel="#{estadoPort.nombre}" itemDescription="#{estadoPort.descripcion}"/>
                                            <p:ajax event="itemSelect" oncomplete="cargarCancelar()" update="pnlEditarCancelacionPortabilidad" />
                                        </p:selectOneMenu>
                                    </p:column>
                            
                                        <p:outputLabel value="Observación Aseguramiento" style="font-weight:bold"/>
                                        
                                    <p:column class="ui-g-10">
                                        <p:inputTextarea rows="5" cols="155" onkeypress="return noPuntuacion(event)" value="#{portabilidadBean.objeto.observacionAseguramiento}" counter="display1Editar" maxlength="256" counterTemplate="{0} caracteres faltantes." autoResize="true" required="false" style="width:98%"/>
                                        <h:outputText id="display1Editar" />
                                    </p:column>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlEditarCancelacionPortabilidad" header="Cancelación de Portabilidad" rendered="#{portabilidadBean.cancelacion}" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelEditar4" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" rendered="#{portabilidadBean.cancelacion}" >


                                <p:outputLabel value="Fecha Solicitud Cancelación" for="cldFechaCancela" style="font-weight:bold"/>
                                <p:calendar navigator="true" id="cldFechaCancela" pattern="yyyy-MM-dd" yearRange="c-100:c" required="#{portabilidadBean.cancelacion}" maxlength="10" value="#{portabilidadBean.objeto.fechaSolicitudCancelacion}">
                                </p:calendar>

                                <p:outputLabel value="Fecha Cancelación" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.fechaCancelacion}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </p:outputLabel>
                            </p:panelGrid>
                            <p:panelGrid id="panelEditar7" columns="2"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">
                                <p:outputLabel value="Usuario Cancela" style="font-weight:bold"/>
                                <p:outputLabel value="#{portabilidadBean.objeto.usuarioCancela}"/>
                                
                                <p:outputLabel value="Observación Cancelación" style="font-weight:bold"/>
                                <p:column class="ui-g-10">
                                    <p:inputTextarea rows="5" cols="155" onkeypress="return noPuntuacion(event)" value="#{portabilidadBean.objeto.observacionCancelacion}" counter="displayCancelar" maxlength="256" counterTemplate="{0} caracteres faltantes." autoResize="true" required="false" style="width:98%"/>
                                    <h:outputText id="displayCancelar" />
                                </p:column>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlEditarProrrogaPortabilidad" header="Prórroga" rendered="#{portabilidadBean.prorroga}" toggleable="true">
                            <p:panelGrid id="panelEditar5" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Fecha Solicitud Prórroga" for="cldFechaSolicitud" style="font-weight:bold" />
                                <h:outputText id="cldFechaSolicitud" value="#{portabilidadBean.objeto.fechaSolicitudProrroga}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                </h:outputText>

                                <p:outputLabel value="Meses de Prórroga" for="numeroMeses" style="font-weight:bold" />
                                <p:inputNumber id="numeroMeses" label="Meses de Prórroga" value="#{portabilidadBean.objeto.mesesProrroga}" required="true" requiredMessage="Meses de Prórroga: Este campo es obligatorio."
                                               size="30" maxlength="2" minValue="0" emptyValue="empty" maxValue="24" >
                                    <p:keyFilter regEx="/[\d\-\.]/"/> 
                                </p:inputNumber>
                            </p:panelGrid>
                            <p:panelGrid id="panelEditar8" columns="2"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">
                                <p:outputLabel value="Observación" style="font-weight:bold" />
                                <p:column class="ui-g-10">
                                    <p:inputTextarea rows="5" cols="155" onkeypress="return noPuntuacion(event)" value="#{portabilidadBean.objeto.observacionProrroga}" counter="displayProrroga" maxlength="256" counterTemplate="{0} caracteres faltantes." autoResize="true" required="false" style="width:98%"/>
                                    <h:outputText id="displayProrroga" />
                                </p:column>
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelEditar6" style="width:100%;height:auto; border:1px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Modificar" type="button" onclick="modificarRemote()" validateClient="true"/>
                                        <p:remoteCommand name="modificarRemote" action ="#{portabilidadBean.modificar}" update="panelEditar1,panelEditar2,panelEditar3,panelEditar4,panelEditar5,panelEditar6"/>
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoEditar').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Dirección" widgetVar="dialogoDireccion" appendTo="@(body)" modal="true" width="60%" dynamic="true">
                <p:scrollPanel mode="native">
                    <h:form id="frmDireccion">
                        <p:panelGrid  id="contentPanelDireccion" columns="6" layout="grid" styleClass="showcase-text-align-center">

                            <p:outputLabel value="Dirección" style="font-weight:bold"/>
                            <p:selectOneMenu style="width:100px;" editable="false" value="#{portabilidadBean.direccion.via}" required="true" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.direccion.mapVias.entrySet()}" var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}" />
                                <p:ajax event="change" update="frmDireccion"/>
                            </p:selectOneMenu>
                            <p:inputText style="width: 30px;" value="#{portabilidadBean.direccion.numero}" maxlength="3" disabled="#{portabilidadBean.direccion.sinDireccion}"/>
                            <p:selectOneMenu style="width:50px;" value="#{portabilidadBean.direccion.ord1}" editable="false" disabled="#{portabilidadBean.direccion.sinDireccion}">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.direccion.mapOrd.entrySet()}" var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}" />
                            </p:selectOneMenu>
                            <p:selectOneMenu style="width:50px;" value="#{portabilidadBean.direccion.orientacion1}" editable="false" disabled="#{portabilidadBean.direccion.sinDireccion}">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.direccion.mapOrientacion.entrySet()}" var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}" />
                            </p:selectOneMenu>
                            <p:outputLabel value=" #"/>
                            <p:inputText style="width:30px;" value="#{portabilidadBean.direccion.placa1}" maxlength="3" disabled="#{portabilidadBean.direccion.sinDireccion}"/>
                            <p:selectOneMenu style="width:50px;" value="#{portabilidadBean.direccion.ord2}" editable="false" disabled="#{portabilidadBean.direccion.sinDireccion}">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.direccion.mapOrd.entrySet()}" var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}" />
                            </p:selectOneMenu>
                            <p:selectOneMenu style="width:50px;" value="#{portabilidadBean.direccion.orientacion2}"  editable="false" disabled="#{portabilidadBean.direccion.sinDireccion}">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{portabilidadBean.direccion.mapOrientacion.entrySet()}" var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}" />
                            </p:selectOneMenu>
                            <p:outputLabel value=" - "/>
                            <p:inputText style="width:30px;" value="#{portabilidadBean.direccion.placa2}" maxlength="3" disabled="#{portabilidadBean.direccion.sinDireccion}"/>
                        </p:panelGrid>
                        <p:panelGrid id="panelGridDireccion2" columns="2" layout="grid" styleClass="showcase-text-align-center">
                            <p:outputLabel value="Descripción" style="font-weight:bold"/>
                            <p:inputText value="#{portabilidadBean.direccion.descripcion}" style="width: 90%;" label="Descripcion" maxlength="35" onkeypress="return noPuntuacion(event)" onkeyup="return mayus(this)"/>
                        </p:panelGrid>

                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer" >
                                <p:row>
                                    <p:column colspan="8" style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center; margin-top: 10px;">
                                            <p:commandButton value="Actualizar" type="button" onclick="retornarDireccionRemote()" validateClient="true"/>
                                            <p:remoteCommand name="retornarDireccionRemote" action ="#{portabilidadBean.retornarDireccion()}" />
                                            <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoDireccion').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <!-- Buscadores adjuntos -->
            <ui:include src="../aseguramiento/seleccion/sel_afiliado.xhtml" />
        </center>
        <h:form id="exit">
            <p:remoteCommand  id="limpiarRender" name="limpiarRender" action="#{portabilidadBean.salir()}"/>
        </h:form>
    </ui:define>
</ui:composition>
