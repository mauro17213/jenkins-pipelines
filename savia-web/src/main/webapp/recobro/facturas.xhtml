<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR">
        <style type="text/css">
            .selectmenu-full-width {
                width: 100% !important;
            }

            .selectmenu-full-width .ui-selectonemenu {
                width: 100% !important;
            }

            .selectmenu-full-width .ui-selectonemenu-label {
                width: calc(100% - 20px) !important;
            }

        </style>
        <style type="text/css">

            .ui-selectonemenu-panel{
                overflow: auto !important;
                width: 200px !important;
            }
            .green{
                background-color: #009900 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .red{
                background-color: #ff0000 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                border: 1px solid #e5e2e2;
            }
        </style>
        <script type="text/javascript">
            //<![CDATA[
            window.onload = function () {
                inhabilitarEnter();
            };

            function inhabilitarEnter() {
                $("input").keypress(function (e) {
                    var key;
                    if (window.event)
                        key = window.event.keyCode;
                    else
                        key = e.which;
                    return (key != 13);
                });
            }
            ;

            //]]>
        </script>
        <h:outputStylesheet name="css/administracion.css"/>  
        <center>
            <!-- LISTAR -->
            <h:form id="frmFacturas">
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{recobroFacturaBean.modulo.descripcion}">#{recobroFacturaBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{recobroFacturaBean.accionListar}" title="Refrescar" class="btn-icono" icon="pi pi-sync" onclick="PF('tableFactura').filter()"/>
                    </f:facet>
                </p:toolbar>
                <p:dataTable id="tablaRegistros" widgetVar="tableFactura" var="obj" value="#{recobroFacturaBean.lazyRcoFacturas}" rowKey="#{obj.id}"
                             rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,30,50,100" 
                             emptyMessage="No se encontraron registros">

                    <p:column style="text-align: center;">
                        <f:facet name="header">
                            <h:outputText value="Acciones"/>
                        </f:facet>
                        <p:commandButton title="Ver Recobro"  actionListener="#{recobroFacturaBean.ver(obj.id)}" class="btn-icono" icon="pi pi-search"/>
                        <p:commandButton title="Gestionar" rendered="#{recobroFacturaBean.accionAdicional1}" actionListener="#{recobroFacturaBean.gestionar(obj.id)}" class="btn-icono" icon="pi pi-folder-open"/>
                    </p:column>

                    <p:column headerText="Número recobro" filterBy="#{obj.id}" >
                        <f:facet name="filter">
                            <p:inputText label="numeroRadicado" maxlength="16" style="width: 95%;"/>
                        </f:facet>
                        <h:outputText value="#{obj.id}" />
                    </p:column>
                    <p:column headerText="Número factura" filterBy="#{obj.numeroFacturado}" >
                        <f:facet name="filter">
                            <p:inputText label="id" maxlength="16" style="width: 95%;" />
                        </f:facet>
                        <h:outputText value="#{obj.numeroFacturado}"/>
                    </p:column>
                    <p:column headerText="Número radicado" filterBy="#{obj.numeroRadicado}" >
                        <f:facet name="filter">
                            <p:inputText label="numeroRadicado" maxlength="16" style="width: 95%;"/>
                        </f:facet>
                        <h:outputText value="#{obj.numeroRadicado}"/>
                    </p:column>

                    <p:column headerText="NIT" filterBy="#{obj.nit}" >
                        <f:facet name="filter">
                            <p:inputText label="nit" maxlength="16" style="width: 95%;"/>
                        </f:facet>
                        <h:outputText value="#{obj.nit}"/>
                    </p:column>

                    <p:column headerText="Prestador" filterBy="#{obj.cntPrestadoreId.razonSocial}">
                        <f:facet name="filter">
                            <p:inputText label="Prestador" maxlength="16" style="width: 95%;" />
                        </f:facet>
                        <h:outputText value="#{obj.cntPrestadoreId.razonSocial}" />
                    </p:column>

                    <p:column headerText="Modalidad Contrato" filterBy="#{obj.maeTipoContratoValor}" >
                        <f:facet name="filter">
                            <p:selectOneMenu  style="width: 88%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItem itemLabel="CAPITA" itemValue="CAPITA"></f:selectItem>
                                <f:selectItem itemLabel="EVENTO" itemValue="EVENTO"></f:selectItem>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeTipoContratoValor}"/>
                    </p:column>
                    <p:column headerText="Estado" filterBy="#{obj.maeEstadoRecobroId}">
                        <f:facet name="filter">
                            <p:selectOneMenu style="width: 80%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{recobroFacturaBean.listaEstadoFactura}" var="estFactura" itemValue="#{estFactura.id}" itemLabel="#{estFactura.nombre}" itemDescription="#{estFactura.descripcion}" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeEstadoRecobroValor}" />
                    </p:column>
                    <p:column  headerText="Fecha radicación" sortBy="#{obj.fechaHoraRadicacion}">
                        <h:outputText value="#{obj.fechaHoraRadicacion}"/>
                    </p:column>

                    <p:column  headerText="Valor factura" sortBy="#{obj.valorFactura}" width="100" style="text-align: center;">
                        <f:facet name="filter">
                            <p:inputText label="Valor factura" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tableFactura').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.valorFactura}" title="#{obj.valorFactura}">
                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                        </h:outputText>
                    </p:column> 
                    <p:column  headerText="Valor inicial glosa" sortBy="#{obj.valorInicialGlosa}" width="100" style="text-align: center;">
                        <f:facet name="filter">
                            <p:inputText label="Valor inicial glosa" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                        onchange();
                                        return false;
                                    }"  onchange="PF('tableFactura').filter()" />
                        </f:facet>
                        <h:outputText value="#{obj.valorInicialGlosa}" title="#{obj.valorInicialGlosa}">
                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Fecha creación" sortBy="#{obj.fechaHoraCrea}">
                        <h:outputText value="#{obj.fechaHoraCrea}" >
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Fecha cuenta medica" sortBy="#{obj.cmFechaHoraCrea}">
                        <h:outputText value="#{obj.cmFechaHoraCrea}" >
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
            </h:form>

            <!-- Gestionar -->
            <p:dialog header="Gestionar" widgetVar="dialogoGestionarFactura" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmGestionarFactura">
                        <p:panel id="pFacturaGestionar" header="Datos Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelFacturaGrestionar" >
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="CM Factura Id" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.cmFacturaId.id}"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Razón Social" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.cntPrestadoreId.razonSocial}"/>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Aplica recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.aplicaRecobroStr}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tipo de recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.tipoRecobro}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Contrato codigo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeTipoContratoCodigo}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Modalidad Contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeTipoContratoValor}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Numero del contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.numeroContrato}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Nit" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.nit}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Ips" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.ips}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Numero radicado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.numeroRadicado}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Numero Facturado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.numeroFacturado}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objeto.valorFactura}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor pagado factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objeto.valorPagadoFactura}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Estado Factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.estadoFactura}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha hora prestacion" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objeto.fechaHoraPrestacion}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha hora radicacion" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objeto.fechaHoraRadicacion}" >
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Regimen codigo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeRegimenCodigo}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Regimen" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeRegimenValor}" />
                                    </p:column>
                                </p:row>
                                <p:row>  
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor inicial glosa" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objeto.valorInicialGlosa}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Estado recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeEstadoRecobroValor}" />
                                    </p:column>
                                </p:row> 
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pFacturaDetalles" header="Detalles" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:toolbar>
                                <f:facet name="left" >
                                    <p:commandButton process="@form" value="Gestión Items seleccionadas" title="Gestión facturas seleccionadas" rendered="#{recobroFacturaBean.accionAdicional1}" action="#{recobroFacturaBean.verSeleccionOperacionMasiva(recobroFacturaBean.objeto.cmFacturaId.id,0)}" icon="ui-icon-script"  style="margin-bottom: 10px;"/>
                                    <p:commandButton process="@form" value="Gestión todos los Items" title="Gestion de todos los items" rendered="#{recobroFacturaBean.accionAdicional1}" action="#{recobroFacturaBean.verSeleccionOperacionMasiva(recobroFacturaBean.objeto.id,1)}" icon="ui-icon-gear" style="margin-bottom: 10px;"/>
                                </f:facet>
                                <f:facet name="right">
                                    <p:commandButton rendered="#{recobroFacturaBean.accionListar}" title="Refrescar" class="btn-icono" icon="pi pi-sync" onclick="PF('tableFacturaDetalles').filter()"/>
                                </f:facet>
                            </p:toolbar>
                            <p:dataTable id="tablaDetalleFactura" widgetVar="tableFacturaDetalles" var="objFacturaDetalle" value="#{recobroFacturaBean.lazyRcoFacturasDetalles}" rowKey="#{objFacturaDetalle.id}"
                                         rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage="No se encontraron registros"
                                         selection="#{recobroFacturaBean.registroDetalleFacturaSeleccionadoMasivos}"
                                         scrollable="true"
                                         scrollWidth="100%"
                                         rowIndexVar="rowIndex"
                                         style="font-size:11px;">
                                <p:column width="80"  selectionMode="multiple"  style="text-align: center;" exportable="false"/>

                                <p:ajax event="toggleSelect" listener="#{recobroFacturaBean.onCheckearTodosItems}" />
                                <p:ajax event="rowUnselectCheckbox" listener="#{recobroFacturaBean.onDescheckearItem}" />
                                <p:ajax event="rowSelectCheckbox" listener="#{recobroFacturaBean.onCheckearItem}"/>
                                <p:ajax event="rowSelect" listener="#{recobroFacturaBean.onSeleccionarFilaMasiva}"  />
                                <p:ajax event="rowUnselect" listener="#{recobroFacturaBean.onDeseleccionarFilaMasiva}" /> 

                                <p:column headerText="Acciones">
                                    <f:facet name="filter">
                                        <p:inputText label="Detalle factura" maxlength="16" style="width: 95%;"/>
                                    </f:facet>
                                    <p:commandButton rendered="#{recobroFacturaBean.accionAdicional1 and objFacturaDetalle.estadoFacturaAuditada}" title="Gestionar Detalle Factura" actionListener="#{recobroFacturaBean.gestionarDetalleFactura(objFacturaDetalle.id)}" class="btn-icono" icon="pi pi-folder-open"/>
                                    <p:commandButton actionListener="#{recobroFacturaBean.verDetalledeDetalleFactura(objFacturaDetalle.id)}" title="Ver Detalle de la Factura" class="btn-icono" icon="pi pi-search"/>
                                </p:column>
                                <p:column headerText="Detalle factura" filterBy="#{objFacturaDetalle.cmDetalleId.id}">
                                    <f:facet name="filter">
                                        <p:inputText label="Detalle factura" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.cmDetalleId.id}" />
                                </p:column>
                                <p:column headerText="Nombre prestador" filterBy="#{objFacturaDetalle.cntPrestadoresSedesId.nombreSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre prestador" maxlength="16" style="width: 95%;"/>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.cntPrestadoresSedesId.nombreSede}" />
                                </p:column>
                                <p:column headerText="Aplica Recobro" filterBy="#{obj.aplicaRecobro}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 88%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Si" itemValue="#{true}" />  
                                            <f:selectItem itemLabel="No" itemValue="#{false}" />  
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.aplicaRecobroStr}" />   
                                    <i class="pi pi-circle-on" style="color: #{objFacturaDetalle.aplicaRecobroColor}"/>
                                </p:column>
                                <p:column headerText="Estado" filterBy="#{objFacturaDetalle.maeEstadoId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{recobroFacturaBean.listaEstadoAuditoria}" var="estAuditoria" itemValue="#{estAuditoria.id}" itemLabel="#{estAuditoria.nombre}" itemDescription="#{estAuditoria.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.maeEstadoValor}" />
                                </p:column>
                                <p:column headerText="Modalidad" filterBy="#{objFacturaDetalle.modalidad}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="CAPITA" itemValue="1" />   
                                            <f:selectItem itemLabel="PGP" itemValue="0" /> 
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.modalidadStr}" />   
                                </p:column>
                                <p:column headerText="Observación recobro" filterBy="#{objFacturaDetalle.observacionDetalle}">
                                    <f:facet name="filter">
                                        <p:inputText label="Observación recobro" maxlength="16" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.observacionDetalle}" />
                                </p:column>
                                <p:column headerText="Causal Recobro" filterBy="#{objFacturaDetalle.causalRecobro}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 88%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Porcentaje Facturado" itemValue="#{false}" ></f:selectItem>
                                            <f:selectItem itemLabel="Total Facturado" itemValue="#{true}"></f:selectItem>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.causalRecobroStr}"/>
                                </p:column>
                                <p:column headerText="Tipo servicio" filterBy="#{objFacturaDetalle.tipoServicio}">
                                    <f:facet name="filter">
                                        <p:inputText label="Tipo servicio" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.tipoServicio}" />
                                </p:column>
                                <p:column headerText="ID Conciliacion" filterBy="#{objFacturaDetalle.rcoConciliacionId.id}">
                                    <f:facet name="filter">
                                        <p:inputText label="ID Conciliacion" maxlength="32" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.rcoConciliacionId.id}" />
                                </p:column>
                                <p:column headerText="Estado Conciliacion" filterBy="#{objFacturaDetalle.estadoConciliacion}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 88%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="No Conciliado" itemValue="#{false}" ></f:selectItem>
                                            <f:selectItem itemLabel="Conciliado" itemValue="#{true}"></f:selectItem>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.estadoConciliacionStr}"/>
                                </p:column>
                                <p:column headerText="Tipo documento" filterBy="#{objFacturaDetalle.maeTipoDocumentoId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{recobroFacturaBean.listaTipoDocumento}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.nombre}" itemDescription="#{tipoDoc.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.maeTipoDocumentoCodigo}" />
                                </p:column>
                                <p:column headerText="Documento" filterBy="#{objFacturaDetalle.documento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Documento" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.documento}" />
                                </p:column>
                                <p:column headerText="Nombre afiliado" filterBy="#{objFacturaDetalle.nombreCompleto}">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre afiliado" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.nombreCompleto}" />
                                </p:column>
                                <p:column headerText="Codigo tecnologia" filterBy="#{objFacturaDetalle.maServicioCodigo}">
                                    <f:facet name="filter">
                                        <p:inputText label="Codigo tecnologia" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.maServicioCodigo}" />
                                </p:column>
                                <p:column headerText="Tecnologia" filterBy="#{objFacturaDetalle.maServicioValor}">
                                    <f:facet name="filter">
                                        <p:inputText label="Tecnologia" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.maServicioValor}" />
                                </p:column>
                                <p:column  headerText="Valor factura" sortBy="#{objFacturaDetalle.valorFacturado}" width="100" style="text-align: center;">
                                    <f:facet name="filter">
                                        <p:inputText label="Valor facturado" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetFacturas').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.valorFacturado}" title="#{objFacturaDetalle.valorFacturado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column> 
                                <p:column headerText="Observacion" filterBy="#{objFacturaDetalle.observacion}">
                                    <f:facet name="filter">
                                        <p:inputText label="Observacion" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.observacionNombreCorto}" />
                                    <p:commandButton rendered="#{objFacturaDetalle.observacion.length() > 20 }" actionListener="#{recobroFacturaBean.mostrarMensajeGeneral(objFacturaDetalle.observacion)}" icon="ui-icon-comment" immediate="true" title="Ver completo"/>
                                </p:column>
                                <p:column headerText="Fecha Hora Prestacion" sortBy="#{objFacturaDetalle.fechaHoraPrestacion}" width="100" style="text-align: center;">
                                    <h:outputText value="#{objFacturaDetalle.fechaHoraPrestacion}" />
                                </p:column>
                                <p:column headerText="Concepto contable" filterBy="#{objFacturaDetalle.conceptoContable}">
                                    <f:facet name="filter">
                                        <p:inputText label="Concepto contable" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.conceptoContable}" />
                                </p:column>
                                <p:column headerText="Diagnostico" filterBy="#{objFacturaDetalle.maDiagnostico}">
                                    <f:facet name="filter">
                                        <p:inputText label="Diagnostico" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objFacturaDetalle.maDiagnostico}" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!--Acciones-->
                        <p:panelGrid id="panelAccionesVer" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">              
                                        <p:commandButton value="Salir" type="button" onclick="salirGestionarRemote()" validateClient="true" />
                                        <p:remoteCommand name="salirGestionarRemote" action="#{recobroFacturaBean.salirAuditoriaFacturas()}"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Ver Recobro de la Factura -->
            <p:dialog header="Ver Detalle Factura" widgetVar="dialogoVerFactura" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmVerFactura">
                        <p:panel id="pVerGestionar" header="Datos Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelVerFactura" >
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="CM Factura Id" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.cmFacturaId.id}"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Razón Social" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.cntPrestadoreId.razonSocial}"/>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Aplica recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.aplicaRecobroStr}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tipo de recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.tipoRecobro}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Contrato codigo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeTipoContratoCodigo}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Modalidad Contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeTipoContratoValor}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Numero del contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.numeroContrato}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Nit" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.nit}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Ips" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.ips}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Numero radicado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.numeroRadicado}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Numero Facturado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.numeroFacturado}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objeto.valorFactura}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor pagado factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objeto.valorPagadoFactura}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Estado Factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.estadoFactura}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha hora prestacion" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objeto.fechaHoraPrestacion}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha hora radicacion" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objeto.fechaHoraRadicacion}" >
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Regimen codigo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeRegimenCodigo}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Regimen" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeRegimenValor}" />
                                    </p:column>
                                </p:row>
                                <p:row>  
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor inicial glosa" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objeto.valorInicialGlosa}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Estado recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeEstadoRecobroValor}" />
                                    </p:column>
                                </p:row> 
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pVerFacturaDetalles" header="Detalles" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:toolbar>
                                <f:facet name="right">
                                    <p:commandButton rendered="#{recobroFacturaBean.accionListar}" title="Refrescar" icon="ui-icon-refresh" onclick="PF('tableVerFacturaDetalles').filter()"/>
                                </f:facet>
                            </p:toolbar>
                            <p:dataTable id="tablaVerDetalleFactura" widgetVar="tableVerFacturaDetalles" var="objVerFacturaDetalle" value="#{recobroFacturaBean.lazyVerRcoFacturasDetalles}" rowKey="#{objVerFacturaDetalle.id}"
                                         rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage="No se encontraron registros"
                                         selection="#{recobroFacturaBean.registroDetalleFacturaSeleccionadoMasivos}"
                                         scrollable="true"
                                         rowIndexVar="rowIndex"
                                         scrollWidth="100%"
                                         style="font-size:11px;">
                                <p:column headerText="Acciones" style="text-align:center">
                                    <p:commandButton actionListener="#{recobroFacturaBean.verDetalledeDetalleFactura(objVerFacturaDetalle.id)}" title="Ver Detalle de la Factura" class="btn-icono" icon="pi pi-search" />
                                </p:column>
                                <p:column headerText="Detalle factura" filterBy="#{objVerFacturaDetalle.cmDetalleId.id}">
                                    <f:facet name="filter">
                                        <p:inputText label="Detalle factura" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.cmDetalleId.id}" />
                                </p:column>
                                <p:column headerText="Nombre prestador" filterBy="#{objVerFacturaDetalle.cntPrestadoresSedesId}">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre prestador" maxlength="16" style="width: 95%;"/>
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.cntPrestadoresSedesId.cntPrestador}" />
                                </p:column>
                                <p:column headerText="Aplica Recobro" filterBy="#{obj.aplicaRecobro}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 88%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Si" itemValue="#{true}" />  
                                            <f:selectItem itemLabel="No" itemValue="#{false}" />  
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.aplicaRecobroStr}" />   
                                    <i class="pi pi-circle-on" style="color: #{objVerFacturaDetalle.aplicaRecobroColor}"/>
                                </p:column>
                                <p:column headerText="Estado" filterBy="#{objVerFacturaDetalle.maeEstadoId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 88%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Auditado" itemValue="62181" />   
                                            <f:selectItem itemLabel="Sin Auditar" itemValue="6218" /> 
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.maeEstadoValor}" />  
                                </p:column>
                                <p:column headerText="Modalidad" filterBy="#{objVerFacturaDetalle.modalidad}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="CAPITA" itemValue="1" />   
                                            <f:selectItem itemLabel="PGP" itemValue="0" /> 
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.modalidadStr}" />   
                                </p:column>

                                <p:column headerText="Observación recobro" filterBy="#{objVerFacturaDetalle.observacionDetalle}">
                                    <f:facet name="filter">
                                        <p:inputText label="Observación recobro" maxlength="16" style="width: 95%;" onchange="PF('tableVerFacturaDetalles').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.observacionDetalle}" />
                                </p:column>
                                <p:column headerText="Causal Recobro" filterBy="#{objVerFacturaDetalle.causalRecobro}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu  style="width: 88%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Porcentaje Facturado" itemValue="#{false}" ></f:selectItem>
                                            <f:selectItem itemLabel="Total Facturado" itemValue="#{true}"></f:selectItem>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.causalRecobro == true ? 'Total Facturado' : 'Porcentaje Facturado'}"/>
                                </p:column>

                                <p:column headerText="Tipo servicio" filterBy="#{objVerFacturaDetalle.tipoServicio}">
                                    <f:facet name="filter">
                                        <p:inputText label="Tipo servicio" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.tipoServicio}" />
                                </p:column>
                                <p:column headerText="Tipo documento" filterBy="#{objVerFacturaDetalle.maeTipoDocumentoCodigo}">
                                    <f:facet name="filter">
                                        <p:inputText label="Tipo documento" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.maeTipoDocumentoCodigo}" />
                                </p:column>
                                <p:column headerText="Documento" filterBy="#{objVerFacturaDetalle.documento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Documento" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.documento}" />
                                </p:column>
                                <p:column headerText="Nombre afiliado" filterBy="#{objVerFacturaDetalle.nombreCompleto}">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre afiliado" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.nombreCompleto}" />
                                </p:column>
                                <p:column headerText="Codigo tecnologia" filterBy="#{objVerFacturaDetalle.maServicioCodigo}">
                                    <f:facet name="filter">
                                        <p:inputText label="Codigo tecnologia" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.maServicioCodigo}" />
                                </p:column>
                                <p:column headerText="Tecnologia" filterBy="#{objVerFacturaDetalle.maServicioValor}">
                                    <f:facet name="filter">
                                        <p:inputText label="Tecnologia" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.maServicioValor}" />
                                </p:column>
                                <p:column  headerText="Valor factura" sortBy="#{objVerFacturaDetalle.valorFacturado}" width="100" style="text-align: center;">
                                    <f:facet name="filter">
                                        <p:inputText label="Valor facturado" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tableVerFacturaDetalles').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.valorFacturado}" title="#{objVerFacturaDetalle.valorFacturado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column> 
                                <p:column headerText="Observacion" filterBy="#{objVerFacturaDetalle.observacion}">
                                    <f:facet name="filter">
                                        <p:inputText label="Observacion" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.observacionNombreCorto}" />
                                    <p:commandButton rendered="#{objVerFacturaDetalle.observacion.length() > 20 }" actionListener="#{recobroFacturaBean.mostrarMensajeGeneral(objVerFacturaDetalle.observacion)}" icon="ui-icon-comment" immediate="true" title="Ver completo"/>
                                </p:column>
                                <p:column headerText="Fecha Hora Prestacion" sortBy="#{objVerFacturaDetalle.fechaHoraPrestacion}" width="100" style="text-align: center;">
                                    <h:outputText value="#{objVerFacturaDetalle.fechaHoraPrestacion}" />
                                </p:column>
                                <p:column headerText="Concepto contable" filterBy="#{objVerFacturaDetalle.conceptoContable}">
                                    <f:facet name="filter">
                                        <p:inputText label="Concepto contable" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.conceptoContable}" />
                                </p:column>
                                <p:column headerText="Diagnostico" filterBy="#{objVerFacturaDetalle.maDiagnostico}">
                                    <f:facet name="filter">
                                        <p:inputText label="Diagnostico" maxlength="16" style="width: 95%;" />
                                    </f:facet>
                                    <h:outputText value="#{objVerFacturaDetalle.maDiagnostico}" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <!--Acciones-->
                        <p:panelGrid id="panelAccionesVer" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">              
                                        <p:commandButton value="Salir" type="button" onclick="salirVerRemote()" validateClient="true" />
                                        <p:remoteCommand name="salirVerRemote" action="PF('dialogoVerFactura').hide()"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Datos Detalle Factura -->
            <p:dialog header="Gestionar Detalle Factura" widgetVar="dialogoGestionarDetalleFactura" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:400px">
                    <h:form id="frmGestionarDetalleFactura">
                        <p:panel id="pAfiliadoVer" header="Afiliado" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelAfiliadoVer" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel id="tipoDocumentoVer" value="#{recobroFacturaBean.asegAfiliadoId.maeTipoDocumentoValor}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold" />
                                <p:outputLabel id="numeroDocumentoVer" value="#{recobroFacturaBean.asegAfiliadoId.numeroDocumento}" />

                                <p:outputLabel value="Contrato Afiliado" style="font-weight:bold"/>
                                <p:outputLabel id="codigoAfiliadoVer" value="#{recobroFacturaBean.asegAfiliadoId.idAfiliado}"/>

                                <p:outputLabel value="Nombres" style="font-weight:bold"/>
                                <p:outputLabel id="nombresVer" value="#{recobroFacturaBean.asegAfiliadoId.nombres}"/>

                                <p:outputLabel value="Apellidos" style="font-weight:bold"/>
                                <p:outputLabel id="apellidosVer" value="#{recobroFacturaBean.asegAfiliadoId.apellidos}"/>

                                <p:outputLabel value="Fecha Nacimiento" style="font-weight:bold"/>
                                <p:outputLabel id="fechaNacimientoVer" value="#{recobroFacturaBean.convertirFecha(recobroFacturaBean.asegAfiliadoId.fechaNacimiento)}"/>

                                <p:outputLabel value="Dirección" style="font-weight:bold"/>
                                <p:outputLabel id="direccionVer" value="#{recobroFacturaBean.asegAfiliadoId.direccionResidencia}"/>

                                <p:outputLabel value="Regimen" style="font-weight:bold"/>
                                <p:outputLabel id="regimenVer" value="#{recobroFacturaBean.asegAfiliadoId.maeRegimenValor}"/>

                                <p:outputLabel value="Genero" style="font-weight:bold"/>
                                <p:outputLabel id="generoVer" value="#{recobroFacturaBean.asegAfiliadoId.maeGeneroValor}"/>

                                <p:outputLabel value="Edad" style="font-weight:bold"/>
                                <p:outputLabel id="edadVer" value="#{recobroFacturaBean.calcularEdad(recobroFacturaBean.asegAfiliadoId.fechaNacimiento)}"/>

                                <p:outputLabel value="Tipo Afiliado" style="font-weight:bold"/>
                                <p:outputLabel id="tipoAfiliadoVer" value="#{recobroFacturaBean.asegAfiliadoId.maeTipoAfiliadoValor}"/>

                                <p:outputLabel value="Estado Afiliacion" style="font-weight:bold"/>
                                <p:outputLabel id="estadoAfiliacionVer" value="#{recobroFacturaBean.asegAfiliadoId.maeEstadoAfiliacionValor}" style="font-weight:bold"/>

                                <p:outputLabel value="Grupo Poblacional" style="font-weight:bold"/>
                                <p:outputLabel id="grupoPoblacionalVer" value="#{recobroFacturaBean.asegAfiliadoId.maeGrupoPoblacionalValor}"/>

                                <p:outputLabel value="IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{recobroFacturaBean.asegAfiliadoId.primariaPrestadorSede.nombreSede}"/>
                            </p:panelGrid>                            
                        </p:panel>
                        <!-- Gestionar Detalle Factura-->
                        <p:panel id="pGestionarDetalleFactura" header="Datos Detalle Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelGestionarDetalleFactura" >
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Detalle Factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.cmDetalleId.id}" style="width: 95%"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Aplica recobro" for="aplicaRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputSwitch id="aplicaRecobro" onLabel="Sí" offLabel="No" value="#{recobroFacturaBean.objFacturaDetalle.aplicaRecobro}" immediate="true" >
                                            <p:ajax event="change" listener="#{recobroFacturaBean.onChangeAplicaRecobroPorGestion()}" update="frmGestionarDetalleFactura"/>
                                        </p:inputSwitch>
                                    </p:column>  
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Nombre Prestador" for="actualizarIPS" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputText id="actualizarIPS" value="#{recobroFacturaBean.cntPresdadorSedeId.nombreSede}" style="width: 95%" readonly="true" required="#{recobroFacturaBean.deshabilitarObligatoriedadGestionar}" requiredMessage="Prestador Obligatorio"/>
                                        <p:commandButton disabled="#{recobroFacturaBean.deshabilitarbuttomsGestionar}" immediate="true" action="#{recobroFacturaBean.consultarIPS()}" class="btn-icono" icon="pi pi-home" title="IPS"/>  
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Grupo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputText id="columGrupo" value="#{recobroFacturaBean.objGrupo.nombre}" style="width: 95%" readonly="true" required="#{recobroFacturaBean.deshabilitarObligatoriedadGestionar}" requiredMessage="Grupo Obligatorio"/>
                                        <p:commandButton disabled="#{recobroFacturaBean.deshabilitarbuttomsGestionar}" immediate="true" action="#{recobroFacturaBean.verGrupos()}" class="btn-icono" icon="pi pi-users" title="Grupos" />  
                                    </p:column>              
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Programa Especial" for="programaCrear" style="font-weight:bold;width: 100%"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:selectOneMenu id="programaCrear" label="Programa Especial" value="#{recobroFacturaBean.objeto.peProgramaId.id}" immediate="true" filter="true" filterMatchMode="startsWith" disabled="#{recobroFacturaBean.objFacturaDetalle.modalidadBln}">
                                            <f:selectItem itemLabel="--" itemValue="#{null}" noSelectionOption="true" /> 
                                            <f:selectItems value="#{recobroFacturaBean.listaProgramas}" var="pro" itemValue="#{pro.id}" itemLabel="#{pro.descripcionPrograma}" itemDescription="#{pro.descripcionPrograma}" />
                                            <p:ajax event="change" listener="#{recobroFacturaBean.seleccionarPePrograma((recobroFacturaBean.objeto.peProgramaId.id))}"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Observación Recobro" for="observacionRecobroGestionar" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputTextarea id="observacionRecobroGestionar" label="Descripción" value="#{recobroFacturaBean.objFacturaDetalle.observacionDetalle}" required="true" cols="60" maxlength="2048" style="width: 95%" requiredMessage="El campo observación es obligatorio"/>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Causal recobro" for="causalRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputSwitch id="causalRecobro" onLabel="Total Facturado" offLabel="Porcentaje Facturado" value="#{recobroFacturaBean.objFacturaDetalle.causalRecobro}"  style="width: 95%" >
                                            <p:ajax event="change" listener="#{recobroFacturaBean.causalRecobro}" update="valorPagado,valorRestanteRecobro"/>
                                        </p:inputSwitch>
                                    </p:column> 
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor Facturado"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objFacturaDetalle.valorFacturado}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column> 
                                </p:row>
                                <p:row> 
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor pagado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputNumber id="valorPagado" decimalPlaces="2" decimalSeparator="," 
                                                       symbolPosition="p" symbol="$" thousandSeparator="."                           
                                                       value="#{recobroFacturaBean.objFacturaDetalle.valorTotalRecobro}"
                                                       disabled="#{recobroFacturaBean.objFacturaDetalle.causalRecobro}"
                                                       minValue="0" 
                                                       maxValue="#{recobroFacturaBean.objFacturaDetalle.valorFacturado}" >
                                            <p:ajax event="change" listener="#{recobroFacturaBean.calcularPendiente()}" update="valorRestanteRecobro"/>
                                        </p:inputNumber>
                                    </p:column>

                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor restante" for="valorRestanteRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText id="valorRestanteRecobro" value="#{recobroFacturaBean.objFacturaDetalle.valorRestanteRecobro}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4" />
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Código tecnología " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.maServicioCodigo}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tecnologia" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.maServicioValor}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha hora prestación" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objFacturaDetalle.fechaHoraPrestacion}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Concepto contrable" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.conceptoContable}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Diagnostico" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objFacturaDetalle.maDiagnostico}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Usuario Audita" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.usuarioModifica}" />
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelAccionGestionar" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Gestionar" type="button" onclick="gestionarRemote()" validateClient="true" />
                                        <p:remoteCommand name="gestionarRemote" action="#{recobroFacturaBean.modificar()}"/>
                                        <p:commandButton value="Salir" type="button" onclick="salirRemote()" immediate="true"/>
                                        <p:remoteCommand name="salirRemote" action="PF('dialogoGestionarDetalleFactura').hide()"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Gestionar Masivo -->
            <p:dialog header="Gestionar Detalle Factura Masivo" widgetVar="dialogoGestionarDetalleFacturaMasivo" appendTo="@(body)"  height="200px" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:200px">
                    <h:form id="frmGestionarDetalleFacturaMasivo">
                        <p:panel id="pGestionarDetalleFacturaMasivo" header="Datos Detalle Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelGestionarDetalleFacturaMasivo" >
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Aplica recobro" for="aplicaRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputSwitch id="aplicaRecobro" onLabel="Sí" offLabel="No" value="#{recobroFacturaBean.aplicaRecobroMasivo}" >
                                            <p:ajax event="change" listener="#{recobroFacturaBean.onChangeAplicaRecobroMasivo()}" update="frmGestionarDetalleFacturaMasivo"/>
                                        </p:inputSwitch>
                                    </p:column> 
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Programa Especial" for="programaCrear" style="font-weight:bold;width: 100%"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:selectOneMenu id="programaCrear" label="Programa Especial" value="#{recobroFacturaBean.objeto.peProgramaId.id}" filter="true" filterMatchMode="startsWith">
                                            <f:selectItem itemLabel="--" itemValue="#{null}" noSelectionOption="true" /> 
                                            <f:selectItems value="#{recobroFacturaBean.listaProgramas}" var="pro" itemValue="#{pro.id}" itemLabel="#{pro.descripcionPrograma}" itemDescription="#{pro.descripcionPrograma}"  />
                                            <p:ajax event="change" listener="#{recobroFacturaBean.seleccionarPePrograma((recobroFacturaBean.objeto.peProgramaId.id))}"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Grupo" style="font-weight:bold" for="columGrupoMasivo"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputText id="columGrupoMasivo" value="#{recobroFacturaBean.objGrupo.nombre}" style="width: 95%" readonly="true" required="#{recobroFacturaBean.deshabilitarObligatoriedadMasivo}" requiredMessage="Grupo Obligatorio"/>
                                        <p:commandButton disabled="#{recobroFacturaBean.deshabilitarbuttomsMasivo}" immediate="true" action="#{recobroFacturaBean.verGruposMasivo()}" class="btn-icono" icon="pi pi-users" title="Grupos" />  
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Nombre Prestador" for="actualizarIPSMasivo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputText id="actualizarIPSMasivo" value="#{recobroFacturaBean.cntPresdadorSedeId.nombreSede}" style="width: 95%" readonly="true" required="#{recobroFacturaBean.deshabilitarObligatoriedadMasivo}" requiredMessage="Prestador Obligatorio" />
                                        <p:commandButton disabled="#{recobroFacturaBean.deshabilitarbuttomsMasivo}" immediate="true" action="#{recobroFacturaBean.consultarIPSMasivo()}" class="btn-icono" icon="pi pi-home" title="IPS"/>  
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Observación Recobro" for="observacionRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputTextarea id="observacionRecobro" label="Descripción" value="#{recobroFacturaBean.observacionRecobroMasivo}" required="true" cols="60" maxlength="2048" style="width: 95%" requiredMessage="El campo observación es obligatorio"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tipo servicio" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objeto.maeTipoContratoValor}" />
                                    </p:column>
                                </p:row>	
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid>
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="text-align:center;">
                                            <p:commandButton rendered="#{recobroFacturaBean.cmSelectorOperacionaMasiva.tipoGestionMasiva == 1 ? true : false}" value="Realizar Operación Masiva" actionListener="#{recobroFacturaBean.gestionarMasivoTodas()}" update="frmGestionarDetalleFacturaMasivo"/>
                                            <p:commandButton rendered="#{recobroFacturaBean.cmSelectorOperacionaMasiva.tipoGestionMasiva == 0 ? true : false}" value="Realizar Operación" actionListener="#{recobroFacturaBean.gestionarMasivoPorFactura}" update="frmGestionarDetalleFacturaMasivo"/>
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoGestionarDetalleFacturaMasivo').hide()" />
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Ver Detalle de la factura -->
            <p:dialog header="ver Detalle Factura" widgetVar="dialogoVerFacturaAuditada" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:400px">
                    <h:form id="frmVerFacturaAuditada">
                        <p:panel id="pAfiliadoVer1" header="Afiliado" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelAfiliadoVer1" style="width:100%;margin:10px 0px" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <p:outputLabel value="Tipo Documento" style="font-weight:bold"/>
                                <p:outputLabel id="tipoDocumentoVer" value="#{recobroFacturaBean.asegAfiliadoId.maeTipoDocumentoValor}"/>

                                <p:outputLabel value="Número Documento" style="font-weight:bold" />
                                <p:outputLabel id="numeroDocumentoVer" value="#{recobroFacturaBean.asegAfiliadoId.numeroDocumento}" />

                                <p:outputLabel value="Contrato Afiliado" style="font-weight:bold"/>
                                <p:outputLabel id="codigoAfiliadoVer" value="#{recobroFacturaBean.asegAfiliadoId.idAfiliado}"/>

                                <p:outputLabel value="Nombres" style="font-weight:bold"/>
                                <p:outputLabel id="nombresVer" value="#{recobroFacturaBean.asegAfiliadoId.nombres}"/>

                                <p:outputLabel value="Apellidos" style="font-weight:bold"/>
                                <p:outputLabel id="apellidosVer" value="#{recobroFacturaBean.asegAfiliadoId.apellidos}"/>

                                <p:outputLabel value="Fecha Nacimiento" style="font-weight:bold"/>
                                <p:outputLabel id="fechaNacimientoVer" value="#{recobroFacturaBean.convertirFecha(recobroFacturaBean.asegAfiliadoId.fechaNacimiento)}"/>

                                <p:outputLabel value="Dirección" style="font-weight:bold"/>
                                <p:outputLabel id="direccionVer" value="#{recobroFacturaBean.asegAfiliadoId.direccionResidencia}"/>

                                <p:outputLabel value="Regimen" style="font-weight:bold"/>
                                <p:outputLabel id="regimenVer" value="#{recobroFacturaBean.asegAfiliadoId.maeRegimenValor}"/>

                                <p:outputLabel value="Genero" style="font-weight:bold"/>
                                <p:outputLabel id="generoVer" value="#{recobroFacturaBean.asegAfiliadoId.maeGeneroValor}"/>

                                <p:outputLabel value="Edad" style="font-weight:bold"/>
                                <p:outputLabel id="edadVer" value="#{recobroFacturaBean.calcularEdad(recobroFacturaBean.asegAfiliadoId.fechaNacimiento)}"/>

                                <p:outputLabel value="Tipo Afiliado" style="font-weight:bold"/>
                                <p:outputLabel id="tipoAfiliadoVer" value="#{recobroFacturaBean.asegAfiliadoId.maeTipoAfiliadoValor}"/>

                                <p:outputLabel value="Estado Afiliacion" style="font-weight:bold"/>
                                <p:outputLabel id="estadoAfiliacionVer" value="#{recobroFacturaBean.asegAfiliadoId.maeEstadoAfiliacionValor}" style="font-weight:bold"/>

                                <p:outputLabel value="Grupo Poblacional" style="font-weight:bold"/>
                                <p:outputLabel id="grupoPoblacionalVer" value="#{recobroFacturaBean.asegAfiliadoId.maeGrupoPoblacionalValor}"/>

                                <p:outputLabel value="IPS primaria"  style="font-weight:bold"/>
                                <p:outputLabel value="#{recobroFacturaBean.asegAfiliadoId.primariaPrestadorSede.nombreSede}"/>
                            </p:panelGrid>                            
                        </p:panel>
                        <!-- Gestionar Detalle Factura-->
                        <p:panel id="pGestionarDetalleFactura" header="Datos Detalle Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelGestionarDetalleFactura" >
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Detalle Factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.cmDetalleId.id}" style="width: 95%"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Aplica recobro" for="aplicaRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputSwitch id="aplicaRecobro" onLabel="Sí" offLabel="No" value="#{recobroFacturaBean.objFacturaDetalle.aplicaRecobro}" disabled="true" >
                                        </p:inputSwitch>
                                    </p:column>  
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Nombre Prestador" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.cntPresdadorSedeId.nombreSede}" style="width: 95%"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Grupo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel  value="#{recobroFacturaBean.objGrupo.nombre}" style="width: 95%"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Programa Especial"  style="font-weight:bold;width: 100%"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.peProgramaId.descripcionPrograma}" style="font-weight:bold;width: 100%"/>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Observación Recobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputTextarea  label="Descripción" value="#{recobroFacturaBean.objFacturaDetalle.observacionDetalle}" required="true" cols="60" maxlength="2048" style="width: 95%" disabled="true"/>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Causal recobro" for="causalRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:inputSwitch id="causalRecobro" onLabel="Total Facturado" offLabel="Porcentaje Facturado" value="#{recobroFacturaBean.objFacturaDetalle.causalRecobro}"  style="width: 95%" disabled="true">
                                        </p:inputSwitch>
                                    </p:column> 
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor Facturado"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objFacturaDetalle.valorFacturado}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column> 
                                </p:row>
                                <p:row> 
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor pagado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objFacturaDetalle.valorTotalRecobro}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Valor restante" for="valorRestanteRecobro" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText id="valorRestanteRecobro" value="#{recobroFacturaBean.objFacturaDetalle.valorRestanteRecobro}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4" />
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Código tecnología " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.maServicioCodigo}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Tecnologia" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.maServicioValor}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Fecha hora prestación" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText value="#{recobroFacturaBean.objFacturaDetalle.fechaHoraPrestacion}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Concepto contrable" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.conceptoContable}" />
                                    </p:column>
                                </p:row>
                                <p:row> 	
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Diagnostico" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <h:outputText  value="#{recobroFacturaBean.objFacturaDetalle.maDiagnostico}" />
                                    </p:column>
                                    <p:column class="ui-g-2">
                                        <p:outputLabel value="Usuario Audita" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column class="ui-g-4">
                                        <p:outputLabel value="#{recobroFacturaBean.objFacturaDetalle.usuarioModifica}" />
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelAccionVer" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerFacturaAuditada').hide()" immediate="true"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Seleccionar Grupo -->
            <p:dialog header="Grupos" widgetVar="dlgGrupoFactura" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:300px">
                    <h:form id="frmGrupoFactura">
                        <p:dataTable id="tablaRegistros" widgetVar="tablaWidget" var="objGrupo" value="#{recobroFacturaBean.lazyRcoGrupos}" rowKey="#{objGrupo.id}"
                                     rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,30,50,100"                                     
                                     emptyMessage="No se encontraron registros" selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{recobroFacturaBean.onRowSelectGrupo}" />          
                            <p:column headerText="Id" filterBy="#{objGrupo.id}" >
                                <f:facet name="filter">
                                    <p:inputText label="id" maxlength="16" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                                </f:facet>
                                <h:outputText value="#{objGrupo.id}"/>
                            </p:column>
                            <p:column headerText="Nombre" filterBy="#{objGrupo.nombre}">
                                <f:facet name="filter">
                                    <p:inputText label="nombre" maxlength="16" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                                </f:facet>
                                <h:outputText value="#{objGrupo.nombre}" />
                            </p:column>
                            <p:column headerText="Modalidad Contrato" filterBy="#{objGrupo.tipo}" >
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;">
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="PGP" itemValue="1"></f:selectItem>
                                        <f:selectItem itemLabel="CAPITA" itemValue="0"></f:selectItem>
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{objGrupo.tipoStr}"/>
                            </p:column>
                            <p:column headerText="Programa" filterBy="#{objGrupo.peProgramaId.descripcionPrograma}">
                                <f:facet name="filter">
                                    <p:inputText label="programas" maxlength="16" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                                </f:facet>
                                <h:outputText value="#{objGrupo.peProgramaId.descripcionPrograma}" />
                            </p:column>                    
                        </p:dataTable>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>        
            <!-- Seleccionar IPS-->
            <p:dialog header="Consultar Ips" widgetVar="dialogoIpsLista" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true" onShow="inhabilitarEnter()">
                <p:scrollPanel mode="native" style="max-height: 400px;">
                    <h:form id="frmIpsLista">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{recobroFacturaBean.refrescarIps}" oncomplete="PF('tablaWidgetI').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelIpsLista" columns="1">

                            <p:dataTable id="tablaRegistrosIps" widgetVar="tablaWidgetI" var="objIPS" value="#{recobroFacturaBean.lazyIPS}" rowKey="#{objIPS.id}"
                                         rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect"  listener="#{recobroFacturaBean.onRowSelectIPS}"/>    
                                <p:column headerText="Código Habilitacion" filterBy="#{objIPS.codigoHabilitacionSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Código Habilitación" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.codigoHabilitacionSede}"/>
                                </p:column>
                                <p:column headerText="Tipo Documento" filterBy="#{objIPS.cntPrestador.maeTipoDocumentoId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetI').filter()" style="width: 95%">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Cedula de ciudadania" itemValue="9125"/>
                                            <f:selectItem itemLabel="Número de identificación tributaria" itemValue="9124"/>
                                            <f:selectItems value="#{recobroFacturaBean.listaTiposDocumentoEmpresa}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.descripcion}" itemDescription="#{tipoDoc.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.maeTipoDocumentoValor}"/>
                                </p:column>
                                <p:column headerText="Numero Documento" filterBy="#{objIPS.cntPrestador.numeroDocumento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Numero Documetno" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.numeroDocumento}"/>
                                </p:column>
                                <p:column headerText="Razón Social" filterBy="#{objIPS.cntPrestador.razonSocial}">
                                    <f:facet name="filter">
                                        <p:inputText label="Razón Social" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.cntPrestador.razonSocial}"/>
                                </p:column>
                                <p:column headerText="Sede" filterBy="#{objIPS.nombreSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Sede" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.nombreSede}"/>
                                </p:column>
                                <p:column headerText="Dirección">
                                    <f:facet name="filter">
                                        <p:inputText label="Dirección" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetI').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPS.direccion}"/>
                                </p:column>
                            </p:dataTable>

                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoIpsLista').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Seleccionar Grupo Masivo-->
            <p:dialog header="Grupos" widgetVar="dlgGrupoFacturaMasivo" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:300px">
                    <h:form id="frmGrupoFacturaMasivo">
                        <p:dataTable id="tablaRegistros" widgetVar="gruposMasivo" var="objGrupoMasivo" value="#{recobroFacturaBean.lazyRcoGruposMasivo}" rowKey="#{objGrupoMasivo.id}"
                                     rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,30,50,100"                                     
                                     emptyMessage="No se encontraron registros" selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{recobroFacturaBean.onRowSelectGrupoMasivo}" />          
                            <p:column headerText="Id" filterBy="#{objGrupo.id}" >
                                <f:facet name="filter">
                                    <p:inputText label="id" maxlength="16" style="width: 95%;" onchange="PF('gruposMasivo').filter()"/>
                                </f:facet>
                                <h:outputText value="#{objGrupoMasivo.id}"/>
                            </p:column>
                            <p:column headerText="Nombre" filterBy="#{objGrupoMasivo.nombre}">
                                <f:facet name="filter">
                                    <p:inputText label="nombre" maxlength="16" style="width: 95%;" onchange="PF('gruposMasivo').filter()"/>
                                </f:facet>
                                <h:outputText value="#{objGrupoMasivo.nombre}" />
                            </p:column>
                            <p:column headerText="Modalidad Contrato" filterBy="#{objGrupoMasivo.tipo}" >
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('gruposMasivo').filter()" style="width: 88%;">
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="PGP" itemValue="1"></f:selectItem>
                                        <f:selectItem itemLabel="CAPITA" itemValue="0"></f:selectItem>
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{objGrupoMasivo.tipoStr}"/>
                            </p:column>
                            <p:column headerText="Programa" filterBy="#{objGrupoMasivo.peProgramaId.descripcionPrograma}">
                                <f:facet name="filter">
                                    <p:inputText label="programas" maxlength="16" style="width: 95%;" onchange="PF('gruposMasivo').filter()"/>
                                </f:facet>
                                <h:outputText value="#{objGrupoMasivo.peProgramaId.descripcionPrograma}" />
                            </p:column>                    
                        </p:dataTable>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>               
            <!-- Seleccionar IPS Masiva-->
            <p:dialog header="Consultar Ips" widgetVar="dialogoIpsListaMasivo" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true" onShow="inhabilitarEnter()">
                <p:scrollPanel mode="native" style="max-height: 400px;">
                    <h:form id="frmIpsListaMasivo">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{recobroFacturaBean.refrescarIps}" oncomplete="PF('tablaIPSMasivo').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelIpsLista" columns="1">

                            <p:dataTable id="tablaRegistrosIps" widgetVar="tablaIPSMasivo" var="objIPSMasivo" value="#{recobroFacturaBean.lazyIPSMasivo}" rowKey="#{objIPSMasivo.id}"
                                         rows="#{recobroFacturaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect"  listener="#{recobroFacturaBean.onRowSelectIPSMasivo}"/>    
                                <p:column headerText="Código Habilitacion" filterBy="#{objIPSMasivo.codigoHabilitacionSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Código Habilitación" maxlength="128" style="width: 95%;" onchange="PF('tablaIPSMasivo').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPSMasivo.codigoHabilitacionSede}"/>
                                </p:column>
                                <p:column headerText="Tipo Documento" filterBy="#{objIPSMasivo.cntPrestador.maeTipoDocumentoId}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaIPSMasivo').filter()" style="width: 95%">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Cedula de ciudadania" itemValue="9125"/>
                                            <f:selectItem itemLabel="Número de identificación tributaria" itemValue="9124"/>
                                            <f:selectItems value="#{recobroFacturaBean.listaTiposDocumentoEmpresa}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.descripcion}" itemDescription="#{tipoDoc.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{objIPSMasivo.cntPrestador.maeTipoDocumentoValor}"/>
                                </p:column>
                                <p:column headerText="Numero Documento" filterBy="#{objIPSMasivo.cntPrestador.numeroDocumento}">
                                    <f:facet name="filter">
                                        <p:inputText label="Numero Documetno" maxlength="128" style="width: 95%;" onchange="PF('tablaIPSMasivo').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPSMasivo.cntPrestador.numeroDocumento}"/>
                                </p:column>
                                <p:column headerText="Razón Social" filterBy="#{objIPSMasivo.cntPrestador.razonSocial}">
                                    <f:facet name="filter">
                                        <p:inputText label="Razón Social" maxlength="128" style="width: 95%;" onchange="PF('tablaIPSMasivo').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPSMasivo.cntPrestador.razonSocial}"/>
                                </p:column>
                                <p:column headerText="Sede" filterBy="#{objIPSMasivo.nombreSede}">
                                    <f:facet name="filter">
                                        <p:inputText label="Sede" maxlength="128" style="width: 95%;" onchange="PF('tablaIPSMasivo').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPSMasivo.nombreSede}"/>
                                </p:column>
                                <p:column headerText="Dirección">
                                    <f:facet name="filter">
                                        <p:inputText label="Dirección" maxlength="128" style="width: 95%;" onchange="PF('tablaIPSMasivo').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{objIPSMasivo.direccion}"/>
                                </p:column>
                            </p:dataTable>

                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoIpsListaMasiva').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            <!-- Ver Observacion Completa -->
            <p:dialog header="Observación" widgetVar="dlgMsg" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:150px;font-size:15px" >
                    <h:form id="frmObservacion" style="padding: 10px;">          
                        <h:outputText id="mensaje" value="#{recobroFacturaBean.mensajeGeneral}" />
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgMsg').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
        </center>
    </ui:define>
</ui:composition>
