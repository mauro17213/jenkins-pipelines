<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../home.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="bodyJR">
        <h:outputStylesheet name="css/cntjuridica.css"/>
        <h:outputScript name="js/calendar-localization.js"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
        <h:outputScript name="js/Cntjuridico.js" />
        <center>
            <h:form id="frmGestion">
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{cntjContratoBean.modulo.descripcion}">#{cntjContratoBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{cntjContratoBean.accionListar}" title="Refrescar" ajax="true" actionListener="#{cntjContratoBean.listar}" icon="pi pi-sync" class="boton-normal btn1" />
                        <p:commandButton rendered="#{cntjContratoBean.accionCrear}" title="Crear" ajax="true" actionListener="#{cntjContratoBean.crear()}" icon="pi pi-file-o" class="boton-normal btn1" />
                    </f:facet>
                </p:toolbar>

                <p:dataTable var="obj" class="listaDatos"  paginator="true" rows="#{cntjContratoBean.tamanoPagina}" value="#{cntjContratoBean.lazyContrato}"
                             emptyMessage="No se encontraron registros"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" 
                             widgetVar="tblWidgetPrincipal"
                             style="font-size:11px;"
                             scrollable="false"
                             scrollWidth="140%"
                             rowKey="#{obj.id}" reflow="true">

                    <p:column headerText="Opciones" style="text-align: center;">
                        <p:commandButton rendered="#{cntjContratoBean.accionVer}" title="Ver" actionListener="#{cntjContratoBean.ver(obj.id)}" icon="pi pi-search" class="btn-icono" />
                        <p:commandButton rendered="#{cntjContratoBean.accionEditar}" title="Editar" actionListener="#{cntjContratoBean.editar(obj.id)}" icon="pi pi-file-edit" class="btn-icono"/>
                        <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}" title="Otrosí" actionListener="#{cntjContratoBean.verOtrosSi(obj.id)}" icon="pi pi-plus-circle"  class="btn-icono" />
                        <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}" title="Informes" actionListener="#{cntjContratoBean.verInformes(obj.id)}" icon="pi pi-clipboard" class="btn-icono" />
                        <p:commandButton rendered="#{cntjContratoBean.accionAdicional7}" title="Documentos" actionListener="#{cntjContratoBean.verdocumentos(obj.id)}" icon="pi pi-file-pdf" class="btn-icono"/>   
                    </p:column>

                    <p:column headerText="Contrato" filterBy="#{obj.contrato}" >
                        <f:facet name="filter">
                            <p:inputText label="Contrato" maxlength="128" style="width: 95%;" 
                                         onkeypress="if (event.keyCode === 13) { onchange(); return false; }" 
                                         onchange="PF('tblWidgetPrincipal').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.contrato}" title="#{obj.contrato}"/>
                    </p:column>

                    <p:column headerText="Identificación Tercero" filterBy="#{obj.cntjTerceroId.numeroDocumento}" >
                        <f:facet name="filter">
                            <p:inputText maxlength="128" style="width: 95%;" 
                                         onkeypress="if (event.keyCode === 13) { onchange(); return false; }" 
                                         onchange="PF('tblWidgetPrincipal').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.cntjTerceroId.numeroDocumento}" title="#{obj.cntjTerceroId.numeroDocumento}"/>
                    </p:column>

                    <p:column headerText="Tercero" filterBy="#{obj.cntjTerceroId.razonSocial}" >
                        <f:facet name="filter">
                            <p:inputText maxlength="128" style="width: 95%;" 
                                         onkeypress="if (event.keyCode === 13) { onchange(); return false; }" 
                                         onchange="PF('tblWidgetPrincipal').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.cntjTerceroId.razonSocial}" title="#{obj.cntjTerceroId.razonSocial}"/>
                    </p:column>

                    <p:column headerText="Modalidad" filterBy="#{obj.maeModalidadContratoId}"  >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tblWidgetPrincipal').filter()" style="width: 80%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{cntjContratoBean.listaModalidad}" var="modalidad" itemValue="#{modalidad.id}" itemLabel="#{modalidad.nombre}" itemDescription="#{modalidad.descripcion}" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeModalidadContratoValor}" title="#{obj.maeModalidadContratoValor}"/>
                    </p:column>

                    <p:column headerText="Valor Total"  >
                        <h:outputText value="#{obj.valorTotal}" title="#{obj.valorTotal}">
                             <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                        </h:outputText>
                    </p:column>
                    
                    <p:column headerText="Plazo Total Días"  >
                        <h:outputText value="#{obj.plazoTotalDias}" title="#{obj.plazoTotalDias}"/>
                    </p:column>

                    <p:column headerText="Fecha Inicial"  >
                        <h:outputText value="#{obj.fechaInicio}" title="#{obj.fechaInicio}">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Fecha Terminación"  >
                        <h:outputText value="#{obj.fechaFin}" title="#{obj.fechaFin}">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Estado" filterBy="#{obj.maeEstadoContratoId}" >
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tblWidgetPrincipal').filter()" style="width: 80%;">
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{cntjContratoBean.listaEstadoContrato}" var="estado" itemValue="#{estado.id}" itemLabel="#{estado.nombre}" itemDescription="#{estado.descripcion}" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeEstadoContratoValor}" title="#{obj.maeEstadoContratoValor}"/>
                    </p:column>


                </p:dataTable>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
            </h:form>

            <!-- Crear -->
            <p:dialog header="Crear" widgetVar="dialogoCrear"  appendTo="@(body)"  resizable="false" position="center" width="90%" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrear" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel header="Datos del Contrato" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="cproceso" value="Proceso" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cproceso" value="#{cntjContratoBean.objeto.proceso}" required="true" requiredMessage="Proceso: valor obligatorio" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaProcesos}" var="proceso" itemValue="#{proceso.id}" itemLabel="#{proceso.nombre}" itemDescription="#{proceso.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarPeriodicidad()}" process="@this" update="cperidicidadsegui"  />
                                    </p:selectOneMenu>                                

                                    <p:outputLabel for="cestado" value="Estado Contrato" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestado" value="#{cntjContratoBean.objeto.maeEstadoContratoId}" required="true" requiredMessage="Estado Contrato: valor obligatorio." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoContrato}" var="estado" itemValue="#{estado.id}" itemLabel="#{estado.nombre}" itemDescription="#{estado.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="ccontrato" value="Contrato" style="font-weight:bold" class="header-back" />
                                    <p:inputText id="ccontrato" value="#{cntjContratoBean.objeto.contrato}" maxlength="32" required="true" requiredMessage="Contrato: valor obligatorio." />

                                    <p:outputLabel for="cclasecontrato" value="Clase Contrato" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cclasecontrato" value="#{cntjContratoBean.objeto.maeClaseContratoId}" required="true" requiredMessage="Clase Contrato: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaClaseContrato}" var="clase" itemValue="#{clase.id}" itemLabel="#{clase.nombre}" itemDescription="#{clase.descripcion}" />
                                    </p:selectOneMenu>
                                    
                                    <p:outputLabel for="cestadolegalizacion" value="Estado Legalización" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestadolegalizacion" value="#{cntjContratoBean.objeto.estadoLegalizacion}" required="true" requiredMessage="Estado Legalización: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoLegalizacion}" var="legal" itemValue="#{legal.id}" itemLabel="#{legal.nombre}" itemDescription="#{legal.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="cmodalidad" value="Modalidad" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cmodalidad" value="#{cntjContratoBean.objeto.maeModalidadContratoId}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaModalidad}" var="modalidad" itemValue="#{modalidad.id}" itemLabel="#{modalidad.nombre}" itemDescription="#{modalidad.descripcion}" />
                                    </p:selectOneMenu>                                    

                                    <p:outputLabel for="cnivelcomplejidad" value="Nivel de Complejidad" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cnivelcomplejidad" value="#{cntjContratoBean.objeto.complejidad}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaComplejidad}" var="complejidad" itemValue="#{complejidad.id}" itemLabel="#{complejidad.nombre}" itemDescription="#{complejidad.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="cregimen" value="Régimen" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cregimen" value="#{cntjContratoBean.objeto.maeRegimenId}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaRegimen}" var="regimen" itemValue="#{regimen.id}" itemLabel="#{regimen.nombre}" itemDescription="#{regimen.descripcion}" />
                                    </p:selectOneMenu>
                                    
                                    <p:outputLabel for="cenlacesecop" value="Enlace Secop" style="font-weight:bold" class="header-back" />
                                    <p:inputText id="cenlacesecop" value="#{cntjContratoBean.objeto.enlacePublicaSecop}" maxlength="128"  />
                                    
                                    <p:outputLabel for="cfechaSecop" value="Fecha Secop" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechaSecop" value="#{cntjContratoBean.objeto.fechaPublicaSecop}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" 
                                                maxlength="10" readonlyInput="true" showOn="button" />
                                    
                                    <p:outputLabel for="cresponsableSecop" value="Responsable Secop" class="header-back" />
                                    <p:column>
                                        <p:inputText id="cresponsableSecop" value="#{cntjContratoBean.objeto.responsablePublicaSecop}" readonly="true" maxlength="128" />
                                        <p:commandButton process="@this"
                                                         actionListener="#{cntjContratoBean.consultarResponsableSecop()}" icon="ui-icon-person" 
                                                         title="Seleccionar usuario" style="width: 3rem ;" update="cresponsableSecop" />
                                    </p:column>
                                    
                                </p:panelGrid>
                                <p:panelGrid id="panelLinea2" columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="cobjeto" value="Objeto" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="cobjeto" value="#{cntjContratoBean.objeto.objeto}" required="true" requiredMessage="Debe ingresar el objeto del contrato."
                                                         rows="4" cols="140" maxlength="2048"  />
                                    </p:column>

                                </p:panelGrid>
                                
                            </p:panel>

                            <p:panel header="Plazos y Valores" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="cfechaSuscripcion" value="Fecha de Suscripción" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechaSuscripcion" value="#{cntjContratoBean.objeto.fechaSuscripcion}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de suscripción: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button">
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.calcularFechaInicioContrato()}" update="cfechainicio"  />
                                    </p:calendar>

                                    <p:outputLabel for="cfechainicio" value="Fecha de Inicio" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechainicio" value="#{cntjContratoBean.objeto.fechaInicio}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de inicio: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button" mindate="#{cntjContratoBean.objeto.fechaSuscripcion}" >
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.calcularPlazos()}" update="cfechaterminacion,cplazomeses,cplazodias,cplazototaldias,cfechasuspencion"  />
                                    </p:calendar>

                                    <p:outputLabel for="cfechaterminacion" value="Fecha de Terminación" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechaterminacion" value="#{cntjContratoBean.objeto.fechaFin}" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" locale="es" size="30" required="true" requiredMessage="Fecha de Terminación: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" mindate="#{cntjContratoBean.objeto.fechaInicio}" >
                                      <!--  <p:ajax event="dateSelect" listener="#{cntjContratoBean.calcularPlazos()}" update="cfechaterminacion,cplazomeses,cplazodias,cplazototaldias"  /> -->
                                    </p:calendar>

                                    <p:outputLabel for="cplazomeses" value="Plazo en Meses" style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cplazomeses" value="#{cntjContratoBean.objeto.plazoInicialMeses}" decimalPlaces="0"  thousandSeparator="" emptyValue="empty" readonly="false" required="true" requiredMessage="Plazo en Meses: valor requerido."  >
                                        <p:ajax event="change" listener="#{cntjContratoBean.setValorMese(cntjContratoBean.objeto.plazoInicialMeses)}" update="cplazomeses"  />
                                    </p:inputNumber>

                                    <p:outputLabel for="cplazodias" value="Plazo en Dias" style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cplazodias" value="#{cntjContratoBean.objeto.plazoInicialDias}" decimalPlaces="0"  thousandSeparator="" emptyValue="empty" readonly="false" required="true" requiredMessage="Plazo en Dias: valor requerido."  >
                                        <p:ajax event="change" listener="#{cntjContratoBean.calcularPlazos()}" update="cplazototaldias"  />
                                    </p:inputNumber>

                                    <p:outputLabel for="cplazoprorroga" value="Plazo Prórrogas (Dias)" style="font-weight:bold" class="header-back" />                                    
                                    <p:inputNumber id="cplazoprorroga" value="#{cntjContratoBean.objeto.plazoProrrogas}" readonly="true"  minValue="0" decimalPlaces="0" emptyValue="0" required="false" requiredMessage="Plazo Prórrogas: valor requerido."  >
                                        <p:ajax event="change" listener="#{cntjContratoBean.calcularDiasTotales()}" update="cplazototaldias"  />
                                    </p:inputNumber>

                                    <p:outputLabel for="cplazototaldias" value="Plazo Total Días"  style="font-weight:bold" class="header-back" />
                                    <p:inputText id="cplazototaldias" value="#{cntjContratoBean.objeto.plazoTotalDias}" readonly="true" />

                                    <p:outputLabel for="cvalorinicial" value="Valor Inicial"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalorinicial" value="#{cntjContratoBean.objeto.valorInicial}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" required="true" requiredMessage="Valor Inicial: Valor obligatorio." >
                                        <p:ajax event="change" listener="#{cntjContratoBean.calcularValores()}" update="cvalormes,cvalordia,cvalortotal"  />
                                    </p:inputNumber>

                                    <p:outputLabel for="cvalormes" value="Valor Mes"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalormes" value="#{cntjContratoBean.objeto.valorMes}"  readonly="true" decimalPlaces="0" symbol="$ " symbolPosition="p" />

                                    <p:outputLabel for="cvalordia" value="Valor Día"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalordia" value="#{cntjContratoBean.objeto.valorDia}"  readonly="true" decimalPlaces="0" symbol="$ " symbolPosition="p" />

                                    <p:outputLabel for="cvalorupc" value="Valor UPC"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalorupc" value="#{cntjContratoBean.objeto.valorUpc}"  minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" />

                                    <p:outputLabel for="cvaloradiciones" value="Valor Adiciones"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvaloradiciones" value="#{cntjContratoBean.objeto.valorAdiciones}"   minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" readonly="true" emptyValue="0" />

                                    <p:outputLabel for="cvalortotal" value="Valor Total"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalortotal" value="${cntjContratoBean.objeto.valorTotal}" readonly="true" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" emptyValue="0" required="true" requiredMessage="Valor Total: Valor obligatorio." />

                                    <p:outputLabel for="cvalorfacturado" value="Valor Facturado"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalorfacturado" value="${cntjContratoBean.objeto.valorFacturado}"  minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" emptyValue="0" required="true" requiredMessage="Valor Total: Valor obligatorio." />
                                                                       
                                    <p:outputLabel for="cvalortotalpagado" value="Valor Total Pagado"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalortotalpagado" value="#{cntjContratoBean.objeto.valorPagadoTotal}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" required="true" requiredMessage="Valor Total Pagado: valor obligatorio."  />

                                    <p:outputLabel for="cformapago" value="Forma de Pago"  style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cformapago" value="#{cntjContratoBean.objeto.formaPago}" required="true" requiredMessage="Forma de Pago: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaFormaDePago}" var="forma" itemValue="#{forma.id}" itemLabel="#{forma.nombre}" itemDescription="#{forma.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarPeriodicidad()}" process="cproceso,@this" update="cperidicidadsegui"  />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="ctipogasto" value="Tipo Gasto"  style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ctipogasto" value="#{cntjContratoBean.objeto.tipoGasto}" required="true" requiredMessage="Tipo Gasto: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoGasto}" var="gasto" itemValue="#{gasto.id}" itemLabel="#{gasto.nombre}" itemDescription="#{gasto.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="ctipoanticipo" value="Tipo Anticipo"  style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ctipoanticipo" value="#{cntjContratoBean.objeto.tipoAnticipo}" required="true" requiredMessage="Tipo Anticipo: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoAnticipo}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarTipoAnticipo()}" update="cvaloranticipo"  />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="cvaloranticipo" value="Valor Anticipo"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvaloranticipo" value="#{cntjContratoBean.objeto.valorAnticipo}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" >
                                        
                                    </p:inputNumber>
                                    
                                    <p:outputLabel for="cfechasuspencion" value="Fecha de Suspensión" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechasuspencion" value="#{cntjContratoBean.objeto.fechaSuspension}" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="false" requiredMessage="Fecha de Suspención: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button" mindate="#{cntjContratoBean.objeto.fechaInicio}"  >
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.validaMotivoSuspension()}" update="crmotivosuspencion"  />
                                    </p:calendar>
                                    
                                    <p:outputLabel for="crmotivosuspencion" value="Motivo Suspensión" class="header-back" />
                                    <p:inputTextarea id="crmotivosuspencion" value="#{cntjContratoBean.objeto.motivoSuspension}" readonly="#{!cntjContratoBean.habilitarMotivoSuspension}" required="false" requiredMessage="Motivo Suspención: Valor obligatorio."
                                                         rows="2" cols="140" maxlength="2048"  />
                                   
                                    <p:outputLabel for="cperidicidadsegui" value="Periodicidad Seguimiento"  style="font-weight:bold" class="header-back" />
                                    <p:inputText id="cperidicidadsegui" value="#{cntjContratoBean.getPeridicidadSeguimientoStr(cntjContratoBean.objeto.periodicidadSeguimiento)}" required="false" readonly="true" />
                                    
                                    <p:outputLabel for="crmotivoterminaanticipada" value="Motivo Terminación Anticipada" class="header-back" />
                                    <p:inputTextarea id="crmotivoterminaanticipada" value="#{cntjContratoBean.objeto.motivoTerminaAnticipada}"  required="false" 
                                                         rows="2" cols="140" maxlength="2048"  />
                                    
                                    <p:outputLabel for="efechaliquidacion" value="Fecha de Liquidación" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="efechaliquidacion" value="#{cntjContratoBean.objeto.fechaLiquidacion}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" 
                                                maxlength="10" readonlyInput="true" showOn="button">
                                    </p:calendar>
                                    
                                </p:panelGrid>
                                
                            </p:panel>

                            <p:panel id="pnContratista" header="Contratista" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >


                                    <p:outputLabel for="ccontratistahide" value="Contratista" class="header-back" />                                    
                                    <p:column>
                                        <h:inputHidden id="ccontratistahide" value="#{cntjContratoBean.objeto.cntjTerceroId.numeroDocumento}" required="true" requiredMessage="Contratista: Valor obligatorio."/>
                                        <p:inputText id="ccontratista" value="#{cntjContratoBean.objeto.cntjTerceroId.razonSocial}" readonly="true" required="true" requiredMessage="Contratista: Valor obligatorio." />
                                        <p:commandButton process="@this"  actionListener="#{cntjContratoBean.listarTerceros(2)}" icon="pi pi-user" class="btn-icono"
                                                         title="Seleccionar contratista" style="width: 2.3rem; height: 1.6rem;" update="ccontratista" />
                                    </p:column>

                                    <p:outputLabel value="Tipo Documento" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.maeTipoDocumentoValor}" />

                                    <p:outputLabel value="Número Documento" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.numeroDocumento}" />

                                    <p:outputLabel value="Naturaleza" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getNaturalezaTercero(cntjContratoBean.objeto.cntjTerceroId.naturalezaJuridica)}" />

                                    <p:outputLabel value="Municipio" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.gnUbicacionId.nombre}" />

                                    <p:outputLabel value="Dirección" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.direccion}" />

                                    <p:outputLabel value="Correo Electrónico" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.correoElectronico}" />

                                    <h:outputText value="Teléfono" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.telefonoTercero}" />


                                </p:panelGrid>
                            </p:panel>

                            <p:panel header="Responsable Seguimiento" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional6}"  title="Agregar responsable" immediate="true" actionListener="#{cntjContratoBean.crearSupervidorContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaResponsable" class="listaDatos" widgetVar="responsableWidget" var="responsabe" value="#{cntjContratoBean.objeto.cntjContratoSupervisorList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarSupervisorContrato(responsabe)}" process="@this" update="frmCrear:tablaResponsable" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Tipo" >                                        
                                        <h:outputText value="#{cntjContratoBean.getTipoTerceroStr(responsabe.cntjTercerosId.tipoTercero)}"/>
                                    </p:column>  

                                    <p:column headerText="Tipo Documento" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.maeTipoDocumentoValor}"/>
                                    </p:column>

                                    <p:column headerText="Número Documento" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.numeroDocumento}"/>
                                    </p:column>                  

                                    <p:column headerText="Responsable" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.razonSocial}"/>
                                    </p:column> 

                                    <p:column headerText="Área" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.maeAreaValor}"/>
                                    </p:column> 

                                    <p:column headerText="Estapa Designación" >                                        
                                        <h:outputText value="#{cntjContratoBean.getEtapaDesignacionStr(responsabe.etapaDesignacion)}"/>
                                    </p:column> 

                                </p:dataTable>
                            </p:panel>

                            <p:panel header="Garantías" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional3}"  title="Agregar garantía" immediate="true" actionListener="#{cntjContratoBean.crearGarantiaContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaGarantia" class="listaDatos" widgetVar="tblWidget" var="dato" value="#{cntjContratoBean.objeto.cntjContratoGarantiaList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >    
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarGarantiaContrato(dato)}" process="@this" update="frmCrear:tablaGarantia" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Garantía" >                                        
                                        <h:outputText value="#{dato.maeGarantiaContratoValor}"/>
                                    </p:column>

                                    <p:column headerText="Porcentaje" >                                        
                                        <h:outputText value="#{dato.porcentajeValorContrato}"/>
                                    </p:column>

                                    <p:column headerText="Valor" >         
                                        <h:outputText value="#{dato.valorAsegurado}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Fecha Expedición" >                                        
                                        <h:outputText value="#{dato.fechaExpedicion}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Vig Desde" >                                        
                                        <h:outputText value="#{dato.vigenciaDesde}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Vig Hasta" >                                        
                                        <h:outputText value="#{dato.vigenciaHasta}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Estado" >                                        
                                        <h:outputText value="#{cntjContratoBean.getEstadoGarantiaStr(dato.estado)}"/>
                                    </p:column>

                                </p:dataTable>
                            </p:panel>

                            <p:panel header="Indicadores" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional4}"  title="Agregar indicador" immediate="true" actionListener="#{cntjContratoBean.crearIndicadorContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaIndicador" class="listaDatos" widgetVar="tblWidgets" var="datos" value="#{cntjContratoBean.objeto.cntjContratoIndicadorList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" > 
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarIndicadorContrato(datos)}" process="@this" update="frmCrear:tablaIndicador" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Tipo Indicador" >                                        
                                        <h:outputText value="#{cntjContratoBean.obtenetTipoIndicador(datos.tipoIndicador)}"/>
                                    </p:column>

                                    <p:column headerText="Descripción" >                                        
                                        <h:outputText value="#{datos.descripcion}"/>
                                    </p:column>

                                    <p:column headerText="Meta" >                                        
                                        <h:outputText value="#{datos.meta}"/>
                                    </p:column>

                                    <p:column headerText="% Descuento" >                                        
                                        <h:outputText value="#{datos.porcentajeDescuento}"/>
                                    </p:column>

                                    <p:column headerText="Valor Descuento" >                                        
                                        <h:outputText value="#{datos.valorDescuento}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>                                    
                                </p:dataTable>
                            </p:panel>

                            <p:panel header="Obligaciones" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional5}"  title="Agregar obligaciones" immediate="true" actionListener="#{cntjContratoBean.crearObligacionesContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaObligacion" class="listaDatos" widgetVar="obligacionWidget" var="obligacion" value="#{cntjContratoBean.objeto.cntjContratoObligacionList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarObligacionContrato(obligacion)}" process="@this" update="frmCrear:tablaObligacion" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="No. Obligación" >                                        
                                        <h:outputText value="#{obligacion.numeroObligacion}"/>
                                    </p:column>

                                    <p:column headerText="Obligación" >                                        
                                        <h:outputText value="#{obligacion.descripcion}"/>
                                    </p:column>                  
                                </p:dataTable>
                            </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">        
                                        <p:commandButton value="Modificar" class="boton btn-azul" actionListener="#{cntjContratoBean.guardar()}" validateClient="true" process="@form" update="@form"/>   
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrear').hide()" immediate="true" style="margin-left: 5px;"/>                                        
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        
                    </h:form>
                </div>
            </p:dialog>  

            <!-- Ver -->
            <p:dialog header="Ver" widgetVar="dialogoVer"  appendTo="@(body)"  resizable="false" position="center" width="90%" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form class="frmAuditoria" >
                        <p:commandButton id="auditoria" class="btnAuditoria btn-icono" action="#{cntjContratoBean.getAuditoria(cntjContratoBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>

                    <h:form id="frmVer" class="formDialogo">
                        <p:scrollPanel mode="native">
                        <p:panel header="Datos del Contrato" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid columns="4"
                                         columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <p:outputLabel  value="Proceso" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getProcesoStr(cntjContratoBean.objeto.proceso)}" />   

                                <p:outputLabel  value="Estado Contrato" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.maeEstadoContratoValor}" />                                                                      

                                <p:outputLabel  value="Contrato" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.contrato}" /> 

                                <p:outputLabel  value="Clase Contrato" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.maeClaseContratoValor}" />         

                                <p:outputLabel  value="Estado Legalización" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getEstadoLegaizacionStr(cntjContratoBean.objeto.estadoLegalizacion)}" /> 

                                <p:outputLabel  value="Modalidad" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.maeModalidadContratoValor}" />                                   

                                <p:outputLabel  value="Nivel de Complejidad" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getComplegidadStr(cntjContratoBean.objeto.complejidad)}" />

                                <p:outputLabel  value="Régimen" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.maeRegimenValor}" />  

                                <p:outputLabel  value="Objeto" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.objeto}" />  

                                <p:outputLabel value="Enlace Secop" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.enlacePublicaSecop}" />

                                <p:outputLabel value="Fecha Secop" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.fechaPublicaSecop}" >
                                    <f:convertDateTime pattern="yyyy-MM-dd" />
                                </h:outputText>

                                <p:outputLabel value="Responsable Secop" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.responsablePublicaSecop}" />


                            </p:panelGrid>
                        </p:panel>

                        <p:panel header="Plazos y Valores" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid columns="4"
                                         columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >

                                <p:outputLabel  value="Fecha de Suscripción" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.fechaSuscripcion}" />   

                                <p:outputLabel  value="Fecha de Inicio" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.fechaInicio}" />   

                                <p:outputLabel  value="Fecha de Terminación" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.fechaFin}" />

                                <p:outputLabel  value="Plazo en Meses" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.plazoInicialMeses}" />

                                <p:outputLabel  value="Plazo en Días" style="font-weight:bold" class="header-back"  />
                                <h:outputText value="#{cntjContratoBean.objeto.plazoInicialDias}" />

                                <p:outputLabel  value="Plazo Prórrogas" style="font-weight:bold" class="header-back" /> 
                                <h:outputText value="#{cntjContratoBean.objeto.plazoProrrogas}" />

                                <p:outputLabel  value="Plazo Total Días"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.plazoTotalDias}" />

                                <p:outputLabel value="Valor Inicial"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorInicial}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel value="Valor Mes"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorMes}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel value="Valor Día"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorDia}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel  value="Valor UPC"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorUpc}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel  value="Valor Adiciones"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorAdiciones}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel value="Valor Total"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorTotal}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel value="Valor Facturado"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorFacturado}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel  value="Valor Total Pagado"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorPagadoTotal}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel  value="Forma de Pago"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getFormaPagoStr(cntjContratoBean.objeto.formaPago)}" />

                                <p:outputLabel  value="Tipo Gasto"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getTipoGastoStr(cntjContratoBean.objeto.tipoGasto)}" />

                                <p:outputLabel  value="Tipo Anticipo"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getTipoAnticipoStr(cntjContratoBean.objeto.tipoAnticipo)}" />

                                <p:outputLabel  value="Valor Anticipo"  style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.valorAnticipo}" >
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel  value="Fecha de Suspensión" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.fechaSuspension}" />   

                                <p:outputLabel  value="Motivo Suspensión" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.motivoSuspension}" />    

                                <p:outputLabel  value="Periodicidad Seguimiento" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getPeridicidadSeguimientoStr(cntjContratoBean.objeto.periodicidadSeguimiento)}" />    

                                <p:outputLabel value="Motivo Terminación Anticipada" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.motivoTerminaAnticipada}" /> 

                                <p:outputLabel value="Fecha de Liquidación" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.fechaLiquidacion}" >
                                    <f:convertDateTime pattern="yyyy-MM-dd" />
                                </h:outputText>

                            </p:panelGrid>
                        </p:panel>

                        <p:panel id="pnContratista" header="Contratista" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid columns="4"
                                         columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid" >


                                <p:outputLabel value="Contratista" class="header-back" />   
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.razonSocial}" />

                                <p:outputLabel value="Tipo Documento" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.maeTipoDocumentoValor}" />

                                <p:outputLabel value="Número Documento" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.numeroDocumento}" />

                                <p:outputLabel value="Naturaleza" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.getNaturalezaTercero(cntjContratoBean.objeto.cntjTerceroId.naturalezaJuridica)}" />

                                <p:outputLabel value="Municipio" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.gnUbicacionId.nombre}" />

                                <p:outputLabel value="Dirección" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.direccion}" />

                                <p:outputLabel value="Correo Electrónico" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.correoElectronico}" />

                                <h:outputText value="Teléfono" style="font-weight:bold" class="header-back" />
                                <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.telefonoTercero}" />


                            </p:panelGrid>
                        </p:panel>

                        <p:panel header="Responsable Seguimiento" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable id="tablaResponsable" class="listaDatos" widgetVar="responsableWidget" var="responsabe" value="#{cntjContratoBean.objeto.cntjContratoSupervisorList}"
                                         rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" >

                                <p:column headerText="Opciones" >                                        
                                    <p:commandButton title="Ver" actionListener="#{cntjContratoBean.verResponsableSeguimientos(responsabe.id)}" icon="pi pi-search" class="btn-icono" />
                                </p:column>  

                                <p:column headerText="Tipo" >                                        
                                    <h:outputText value="#{cntjContratoBean.getTipoTerceroStr(responsabe.cntjTercerosId.tipoTercero)}"/>
                                </p:column>  

                                <p:column headerText="Tipo Documento" >                                        
                                    <h:outputText value="#{responsabe.cntjTercerosId.maeTipoDocumentoValor}"/>
                                </p:column>

                                <p:column headerText="Número Documento" >                                        
                                    <h:outputText value="#{responsabe.cntjTercerosId.numeroDocumento}"/>
                                </p:column>                  

                                <p:column headerText="Responsable" >                                        
                                    <h:outputText value="#{responsabe.cntjTercerosId.razonSocial}"/>
                                </p:column> 

                                <p:column headerText="Área" >                                        
                                    <h:outputText value="#{responsabe.cntjTercerosId.maeAreaValor}"/>
                                </p:column> 

                                <p:column headerText="Estapa Designación" >                                        
                                    <h:outputText value="#{cntjContratoBean.getEtapaDesignacionStr(responsabe.etapaDesignacion)}"/>
                                </p:column> 

                            </p:dataTable>
                        </p:panel>

                        <p:panel header="Garantías" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable id="tablaGarantia" class="listaDatos" widgetVar="tblWidget" var="dato" value="#{cntjContratoBean.objeto.cntjContratoGarantiaList}"
                                         rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" >

                                <p:column headerText="Opciones" >                                        
                                    <p:commandButton title="Ver" actionListener="#{cntjContratoBean.verDetalleGarantia(dato.id)}" icon="pi pi-search" class="btn-icono" />
                                </p:column>  

                                <p:column headerText="Garantía" >                                        
                                    <h:outputText value="#{dato.maeGarantiaContratoValor}"/>
                                </p:column>

                                <p:column headerText="Porcentaje" >                                        
                                    <h:outputText value="#{dato.porcentajeValorContrato}"/>
                                </p:column>

                                <p:column headerText="Valor" >                                        
                                    <h:outputText value="#{dato.valorAsegurado}" >
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Fecha Expedición" >                                        
                                    <h:outputText value="#{dato.fechaExpedicion}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Vig Desde" >                                        
                                    <h:outputText value="#{dato.vigenciaDesde}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Vig Hasta" >                                        
                                    <h:outputText value="#{dato.vigenciaHasta}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Estado" >                                        
                                    <h:outputText value="#{cntjContratoBean.getEstadoGarantiaStr(dato.estado)}"/>
                                </p:column>

                            </p:dataTable>
                        </p:panel>

                        <p:panel header="Indicadores" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable id="tablaIndicador" class="listaDatos" widgetVar="tblWidgets" var="datos" value="#{cntjContratoBean.objeto.cntjContratoIndicadorList}"
                                         rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" >


                                <p:column headerText="Tipo Indicador" >                                        
                                    <h:outputText value="#{cntjContratoBean.obtenetTipoIndicador(datos.tipoIndicador)}"/>
                                </p:column>

                                <p:column headerText="Descripción" >                                        
                                    <h:outputText value="#{datos.descripcion}"/>
                                </p:column>

                                <p:column headerText="Meta" >                                        
                                    <h:outputText value="#{datos.meta}"/>
                                </p:column>

                                <p:column headerText="% Descuento" >                                        
                                    <h:outputText value="#{datos.porcentajeDescuento}"/>
                                </p:column>

                                <p:column headerText="Valor Descuento" >                                        
                                    <h:outputText value="#{datos.valorDescuento}" >
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>                                    
                            </p:dataTable>
                        </p:panel>

                        <p:panel header="Obligaciones" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable id="tablaObligacion" class="listaDatos" widgetVar="obligacionWidget" var="obligacion" value="#{cntjContratoBean.objeto.cntjContratoObligacionList}"
                                         rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" >

                                <p:column headerText="No. Obligación" >                                        
                                    <h:outputText value="#{obligacion.numeroObligacion}"/>
                                </p:column>

                                <p:column headerText="Obligación" >                                        
                                    <h:outputText value="#{obligacion.descripcion}"/>
                                </p:column>                  
                            </p:dataTable>
                        </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoVer').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog>  

            <!-- Editar -->
            <p:dialog header="Editar" widgetVar="dialogoEditar"  appendTo="@(body)" resizable="false" position="center" width="90%" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form class="frmAuditoria">
                        <p:commandButton id="auditoria" class="btnAuditoria btn-icono" action="#{cntjContratoBean.getAuditoria(cntjContratoBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>
                    
                    <h:form id="frmEditar" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel header="Datos del Contrato" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="cproceso" value="Proceso" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cproceso" value="#{cntjContratoBean.objeto.proceso}" required="true" requiredMessage="Proceso: valor obligatorio" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaProcesos}" var="proceso" itemValue="#{proceso.id}" itemLabel="#{proceso.nombre}" itemDescription="#{proceso.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarPeriodicidad()}" process="@this" update="cperidicidadsegui"  />
                                    </p:selectOneMenu>                                

                                    <p:outputLabel for="cestado" value="Estado Contrato" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestado" value="#{cntjContratoBean.objeto.maeEstadoContratoId}" required="true" requiredMessage="Estado Contrato: valor obligatorio." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoContrato}" var="estado" itemValue="#{estado.id}" itemLabel="#{estado.nombre}" itemDescription="#{estado.descripcion}" />
                                    </p:selectOneMenu>                                    

                                    <p:outputLabel for="ccontrato" value="Contrato" style="font-weight:bold" class="header-back" />
                                    <p:inputText id="ccontrato" value="#{cntjContratoBean.objeto.contrato}" maxlength="32" required="true" requiredMessage="Contrato: valor obligatorio." />

                                    <p:outputLabel for="cclasecontrato" value="Clase Contrato" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cclasecontrato" value="#{cntjContratoBean.objeto.maeClaseContratoId}" required="true" requiredMessage="Clase Contrato: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaClaseContrato}" var="clase" itemValue="#{clase.id}" itemLabel="#{clase.nombre}" itemDescription="#{clase.descripcion}" />
                                    </p:selectOneMenu>
                                    
                                    <p:outputLabel for="cestadolegalizacion" value="Estado Legalización" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestadolegalizacion" value="#{cntjContratoBean.objeto.estadoLegalizacion}" required="true" requiredMessage="Estado Legalización: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoLegalizacion}" var="legal" itemValue="#{legal.id}" itemLabel="#{legal.nombre}" itemDescription="#{legal.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="cmodalidad" value="Modalidad" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cmodalidad" value="#{cntjContratoBean.objeto.maeModalidadContratoId}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaModalidad}" var="modalidad" itemValue="#{modalidad.id}" itemLabel="#{modalidad.nombre}" itemDescription="#{modalidad.descripcion}" />
                                    </p:selectOneMenu>                                    

                                    <p:outputLabel for="cnivelcomplejidad" value="Nivel de Complejidad" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cnivelcomplejidad" value="#{cntjContratoBean.objeto.complejidad}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaComplejidad}" var="complejidad" itemValue="#{complejidad.id}" itemLabel="#{complejidad.nombre}" itemDescription="#{complejidad.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="cregimen" value="Régimen" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cregimen" value="#{cntjContratoBean.objeto.maeRegimenId}" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaRegimen}" var="regimen" itemValue="#{regimen.id}" itemLabel="#{regimen.nombre}" itemDescription="#{regimen.descripcion}" />
                                    </p:selectOneMenu>
                                    
                                    
                                    <p:outputLabel for="cenlacesecop" value="Enlace Secop" style="font-weight:bold" class="header-back" />
                                    <p:inputText id="cenlacesecop" value="#{cntjContratoBean.objeto.enlacePublicaSecop}" maxlength="128" />
                                    
                                    <p:outputLabel for="cfechaSecop" value="Fecha Secop" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechaSecop" value="#{cntjContratoBean.objeto.fechaPublicaSecop}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" 
                                                maxlength="10" readonlyInput="true" showOn="button" />
                                    
                                    <p:outputLabel for="cresponsableSecop" value="Responsable Secop" class="header-back" />
                                    <p:column>
                                        <p:inputText id="cresponsableSecop" value="#{cntjContratoBean.objeto.responsablePublicaSecop}" readonly="true" maxlength="128" />
                                        <p:commandButton process="@this"
                                                         actionListener="#{cntjContratoBean.consultarResponsableSecop()}" icon="ui-icon-person" 
                                                         title="Seleccionar usuario" style="width: 3rem ;" update="cresponsableSecop" />
                                    </p:column>
                                    
                                </p:panelGrid>
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="eobjeto" value="Objeto" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="eobjeto" value="#{cntjContratoBean.objeto.objeto}" required="true" requiredMessage="Debe ingresar el objeto del contrato."
                                                         rows="4" cols="140" maxlength="2048"  />
                                    </p:column>

                                </p:panelGrid>
                            </p:panel>

                            <p:panel header="Plazos y Valores" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >
                                    
                                    <p:outputLabel for="efechaSuscripcion" value="Fecha de Suscripción" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="efechaSuscripcion" value="#{cntjContratoBean.objeto.fechaSuscripcion}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de suscripción: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button">
                                    </p:calendar>

                                    <p:outputLabel for="cfechainicio" value="Fecha de Inicio" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechainicio" value="#{cntjContratoBean.objeto.fechaInicio}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de inicio: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button">
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.calcularPlazos()}" update="cfechaterminacion,cplazomeses,cplazodias,cplazototaldias"  />
                                    </p:calendar>

                                    <p:outputLabel for="cfechaterminacion" value="Fecha de Terminación" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechaterminacion" value="#{cntjContratoBean.objeto.fechaFin}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de Terminación: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" mindate="#{cntjContratoBean.objeto.fechaInicio}" >
                                       <!-- <p:ajax event="dateSelect" listener="#{cntjContratoBean.calcularPlazos()}" update="cfechaterminacion,cplazomeses,cplazodias,cplazototaldias"  /> -->
                                    </p:calendar>

                                    <p:outputLabel for="cplazomeses" value="Plazo en Meses" style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cplazomeses" value="#{cntjContratoBean.objeto.plazoInicialMeses}" decimalPlaces="0"  thousandSeparator="" emptyValue="empty" readonly="false" required="true" requiredMessage="Plazo en Meses: valor requerido."  />

                                    <p:outputLabel for="cplazodias" value="Plazo en Dias" style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cplazodias" value="#{cntjContratoBean.objeto.plazoInicialDias}" decimalPlaces="0"  thousandSeparator="" emptyValue="empty" readonly="false" required="true" requiredMessage="Plazo en Dias: valor requerido."  >
                                        <p:ajax event="change" listener="#{cntjContratoBean.calcularPlazos()}" update="cplazototaldias"  />
                                    </p:inputNumber>
                                    
                                    <p:outputLabel for="cplazoprorroga" value="Plazo Prórrogas" style="font-weight:bold" class="header-back" />                                    
                                    <p:inputNumber id="cplazoprorroga" value="#{cntjContratoBean.objeto.plazoProrrogas}" readonly="true"   minValue="0" decimalPlaces="0" emptyValue="0" required="false" requiredMessage="Plazo Prórrogas: valor requerido."  />

                                    <p:outputLabel for="cplazototaldias" value="Plazo Total Días"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cplazototaldias" value="#{cntjContratoBean.objeto.plazoTotalDias}"   minValue="0" decimalPlaces="0" readonly="true" emptyValue="1" required="true" requiredMessage="Plazo Total Días: valor requerido." />

                                    <p:outputLabel for="cvalorinicial" value="Valor Inicial"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalorinicial" value="#{cntjContratoBean.objeto.valorInicial}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" required="true" requiredMessage="Valor Inicial: Valor obligatorio." >
                                        <p:ajax event="change" listener="#{cntjContratoBean.calcularValores()}" update="cvalormes,cvalordia,cvalortotal"  />
                                    </p:inputNumber>

                                    <p:outputLabel for="cvalormes" value="Valor Mes"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalormes" value="#{cntjContratoBean.objeto.valorMes}"  readonly="true" decimalPlaces="0" symbol="$ " symbolPosition="p" />

                                    <p:outputLabel for="cvalordia" value="Valor Día"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalordia" value="#{cntjContratoBean.objeto.valorDia}"  readonly="true" decimalPlaces="0" symbol="$ " symbolPosition="p" />

                                    <p:outputLabel for="cvalorupc" value="Valor UPC"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalorupc" value="#{cntjContratoBean.objeto.valorUpc}"  minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" />

                                    <p:outputLabel for="cvaloradiciones" value="Valor Adiciones"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvaloradiciones" value="#{cntjContratoBean.objeto.valorAdiciones}"   minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" readonly="true" emptyValue="0" />

                                    <p:outputLabel for="cvalortotal" value="Valor Total"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalortotal" value="${cntjContratoBean.objeto.valorTotal}" readonly="true" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" emptyValue="0" required="true" requiredMessage="Valor Total: Valor obligatorio." />

                                    <p:outputLabel for="cvalorFacturado" value="Valor Facturado"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalorFacturado" value="${cntjContratoBean.objeto.valorFacturado}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" emptyValue="0" required="true" requiredMessage="Valor Total: Valor obligatorio." />

                                    <p:outputLabel for="cvalortotalpagado" value="Valor Total Pagado"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvalortotalpagado" value="#{cntjContratoBean.objeto.valorPagadoTotal}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" required="true" requiredMessage="Valor Total Pagado: valor obligatorio."  />

                                    <p:outputLabel for="cformapago" value="Forma de Pago"  style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cformapago" value="#{cntjContratoBean.objeto.formaPago}" required="true" requiredMessage="Forma de Pago: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaFormaDePago}" var="forma" itemValue="#{forma.id}" itemLabel="#{forma.nombre}" itemDescription="#{forma.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarPeriodicidad()}" process="cproceso,@this" update="cperidicidadsegui"  />
                                    </p:selectOneMenu>
                                    
                                    <p:outputLabel for="ctipogasto" value="Tipo Gasto"  style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ctipogasto" value="#{cntjContratoBean.objeto.tipoGasto}" required="true" requiredMessage="Tipo Gasto: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoGasto}" var="gasto" itemValue="#{gasto.id}" itemLabel="#{gasto.nombre}" itemDescription="#{gasto.descripcion}" />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="ctipoanticipo" value="Tipo Anticipo"  style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ctipoanticipo" value="#{cntjContratoBean.objeto.tipoAnticipo}" required="true" requiredMessage="Tipo Anticipo: valor obligatorio. " >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoAnticipo}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarTipoAnticipo()}" update="cvaloranticipo"  />
                                    </p:selectOneMenu>

                                    <p:outputLabel for="cvaloranticipo" value="Valor Anticipo"  style="font-weight:bold" class="header-back" />
                                    <p:inputNumber id="cvaloranticipo" value="#{cntjContratoBean.objeto.valorAnticipo}" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" >
                                    </p:inputNumber>
                                    
                                    <p:outputLabel for="cfechasuspencion" value="Fecha de Suspensión" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechasuspencion" value="#{cntjContratoBean.objeto.fechaSuspension}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" required="false" requiredMessage="Fecha de Suspención: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button">
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.validaMotivoSuspension()}" update="cmotivosuspencion"  />
                                    </p:calendar>
                                    
                                    <p:outputLabel for="cmotivosuspencion" value="Motivo Suspensión" class="header-back" />
                                    <p:inputTextarea id="cmotivosuspencion" value="#{cntjContratoBean.objeto.motivoSuspension}" readonly="#{!cntjContratoBean.habilitarMotivoSuspension}" required="false" requiredMessage="Motivo Suspención: Valor obligatorio."
                                                         rows="2" cols="140" maxlength="2048"  />

                                    <p:outputLabel for="cperidicidadsegui" value="Periodicidad Seguimiento"  style="font-weight:bold" class="header-back" />
                                    <p:inputText id="cperidicidadsegui" value="#{cntjContratoBean.getPeridicidadSeguimientoStr(cntjContratoBean.objeto.periodicidadSeguimiento)}" required="false" readonly="true" />
                                    
                                    <p:outputLabel for="crmotivoterminaanticipada" value="Motivo Terminación Anticipada" class="header-back" />
                                    <p:inputTextarea id="crmotivoterminaanticipada" value="#{cntjContratoBean.objeto.motivoTerminaAnticipada}"  required="false" 
                                                         rows="2" cols="140" maxlength="2048"  />
                                    
                                    <p:outputLabel for="efechaliquidacion" value="Fecha de Liquidación" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="efechaliquidacion" value="#{cntjContratoBean.objeto.fechaLiquidacion}" autocomplete="off" navigator="true" locale="es" pattern="yyyy-MM-dd" size="30" 
                                                maxlength="10" readonlyInput="true" showOn="button">
                                    </p:calendar>
                                    
                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="pnContratista" header="Contratista" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >


                                    <p:outputLabel for="ccontratistahide" value="Contratista" class="header-back" />                                    
                                    <p:column>
                                        <h:inputHidden id="ccontratistahide" value="#{cntjContratoBean.objeto.cntjTerceroId.numeroDocumento}" required="true" requiredMessage="Contratista: Valor obligatorio."/>
                                        <p:inputText id="ccontratista" value="#{cntjContratoBean.objeto.cntjTerceroId.razonSocial}" readonly="true" required="true" requiredMessage="Contratista: Valor obligatorio." />
                                        <p:commandButton process="@this"  actionListener="#{cntjContratoBean.listarTerceros(2)}" icon="pi pi-user" class="btn-icono"
                                                         title="Seleccionar contratista" style="width: 2.3rem; height: 1.6rem;" update="ccontratista" />
                                    </p:column>

                                    <p:outputLabel value="Tipo Documento" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.maeTipoDocumentoValor}" />

                                    <p:outputLabel value="Número Documento" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.numeroDocumento}" />

                                    <p:outputLabel value="Naturaleza" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getNaturalezaTercero(cntjContratoBean.objeto.cntjTerceroId.naturalezaJuridica)}" />

                                    <p:outputLabel value="Municipio" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.gnUbicacionId.nombre}" />

                                    <p:outputLabel value="Dirección" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.direccion}" />

                                    <p:outputLabel value="Correo Electrónico" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.correoElectronico}" />

                                    <h:outputText value="Teléfono" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objeto.cntjTerceroId.telefonoTercero}" />


                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="panelResponsable" header="Responsable Seguimiento" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional6}"  title="Agregar responsable" immediate="true" actionListener="#{cntjContratoBean.crearSupervidorContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaResponsable" class="listaDatos" widgetVar="responsableWidget" var="responsabe" value="#{cntjContratoBean.objeto.cntjContratoSupervisorList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarSupervisorContrato(responsabe)}" process="@this" update="frmEditar:tablaResponsable" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Tipo" >                                        
                                        <h:outputText value="#{cntjContratoBean.getTipoTerceroStr(responsabe.cntjTercerosId.tipoTercero)}"/>
                                    </p:column>  

                                    <p:column headerText="Tipo Documento" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.maeTipoDocumentoValor}"/>
                                    </p:column>

                                    <p:column headerText="Número Documento" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.numeroDocumento}"/>
                                    </p:column>                  

                                    <p:column headerText="Responsable" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.razonSocial}"/>
                                    </p:column> 

                                    <p:column headerText="Área" >                                        
                                        <h:outputText value="#{responsabe.cntjTercerosId.maeAreaValor}"/>
                                    </p:column> 

                                    <p:column headerText="Estapa Designación" >                                        
                                        <h:outputText value="#{cntjContratoBean.getEtapaDesignacionStr(responsabe.etapaDesignacion)}"/>
                                    </p:column>  

                                </p:dataTable>
                            </p:panel>

                            <p:panel header="Garantías" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional3}"  title="Agregar garantía" immediate="true" actionListener="#{cntjContratoBean.crearGarantiaContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaGarantia" class="listaDatos" widgetVar="tblWidget" var="dato" value="#{cntjContratoBean.objeto.cntjContratoGarantiaList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >    
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarGarantiaContrato(dato)}" process="@this" update="frmEditar:tablaGarantia" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Garantía" >                                        
                                        <h:outputText value="#{dato.maeGarantiaContratoValor}"/>
                                    </p:column>

                                    <p:column headerText="Porcentaje" >                                        
                                        <h:outputText value="#{dato.porcentajeValorContrato}"/>
                                    </p:column>

                                    <p:column headerText="Valor" >                                        
                                        <h:outputText value="#{dato.valorAsegurado}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Fecha Expedición" >                                        
                                        <h:outputText value="#{dato.fechaExpedicion}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Vig Desde" >                                        
                                        <h:outputText value="#{dato.vigenciaDesde}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Vig Hasta" >                                        
                                        <h:outputText value="#{dato.vigenciaHasta}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Estado" >                                        
                                        <h:outputText value="#{cntjContratoBean.getEstadoGarantiaStr(dato.estado)}"/>
                                    </p:column>

                                </p:dataTable>
                            </p:panel>

                            <p:panel header="Indicadores" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional4}"  title="Agregar indicador" immediate="true" actionListener="#{cntjContratoBean.crearIndicadorContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaIndicador" class="listaDatos" widgetVar="tblWidgets" var="datos" value="#{cntjContratoBean.objeto.cntjContratoIndicadorList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" > 
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarIndicadorContrato(datos)}" process="@this" update="frmEditar:tablaIndicador" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Tipo Indicador" >                                        
                                        <h:outputText value="#{cntjContratoBean.obtenetTipoIndicador(datos.tipoIndicador)}"/>
                                    </p:column>

                                    <p:column headerText="Descripción" >                                        
                                        <h:outputText value="#{datos.descripcion}"/>
                                    </p:column>

                                    <p:column headerText="Meta" >                                        
                                        <h:outputText value="#{datos.meta}"/>
                                    </p:column>

                                    <p:column headerText="% Descuento" >                                        
                                        <h:outputText value="#{datos.porcentajeDescuento}"/>
                                    </p:column>

                                    <p:column headerText="Valor Descuento" >                                        
                                        <h:outputText value="#{datos.valorDescuento}" >
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>                                    
                                </p:dataTable>
                            </p:panel>

                            <p:panel header="Obligaciones" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional5}"  title="Agregar obligaciones" immediate="true" actionListener="#{cntjContratoBean.crearObligacionesContrato()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaObligacion" class="listaDatos" widgetVar="obligacionWidget" var="obligacion" value="#{cntjContratoBean.objeto.cntjContratoObligacionList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >
                                        <p:commandButton title="Eliminar registro" actionListener="#{cntjContratoBean.eliminarObligacionContrato(obligacion)}" process="@this" update="frmEditar:tablaObligacion" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="No. Obligación" >                                        
                                        <h:outputText value="#{obligacion.numeroObligacion}"/>
                                    </p:column>

                                    <p:column headerText="Obligación" >                                        
                                        <h:outputText value="#{obligacion.descripcion}"/>
                                    </p:column>                  
                                </p:dataTable>
                            </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Modificar" class="boton btn-azul" actionListener="#{cntjContratoBean.modificar()}" validateClient="true" process="@form" update="@form"/>      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoEditar').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog>  

            <!-- Dialogo crear garantia -->
            <p:dialog header="Crear Garantía" widgetVar="dialogoCrearGarantia"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrearGarantia" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información de la garantía" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Garantía" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ggarantia" value="#{cntjContratoBean.objetoGarantia.maeGarantiaContratoId}" required="true" requiredMessage="Garantía: Valor requerido." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaGarantiaContrato}" var="garantia" itemValue="#{garantia.id}" itemLabel="#{garantia.nombre}" itemDescription="#{garantia.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarGarantiaHasta()}" process="@this" update="gfechahasta" />
                                    </p:selectOneMenu>                                    

                                    <h:outputText value="Porcentaje Contrato" style="font-weight:bold" class="header-back"  />
                                    <p:inputNumber id="gporcentajecontrato" value="#{cntjContratoBean.objetoGarantia.porcentajeValorContrato}"  emptyValue="always" decimalPlaces="1" symbol="%" maxValue="100" symbolPosition="s" required="true" requiredMessage="Porcentaje Contrato: Valor obligatorio." />

                                    <h:outputText value="Porcentaje Anticippo" style="font-weight:bold" class="header-back"  />
                                    <p:inputNumber id="gporcentajeanticipo" value="#{cntjContratoBean.objetoGarantia.porcentajeValorAnticipo}" readonly="#{cntjContratoBean.objetoGarantia.bloquearPorcentaje}" emptyValue="always" decimalPlaces="1" symbol="%" maxValue="100" symbolPosition="s" required="true" requiredMessage="Porcentaje Contrato: Valor obligatorio." />

                                    <h:outputText value="Valor Garantía" style="font-weight:bold" class="header-back"  />
                                    <p:inputNumber id="gvalorgarantia" value="#{cntjContratoBean.objetoGarantia.valorAsegurado}"  minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p"  />

                                    <h:outputText value="Fecha Expedición" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="gfechaexpedicion" value="#{cntjContratoBean.objetoGarantia.fechaExpedicion}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha Expedición: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button">
                                        <p:ajax event="dateSelect" update="gfechadesde" />
                                    </p:calendar>

                                    <h:outputText value="Fecha Desde" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="gfechadesde" value="#{cntjContratoBean.objetoGarantia.vigenciaDesde}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha Desde: Valor obligatorio."
                                                mindate="#{cntjContratoBean.objeto.fechaInicio}"
                                                maxlength="10" readonlyInput="true" showOn="button">
                                    </p:calendar>

                                    <h:outputText value="Fecha Hasta" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="gfechahasta" value="#{cntjContratoBean.objetoGarantia.vigenciaHasta}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha Hasta: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button">
                                    </p:calendar>
                                    
                                    <h:outputText value="Fecha Aprobación" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="gfechaaprobacion" value="#{cntjContratoBean.objetoGarantia.fechaAprobacion}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" 
                                                mindate="#{cntjContratoBean.objetoGarantia.fechaExpedicion}"
                                                maxlength="10" readonlyInput="true" showOn="button">
                                    </p:calendar>
                                    
                                    <p:outputLabel value="Requiere Renovación" for="cereqrenovacion" style="font-weight:bold;" class="header-back" />
                                    <p:column class="ui-g-9" style="margin-right: 4px;">
                                        <p:selectBooleanButton id="cereqrenovacion" value="#{cntjContratoBean.objetoGarantia.requiereRenovacion}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:5rem;" />
                                    </p:column>
                                    

                                </p:panelGrid>

                            </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar" class="boton btn-azul"  actionListener="#{cntjContratoBean.guardarGarantiaContrato()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearGarantia').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Dialogo crear indicador -->
            <p:dialog header="Crear Indicador" widgetVar="dialogoCrearIndicador"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrearIndicador" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información del indicador" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Tipo Indicador" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="itipo" value="#{cntjContratoBean.objetoIndicador.tipoIndicador}" required="true" requiredMessage="Garantía: Valor requerido." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaIndicadorContrato}" var="indicador" itemValue="#{indicador.id}" itemLabel="#{indicador.nombre}" itemDescription="#{indicador.descripcion}" />
                                    </p:selectOneMenu>                                    

                                    <h:outputText value="Meta" style="font-weight:bold" class="header-back"  />
                                    <p:inputText id="imeta" value="#{cntjContratoBean.objetoIndicador.meta}" maxlength="16"  required="true" requiredMessage="Meta: Valor obligatorio." />

                                    <h:outputText value="Aplica Descuento" style="font-weight:bold" class="header-back"  />
                                    <p:selectBooleanButton id="iaplicadescuento" value="#{cntjContratoBean.objetoIndicador.aplicaDescuento}" onLabel="Si" offLabel="No"  
                                                           onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px;" >
                                        <p:ajax event="change" update="frmCrearIndicador" />
                                    </p:selectBooleanButton>

                                    <h:outputText id="lbiporcentajedescuento" value="Porcentaje Descuento" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.objetoIndicador.aplicaDescuento}"  />
                                    <p:inputNumber id="iporcentajedescuento" value="#{cntjContratoBean.objetoIndicador.porcentajeDescuento}"  emptyValue="always" decimalPlaces="1" symbol="%" symbolPosition="s" maxlength="5" maxValue="100" required="true" requiredMessage="Porcentaje Descunto: Valor obligatorio." rendered="#{cntjContratoBean.objetoIndicador.aplicaDescuento}" />

                                    <h:outputText value="Valor Descuento" style="font-weight:bold" class="header-back"  />
                                    <p:inputNumber id="ivalordescuento" value="#{cntjContratoBean.objetoIndicador.valorDescuento}"  minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p"  />

                                </p:panelGrid>

                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel value="Descripción" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="idescripcion" value="#{cntjContratoBean.objetoIndicador.descripcion}" required="true" requiredMessage="Descripción: valor requerido."
                                                         rows="3" cols="140" maxlength="512"  />
                                    </p:column>

                                </p:panelGrid>

                            </p:panel>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar"  class="boton btn-azul"  actionListener="#{cntjContratoBean.guardarIndicadorContrato()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearIndicador').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Dialogo crear obligaciones -->
            <p:dialog header="Crear Obligación" widgetVar="dialogoCrearObligacion"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrearObligacion" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información de la obligación" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel value="Obligación" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="oblidescripcion" value="#{cntjContratoBean.objetoObligacion.descripcion}" required="true" requiredMessage="Obligación: valor requerido."
                                                         rows="5" cols="140" maxlength="512"  />
                                    </p:column>

                                </p:panelGrid>

                            </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar" class="boton btn-azul"  actionListener="#{cntjContratoBean.guardarObligacionContrato()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearObligacion').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Dialogo agregar responsable seguimiento -->
            <p:dialog header="Agregar Responsable Seguimiento" widgetVar="dialogoCrearSupervidor"  appendTo="@(body)" position="center" width="90%" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrearSupervisor" class="formDialogo" style="margin-top: 1rem;">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información del responsable" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >


                                    <h:outputText value="Responsable" class="header-back" style="font-weight:bold" />
                                    <p:column>
                                        <p:inputText id="ctercero" value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.razonSocial}" readonly="true"  />
                                        <p:commandButton process="@this"  actionListener="#{cntjContratoBean.listarTerceros(0)}" icon="ui-icon-person" 
                                                         title="Seleccionar responsable" style="width: 3rem ;" update="frmCrearSupervisor" />
                                    </p:column>

                                    <h:outputText value="Tipo Documento" class="header-back" style="font-weight:bold" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.maeTipoDocumentoValor}" />

                                    <h:outputText value="Número Documento" class="header-back" style="font-weight:bold" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.numeroDocumento}" />

                                    <h:outputText value="Cargo del responsable" class="header-back" style="font-weight:bold" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.maeCargoValor}" />

                                    <h:outputText value="Área" class="header-back" style="font-weight:bold" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.maeAreaValor}" />

                                    <h:outputText value="Correo Electrónico" class="header-back" style="font-weight:bold" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.correoElectronico}" />

                                    <h:outputText value="Etapa Designación" class="header-back" style="font-weight:bold" />
                                    <p:selectOneMenu value="#{cntjContratoBean.objetoSupervisor.etapaDesignacion}">
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" />
                                        <f:selectItem itemLabel=" Precontractual " itemValue="1" />
                                        <f:selectItem itemLabel=" Contractual " itemValue="2" />
                                    </p:selectOneMenu>
                                    
                                    <h:outputText value="Informes Pendientes" class="header-back" style="font-weight:bold" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.informesPendientes}" />
                                    
                                    <h:outputText value="Estado Supervisión" class="header-back" style="font-weight:bold" />
                                    <p:column class="ui-g-9" style="margin-right: 4px;">
                                        <h:outputText value="#{cntjContratoBean.objetoSupervisor.estadoSupervision}" />
                                    </p:column>
                                    


                                </p:panelGrid>
                            </p:panel>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar" class="boton btn-azul" actionListener="#{cntjContratoBean.guardarSupervidorContrato()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearSupervidor').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Dialogo listar terceros -->
            <p:dialog header="Consultar Tercero" widgetVar="dialogoListaTercero" appendTo="@(body)" modal="true" width="90%" style="height: auto;" dynamic="true">
                <div class="bodyDialog" >
                    <h:form class="frmAuditoria" >
                        <p:commandButton title="Refrescar" actionListener="#{cntjContratoBean.refrescarTerceros()}" class="btn-icono"  icon="ui-icon-refresh"/>
                    </h:form>
                    <h:form id="frmTerceroLista">
                        <p:panelGrid style="height:auto;" columns="1">

                            <p:dataTable id="tablaRegistros" class="listaDatos" widgetVar="tablaWidget" var="obj" value="#{cntjContratoBean.lazyTerceros}" rowKey="#{obj.id}"
                                         rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" selectionMode="single">

                                <p:ajax event="rowSelect" listener="#{cntjContratoBean.onRowSelectUsuario}"/>

                                <p:column headerText="Tipo" filterBy="#{obj.tipoTercero}"  >        
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 80%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cntjContratoBean.listaTipoTercero}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{cntjContratoBean.getTipoTerceroStr(obj.tipoTercero)}"/>
                                </p:column>

                                <p:column headerText="Tipo Documento" filterBy="#{obj.maeTipoDocumentoId}"  > 
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 80%;" filter="true" filterMatchMode="contains">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cntjContratoBean.listaTipoDocumentoTercero}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{obj.maeTipoDocumentoValor}"/>
                                </p:column>

                                <p:column headerText="Documento" filterBy="#{obj.numeroDocumento}" >
                                    <f:facet name="filter">
                                        <p:inputText label="Documento" maxlength="128" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.numeroDocumento}" />
                                </p:column>

                                <p:column headerText="Nombre/Razón Social" filterBy="#{obj.razonSocial}" >
                                    <f:facet name="filter">
                                        <p:inputText maxlength="128" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }" style="width: 95%;" onchange="PF('tablaWidget').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.razonSocial}"/>
                                </p:column>

                            </p:dataTable>

                        </p:panelGrid>
                        
                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoListaTercero').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog>

            <!-- Dialogo listar otros si -->
            <p:dialog header="Otrosies" widgetVar="dialogoListaOtrosies" appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;" >
                <div class="bodyDialog" >
                    <h:form id="frmOtrosies" class="formDialogo" >
                        <p:scrollPanel mode="native">
                            <div align="right" style="margin-bottom: .4rem;">
                                <p:commandButton title="Refrescar" actionListener="#{cntjContratoBean.listarOtrosi()}"  icon="pi pi-sync" class="boton-normal btn1" />
                                <p:commandButton rendered="#{cntjContratoBean.contratoVigente and not cntjContratoBean.expedienteContrato}" title="Agregar" actionListener="#{cntjContratoBean.crearOtroSi()}"  icon="pi pi-file-o" class="boton-normal btn1" />
                                <p:commandButton rendered="#{cntjContratoBean.contratoVigente and cntjContratoBean.expedienteContrato }" title="Crear expediente" actionListener="#{cntjContratoBean.crearOtroSiExpediente()}"  icon="pi pi-file-o" class="boton-normal btn1" >
                                    <p:confirm header="Confirmación" 
                                               message="A continuación se creara un registro de expediente para gestionar la creación del otro si, esta gestion se realizará desde la opción funcional, Tareas. ¿Está seguro que desea crear el registro?" 
                                               />
                                </p:commandButton>
                            </div>
                            <p:dataTable id="tablaRegistros" class="listaDatos" widgetVar="tablaWidget" var="obj"  rowKey="#{obj.id}" value="#{cntjContratoBean.lazyOtroSi}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Acción">        
                                        <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}" title="Ver" actionListener="#{cntjContratoBean.verOtrosi(obj.id)}" icon="pi pi-search" class="btn-icono"/>
                                        <p:commandButton rendered="#{cntjContratoBean.accionAdicional2 and cntjContratoBean.permitirEditarOtrosi(obj)}" title="Editar" actionListener="#{cntjContratoBean.editarOtrosi(obj.id)}"  icon="pi pi-file-edit" class="btn-icono" />
                                    </p:column>

                                    <p:column headerText="No."> 
                                        <h:outputText value="#{obj.numero}"/>
                                    </p:column>

                                    <p:column headerText="Tipo Otrosí" filterBy="#{obj.tipo}"> 
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" class="selectFiltro" >
                                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItems value="#{cntjContratoBean.listaTipoOtrosi}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{cntjContratoBean.getTipoOtrosi(obj.tipo)}"/>
                                    </p:column>

                                    <p:column headerText="Plazo (Meses)" filterBy="#{obj.plazoMeses}" > 
                                        <f:facet name="filter">
                                            <p:inputText label="Plazo (Meses)" maxlength="128" class="txtFiltro" onchange="PF('tablaWidget').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{obj.plazoMeses}"/>
                                    </p:column>

                                    <p:column headerText="Valor" filterBy="#{obj.valor}"> 
                                        <f:facet name="filter">
                                            <p:inputNumber label="Valor" class="txtFiltro" minValue="0" decimalPlaces="0" symbol="$ " symbolPosition="p" onchange="PF('tablaWidget').filter()" />
                                        </f:facet>
                                        <h:outputText value="#{obj.valor}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Fecha Suscripción"> 
                                        <h:outputText value="#{obj.fechasuscripcion}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Fecha Inicio"> 
                                        <h:outputText value="#{obj.fechaInicio}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Fecha Terminación"> 
                                        <h:outputText value="#{obj.fechaTerminacion}">
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Estado" filterBy="#{obj.estado}"> 
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" class="selectFiltro" >
                                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItems value="#{cntjContratoBean.listaEstadoOtrosi}" var="estado" itemValue="#{estado.id}" itemLabel="#{estado.nombre}" itemDescription="#{estado.descripcion}" />
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{cntjContratoBean.getEstadoOtrosi(obj.estado)}"/>
                                    </p:column>

                                </p:dataTable>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoListaOtrosies').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog>

            <!-- Crear Otrosies -->
            <p:dialog header="Crear Otrosí" widgetVar="dialogoCrearOtrosi"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrearOtrosi" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información Otrosí" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="ctipootrosi" value="Tipo Otrosí" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ctipootrosi" value="#{cntjContratoBean.objetoOtrosi.tipo}" required="true" requiredMessage="Tipo Otrosí: Valor obligatorio." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoOtrosi}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarTipoOtrosiCampos()}" update="frmCrearOtrosi" />
                                    </p:selectOneMenu>                                    

                                    <p:outputLabel for="cfechasuscripcion" value="Fecha Suscripción" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechasuscripcion" value="#{cntjContratoBean.objetoOtrosi.fechasuscripcion}" 
                                                locale="es" autocomplete="off" navigator="true" 
                                                pattern="yyyy-MM-dd" size="30" 
                                                required="true" requiredMessage="Fecha Suscripción: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button" 
                                                mindate="#{cntjContratoBean.minFechaSuscripcionOtrosi()}" 
                                                maxdate="#{cntjContratoBean.maxFechaSuscripcionOtrosi()}" >
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.restablecerInicioOtrosi()}" update="cfechainic, cfechatermina"  />
                                    </p:calendar>

                                    <p:outputLabel for="cfechainic" value="Fecha Inicio" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requiereFechas}" />
                                    <p:calendar id="cfechainic" value="#{cntjContratoBean.objetoOtrosi.fechaInicio}" 
                                                locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" 
                                                size="30" required="true" requiredMessage="Fecha de inicio: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.getFechaMinimaInicioOtrosi()}" 
                                                maxdate="#{cntjContratoBean.getFechaMaximaInicioOtrosi()}"
                                                rendered="#{cntjContratoBean.requiereFechas}" >
                                                <p:ajax event="dateSelect" update="cfechatermina"  />
                                    </p:calendar>

                                    <p:outputLabel for="cfechatermina" value="Fecha Terminación" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requiereFechas}" />
                                    <p:calendar id="cfechatermina" value="#{cntjContratoBean.objetoOtrosi.fechaTerminacion}" 
                                                locale="es" autocomplete="off" 
                                                navigator="true" pattern="yyyy-MM-dd" 
                                                size="30" required="true" requiredMessage="Fecha Terminación: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.getFechaMinimaFinOtrosi()}" 
                                                rendered="#{cntjContratoBean.requiereFechas}" />


                                    <p:outputLabel for="cplazoprorroga" value="Plazo Prórrogas (Meses)" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requierePlazo}" />
                                    <p:spinner id="cplazoprorroga" class="spinerleft" value="#{cntjContratoBean.objetoOtrosi.plazoMeses}" 
                                               max="60" min="0"
                                               rotate="true" buttons="horizontal-after" style="text-align: left;" 
                                               required="true" requiredMessage="Plazo Prórrogas (Meses): valor requerido." 
                                               rendered="#{cntjContratoBean.requierePlazo}" />

                                    <p:outputLabel for="cplazoprorrogadia" value="Plazo Prórrogas (Días)" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requierePlazo}"  />
                                    <p:spinner id="cplazoprorrogadia" class="spinerleft" value="#{cntjContratoBean.objetoOtrosi.plazoDias}"  
                                               max="1800" min="0" 
                                               rotate="true"  buttons="horizontal-after" 
                                               required="true" requiredMessage="Plazo Prórrogas (Días): valor requerido." rendered="#{cntjContratoBean.requierePlazo}"  />

                                    <p:outputLabel for="cevalorotrosi" value="Valor Otrosí" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requiereValor}" />
                                    <p:inputNumber id="cevalorotrosi" value="#{cntjContratoBean.objetoOtrosi.valor}"  rendered="#{cntjContratoBean.requiereValor}" minValue="0" decimalPlaces="0" symbol="$ " 
                                                       symbolPosition="p" required="true" requiredMessage="Valor Otrosí: Valor obligatorio." 
                                                       style="max-width: 24.5rem !important;"  />
                                                                        
                                    <p:outputLabel for="cestadolegalizacion" value="Estado de Legalización" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestadolegalizacion" value="#{cntjContratoBean.objetoOtrosi.estadoLegalizacion}"  >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoLegalizacionOtrosi}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                    </p:selectOneMenu>  

                                </p:panelGrid>

                                <p:panelGrid id="panelLinea2" columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <p:outputLabel for="cjustificacion" value="Justificación" style="font-weight:bold" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="cjustificacion" value="#{cntjContratoBean.objetoOtrosi.justificacion}" 
                                                         required="true" requiredMessage="Justificación: valor requerido."
                                                         rows="2" cols="140" maxlength="2048"  />
                                    </p:column>


                                    <h:outputText value="Elementos Adicionales" style="font-weight:bold" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="celeadicional" value="#{cntjContratoBean.objetoOtrosi.elementoAdicional}" 
                                                         required="true" requiredMessage="Elementos Adicionales: valor obligatorio."
                                                         rows="2" cols="140" maxlength="2048"  />
                                    </p:column>

                                </p:panelGrid>

                            </p:panel>

                            <p:panel id="pnlAdjLinea" header="Adjuntos" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" class="frmAuditoria" > 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}"  title="Agregar adjunto" immediate="true" actionListener="#{cntjContratoBean.crearAdjunto()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaAdjunto" class="listaDatos" widgetVar="tblWidgetc" var="adjuntoc"  value="#{cntjContratoBean.adjuntosOtroSi}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >                                        
                                        <p:commandButton title="Eliminar adjunto" actionListener="#{cntjContratoBean.eliminarAdjunto(adjuntoc)}" process="@this" update="frmCrearOtrosi:tablaAdjunto" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Adjunto" >                                        
                                        <h:outputText value="#{adjuntoc.maetipoArchivoValor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>

                        </p:scrollPanel>
                        
                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Guardar" class="boton btn-azul" actionListener="#{cntjContratoBean.guardarOtrosi()}" validateClient="true" process="@form" update="@form" />      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearOtrosi').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog> 

            <!-- Ver Otrosies -->
            <p:dialog header="Ver Otrosí" widgetVar="dialogoVerOtrosi"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmVerOtrosi" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información Otrosí" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Número Otrosí" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.numero}" />  

                                    <h:outputText value="Tipo Otrosí" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getTipoOtrosi(cntjContratoBean.objetoOtrosi.tipo)}" />     

                                    <h:outputText value="Estado" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getEstadoOtrosi(cntjContratoBean.objetoOtrosi.estado)}" /> 

                                    <h:outputText value="Fecha Suscripción" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.fechasuscripcion}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText> 

                                    <h:outputText value="Fecha Inicio" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.fechaInicio}" >
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText>  

                                    <h:outputText value="Fecha Terminación" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.fechaTerminacion}" >
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </h:outputText> 

                                    <h:outputText value="Plazo Prórrogas (Meses)" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.plazoMeses}" />  

                                    <h:outputText value="Plazo Prórrogas (Días)"  class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.plazoDias}" />  

                                    <h:outputText value="Valor Otrosí" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoOtrosi.valor}" >
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText> 

                                    <p:outputLabel value="Estado de Legalización" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getEstadoLegaizacionOtrosi(cntjContratoBean.objetoOtrosi.estadoLegalizacion)}" />    

                                </p:panelGrid>

                                <p:panelGrid id="panelLinea2" columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Justificación" style="font-weight:bold" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <h:outputText value="#{cntjContratoBean.objetoOtrosi.justificacion}" />  
                                    </p:column>


                                    <h:outputText value="Elementos Adicionales" style="font-weight:bold" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <h:outputText value="#{cntjContratoBean.objetoOtrosi.elementoAdicional}" />  
                                    </p:column>

                                </p:panelGrid>

                            </p:panel>

                            <p:panel header="Adjuntos" style="margin-bottom:10px;" toggleable="true">                                
                                <p:dataTable id="tablaAdjunto" class="listaDatos" widgetVar="tblWidget" var="adjunto"  value="#{cntjContratoBean.adjuntosOtroSi}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Adjunto" >                                        
                                        <h:outputText value="#{adjunto.maetipoArchivoValor}"/>
                                    </p:column>

                                    <p:column headerText="Fecha Creación" >                                        
                                        <h:outputText value="#{adjunto.fechaHoraCrea}" >
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText> 
                                    </p:column>        

                                    <p:column headerText="Existe Adjunto" >                                        
                                        <h:outputText value="#{adjunto.existeStr}"/>
                                    </p:column>

                                </p:dataTable>

                            </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoVerOtrosi').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Editar Otrosies -->
            <p:dialog header="Editar Otrosí" widgetVar="dialogoEditarOtrosi"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmEditarOtrosi" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información Otrosí" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Tipo Otrosí" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="ctipootrosi" value="#{cntjContratoBean.objetoOtrosi.tipo}" required="true" requiredMessage="Tipo Otrosí: Valor obligatorio." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoOtrosi}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.validarTipoOtrosiCampos()}" update="frmEditarOtrosi" />
                                    </p:selectOneMenu>      

                                    <h:outputText value="Estado Otrosí" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestadootrosi" value="#{cntjContratoBean.objetoOtrosi.estado}" required="true" requiredMessage="Tipo Otrosí: Valor obligatorio." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoOtrosi}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                    </p:selectOneMenu>  

                                    <h:outputText value="Fecha Suscripción" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="cfechasuscripcion" value="#{cntjContratoBean.objetoOtrosi.fechasuscripcion}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha Suscripción: Valor obligatorio."
                                                maxlength="10" readonlyInput="true" showOn="button" 
                                                mindate="#{cntjContratoBean.minFechaSuscripcionOtrosi()}" 
                                                maxdate="#{cntjContratoBean.maxFechaSuscripcionOtrosi()}" >
                                        <p:ajax event="dateSelect" listener="#{cntjContratoBean.restablecerInicioOtrosi()}" update="cfechainicio, cfechatermina"  />
                                    </p:calendar>

                                    <p:outputLabel value="Fecha Inicio" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requiereFechas}" />
                                    <p:calendar id="cfechainicio" value="#{cntjContratoBean.objetoOtrosi.fechaInicio}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de inicio: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.getFechaMinimaInicioOtrosi()}" 
                                                maxdate="#{cntjContratoBean.getFechaMaximaInicioOtrosi()}"
                                                rendered="#{cntjContratoBean.requiereFechas}" >
                                                <p:ajax event="dateSelect" update="cfechatermina"  />
                                    </p:calendar>

                                    <p:outputLabel value="Fecha Terminación" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requiereFechas}" />
                                    <p:calendar id="cfechatermina" value="#{cntjContratoBean.objetoOtrosi.fechaTerminacion}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha Terminación: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.getFechaMinimaFinOtrosi()}" 
                                                rendered="#{cntjContratoBean.requiereFechas}" />

                                    <p:outputLabel value="Plazo Prórrogas (Meses)" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requierePlazo}" />
                                    <p:spinner id="cplazoprorroga" class="spinerleft" value="#{cntjContratoBean.objetoOtrosi.plazoMeses}" 
                                               max="60" min="0"
                                               rotate="true" buttons="horizontal-after" style="text-align: left;" 
                                               required="true" requiredMessage="Plazo Prórrogas (Meses): valor requerido." 
                                               rendered="#{cntjContratoBean.requierePlazo}" />

                                    <p:outputLabel value="Plazo Prórrogas (Días)" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requierePlazo}"  />
                                    <p:spinner id="cplazoprorrogadia" class="spinerleft" value="#{cntjContratoBean.objetoOtrosi.plazoDias}"  
                                               max="1800" min="0" 
                                               rotate="true"  buttons="horizontal-after" 
                                               required="true" requiredMessage="Plazo Prórrogas (Días): valor requerido." rendered="#{cntjContratoBean.requierePlazo}"  />


                                    <h:outputText value="Valor Otrosí" style="font-weight:bold" class="header-back" rendered="#{cntjContratoBean.requiereValor}" />
                                    <p:inputNumber id="cevalorotrosi" value="#{cntjContratoBean.objetoOtrosi.valor}" minValue="0" decimalPlaces="0" symbol="$ " 
                                                   symbolPosition="p" required="true" requiredMessage="Valor Otrosí: Valor obligatorio." 
                                                   style="max-width: 24.5rem !important;" rendered="#{cntjContratoBean.requiereValor}" />

                                    <p:outputLabel value="Estado de Legalización" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="cestadolegalizacion" value="#{cntjContratoBean.objetoOtrosi.estadoLegalizacion}"  >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaEstadoLegalizacionOtrosi}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}" />
                                    </p:selectOneMenu>  

                                </p:panelGrid>

                                <p:panelGrid id="panelLinea2" columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Justificación" style="font-weight:bold" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="cjustificacion" value="#{cntjContratoBean.objetoOtrosi.justificacion}" required="true" requiredMessage="Justificación: valor requerido."
                                                         rows="2" cols="140" maxlength="2048"  />
                                    </p:column>


                                    <h:outputText value="Elementos Adicionales" style="font-weight:bold" class="header-back" />
                                    <p:column style="margin-right: 4px;">
                                        <p:inputTextarea id="celeadicional" value="#{cntjContratoBean.objetoOtrosi.elementoAdicional}" required="true" requiredMessage="Elementos Adicionales: valor obligatorio."
                                                         rows="2" cols="140" maxlength="2048"  />
                                    </p:column>

                                </p:panelGrid>

                            </p:panel>

                            <p:panel id="pnlAdjLinea" header="Adjuntos" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}"  title="Agregar adjunto" immediate="true" actionListener="#{cntjContratoBean.crearAdjunto()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaAdjunto" class="listaDatos" widgetVar="tblWidget" var="adjunto"  value="#{cntjContratoBean.adjuntosOtroSi}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >                                        
                                        <p:commandButton title="Eliminar adjunto" actionListener="#{cntjContratoBean.eliminarAdjunto(adjunto)}" process="@this" update="frmEditarOtrosi:tablaAdjunto" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Adjunto" >                                        
                                        <h:outputText value="#{adjunto.maetipoArchivoValor}"/>
                                    </p:column>

                                    <p:column headerText="Fecha Creación" >                                        
                                        <h:outputText value="#{adjunto.fechaHoraCrea}" >
                                            <f:convertDateTime pattern="yyyy-MM-dd" />
                                        </h:outputText> 
                                    </p:column>        

                                    <p:column headerText="Existe Adjunto" >                                        
                                        <h:outputText value="#{adjunto.existeStr}"/>
                                    </p:column>

                                </p:dataTable>

                            </p:panel>

                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Modificar" class="boton btn-azul"  actionListener="#{cntjContratoBean.modificarOtrosi()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoEditarOtrosi').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Agregar adjuntos -->
            <p:dialog header="Crear Adjunto" widgetVar="dialogoCrearAdjunto" appendTo="@(body)" modal="true" width="50%" resizable="false" style="height: auto;"  >
                <div class="bodyDialog">
                    <h:form id="frmCrearAdjunto" >  
                        <p:panel>
                            <p:panelGrid id="panelCrearAdjunto" columns="2" 
                                         columnClasses="ui-grid-col-4, ui-grid-col-8"
                                         layout="grid" 
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <h:outputText value="Documento"  class="header-back" />
                                <p:selectOneMenu id="adTipo" value="#{cntjContratoBean.objetoOtrosiAdjunto.maetipoArchivoId}" filter="true" filterMatchMode="contains" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{cntjContratoBean.listaTipoArchivo}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo.id}" />
                                    <p:ajax event="change" update="adTipo"/>
                                </p:selectOneMenu>

                            </p:panelGrid>

                            <p:panelGrid columns="1" class="footerUpload" >
                                <f:facet name="footer">
                                    <p:fileUpload id="cargarDocumento" 
                                                  label="Agregar Documento" 
                                                  uploadLabel="Subir"
                                                  cancelLabel="Cancelar"
                                                  fileLimitMessage="Máximo número de archivos excedido, los permitidos son: 1" 
                                                  invalidFileMessage="Tipo inválido de archivo"
                                                  invalidSizeMessage="Tamaño del archivo no permitivo, tamaño máximo permitido es : 10 mb."                                                      
                                                  listener="#{cntjContratoBean.cargarAdjunto}" 
                                                  mode="advanced" 
                                                  dragDropSupport="false"
                                                  required="true" 
                                                  requiredMessage="Se debe agregar un Documento." 
                                                  fileLimit="1" 
                                                  allowTypes="/(\.|\/)(pdf|PDF)$/"
                                                  multiple="false"
                                                  sizeLimit="10000000"/>
                                </f:facet>
                            </p:panelGrid> 
                        </p:panel>      
                        
                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearAdjunto').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog>

            <!-- Lista Informes -->
            <p:dialog header="Ver Informes" widgetVar="dialogoVerInformes" appendTo="@(body)" modal="true" width="90%" resizable="false" style="height: auto;" >
                <div class="bodyDialog" >
                    <h:form id="frmheadOptions" class="frmAuditoria" >
                        <p:commandButton rendered="#{not cntjContratoBean.expedienteContrato }" title="Crear Informe" immediate="true" actionListener="#{cntjContratoBean.crearInforme()}" icon="pi pi-plus-circle" class="btn-icono" />
                        <p:commandButton rendered="#{cntjContratoBean.expedienteContrato }" title="Crear expediente" actionListener="#{cntjContratoBean.crearExpedienteInforme()}"  icon="pi pi-file-o" class="btn-icono" >
                            <p:confirm header="Confirmación" 
                                       message="A continuación se creara un registro de expediente para gestionar la creación del informe, esta gestion se realizará desde la opción funcional, Tareas. ¿Está seguro que desea crear el registro?" 
                                       />
                        </p:commandButton>
                    </h:form>
                    
                    <h:form id="frmVerInformes" class="formDialogo" >                        
                        <p:dataTable id="tablaInformes" class="listaDatos" widgetVar="tblWidget" var="dato" value="#{cntjContratoBean.objeto.cntjContratoInformeList}"
                                     emptyMessage= "No se encontraron registros" >

                            <p:column headerText="Opciones" >
                                <p:commandButton title="Editar" actionListener="#{cntjContratoBean.editarInforme(dato)}" icon="ui-icon-pencil" class="btn-icono"/>
                            </p:column>

                            <p:column headerText="Fecha de Informe" >                                        
                                <h:outputText value="#{dato.fechaHoraCrea}" >
                                    <f:convertDateTime pattern="yyyy-MM-dd" />
                                </h:outputText>
                            </p:column>
                            
                            <p:column headerText="Periodo" >                                        
                                <h:outputText value="#{dato.fechaInicioPeriodo}">
                                    <f:convertDateTime pattern="MMMM yyyy" />
                                </h:outputText>
                                -
                                <h:outputText value="#{dato.fechaFinPeriodo}">
                                    <f:convertDateTime pattern="MMMM yyyy" />
                                </h:outputText>
                            </p:column>
                            
                            <p:column headerText="Responsable" >                                        
                                <h:outputText value="#{dato.cntjContratoSupervisorId.cntjTercerosId.razonSocial}" />
                            </p:column>

                            
                            <p:column headerText="Tipo Informe" >                                        
                                <h:outputText value="#{dato.tipoInformeStr}"/>
                            </p:column>

                            <p:column headerText="Fecha Aprobación" >                                        
                                <h:outputText value="#{dato.fechaAprobacion}">
                                    <f:convertDateTime pattern="yyyy-MM-dd" />
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Observaciones Jurídicas" >                                        
                                <h:outputText value="#{dato.observaciones}"/>
                            </p:column>

                            <p:column headerText="Estado" >                                        
                                <h:outputText value="#{dato.estadoStr}"/>
                            </p:column>

                        </p:dataTable>
                        
                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoVerInformes').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        
                    </h:form>
                </div>
            </p:dialog>

            <!-- Crear Informe -->
            <p:dialog header="Crear Informe" widgetVar="dialogoCrearInforme"  appendTo="@(body)" position="center" width="90%" modal="true" resizable="false" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmCrearInforme" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Informe" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Tipo Informe" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="iTipo" value="#{cntjContratoBean.objetoInforme.tipoInforme}" required="true" requiredMessage="Estado: Valor requerido." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoInforme}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo.id}" />
                                        <p:ajax event="change" listener="#{cntjContratoBean.calcularFechaInicioInforme()}" update="iFechaInicioPeriodicidad,iFechaFinPeriodicidad"/>
                                    </p:selectOneMenu>
                                    
                                    <h:outputText value="Fecha Inicio Periodicidad" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="iFechaInicioPeriodicidad" value="#{cntjContratoBean.objetoInforme.fechaInicioPeriodo}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de Inicio: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.objetoInforme.minimaFechaInicio}"
                                                maxdate="#{cntjContratoBean.objetoInforme.minimaFechaInicio}"
                                                >
                                                <p:ajax event="dateSelect" listener="#{cntjContratoBean.calcularFechaFinInforme()}" update="iFechaFinPeriodicidad"  />
                                    </p:calendar>

                                    <h:outputText value="Fecha Fin Periodicidad" style="font-weight:bold" class="header-back" />
                                    <p:column class="ui-g-9" style="margin-right: 4px;">
                                        <p:calendar id="iFechaFinPeriodicidad" value="#{cntjContratoBean.objetoInforme.fechaFinPeriodo}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de Fin: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.objetoInforme.maximaFechaFin}"
                                                maxdate="#{cntjContratoBean.objetoInforme.maximaFechaFin}"
                                                style="max-width: 32%;"
                                                />
                                    </p:column>                                    

                                </p:panelGrid>
                            </p:panel>
                            <p:panel id="pnlAdjInforme" header="Adjuntos" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}"  title="Agregar adjunto" immediate="true" actionListener="#{cntjContratoBean.crearAdjuntoInforme()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaAdjunto" class="listaDatos" widgetVar="tblWidget" var="adjunto"  value="#{cntjContratoBean.objetoInforme.cntjContratoInformeAdjuntoList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >                                        
                                        <p:commandButton title="Eliminar adjunto" actionListener="#{cntjContratoBean.eliminarAdjuntoInforme(adjunto)}" process="@this" update="frmCrearOtrosi:tablaAdjunto" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                    </p:column>

                                    <p:column headerText="Adjunto" >                                        
                                        <h:outputText value="#{adjunto.maeTipoArchivoValor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar" class="boton btn-azul" actionListener="#{cntjContratoBean.guardarInforme()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearInforme').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 

            <!-- Editar Informe -->
            <p:dialog header="Editar Informe" widgetVar="dialogoEditarInforme"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmEditarInforme" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Informe" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >
                                    
                                    <h:outputText value="Tipo Informe" style="font-weight:bold" class="header-back" />
                                    <p:selectOneMenu id="iTipo" value="#{cntjContratoBean.objetoInforme.tipoInforme}" required="true" requiredMessage="Estado: Valor requerido." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{cntjContratoBean.listaTipoInforme}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo.id}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="Fecha Inicio Periodicidad" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="iFechaInicioPeriodicidad" value="#{cntjContratoBean.objetoInforme.fechaInicioPeriodo}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de Inicio: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.objetoInforme.fechaInicioPeriodo}"
                                                maxdate="#{cntjContratoBean.objetoInforme.fechaInicioPeriodo}"
                                                >
                                    </p:calendar>

                                    <h:outputText value="Fecha Fin Periodicidad" style="font-weight:bold" class="header-back" />
                                    <p:calendar id="iFechaFinPeriodicidad" value="#{cntjContratoBean.objetoInforme.fechaFinPeriodo}" locale="es" autocomplete="off" navigator="true" pattern="yyyy-MM-dd" size="30" required="true" requiredMessage="Fecha de Fin: Valor obligatorio."
                                                maxlength="10" readonlyInput="true"  showOn="button" 
                                                mindate="#{cntjContratoBean.objetoInforme.fechaFinPeriodo}"
                                                maxdate="#{cntjContratoBean.objetoInforme.fechaFinPeriodo}" />

                                </p:panelGrid>
                            </p:panel>
                            <p:panel rendered="#{cntjContratoBean.accionAdicional6}" id="pnlInfoEstado" header="Estado" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid>
                                             
                                    <p:row>
                                        <p:column class="ui-g-3">
                                            <p:outputLabel value="Estado" class="header-back" />
                                        </p:column>
                                        <p:column class="ui-g-9">
                                            <p:selectOneMenu id="iEstado" value="#{cntjContratoBean.objetoInforme.estado}" required="true" requiredMessage="Estado: Valor requerido." >
                                                <f:selectItem itemLabel=" -- " itemValue="0" noSelectionOption="true" />
                                                <f:selectItems value="#{cntjContratoBean.listaEstadoInforme}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo.id}" />
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>  
                                    
                                    <p:row>
                                        <p:column class="ui-g-3">
                                            <p:outputLabel value="Observaciones" class="header-back" />
                                        </p:column>
                                        <p:column class="ui-g-9">
                                            <p:inputTextarea id="observaciones" value="#{cntjContratoBean.objetoInforme.observaciones}" required="true" requiredMessage="Observaciones: valor requerido."
                                                             rows="2" cols="140" maxlength="1024"  />
                                        </p:column>
                                    </p:row>


                                </p:panelGrid>
                            </p:panel>
                            <p:panel id="pnlAdjInforme" header="Adjuntos" style="margin-bottom:10px;" toggleable="true">
                                <div align="right" style="padding: 0.4rem;"> 
                                    <p:commandButton rendered="#{cntjContratoBean.accionAdicional2}"  title="Agregar adjunto" immediate="true" actionListener="#{cntjContratoBean.crearAdjuntoInforme()}" icon="pi pi-plus-circle" class="btn-icono" />
                                </div>
                                <p:dataTable id="tablaAdjunto" class="listaDatos" widgetVar="tblWidget" var="adjuntoEdit"  value="#{cntjContratoBean.objetoInforme.cntjContratoInformeAdjuntoList}"
                                             rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="false" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage= "No se encontraron registros" >

                                    <p:column headerText="Opciones" >      
                                        <p:commandButton id="btndesc" icon="pi pi-cloud-download" class="btn-icono"    
                                                         rendered="#{adjuntoEdit.existe == true}"
                                                         title="Descargar adjunto" 
                                                         actionListener="#{cntjContratoBean.descargarAdjuntos(adjuntoEdit)}" 
                                                         ajax="false" 
                                                         immediate="true"
                                                         process="@this"/>
                                        
                                        <p:commandButton title="Eliminar adjunto" actionListener="#{cntjContratoBean.eliminarAdjuntoInforme(adjuntoEdit)}" process="@this" update="frmCrearOtrosi:tablaAdjunto" icon="pi pi-trash"  class="btn-icono" >
                                            <p:confirm header="Confirmación" message="¿Está seguro que desea borrar el registro?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                        
                                    </p:column>

                                    <p:column headerText="Adjunto" >                                        
                                        <h:outputText value="#{adjuntoEdit.maeTipoArchivoValor}"/>
                                    </p:column>
                                </p:dataTable>

                            </p:panel>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Guardar"  class="boton btn-azul"  actionListener="#{cntjContratoBean.modificarInforme()}" validateClient="true" process="@form" update="@form"/>                                      
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoEditarInforme').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog>

            <!-- Agregar adjunto informe -->
            <p:dialog header="Crear Adjunto" widgetVar="dialogoCrearAdjuntoInforme" appendTo="@(body)" modal="true" width="50%" style="height: auto;"   >
                <div class="bodyDialog">
                    <h:form id="frmCrearAdjuntoInforme" >  
                        <p:panel>
                            <p:panelGrid id="panelCrearAdjunto" columns="2" 
                                         columnClasses="ui-grid-col-4, ui-grid-col-8"
                                         layout="grid" 
                                         styleClass="ui-panelgrid-blank ui-fluid">

                                <h:outputText value="Tipo Archivo"  class="header-back" />
                                <p:selectOneMenu id="adTipo" value="#{cntjContratoBean.objetoAdjuntoInforme.maeTipoArchivoId}" filter="true" filterMatchMode="contains" >
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{cntjContratoBean.listaTipoArchivoAdjuntoInforme}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo.id}" />
                                    <p:ajax event="change" update="adTipo"/>
                                </p:selectOneMenu>

                            </p:panelGrid>

                            <p:panelGrid style="width: 100%;">
                                <f:facet name="footer">
                                    <p:fileUpload id="cargarDocumentoInforme" 
                                                  label="Agregar Documento" 
                                                  uploadLabel="Subir"
                                                  cancelLabel="Cancelar"
                                                  fileLimitMessage="Máximo número de archivos excedido, los permitidos son: 1" 
                                                  invalidFileMessage="Tipo inválido de archivo"
                                                  invalidSizeMessage="Tamaño del archivo no permitivo, tamaño máximo permitido es : 10 mb."                                                      
                                                  listener="#{cntjContratoBean.cargarAdjuntoInforme}" 
                                                  mode="advanced" 
                                                  dragDropSupport="false"
                                                  required="true" 
                                                  requiredMessage="Se debe agregar un Documento." 
                                                  fileLimit="1" 
                                                  allowTypes="/(\.|\/)(pdf|PDF)$/"
                                                  multiple="false"
                                                  sizeLimit="10000000"/>
                                </f:facet>
                            </p:panelGrid>      
                        </p:panel>
                        
                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Cancelar" class="boton btn-oscuro" type="button" onclick="PF('dialogoCrearAdjuntoInforme').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                        
                    </h:form>
                </div>
            </p:dialog>
            
            <!-- Dialogo listar usuarios -->
            <p:dialog header="Consultar Usuarios" widgetVar="dialogoUsuariosLista" appendTo="@(body)" modal="true" resizable="false" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <div class="bodyDialog" >
                    <h:form class="frmAuditoria" >
                        <p:commandButton rendered="#{cntjContratoBean.accionListar}" title="Refrescar" actionListener="#{cntjContratoBean.refrescarUsuarios()}" oncomplete="PF('tablaWidgetUsuarios').filter()" class="btn-icono" icon="ui-icon-refresh"/>
                    </h:form>
                    <h:form id="frmUsuariosLista">                        
                        <p:panelGrid id="panelUsuariosLista" style="height:auto;" columns="1">
                            <p:dataTable id="tablaRegistrosUsuarios" class="listaDatos" widgetVar="tablaWidgetUsuarios" var="obj" value="#{cntjContratoBean.lazyUsuarios}" rowKey="#{obj.id}"
                                         rows="#{cntjContratoBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" 
                                         emptyMessage= "No se encontraron registros" selectionMode="single">
                                <p:ajax event="rowSelect" listener="#{cntjContratoBean.onRowSelectResponsableSecop}"/>
                                <p:column headerText="Nombre" filterBy="#{obj.nombre}">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetUsuarios').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{obj.nombre}"/>
                                </p:column>

                                <p:column headerText="Activo">
                                    <h:outputText value="#{obj.activoStr}"/>
                                </p:column>

                            </p:dataTable>
                        </p:panelGrid>
                        
                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoUsuariosLista').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </div>
            </p:dialog>
            
            <!-- Ver responsable seguimiento -->
            <p:dialog header="Responsable Seguimiento" widgetVar="dialogoVerResSeguimiento"  appendTo="@(body)"  position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form class="frmAuditoria" >
                        <p:commandButton id="auditoria" class="btnAuditoria btn-icono" action="#{cntjContratoBean.getAuditoria(cntjContratoBean.objetoSupervisor.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>

                    <h:form id="frmVerResSeg" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel header="Datos del Responsable" style="margin-bottom:10px;" toggleable="true">
                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >


                                    <p:outputLabel value="Responsable" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.razonSocial}"/>
                                    
                                    <p:outputLabel value="Tipo Documento" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.maeTipoDocumentoValor}" />

                                    <p:outputLabel value="Número Documento" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.numeroDocumento}" />

                                    <p:outputLabel value="Cargo del responsable" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.maeCargoValor}" />

                                    <p:outputLabel value="Área" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.maeAreaValor}" />

                                    <p:outputLabel value="Correo Electrónico" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.cntjTercerosId.correoElectronico}" />

                                    <h:outputText value="Etapa Designación" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getEtapaDesignacionStr(cntjContratoBean.objetoSupervisor.etapaDesignacion)}" />
                                                                        
                                    <p:outputLabel value="Informes Pendientes" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.informesPendientes}" />
                                    
                                    <p:outputLabel value="Estado Supervisión" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoSupervisor.estadoSupervision}" />


                                </p:panelGrid>
                            </p:panel>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">                                        
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoVerResSeguimiento').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog>  
            
            <!-- Dialogo ver garantia -->
            <p:dialog header="Ver Garantía" widgetVar="dialogoverGarantia"  appendTo="@(body)" position="center" width="90%" resizable="false" modal="true" style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmVerGarantia" class="formDialogo">
                        <p:scrollPanel mode="native">
                            <p:panel id="pnlInfo" header="Información de la garantía" style="margin-bottom:10px;" toggleable="true">

                                <p:panelGrid columns="4"
                                             columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                    <h:outputText value="Garantía" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.maeGarantiaContratoValor}"/>
                                                                     
                                    <h:outputText value="Porcentaje Contrato" style="font-weight:bold" class="header-back"  />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.porcentajeValorContrato}"/>

                                    <h:outputText value="Porcentaje Anticippo" style="font-weight:bold" class="header-back"  />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.porcentajeValorAnticipo}"/>

                                    <h:outputText value="Valor Garantía" style="font-weight:bold" class="header-back"  />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.valorAsegurado}"/>

                                    <h:outputText value="Fecha Expedición" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.fechaExpedicion}"/>

                                    <h:outputText value="Fecha Desde" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.vigenciaDesde}"/>

                                    <h:outputText value="Fecha Hasta" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.vigenciaHasta}"/>
                                    
                                    <h:outputText value="Fecha Aprobación" style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.objetoGarantia.fechaAprobacion}"/>
                                    
                                    <p:outputLabel value="Requiere Renovación"  style="font-weight:bold" class="header-back" />
                                    <h:outputText value="#{cntjContratoBean.getBooleanStr(cntjContratoBean.objetoGarantia.requiereRenovacion)}"/>
                                    
                                </p:panelGrid>

                            </p:panel>
                        </p:scrollPanel>

                        <p:panelGrid class="footerdialog">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" class="boton btn-oscuro" type="button" onclick="PF('dialogoverGarantia').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 
            
            <!-- Listar documentos -->
            <p:dialog header="Documentos" widgetVar="dialogoDocumentos"  appendTo="@(body)" modal="true" position="center" width="90%"  style="height: auto;"  >
                <div class="bodyDialog" >
                    <h:form id="frmDocumentos" class="formDialogo">

                        <p:dataTable id="tablaRegistros" var="doc" class="listaDatos" value="#{cntjContratoBean.lazyDocumentos}"  paginator="true" 
                                     rows="#{cntjContratoBean.tamanoPagina}" 
                                     emptyMessage="No se encontraron registros"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,30,50,100"  lazy="true"
                                     widgetVar="tablaWidget"
                                     style="font-size:11px;"
                                     scrollable="false"
                                     scrollWidth="140%"
                                     rowKey="#{obj.id}" reflow="true">

                            <p:column headerText="Opciones" style="text-align: center;">
                                <p:commandButton id="btndesc" icon="pi pi-cloud-download" class="btn-icono"    
                                                 rendered="#{doc.documentoExiste == true}"
                                                 title="Descargar documento" 
                                                 actionListener="#{cntjContratoBean.descargarDocumento(doc)}" 
                                                 ajax="false" 
                                                 immediate="true"
                                                 process="@this"/>
                                <p:commandButton title="Ver Documento" actionListener="#{cntjContratoBean.visualizardocumentos(doc.id)}"   icon="pi pi-search" class="btn-icono"/>
                            </p:column>

                            <p:column headerText="Documento" filterBy="#{doc.nombre}"  >
                                <f:facet name="filter">
                                    <p:inputText label="Responsable" maxlength="128" style="width: 95%;" 
                                                 onkeypress="if (event.keyCode === 13) { onchange(); return false; }" 
                                                 onchange="PF('tablaWidget').filter()"/>
                                </f:facet>
                                <h:outputText value="#{doc.nombre}" title="#{doc.nombre}"/>
                            </p:column>

                            <p:column headerText="Tipo"  >
                                <h:outputText value="#{cntjContratoBean.getTipoDocumento(doc.tipo)}" title="#{cntjContratoBean.getTipoDocumento(doc.tipo)}" />
                            </p:column>

                            <p:column headerText="Fecha Generación" >
                                <h:outputText value="#{doc.fechaHoraCrea}" title="#{doc.fechaHoraCrea}">
                                    <f:convertDateTime pattern="yyyy-MM-dd" />
                                </h:outputText>
                            </p:column>

                        </p:dataTable>

                        <p:panelGrid id="panelCrear" class="footerdialog" style="width: 100%;">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="6" style="text-align: center">
                                        <p:commandButton value="Salir" class="boton btn-oscuro"  type="button" onclick="PF('dialogoDocumentos').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>

                    </h:form>
                </div>
            </p:dialog> 
            
            <!-- Dialogo visualizar documento -->
            <p:dialog header="Visualizar Documento" widgetVar="dialogoVisualizarDoc" appendTo="@(body)" fitViewport="true" resizable="false" styleClass="fullscreen-dialog" onShow="visualizarPdfFullPagina('frmVisualizaDoc:infoPdf', 'pdfViewer');"  >
                <div class="bodyDialogFull" style="height: 100%; position: relative; overflow: hidden !important;" >
                    <h:form id="frmVisualizaDoc" style="height: 100%; overflow: auto;" >
                        
                        <p:panel  style="margin-bottom:10px; border: 0px;"   >
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-3,ui-grid-col-9"
                                             layout="grid"
                                             styleClass="ui-panelgrid-blank ui-fluid" >

                                     <h:outputText value="Documento" style="font-weight:bold" class="header-back" />
                                     <h:outputText value="#{cntjContratoBean.objDocumento.documentoNombre}"  />

                                </p:panelGrid>

                            </p:panel>
                        
                        
                        <h:inputHidden id="infoPdf" value="#{cntjContratoBean.contenidoPdf}" />
                        <div id="pdfViewer" style="height:100%; display: flex;flex-direction: column;align-items: center;" ></div>
                        
                    </h:form>
                </div>  
                <div class="nuevoFooter">
                    <p:button value="Salir" class="boton btn-oscuro" onclick="PF('dialogoVisualizarDoc').hide(); return false;"  />                    
                </div>
            </p:dialog>
            
            
        </center>        
    </ui:define>

</ui:composition>
