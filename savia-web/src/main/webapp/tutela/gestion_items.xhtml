<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR">
        <style type="text/css">
            .yellow{
                background-color: #ffff00 !important;
                background-image: none !important;
                color: #000000 !important;
            }
            .green{
                background-color: #009900 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .red{
                background-color: #ff0000 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                border: 1px solid #e5e2e2;
            }
            .ui-panelgrid .ui-panelgrid-footer {
                text-align: center;
                padding: 2px 5px;
            }
        </style>
        <script type="text/javascript">
            function mayus(e) {
                e.value = e.value.toUpperCase();
            }
            ;
        </script>
        <center>
            <h:form id="frmGestionItem">
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{tuTutelaItemBean.modulo.descripcion}">#{tuTutelaItemBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton rendered="#{tuTutelaItemBean.accionListar}" title="Refrescar" ajax="true" actionListener="#{tuTutelaItemBean.listar}" icon="ui-icon-refresh"/>
                    </f:facet>
                </p:toolbar>
                <p:dataTable var="obj" value="#{tuTutelaItemBean.lazyTuPersonal}" paginator="true" rows="#{tuTutelaItemBean.tamanoPagina}" 
                             emptyMessage="No se encontraron registros"
                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                             widgetVar="tablaWidget"
                             scrollable="true"
                             rowKey="#{obj.id}" reflow="true">

                    <p:column style="text-align: center; width: 100px">
                        <f:facet name="header">
                            <h:outputText value="Acciones"/>
                        </f:facet>    
                        <p:commandButton rendered="#{tuTutelaItemBean.accionEditar}" title="Gestionar" actionListener="#{tuTutelaItemBean.editar(obj.id)}" icon="ui-icon-folder-open"/>
                    </p:column>

                    <p:column headerText="Número Tutela" filterBy="#{obj.tuTutelasId.id}" sortBy="#{obj.tuTutelasId.id}" style="width: 100px">
                        <f:facet name="filter">
                            <p:inputText label="Número Tutela" maxlength="16" style="width: 70%;" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.tuTutelasId.id}"/>
                    </p:column>
                    
                    <p:column headerText="Tipo Documento" filterBy="#{obj.tuPersonasId.maeTipoDocumentoId}" style="width: 100px">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tuTutelaItemBean.listaTipoDocumento}" var="tipoDoc" itemValue="#{tipoDoc.id}" itemLabel="#{tipoDoc.nombre}" itemDescription="#{tipoDoc.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.tuPersonasId.maeTipoDocumentoValor}" title="#{obj.tuPersonasId.maeTipoDocumentoValor}"/>
                    </p:column>

                    <p:column headerText="Número Documento" filterBy="#{obj.tuPersonasId.numeroDocumento}" sortBy="#{obj.tuPersonasId.numeroDocumento}" style="width: 100px">
                        <f:facet name="filter">
                            <p:inputText label="Número Documento" maxlength="16" style="width: 80%;" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.tuPersonasId.numeroDocumento}"/>
                    </p:column>

                    <p:column headerText="Nombres" filterBy="#{obj.tuPersonasId.nombres}" style="width: 100px">
                        <f:facet name="filter">
                            <p:inputText label="Nombres" maxlength="64" style="width: 80%;" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.tuPersonasId.nombres}"/>
                    </p:column>

                    <p:column headerText="Apellidos" filterBy="#{obj.tuPersonasId.apellidos}" style="width: 100px">
                        <f:facet name="filter">
                            <p:inputText label="Apellidos" maxlength="64" style="width: 80%;" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.tuPersonasId.apellidos}"/>
                    </p:column>
                    
                    <p:column headerText="Estado Item" filterBy="#{obj.maeEstadoItemId}" style="width: 100px">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tuTutelaItemBean.listaEstadoItem}" var="estadoItem" itemValue="#{estadoItem.id}" itemLabel="#{estadoItem.nombre}" itemDescription="#{estadoItem.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeEstadoItemValor}" title="#{obj.maeEstadoItemValor}"/>
                    </p:column>

                    <p:column headerText="Tipo Prestación" filterBy="#{obj.maeTipoPrestacionId}" style="width: 100px">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tuTutelaItemBean.listaTipoPrestacion}" var="tipo" itemValue="#{tipo.id}" itemLabel="#{tipo.nombre}" itemDescription="#{tipo.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeTipoPrestacionValor}"/>
                    </p:column>
                    <p:column headerText="Causa" filterBy="#{obj.maeCausaTutelaId}" style="width: 100px">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tuTutelaItemBean.listaCausaTutela}" var="causa" itemValue="#{causa.id}" itemLabel="#{causa.nombre}" itemDescription="#{causa.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maeCausaTutelaValor}"/>
                    </p:column>
                    <p:column headerText="Presentación" filterBy="#{obj.maePresentacionId}" style="width: 100px">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('tablaWidget').filter()" style="width: 88%;" >
                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{tuTutelaItemBean.listaPresentacion}" var="presentacion" itemValue="#{presentacion.id}" itemLabel="#{presentacion.nombre}" itemDescription="#{presentacion.descripcion}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{obj.maePresentacionValor}"/>
                    </p:column>
                    <p:column headerText="Tecnología" filterBy="#{obj.maTecnologiaValor}" sortBy="#{obj.maTecnologiaValor}" style="width: 100px">
                        <f:facet name="filter">
                            <p:inputText label="Tecnología" maxlength="64" style="width: 80%;" onkeypress="if (event.keyCode === 13) {
                                        return false;
                                    }" onchange="PF('tablaWidget').filter()"/>
                        </f:facet>
                        <h:outputText value="#{obj.maTecnologiaValor}"/>
                    </p:column>
                    
                    <p:column headerText="Fecha Hora Crea" sortBy="#{obj.fechaHoraCrea}" style="width: 100px">
                        <h:outputText value="#{obj.fechaHoraCrea}">
                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                        </h:outputText>
                    </p:column>

                </p:dataTable>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                </p:confirmDialog>
            </h:form>
            
            
            <!--Gestionar -->
            <p:dialog  header ="Gestionar" widgetVar="dialogoGestionar" appendTo="@(body)" modal="true" dynamic="true" width="90%">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form class="frmAuditoria" style=" text-align: right;">
                        <p:commandButton id="auditoria" class="btnAuditoria" action="#{tuTutelaItemBean.getAuditoria(tuTutelaItemBean.objeto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                    </h:form>
                    <h:form id="frmEditar">
                        <!-- ACA EL CÓDIGO DE LA GESTION -->
                        <p:panel id="pGestionPersona" header="PERSONA" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelPersona" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Estado afiliado" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.maeEstadoAfiliadoValor}" />

                                <p:outputLabel value="Tipo documento" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.maeTipoDocumentoValor}" />

                                <p:outputLabel value="Numero documento" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.numeroDocumento}" />

                                <p:outputLabel value="Nombres" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.nombres}" />

                                <p:outputLabel value="Apellidos" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.apellidos}" />

                                <p:outputLabel value="Fecha nacimento" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.fechaNacimento}" />

                                <p:outputLabel value="Genero" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.maeGeneroValor}" />

                                <p:outputLabel value="Dirección" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.direccion}" />

                                <p:outputLabel value="Correo electronico" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.tuPersonasId.correoElectronico}" />

                                <p:outputLabel value="Ubicación afiliado" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.getUbicacionRecursiva(tuTutelaItemBean.objeto.tuPersonasId.ubicacionAfiliadoId.id)}" />

                            </p:panelGrid>
                            <p:dataTable id="tablaContactoPersona" widgetVar="tablaContactoPersona" var="contacto" value="#{tuTutelaItemBean.listaTuPersonaContacto}" scrollable="true" style="margin-bottom:20px;" emptyMessage="No se encontraron registros">
                                <f:facet name="header">
                                    <div>
                                        Contactos
                                    </div>
                                </f:facet>
                                <p:column headerText="Número">
                                    <h:outputText value="#{contacto.numeroContacto}" />
                                </p:column>
                                <p:column headerText="Observación">
                                    <h:outputText value="#{contacto.observacion}" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:separator/>
                        <p:panel id="panelGestionItem" header="ITEM" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:panelGrid id="panelDatosEstado" columns="4"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         layout="grid"
                                         styleClass="ui-panelgrid-blank ui-fluid"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="Tipo Prestación" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.maeTipoPrestacionValor}" />

                                <p:outputLabel value="Causa" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.maeCausaTutelaValor}" />

                                <p:outputLabel value="Presentación" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.maePresentacionValor}" />

                                <p:outputLabel value="Fecha Orden Medica" style="font-weight:bold"/>
                                <h:outputText value="#{tuTutelaItemBean.objeto.fechaCita}">
                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                </h:outputText>

                                <p:outputLabel value="Procedimiento" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.maTecnologiaValor}" />

                                <p:outputLabel value="Prescripción" style="font-weight:bold"/>
                                <p:outputLabel value="#{tuTutelaItemBean.objeto.prescripcionCntPrestadorSedeNombre}" />

                                <p:outputLabel value="Estado" for="estadoItem" style="font-weight:bold"/>
                                <p:selectOneMenu id="estadoItem" label="Estado" value="#{tuTutelaItemBean.objeto.maeEstadoItemId}" editable="false" required="true" requiredMessage="Estado: Este campo es obligatorio." style="width: 90%">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="false" />
                                    <f:selectItems value="#{tuTutelaItemBean.listaEstadoItemCierre}" var="estadoItem" itemValue="#{estadoItem.id}" itemLabel="#{estadoItem.nombre}" itemDescription="#{estadoItem.descripcion}" />
                                </p:selectOneMenu>
                                
                                <p:outputLabel value="Descripción" for="observacion" style="font-weight:bold"/>
                                <p:inputTextarea id="observacion" value="#{tuTutelaItemBean.objeto.observacion}" cols="60" maxlength="30048" disabled="false" required="true" requiredMessage="Observación: Este campo es obligatorio." />
                                
                                <p:outputLabel value="Fecha Cumplimiento" for="fechaCumplimiento" style="font-weight:bold"/>
                                <p:calendar id="fechaCumplimiento" yearRange="c-100:c+1" label="Fecha Cumplimiento" navigator="true" required="true" requiredMessage="Fecha Cumplimiento: Este campo es obligatorio."
                                            pattern="yyyy-MM-dd"  value="#{tuTutelaItemBean.objeto.fechaCumplimiento}" size="7" maxlength="10" />

                            </p:panelGrid>
                        </p:panel>
                        <p:separator/>
                        <p:panel id="panelVerItemGestion" header="Gestión de Items" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable  id="tablaCrearItemGestion" var="gestionItem" value="#{tuTutelaItemBean.objeto.tuTutelaItemGestionesList}" widgetVar="tablaVerItemGestion" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros">
                                <p:column headerText="Estado">
                                    <h:outputText value="#{gestionItem.maeEstadoItemValor}"/>
                                </p:column>
                                <p:column headerText="Observación">
                                    <h:outputText value="#{gestionItem.observacion}"/>
                                </p:column>
                                <p:column headerText="Fecha Hora Crea">
                                    <h:outputText value="#{gestionItem.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Usuario crea">
                                    <h:outputText value="#{gestionItem.usuarioCrea}" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:separator/>
                        <p:panel id="panelVerDiagnostico" header="INFORMACION DEL DIAGNOSTICO" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable  id="tablaCrearDiagnostico" var="serviciosIn" value="#{tuTutelaItemBean.objeto.tuTutelaDiagnosticosId}" widgetVar="tablaCrearDiagnostico" scrollable="true" scrollHeight="100" emptyMessage="No se encontraron registros">
                                <p:column headerText="Codigo">
                                    <h:outputText value="#{serviciosIn.maDiagnosticosCodigo}"/>
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{serviciosIn.maDiagnosticosValor}"/>
                                </p:column>
                                <p:column headerText="Principal" style="text-align: center;">
                                    <p:selectBooleanCheckbox disabled="true" value="#{serviciosIn.esPrincipal}"/>
                                </p:column>
                                <p:column headerText="Usuario crea">
                                    <h:outputText value="#{serviciosIn.usuarioCrea}" />
                                </p:column>
                                <p:column headerText="Auditoria" style="text-align: center;">
                                    <p:commandButton  class="btnAuditoria" action="#{tuTutelaItemBean.getAuditoria(serviciosIn.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:separator/>
                        <p:panel id="panelVerAutorizaciones" header="Autorización" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable var="autorizacion" value="#{tuTutelaItemBean.objeto.registrosAuditoriaAutorizacion}" paginator="true" rows="#{tuTutelaItemBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaAutorizaciones" lazy="false"
                                         widgetVar="tablaWidgetAutorizacion"
                                         style="font-size:11px;"
                                         rowKey="#{autorizacion.id}" >

                                <p:column  headerText="Código servicio" sortBy="#{autorizacion.maServicioHabilitadoCodigo}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.maServicioHabilitadoCodigo}" title="#{autorizacion.maServicioHabilitadoCodigo}"/>
                                </p:column>
                                <p:column  headerText="Número autorización" sortBy="#{autorizacion.numeroAutorizacion}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.numeroAutorizacion}" title="#{autorizacion.numeroAutorizacion}"/>
                                </p:column>
                                <p:column  headerText="Nombre del servicio" sortBy="#{autorizacion.maServicioHabilitadoValor}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.maServicioHabilitadoValor}" title="#{autorizacion.maServicioHabilitadoValor}"/>
                                </p:column>
                                <p:column  headerText="Prestador" sortBy="#{autorizacion.prestadorNombre}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.prestadorNombre}" title="#{autorizacion.prestadorNombre}"/>
                                </p:column>
                                <p:column  headerText="Nit Prestador" sortBy="#{autorizacion.prestadorNumeroDocumento}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.prestadorNumeroDocumento}" title="#{autorizacion.prestadorNumeroDocumento}"/>
                                </p:column>
                                <p:column  headerText="Id Anexo 4" sortBy="#{autorizacion.id}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.id}" title="#{autorizacion.id}"/>
                                </p:column>
                                <p:column  headerText="Fecha Autorización" sortBy="#{autorizacion.fechaAutorizacion}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.fechaAutorizacion}" title="#{autorizacion.fechaAutorizacion}"/>
                                </p:column>                                                          
                            </p:dataTable>
                        </p:panel>
                        <p:separator/>
                        <p:panel id="pVerServicioAdjunto" header="ANEXOS ITEM" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable  id="tablaAnexosServicios" var="anexSer" value="#{tuTutelaItemBean.objeto.tuAdjuntosList}" widgetVar="tablaAnexosServicios" scrollable="true" scrollHeight="80" emptyMessage="No se encontraron registros">                                                                
                                <f:facet name="header">
                                    <p:fileUpload id="anexo4" label="Agregar archivo" uploadLabel="Subir" cancelLabel="Cancelar"
                                                  fileLimitMessage="Máximo número de archivos excedido (#{tuTutelaItemBean.maxCantAnexos})"
                                                  invalidFileMessage="Tipo de archivo Iinválido"
                                                  invalidSizeMessage="El Tamaño de archivo permitido es hasta #{tuTutelaItemBean.convertirBytesParaMegasTamAdjunto()} ."
                                                  listener="#{tuTutelaItemBean.handleFileUploadItem}"
                                                  mode="advanced"
                                                  update="tablaAnexosServicios"
                                                  dragDropSupport="true" auto="false" multiple="true"
                                                  fileLimit="#{tuTutelaItemBean.maxCantAnexos}" sizeLimit="#{tuTutelaItemBean.sizeLimitByAnexo}"
                                                  allowTypes="/(\.|\/)(pdf|jpe?g|png)$/" /> 
                                    <div>
                                        ADJUNTOS ITEM
                                    </div>
                                </f:facet> 
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{anexSer.nombreArchivo}" />
                                </p:column>
                                <p:column headerText="Fecha Hora Carga">
                                    <h:outputText value="#{anexSer.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>   
                                <p:column style="text-align: center;">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>  
                                    <p:commandButton action="#{tuTutelaItemBean.descargarAnexo(anexSer)}"
                                                     icon="ui-icon-arrowthickstop-1-s" styleClass="btn-primary" title="Descargar anexo"
                                                     ajax="false" process="@this"/>
                                    <p:commandButton title="Borrar" rendered="#{anexSer.id == null}" action="#{tuTutelaItemBean.borrarAdjuntoItemGestion(anexSer.id, anexSer.pos)}" icon="ui-icon-trash" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:separator/>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Modificar" type="button" onclick="modificarRemote()" validateClient="true"/>
                                        <p:remoteCommand name="modificarRemote" action="#{tuTutelaItemBean.modificar}" update="frmEditar" />
                                        <p:commandButton value="Cancelar" type="button" onclick="PF('dialogoGestionar').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
            <!-- descripciones genericas -->
            <p:dialog header="Observación" widgetVar="dlgMsg" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:150px">
                    <h:form id="frmObservacion">
                        <p:panelGrid id="panelObservacion" columns="1" layout="grid" styleClass="showcase-text-align-center">
                            <p:inputTextarea  value="#{tuTutelaItemBean.descripcionGenerica}" readonly="true" style="width:100%"/>
                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgMsg').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>
        </center>
    </ui:define>
</ui:composition>
