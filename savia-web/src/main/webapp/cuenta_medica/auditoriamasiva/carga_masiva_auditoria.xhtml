<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR"> 
        <style type="text/css">
            .old {
                background-color: #fca752 !important;
                background-image: none !important;
                color: #000000 !important;
            }
            .yellow{
                background-color: #ffff00 !important;
                background-image: none !important;
                color: #000000 !important;
            }
            .green{
                background-color: #009900 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .red{
                background-color: #ff0000 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .red  .ui-row-editor, .green .ui-row-editor{
                display: none;
            }

            .claseMunicipio .ui-autocomplete-input
            {
                overflow: auto !important;
                width: 200% !important;
                height: 20px !important;
            }

            .ui-selectonemenu-filter-container .ui-icon.ui-icon-search{       
                right:30px !important;
            }

            .vd-hidden-column {
                display: none;
                width: 0;
                height: 0;
            }
            .ui-panelgrid .ui-panelgrid-footer {
                text-align: center;
                padding: 2px 5px;
            }

            #TabAuditoria .ui-tabs-nav{
                background:#cecece;
            }

            #TabAuditoria li.ui-state-active {
                background: white !important;
            }
            #TabAuditoria li.ui-state-active a {
                font-weight:bold;
            }

            #TabAuditoria  li a{
                color: black !important; 
            }

            #TabAuditoria li{
                background-image : -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6)) !important;
            }

            #TabAuditoria .color_rojo a{
                color:red !important;
            }
            .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                border: 1px solid #e5e2e2;
            }
            button.boton_indicador{
                 -moz-border-radius: 100% !important ; 
                 -webkit-border-radius: 100% !important;
                 border-radius: 100% !important;
                 width: 14px;
                 height: 14px;
            }
            button.boton_indicador.ui-state-focus{
                border:none !important;
                outline: none !important;
            }
            .rojoMarcado{
                color:red;font-weight:bold;
                font-size: 14px;
            }
            .clase_logitud input{
                width: 90%;
            }
            .ui-selectbooleanbutton.ui-state-active{
                background: #0d89ec;
                border-color: #0d89ec;
                color: #fff; 
            }
            .btn-ancho, .btn-ancho span{
                padding-top: 3px;
            }
            .ui-button.ui-state-disabled {
                    pointer-events: auto !important;
            }
             .bnt-badge-soporte{
                background-color: #04997C;
                color: white;
                top: 10px !important;
            }
        </style>
        <center>

            <h:form id="frmAuditoriaMasivaAcciones">
                <p:remoteCommand name="cerrarDialogoDiagnostico" action="#{cmAuditoriaMasivaBean.verCrearDiagnostico()}"/>
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{cmAuditoriaMasivaBean.modulo.descripcion}">#{cmAuditoriaMasivaBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Auditar Facturas" process="@form" action="#{cmAuditoriaMasivaBean.verAuditoriaMasivaFacturas( )}" rendered="#{cmAuditoriaMasivaBean.accionCrear}" icon="ui-icon-disk"/>
                        <p:commandButton value="Devolución Masiva"  rendered="#{cmAuditoriaMasivaBean.accionAdicional1}"  actionListener="#{cmAuditoriaMasivaBean.verDevolucionMasiva()}" icon="ui-icon-arrowreturnthick-1-w"/>
                        <p:commandButton value="Limpiar Selección Items"  actionListener="#{cmAuditoriaMasivaBean.eventoCerrarVentanaOperacionMasiva()}" icon="ui-icon-wrench"/>
                        <p:commandButton value="Desbloquear facturas"  rendered="#{cmAuditoriaMasivaBean.accionAdicional2}"  actionListener="#{cmAuditoriaMasivaBean.desbloquerFacturasMasivoPorUsarios()}" icon="ui-icon-unlocked"/>
                        <p:commandButton title="Refrescar" ajax="false" actionListener="#{cmAuditoriaMasivaBean.refrescar()}" icon="ui-icon-refresh"/>
                    </f:facet>
                </p:toolbar>        
            </h:form>

            <p:panel id="panelListaFacturasAuditar" header="Auditoría" style="margin-bottom:10px; width: 100%">
                <h:form id="frmListaFacturasAuditar">
                    <p:dataTable var="factura" value="#{cmAuditoriaMasivaBean.lazyCmAuditoriaMasivaFacturas}" paginator="true" rows="15" 
                                 emptyMessage="No se encontraron registros, por favor verifique que este existan facturas a auditar o este registrado en grupos de auditoría"
                                 currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="15,30,50,100" id="tablaFacturas" lazy="true"
                                 widgetVar="tablaWidgetFacturas"
                                 scrollable="true"
                                 scrollWidth="150%"
                                 style="font-size:11px;"
                                 disabledSelection="#{cmAuditoriaMasivaBean.verificarFacturaAuditable(factura)}"
                                 selection="#{cmAuditoriaMasivaBean.registrosFacturasSeleccionadas}"
                                 rowKey="#{factura.id}" reflow="true">

                        <p:ajax event="toggleSelect" listener="#{cmAuditoriaMasivaBean.eventoCheckTodasFacturas}" />
                        <p:ajax event="rowSelectCheckbox" listener="#{cmAuditoriaMasivaBean.eventoCheckFactura}"/>
                        <p:ajax event="rowUnselectCheckbox" listener="#{cmAuditoriaMasivaBean.eventoUnCheckFactura}" />
                        <p:ajax event="rowSelect" listener="#{cmAuditoriaMasivaBean.eventoCheckFactura}"  />
                        <p:ajax event="rowUnselect" listener="#{cmAuditoriaMasivaBean.eventoUnCheckFactura}" /> 

                        <p:column width="30"  selectionMode="multiple"  style="text-align: center;" exportable="false"/>

                        <p:column style="text-align: center;" exportable="false">
                            <f:facet name="header">
                                <h:outputText value="Acciones"/>
                            </f:facet>    
                            <p:commandButton rendered="#{cmAuditoriaMasivaBean.accionVer}" title="Ver Factura" actionListener="#{cmAuditoriaMasivaBean.verFactura(factura.id)}" icon="ui-icon-search" class="btn-ancho"/>
                            <p:commandButton rendered="#{cmAuditoriaMasivaBean.accionAdicional3 and cmAuditoriaMasivaBean.validarEsFacturaMarcableGlosaIps(factura) }" title="#{factura.respuestaIps ? ' Desmarcar Glosa Ips':'Marcar Glosa Ips' }"  actionListener="#{cmAuditoriaMasivaBean.guardarMarcadoGlosaIps(factura)}" icon="#{factura.respuestaIps ?'ui-icon-locked':'ui-icon-key'}" class="btn-ancho"/>
                            <p:badge id="cantidadPendientes" value="#{factura.cmFeRipsCarga.soportesNumero}" class="bnt-badge-soporte">
                                <p:commandButton rendered="#{cmAuditoriaMasivaBean.accionVer}" id="btnVerSoporte" title="Número Soportes: #{factura.cmFeRipsCarga.soportesNumero}" icon="pi pi-file-pdf" disabled="#{factura.cmFeRipsCarga.soportesNumero == 0}" actionListener="#{cmAuditoriaMasivaBean.verSoportes(factura.cmFeRipsCarga.id)}" class="btn-ancho"/>
                            </p:badge>
                        </p:column>

                        <p:column headerText="Grupo" sortBy="#{factura.cmGrupo.id}" style="text-align: center;" width="30px;">          
                            <h:outputText value="#{factura.cmGrupo.id}"/>
                        </p:column>

                        <p:column headerText="Estado factura" sortBy="#{factura.estadoFactura}" filterBy="#{factura.estadoFactura}"
                                  exportable="false">          
                            <f:facet name="filter">
                                <p:selectOneMenu  style="width: 70%;" onchange="PF('tablaWidgetFacturas').filter()">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Radicado" itemValue="0"/>
                                    <f:selectItem itemLabel="Radicado - Espera SAP (M1)" itemValue="10"/>
                                    <f:selectItem itemLabel="En Auditoría" itemValue="1"/>
                                    <f:selectItem itemLabel="Auditada-Glosada" itemValue="2" />
                                    <f:selectItem itemLabel="Devuelta" itemValue="5" />
                                    <f:selectItem itemLabel="Devuelta - Espera SAP (DEV)" itemValue="6" />
                                    <f:selectItem itemLabel="Auditada - Espera SAP (M2)" itemValue="7" />
                                    <f:selectItem itemLabel="Auditada" itemValue="9" />
                                </p:selectOneMenu>
                            </f:facet>     
                            <h:outputText value="#{factura.estadoFacturaStr}" title="#{factura.estadoFacturaStr}"/>
                            <div style="#{cmAuditoriaMasivaBean.asignarIndicadorVisualEstadoFactura(factura.estadoFactura)}" ></div>
                        </p:column>

                        <p:column headerText="Estado factura" sortBy="#{factura.estadoFactura}" styleClass="vd-hidden-column">
                            <h:outputText value="#{factura.estadoFacturaStr}" title="#{factura.estadoFacturaStr}"/>
                        </p:column>  

                        <p:column headerText="Modalidad contrato" sortBy="#{factura.maeTipoContratoCodigo}" filterBy="#{factura.maeTipoContratoCodigo}">          
                            <f:facet name="filter">
                                <p:selectOneMenu  style="width: 70%;" onchange="PF('tablaWidgetFacturas').filter()">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Capita" itemValue="01"/>
                                    <f:selectItem itemLabel="Evento" itemValue="02" />
                                    <f:selectItem itemLabel="Pago Global Prospectivo" itemValue="03" />
                                    <f:selectItem itemLabel="Paquetes" itemValue="04" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{factura.maeTipoContratoValor}"/>
                        </p:column>

                        <p:column headerText="Número radicado" sortBy="#{factura.numeroRadicado}" filterBy="#{factura.numeroRadicado}">
                            <f:facet name="filter">
                                <p:inputNumber label="Número radicado" maxlength="64" styleClass="clase_logitud" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" converterMessage="Ingrese solo numeros" decimalPlaces="0" thousandSeparator=""/>
                            </f:facet>
                            <h:outputText value="#{factura.numeroRadicado}" title="#{factura.numeroRadicado}"/>
                        </p:column>

                        <p:column headerText="Nit" sortBy="#{factura.nit}" filterBy="#{factura.nit}">
                            <f:facet name="filter">
                                <p:inputText label="Nit" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.nit}" title="#{factura.nit}"/>
                        </p:column>

                        <p:column headerText="IPS" sortBy="#{factura.ips}" filterBy="#{factura.ips}" width="120">
                            <f:facet name="filter">
                                <p:inputText label="IPS" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.ips}" title="#{factura.ips}"/>
                        </p:column>

                        <p:column headerText="Número facturado" sortBy="#{factura.numeroFacturado}" filterBy="#{factura.numeroFacturado}">
                            <f:facet name="filter">
                                <p:inputText label="Número facturado" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.numeroFacturado}" title="#{factura.numeroFacturado}"/>
                        </p:column>

                        <p:column headerText="Fecha radicación" sortBy="#{factura.fechaRadicacion}">                        
                            <h:outputText value="#{factura.fechaRadicacion}" title="#{factura.fechaRadicacion}"/>
                            <p:commandButton type="button" id="animate"  icon="pi" class="boton_indicador" rendered="#{factura.estadoFactura==0}" style="background: #{cmAuditoriaMasivaBean.asignarColorDiasRadicacion(factura)}; display:block;}"/>
                                <p:tooltip for="animate" value="#{factura.numeroDiasPasados}" showEffect="clip" hideEffect="fold" />
                        </p:column>
                        
                        <p:column headerText="Versión" sortBy="#{factura.version}" filterBy="#{factura.version}"
                                  exportable="false" style="text-align: center;">          
                            <f:facet name="filter">
                                <p:selectOneMenu style="width: 70%;" onchange="PF('tablaWidgetFacturas').filter()">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="3047" itemValue="0"/>
                                    <f:selectItem itemLabel="2284" itemValue="1"/>
                                </p:selectOneMenu>
                            </f:facet>     
                            <h:outputText value="#{factura.versionStr}" title="#{factura.versionStr}"/>
                        </p:column>

                        <p:column  width="120"  headerText="Usuario gestiona" sortBy="#{factura.usuarioGestiona.id}" filterBy="#{factura.usuarioGestiona.id}"> 
                            <f:facet name="filter">
                                <p:selectOneMenu  style="width: 70%;"  onchange="PF('tablaWidgetFacturas').filter()"  filterMatchMode="contains" filter="true">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{cmAuditoriaMasivaBean.usuariosGestiona}" var="usuario" itemValue="#{usuario.id}" itemLabel="#{usuario.nombre}" itemDescription="#{usuario.nombre}" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{factura.usuarioGestiona.nombre}" title="#{factura.usuarioGestiona.nombre}"/>
                        </p:column>

                        <p:column headerText="Valor factura" sortBy="#{factura.valorFactura}" filterBy="#{factura.valorFactura}" style="width: 80px;">    
                            <f:facet name="filter">
                                <p:inputText label="Valor factura" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.valorFactura}" title="#{factura.valorFactura}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column> 

                        <p:column headerText="Valor glosa inicial" sortBy="#{factura.valorInicialGlosa}" filterBy="#{factura.valorInicialGlosa}" style="width: 80px;">    
                            <f:facet name="filter">
                                <p:inputText label="Valor glosa inicial" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.valorInicialGlosa}" title="#{factura.valorInicialGlosa}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column> 

                        <p:column headerText="Valor copago" sortBy="#{factura.valorCopago}" filterBy="#{factura.valorCopago}" style="width: 80px;">    
                            <f:facet name="filter">
                                <p:inputText label="Valor copago" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.valorCopago}" title="#{factura.valorCopago}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column> 

                        <p:column headerText="Valor pendiente actual" sortBy="#{factura.valorPendienteActual}" filterBy="#{factura.valorPendienteActual}" style="width: 80px;">    
                            <f:facet name="filter">
                                <p:inputText label="Valor pendiente actual" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidgetFacturas').filter()" />
                            </f:facet>
                            <h:outputText value="#{factura.valorPendienteActual}" title="#{factura.valorPendienteActual}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column> 

                        <p:column headerText="Fecha Asignación Técnico " style="width: 80px;">    
                            <h:outputText value="#{factura.fechaAsignacionTecnico}"/>
                        </p:column> 

                        <p:column headerText="Fecha Asignación Médico " style="width: 80px;">    
                            <h:outputText value="#{factura.fechaAsignacionMedico}"/>
                        </p:column> 

                        <p:column  headerText="Fecha Auditoría" >
                            <h:outputText value="#{factura.fechaHoraAudita}"/>
                        </p:column>  

                        <p:column headerText="Respuesta Ips" style="text-align: center;width: 80px;" filterBy="#{factura.respuestaIps}">
                            <f:facet name="filter">
                                <p:selectOneMenu onchange="PF('tablaWidgetFacturas').filter()">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Si" itemValue="1" />
                                    <f:selectItem itemLabel="No" itemValue="0" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{factura.respuestaIpsStr}" title="#{factura.respuestaIpsStr}"/>
                        </p:column>

                    </p:dataTable>
                </h:form>
            </p:panel>

            <p:dialog header="Auditoría Masiva" id="dialogoAuditoriaMasiva" widgetVar="dialogoAuditoriaMasiva" appendTo="@(body)" modal="true"  width="95%" dynamic="true" class="modal-no-scroll">
                <p:ajax event="close" listener="#{cmAuditoriaMasivaBean.eventoCerrarVentanaOperacionMasiva}" form="frmAuditoriaMasiva" />
                <p:scrollPanel id="scrollPanelAuditoriaMasiva" mode="native" style="height:500px">
                    <h:form id="frmAuditoriaMasiva">
                        <p:panel id="panelFacturaParaAuditar" toggleable="true" header="Facturas Seleccionadas" style="margin-bottom:10px;"> 
                            <div align="left"> 
                                <p:commandButton process="@this" value="Seleccionar Operación Masiva" title="Seleccionar Operación Masiva" action="#{cmAuditoriaMasivaBean.verSeleccionOperacionMasiva()}" rendered="#{ ! cmAuditoriaMasivaBean.isContratoCapitaPGP(cmAuditoriaMasivaBean.getObjeto().getTipoContrato())}" icon="ui-icon-script"  style="margin-bottom: 10px;"/>
                            </div>                           
                            <p:dataTable var="factura" value="#{cmAuditoriaMasivaBean.registrosFacturasSeleccionadas}" 
                                         paginator="true"
                                         rows="50"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         emptyMessage="No se encontraron registros"
                                         rowsPerPageTemplate="50,100,200,200" 
                                         id="tablaRegistros" lazy="false"
                                         widgetVar="tablaWidgetFacturasSeleccionadasM"
                                         scrollable="true"
                                         scrollWidth="99%"
                                         scrollHeight="250"
                                         editable="true"
                                         style="font-size:12px;"
                                         rowKey="#{factura.id}">
                                <p:column  headerText="Id facura"  sortBy="#{factura.id}" filterBy="#{factura.id}" style="text-align: center;">
                                    <h:outputText value="#{factura.id}" title="#{factura.id}"/>
                                </p:column>
                                <p:column  headerText="Número Facturado"  sortBy="#{factura.numeroFacturado}" filterBy="#{factura.numeroFacturado}" style="text-align: center;">
                                    <h:outputText value="#{factura.numeroFacturado}" title="#{factura.numeroFacturado}"/>
                                </p:column>
                                <p:column  headerText="Prestador" sortBy="#{factura.cntPrestador.razonSocial}" filterBy="#{factura.cntPrestador.razonSocial}">
                                    <h:outputText value="#{factura.cntPrestador.razonSocial}" title="#{factura.cntPrestador.razonSocial}"/>
                                </p:column>
                                <p:column  headerText="Nit" sortBy="#{factura.nit}" filterBy="#{factura.nit}" style="text-align: center;">
                                    <h:outputText value="#{factura.nit}" title="#{factura.nit}"/>
                                </p:column>

                                <p:column  headerText="IPS" sortBy="#{factura.ips}" filterBy="#{factura.ips}" >
                                    <h:outputText value="#{factura.ips}" title="#{factura.ips}"/>
                                </p:column>
                                
                                <p:column  headerText="Versión" style="text-align: center;">
                                    <h:outputText value="#{factura.versionStr}" title="#{factura.versionStr}"/>
                                </p:column>

                                <p:column  headerText="Pbs" style="text-align: center;">
                                    <h:outputText value="#{factura.pbs ? 'Si' : 'No'}" title="#{factura.pbs ? 'Si' : 'No'}"/>
                                </p:column>

                                <p:column  headerText="Valor factura" sortBy="#{factura.valorFactura}">
                                    <h:outputText value="#{factura.valorFactura}" title="#{factura.valorFactura}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>

                                <p:column  headerText="Valor inicial glosa" sortBy="#{factura.valorInicialGlosa}">
                                    <h:outputText value="#{factura.valorInicialGlosa}" title="#{factura.valorInicialGlosa}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Valor pendiente actual" sortBy="#{factura.valorPendienteActual}">
                                    <h:outputText value="#{factura.valorPendienteActual}" title="#{factura.valorPendienteActual}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>         
                            </p:dataTable> 
                        </p:panel>

                        <p:panel id="panelServicios" header="Servicios" style="margin-bottom:10px; width: 180%;" collapsed="false" toggleable="true" >                   
                            <div align="left"> 
                                <p:commandButton process="@this" value="Gestión servicios seleccionados" title="Getión de servicios seleccionados" action="#{cmAuditoriaMasivaBean.verSeleccionOperacionMasivaDetalles()}" icon="ui-icon-script"  style="margin-bottom: 10px;"/>
                            </div> 
                            <p:dataTable var="obj" value="#{cmAuditoriaMasivaBean.lazyCmAuditoriaDetalles}" paginator="true" rows="10" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100,500,1000"  lazy="true"
                                         widgetVar="tablaWidgetDetallesMasivos"
                                         id="tablaDetallesMasivos"
                                         selection="#{cmAuditoriaMasivaBean.registrosDetallesSeleccionadoMasivos}"
                                         scrollable="true"
                                         scrollWidth="100%"
                                         scrollHeight="400"
                                         style="font-size:11px;"
                                         rowKey="#{obj.id}"> 

                                <p:ajax event="toggleSelect" listener="#{cmAuditoriaMasivaBean.eventoCheckearTodosDetallesPorPagina}" />
                                <p:ajax event="rowUnselectCheckbox" listener="#{cmAuditoriaMasivaBean.eventoDescheckearDetalle}" />
                                <p:ajax event="rowSelectCheckbox" listener="#{cmAuditoriaMasivaBean.eventoCheckearDetalle}"/>
                                <p:ajax event="rowSelect" listener="#{cmAuditoriaMasivaBean.eventoSeleccionarFilaDetalle}"  />
                                <p:ajax event="rowUnselect" listener="#{cmAuditoriaMasivaBean.eventoDesSeleccionarFilaDetalle}" /> 

                                <p:column width="20"  selectionMode="multiple" style="text-align: center;" exportable="false"/>

                                <p:column  headerText="" style="text-align: center;" width="40"> 
                                    <p:commandButton  title="Ver Novedades" process="@this" actionListener="#{cmAuditoriaMasivaBean.verConfiguracionesGeneralesTabs(obj)}" icon="ui-icon-contact"/>
                                </p:column>

                                <p:column  headerText="Número Facturado"  sortBy="#{obj.cmFacturas.numeroFacturado}" filterBy="#{obj.cmFacturas.numeroFacturado}" width="80">                         
                                    <h:outputText value="#{obj.cmFacturas.numeroFacturado}" title="#{obj.cmFacturas.numeroFacturado}"/>   
                                </p:column>

                                <p:column  headerText="Id detalle" sortBy="#{obj.id}" filterBy="#{obj.id}" width="60">
                                    <f:facet name="filter">
                                        <p:inputText label="Id detalle" maxlength="11" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.id}" title="#{obj.id}"/>
                                </p:column>
                                <p:column  headerText="Estado" sortBy="#{obj.estado}" width="70">
                                    <h:outputText value="#{obj.estadoStr}" title="#{obj.estadoStr}"/>
                                </p:column>

                                <p:column  headerText="Tipo servicio" sortBy="#{obj.tipoServicio}" filterBy="#{obj.tipoServicio}" style="width: 70px;">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetDetallesMasivos').filter()" style="width: 70%;">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Medicamentos" itemValue="0" />
                                            <f:selectItem itemLabel="Procedimiento" itemValue="1" />
                                            <f:selectItem itemLabel="Insumos" itemValue="2" />
                                            <f:selectItem itemLabel="Consultas" itemValue="3" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{obj.tipoServicioStr}" title="#{obj.tipoServicioStr}"/>
                                </p:column>

                                <p:column  headerText="Código servicio" sortBy="#{obj.maServicioCodigo}" filterBy="#{obj.maServicioCodigo}" width="60">
                                    <f:facet name="filter">
                                        <p:inputText label="Códigio servicio" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.maServicioCodigo}" title="#{obj.maServicioCodigo}"/>
                                </p:column>
                                <p:column  headerText="Nombre servicio" sortBy="#{obj.maServicioValor}" filterBy="#{obj.maServicioValor}" style="width: 80px;">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre servicio" maxlength="11" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.nombreServicioCorto}" title="#{obj.maServicioValor}"/>
                                    <p:commandButton rendered="#{obj.nombreServicioCorto.length() > 0 }" process="@this" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(obj.maServicioValor)}" icon="ui-icon-comment" title="#{obj.maServicioValor}"/> 
                                </p:column>
                                
                                <p:column  headerText="Código Mipres" style="width: 60px; text-align: center; ">
                                    <h:outputText value="#{obj.codigoMiPress}" title="#{obj.codigoMiPress}"/>
                                </p:column>
                                                               
                                <p:column  headerText="Regulado" style="width: 50px; text-align: center; ">
                                    <h:outputText value="#{obj.reguladoStr}" title="#{obj.reguladoStr}" class="#{obj.regulado ? 'rojoMarcado':''}"/>
                                </p:column>
                                
                                <p:column  headerText="Condicionado" style="width: 70px; text-align: center; ">
                                    <h:outputText value="#{obj.condicionadoStr}" title="#{obj.condicionadoStr}" class="#{obj.condicionado ? 'rojoMarcado':''}"/>
                                </p:column>

                                <p:column  headerText="Tipo documento" sortBy="#{obj.maeTipoDocumentoValor}" width="50">
                                    <h:outputText value="#{obj.maeTipoDocumentoValor}" title="#{obj.maeTipoDocumentoValor}"/>
                                </p:column>

                                <p:column  headerText="Documento afiliado" sortBy="#{obj.documento}" filterBy="#{obj.documento}" style="width: 70px;">
                                    <f:facet name="filter">
                                        <p:inputText label="Documento afiliado" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.documento}" title="#{obj.documento}"/>
                                </p:column>
                                <p:column  headerText="Nombre afiliado" sortBy="#{obj.nombreCompletoAfiliado}" filterBy="#{obj.nombreCompletoAfiliado}" width="80">
                                    <h:outputText value="#{obj.nombreCompletoAfiliado}" title="#{obj.nombreCompletoAfiliado}"/>
                                </p:column>
                                <p:column  headerText="Valor facturado" sortBy="#{obj.valorFacturado}" style="width: 80px;">
                                    <h:outputText value="#{obj.valorFacturado}" title="#{obj.valorFacturado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Valor copago" sortBy="#{obj.valorCopago}" style="width: 80px;">
                                    <h:outputText value="#{obj.valorCopago}" title="#{obj.valorCopago}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Cantidad" style="text-align: center;" >
                                    <h:outputText value="#{obj.cantidad}" title="#{obj.cantidad}"/>
                                </p:column>
                                <p:column  headerText="Valor unitario" sortBy="#{obj.valorUnitario}" style="width: 80px;">
                                    <h:outputText value="#{obj.valorUnitario}" title="#{obj.valorUnitario}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Copago No Efectivo" width="50" style="text-align: center;" >
                                    <h:outputText value="#{obj.getCopagoNoEfectivoStr()}" title="#{obj.getCopagoNoEfectivoStr()}"/>
                                </p:column>
                                <p:column  headerText="Aplica AC" width="30" sortBy="#{obj.aplicaAc}">
                                    <h:outputText value="#{obj.aplicaAcStr}" title="#{obj.aplicaAcStr}"/>
                                </p:column>
                                <p:column  headerText="Aplica DC" width="30" sortBy="#{obj.aplicaDc}">
                                    <h:outputText value="#{obj.aplicaDcStr}" title="#{obj.aplicaDcStr}"/>
                                </p:column>
                                <p:column  headerText="Aplica PBS" width="30" sortBy="#{obj.aplicaPbs}" >
                                    <h:outputText value="#{obj.aplicaPbsStr}" title="#{obj.aplicaPbsStr}"/>
                                </p:column>
                                <p:column  headerText="Aplica diagnóstico" width="30" sortBy="#{obj.aplicaDx}">
                                    <h:outputText value="#{obj.aplicaDxStr}" title="#{obj.aplicaDxStr}"/>
                                </p:column>
                                <p:column  headerText="Aplica autorización" width="30" sortBy="#{obj.aplicaAutorizacion}">
                                    <h:outputText value="#{obj.aplicaAutorizacionStr}" title="#{obj.aplicaAutorizacionStr}"/>
                                </p:column>
                                <p:column  headerText="Aplica concepto" width="30" sortBy="#{obj.aplicaConcepto}">
                                    <h:outputText value="#{obj.aplicaConceptoStr}" title="#{obj.aplicaConceptoStr}"/>
                                </p:column>
                                <p:column  headerText="Aplica glosa" width="30" sortBy="#{obj.aplicaGlosa}">
                                    <h:outputText value="#{obj.aplicaGlosaStr}" title="#{obj.aplicaGlosaStr}"/>
                                </p:column>                              
                                <p:column  headerText="Motivos" filterBy="#{obj.motivoGlosa}" sortBy="#{obj.motivoGlosa}" width="50">
                                    <f:facet name="filter">
                                        <p:inputText label="Motivos" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.motivoGlosaCorto}" title="#{obj.motivoGlosa}"/>
                                    <p:commandButton process="@this" rendered="#{obj.motivoGlosaCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(obj.motivoGlosa)}" icon="ui-icon-comment" title="#{obj.motivoGlosa}"/> 
                                </p:column>
                                <p:column  headerText="Observación Motivos" width="70">
                                    <h:outputText value="#{obj.observacionCorto}" title="#{obj.observacionCorto}"/>
                                    <p:commandButton process="@this" rendered="#{obj.observacionCorto.length() > 4 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(obj.observacion)}" icon="ui-icon-comment" title="#{obj.observacionCorto}"/> 
                                </p:column>
                                <p:column  headerText="Concepto" filterBy="#{obj.conceptoContable}" sortBy="#{obj.conceptoContable}">
                                    <f:facet name="filter">
                                        <p:inputText label="Conceptos" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.conceptoContableCorto}" title="#{obj.conceptoContable}"/>
                                    <p:commandButton process="@this" rendered="#{obj.conceptoContableCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(obj.conceptoContable)}" icon="ui-icon-comment" title="#{obj.conceptoContable}"/>
                                </p:column>
                                <p:column  headerText="Diagnóstico" filterBy="#{obj.nombreDx}" sortBy="#{obj.nombreDx}" width="70">
                                    <f:facet name="filter">
                                        <p:inputText label="Diagnóstico" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetallesMasivos').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{obj.nombreDxCorto}" title="#{obj.nombreDx}"/>
                                    <p:commandButton process="@this" rendered="#{obj.nombreDxCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(obj.nombreDx)}" icon="ui-icon-comment" title="#{obj.nombreDx}"/>
                                </p:column>
                                <p:column  headerText="Valor glosa" style="width: 80px;">
                                    <h:outputText value="#{obj.valorGlosa}" title="#{obj.valorGlosa}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Fecha prestación" sortBy="#{obj.fechaPrestacion}" filterBy="#{obj.fechaPrestacion}">                                 
                                    <f:facet name="filter">
                                        <p:calendar pattern="yyyy-MM-dd" yearRange="c-100:c"  type="localDate" navigator="true" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }">
                                            <p:ajax event="dateSelect" oncomplete="PF('tablaWidgetDetallesMasivos').filter()" />
                                            <p:ajax event="change" oncomplete="PF('tablaWidgetDetallesMasivos').filter()"/>
                                        </p:calendar>
                                    </f:facet>
                                    <h:outputText value="#{obj.fechaPrestacion}" title="#{obj.fechaPrestacion}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelAdjuntos" header="Adjuntos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaAdjuntos" var="adjunto" value="#{cmAuditoriaMasivaBean.adjuntosParaGuardar}" widgetVar="tablaWidgetAdjuntos" scrollable="true" emptyMessage="No se encontraron registros">
                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Borrar" action="#{cmAuditoriaMasivaBean.retirarAdjunto(adjunto.posInsertar)}" icon="ui-icon-trash" update="tablaAdjuntos" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                    <p:commandButton rendered="#{adjunto.id != null}" title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cmAuditoriaMasivaBean.descargarAdjunto(adjunto)}" />
                                    </p:commandButton>  
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{adjunto.archivoNombre}"/>
                                </p:column>
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{adjunto.tipoStr}"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{adjunto.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="F.H. Crea">
                                    <h:outputText value="#{adjunto.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>

                            </p:dataTable>
                            <p:fileUpload id="anexo" label="Agregar archivo" uploadLabel="Subir" cancelLabel="Cancelar"
                                          fileLimitMessage="Máximo número de archivos excedido (5)"
                                          invalidFileMessage="Tipo de archivo inválido, extensiones válidas (gif|png|pdf|doc|docx|xls)"
                                          invalidSizeMessage="El Tamaño de archivo permitido es hasta 15M"
                                          listener="#{cmAuditoriaMasivaBean.agregarAdjunto}"
                                          mode="advanced"
                                          update="tablaAdjuntos"
                                          dragDropSupport="true" auto="true" multiple="true"
                                          fileLimit="5" sizeLimit="15000000"
                                          allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|doc|docx|xls|xlsx)$/" />

                            <p:panelGrid  style="width:100%;margin:10px 0px">
                                <f:facet name="footer">
                                    <p:row>
                                        <p:column colspan="4" style="text-align: center">
                                            <p:commandButton value="Guardar Adjuntos"   action="#{cmAuditoriaMasivaBean.guardarAdjuntos()}" immediate="true" style="margin-left: 5px;"/>
                                        </p:column>
                                    </p:row>
                                </f:facet>
                            </p:panelGrid>
                        </p:panel>

                        <p:panel id="panelCambioEstadoAuditoria" header="Cambio Estado Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <f:facet name="header">
                                <h:outputLabel value="Cierre Auditoría"></h:outputLabel>
                            </f:facet>
                            <p:panel id="panelObservacion" header="Observación" style="margin-bottom:10px;" collapsed="false" toggleable="true">  
                                <p:row>
                                    <p:column>
                                        <p:inputTextarea id="observacionAuditoriaMasiva" style="width: 100%;" value="#{cmAuditoriaMasivaBean.objeto.observacion}" required="false" requiredMessage="Observación: Este campo es obligatorio."/>
                                    </p:column>
                                </p:row> 
                            </p:panel>
                            <p:panelGrid id="panelEstado" columns="3" layout="grid" styleClass="showcase-text-align-center">

                                <p:outputLabel value="Estado Auditoría" style="font-weight:bold"/>
                                <p:selectOneMenu value="#{cmAuditoriaMasivaBean.objeto.tipoAuditoria}" required="true" requiredMessage="Estado Auditoría: Este campo es obligatorio.">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Cierre auditoría" itemValue="5" />
                                </p:selectOneMenu>

                                <p:commandButton value="Cambiar Estado" process="@form" actionListener="#{cmAuditoriaMasivaBean.validarFacturasParaIniciarCierreAuditoria()}" style="margin-left: 5px;"/>

                            </p:panelGrid>  
                        </p:panel>

                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoAuditoriaMasiva').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog widgetVar="dialogoVerFactura" header="Ver Factura" appendTo="@(body)" responsive="true" modal="true" width="90%" style="max-height:90%;">
                <p:scrollPanel id="scrollPanelVer" mode="native" style="height:400px">
                    <h:form id="frmVerFactura">                 
                        <p:panel id="panelVerFactura" header="Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <f:facet name="header">
                                <h:outputLabel value="Ver Factura"></h:outputLabel>
                            </f:facet>
                            <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                <p:commandButton  class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(cmAuditoriaMasivaBean.objetoFactura.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                            </p:outputPanel>
                            <p:panelGrid id="panelDatosFactura" columns="4"
                                         layout="grid">
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Estado factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.estadoFacturaStr}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Número radicado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroRadicado}"/>
                                    </p:column>
                                </p:row>
                                                            
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Número factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroFacturado}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha radicación" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.fechaRadicacion}"/>
                                    </p:column>
                                </p:row>
                                                             
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha prestación " style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.fechaPrestacion}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Modalidad contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.maeTipoContratoValor}"/>
                                    </p:column>
                                </p:row>
                             
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorFactura}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorFactura}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor copago" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorCopago}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorCopago}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor bruto" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorBruto}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorBruto}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Cuota moderadora" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorCuotaModeradora}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorCuotaModeradora}">
                                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                                          
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Responsable del pago" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.responsablePago}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Régimen" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.maeRegimenValor}"/>
                                    </p:column>
                                </p:row>
                              
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Número contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroContrato}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Pbs" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText style="color:red;font-weight:bold;" value="#{cmAuditoriaMasivaBean.objetoFactura.pbs?'Si':'No'}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Versión" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.versionStr}"/>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="panelVerServicios" header="Servicios" style="margin-bottom:10px; width: 130%" collapsed="false" toggleable="true">
                            <p:dataTable var="detalle" value="#{cmAuditoriaMasivaBean.lazyCmAuditoriaDetalles}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100,500,1000" id="tablaDetalles" lazy="true"
                                         widgetVar="tablaWidgetDetalles"
                                         style="font-size:11px;"
                                         rowKey="#{detalle.id}" >

                                <p:column style="text-align: center;">                                 
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>    
                                    <p:commandButton  title="Ver Novedades Servicio" actionListener="#{cmAuditoriaMasivaBean.verAuditoriaDetalleServicio(detalle.id,1)}" icon="ui-icon-search"/> 
                                </p:column>

                                <p:column  headerText="Id Detalle" sortBy="#{detalle.id}" filterBy="#{detalle.id}">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre servicio" maxlength="11" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetalles').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{detalle.id}" title="#{detalle.id}"/>
                                </p:column>
                                <p:column  headerText="Estado" sortBy="#{detalle.estado}">
                                    <h:outputText value="#{detalle.estadoStr}" title="#{detalle.estadoStr}"/>
                                </p:column>

                                <p:column  headerText="Tipo servicio" sortBy="#{detalle.tipoServicio}" filterBy="#{detalle.tipoServicio}" style="width: 70px; text-align: center; ">
                                    <f:facet name="filter">
                                        <p:selectOneMenu style="width: 70%;" onchange="PF('tablaWidgetDetalles').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Medicamentos" itemValue="0" />
                                            <f:selectItem itemLabel="Procedimiento" itemValue="1" />
                                            <f:selectItem itemLabel="Insumos" itemValue="2" />
                                            <f:selectItem itemLabel="Consultas" itemValue="3" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{detalle.tipoServicioStr}" title="#{detalle.tipoServicioStr}"/>
                                </p:column>

                                <p:column  headerText="Código servicio" sortBy="#{detalle.maServicioCodigo}" filterBy="#{detalle.maServicioCodigo}">
                                    <f:facet name="filter">
                                        <p:inputText label="Códigio servicio" maxlength="11" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetalles').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{detalle.maServicioCodigo}" title="#{detalle.maServicioCodigo}"/>
                                </p:column>
                                <p:column  headerText="Nombre servicio" sortBy="#{detalle.maServicioValor}" style="width: 70px;">
                                    <f:facet name="filter">
                                        <p:inputText label="Nombre servicio" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetalles').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{detalle.nombreServicioCorto}" title="#{detalle.maServicioValor}"/>
                                    <p:commandButton rendered="#{detalle.nombreServicioCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(detalle.maServicioValor)}" icon="ui-icon-comment" title="#{detalle.maServicioValor}"/> 
                                </p:column>
                                
                                <p:column  headerText="Código Mipres" style="width: 50px; text-align: center; ">
                                    <h:outputText value="#{detalle.codigoMiPress}" title="#{detalle.codigoMiPress}"/>
                                </p:column>
                                
                                 <p:column  headerText="Regulado" style="width: 50px; text-align: center; ">
                                    <h:outputText value="#{detalle.reguladoStr}" title="#{detalle.reguladoStr}" class="#{detalle.regulado ? 'rojoMarcado':''}"/>
                                </p:column>
                                
                                <p:column  headerText="Condicionado" style="width: 70px; text-align: center; ">
                                    <h:outputText value="#{detalle.condicionadoStr}" title="#{detalle.condicionadoStr}" class="#{detalle.condicionado ? 'rojoMarcado':''}"/>
                                </p:column>                             

                                <p:column  headerText="Tipo documento" sortBy="#{detalle.maeTipoDocumentoValor}">
                                    <h:outputText value="#{detalle.maeTipoDocumentoValor}" title="#{detalle.maeTipoDocumentoValor}"/>
                                </p:column>

                                <p:column  headerText="Documento afiliado" sortBy="#{detalle.documento}" style="width: 70px;">
                                    <f:facet name="filter">
                                        <p:inputText label="Documento afiliado" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                    onchange();
                                                    return false;
                                                }"  onchange="PF('tablaWidgetDetalles').filter()" />
                                    </f:facet>
                                    <h:outputText value="#{detalle.documento}" title="#{detalle.documento}"/>
                                </p:column>
                                <p:column  headerText="Nombre afiliado" sortBy="#{detalle.nombreCompletoAfiliado}" style="width: 70px;">
                                    <h:outputText value="#{detalle.nombreCompletoAfiliado}" title="#{detalle.nombreCompletoAfiliado}"/>
                                </p:column>
                                <p:column  headerText="Valor facturado" sortBy="#{detalle.valorFacturado}" style="width: 80px;">
                                    <h:outputText value="#{detalle.valorFacturado}" title="#{detalle.valorFacturado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Valor pendiente" sortBy="#{detalle.valorPendiente}" style="width: 80px;">
                                    <h:outputText value="#{detalle.valorPendiente}" title="#{detalle.valorPendiente}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Valor pagado" sortBy="#{detalle.valorPagado}" style="width: 80px;">
                                    <h:outputText value="#{detalle.valorPagado}" title="#{detalle.valorPagado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Valor copago" sortBy="#{detalle.valorCopago}" style="width: 80px;">
                                    <h:outputText value="#{detalle.valorCopago}" title="#{detalle.valorCopago}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Cantidad" >
                                    <h:outputText value="#{detalle.cantidad}" title="#{detalle.cantidad}"/>
                                </p:column>
                                <p:column  headerText="Valor unitario" sortBy="#{detalle.valorUnitario}">
                                    <h:outputText value="#{detalle.valorUnitario}" title="#{detalle.valorUnitario}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Fecha prestación" sortBy="#{detalle.fechaPrestacion}">
                                    <h:outputText value="#{detalle.fechaPrestacion}" title="#{detalle.fechaPrestacion}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelVerAdjuntos" header="Adjuntos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaVerAdjuntos" var="adjunto" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAdjuto}" widgetVar="tablaWidgetAdjuntos" scrollable="true" emptyMessage="No se encontraron registros">
                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton rendered="#{adjunto.id != null}" title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cmAuditoriaMasivaBean.descargarAdjunto(adjunto)}" />
                                    </p:commandButton>  
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{adjunto.archivoNombre}"/>
                                </p:column>
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{adjunto.tipoStr}"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{adjunto.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="F.H. Crea">
                                    <h:outputText value="#{adjunto.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVerFactura').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog widgetVar="dialogoVerAuditoriaServicio" header="Auditoría de servicio" appendTo="@(body)" responsive="true" modal="true" width="90%"  style="max-height:90%;">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmVerAuditoriaServicio">
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                        </p:confirmDialog>
                        <p:panel id="panelVerFacturaItem" rendered="#{cmAuditoriaMasivaBean.objetoFactura.id != null and cmAuditoriaMasivaBean.objetoFactura.id != 0}" header="Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <f:facet name="header">
                                <h:outputLabel value="Ver Factura"></h:outputLabel>
                            </f:facet>
                            <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                <p:commandButton  class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(cmAuditoriaMasivaBean.objetoFactura.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                            </p:outputPanel>
                            <p:panelGrid id="panelDatosFactura" columns="4"
                                         layout="grid">
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Estado Factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.estadoFacturaStr}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Número radicado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroRadicado}"/>
                                    </p:column>
                                </p:row>
                                                               
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Número factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroFacturado}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha radicación" style="font-weight:bold" />
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.fechaRadicacion}"/>
                                    </p:column>
                                </p:row>
                                                            
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha prestación" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.fechaPrestacion}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Tipo contrato" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.maeTipoContratoValor}"/>
                                    </p:column>
                                </p:row>
                                                           
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor factura" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorFactura}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorFactura}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor copago" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorCopago}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorCopago}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                                             
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor bruto" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorBruto}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorBruto}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Cuota moderadora" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorCuotaModeradora}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorCuotaModeradora}">
                                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                                          
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Responsable del pago" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.responsablePago}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Régimen" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.maeRegimenValor}"/>
                                    </p:column>
                                </p:row>
                                                              
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Pbs" style="font-weight:bold"></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText style="color:red;font-weight:bold;" value="#{cmAuditoriaMasivaBean.objetoFactura.pbs?'Si':'No'}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Versión"  style="font-weight:bold" ></p:outputLabel>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.versionStr}"/>
                                    </p:column>
                                </p:row>
                                
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="panelVerServicio" header="Servicio" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <f:facet name="header">
                                <h:outputLabel value="Servicio"></h:outputLabel>
                            </f:facet>
                            <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                <p:commandButton  class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(cmAuditoriaMasivaBean.objetoDetalleServicio.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                            </p:outputPanel>
                            <p:panelGrid id="panelDatosServicio" columns="4"
                                         layout="grid">
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Tipo documento" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maeTipoDocumentoValor}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Documento" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.documento}"/>
                                    </p:column>
                                </p:row>
                                                                                           
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Nombre completo" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.nombreCompletoAfiliado}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Consecutivo item" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.consecutivoItem}"/>
                                    </p:column>
                                </p:row>
                                                              
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Código servicio" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maServicioCodigo}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Nombre servicio" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maServicioValor}"/>
                                    </p:column>
                                </p:row>
                                                               
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor facturado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorFacturado}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorFacturado}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor pagado" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPagado}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPagado}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                                               
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor pendiente" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendiente}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendiente}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Valor pendiente actual" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendienteActual}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendienteActual}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                                               
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha prestación" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.fechaPrestacion}"/>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="panelGestionAuditoriaConcepto" header="Conceptos Contables" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable var="concepto" value="#{cmAuditoriaMasivaBean.registrosConceptoContable}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaConceptos" lazy="false"
                                         widgetVar="tablaWidgetConceptos"
                                         style="font-size:11px;"
                                         rowKey="#{concepto.id}" >
                                <p:column  headerText="Concepto Contable" sortBy="#{concepto.maestroConceptos.id}">
                                    <h:outputText value="#{concepto.maestroConceptos.nombre}" title="#{concepto.maestroConceptos.nombre}"/>
                                </p:column>
                                <p:column  headerText="Centro Costo">
                                    <h:outputText value="#{concepto.maestroCentroCosto.nombre}" title="#{concepto.maestroCentroCosto.nombre}"/>
                                </p:column>
                                <p:column  headerText="Ubicación" sortBy="#{concepto.municipioAfiliado}">
                                    <h:outputText value="#{concepto.municipioAfiliado}" title="#{concepto.municipioAfiliado}"/>
                                </p:column>
                                <p:column  headerText="Porcentaje" sortBy="#{concepto.porcentaje}" style="text-align: center;">
                                    <h:outputText value="#{concepto.porcentaje}" title="#{concepto.porcentaje}">
                                        <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                    </h:outputText>
                                </p:column>  
                                <p:column  headerText="Auditoría" style="text-align: center;">
                                    <p:commandButton class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(concepto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                </p:column> 
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="panelDiagnostico" header="Diagnóstico" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <f:facet name="header">
                                <h:outputLabel value="Diagnóstico"></h:outputLabel>
                            </f:facet>
                            <p:panel id="pDiagnosticoCrear" header="Diagnósticos Opcionales" style="margin-bottom:10px;" collapsed="false" toggleable="true">        
                                <p:dataTable var="diagnostico" value="#{cmAuditoriaMasivaBean.registrosAuditoriaDiagnostico}" paginator="false" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                             emptyMessage="No se encontraron registros"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" id="tablaDiagnosticosCrear" lazy="false"
                                             widgetVar="tablaWidgetListaDiagnosticos"
                                             style="font-size:11px;"
                                             rowKey="#{diagnostico.id}" >
                                    <p:column headerText="Código" style="text-align: center;">
                                        <h:outputText value="#{diagnostico.maDiagnosticoCodigo}" />
                                    </p:column>
                                    <p:column headerText="Nombre">
                                        <h:outputText value="#{diagnostico.maDiagnosticoValor}" />
                                    </p:column>
                                    <p:column headerText="Es principal">
                                        <h:outputText value="#{diagnostico.principalStr}" style="text-align: center;" />
                                    </p:column>
                                    <p:column headerText="Auditoría" style="text-align: center;">
                                        <p:commandButton class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(diagnostico.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:panel>

                        <p:panel id="panelVerMotivos" header="Motivos" style="margin-bottom:10px;" collapsed="false" toggleable="true">  
                            <p:dataTable var="motivo" value="#{cmAuditoriaMasivaBean.registrosAuditoriaMotivoGlosa}" paginator="false" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaMotivos" lazy="false"
                                         widgetVar="tablaWidgetMotivos"
                                         style="font-size:11px;"
                                         rowKey="#{motivo.id}" >     
                                <p:column  headerText="Motivo glosa" sortBy="#{motivo.maestroMotivo.nombre}">
                                    <h:outputText value="#{motivo.maestroMotivo.nombre}" title="#{motivo.maestroMotivo.nombre}"/>
                                </p:column>
                                <p:column  headerText="Motivo específico" sortBy="#{motivo.maestroMotivoEspecifico.nombre}">
                                    <h:outputText value="#{motivo.maestroMotivoEspecifico.nombre}" title="#{motivo.maestroMotivoEspecifico.nombre}"/>
                                </p:column>
                                
                                 <p:column  headerText="Motivo aplicación" sortBy="#{motivo.maestroMotivoAplicacion.nombre}">
                                    <h:outputText value="#{motivo.motivoAplicacionCorto}" title="#{motivo.motivoAplicacionCorto}"/>
                                    <p:commandButton rendered="#{motivo.esMotivoAplicacionExtenso}" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(motivo.motivoAplicacionCompleto)}" icon="ui-icon-comment" title="Ver completo"/> 
                                </p:column>

                                <p:column  headerText="Tipología" sortBy="#{motivo.tipologia}" style="text-align: center">
                                    <h:outputText value="#{motivo.tipologiaStr}" title="#{motivo.tipologiaStr}"/>
                                </p:column> 

                                <p:column  headerText="Porcentaje" sortBy="#{motivo.porcentaje}" style="text-align: center">
                                    <h:outputText value="#{motivo.porcentaje}" title="#{motivo.porcentaje}">
                                        <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                    </h:outputText>
                                </p:column>  

                                <p:column  headerText="Observación">
                                    <h:outputText value="#{motivo.observacionCorto}" title="#{motivo.observacionCorto}"/>
                                    <p:commandButton rendered="#{motivo.observacionCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(motivo.observacion)}" icon="ui-icon-comment" title="Ver completo"/> 
                                </p:column>

                                <p:column headerText="Auditoría" style="text-align: center;">
                                    <p:commandButton class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(motivo.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />  
                                </p:column>

                            </p:dataTable>
                        </p:panel>                        

                        <p:panel id="panelVerAutorizaciones" header="Autorización" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable var="autorizacion" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAutorizacion}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaAutorizaciones" lazy="false"
                                         widgetVar="tablaWidgetAutorizacion"
                                         style="font-size:11px;"
                                         rowKey="#{autorizacion.id}" >

                                <p:column  headerText="Código servicio" sortBy="#{autorizacion.codigoServicio}">
                                    <h:outputText value="#{autorizacion.codigoServicio}" title="#{autorizacion.codigoServicio}"/>
                                </p:column>
                                <p:column  headerText="Número autorización" sortBy="#{autorizacion.numeroAutorizacion}">
                                    <h:outputText value="#{autorizacion.numeroAutorizacion}" title="#{autorizacion.numeroAutorizacion}"/>
                                </p:column>
                                <p:column  headerText="Nombre del servicio" sortBy="#{autorizacion.nombreServicio}">
                                    <h:outputText value="#{autorizacion.nombreServicio}" title="#{autorizacion.nombreServicio}"/>
                                </p:column>
                                <p:column  headerText="Id anexo 4" sortBy="#{autorizacion.anexo4.id}">
                                    <h:outputText value="#{autorizacion.anexo4.id}" title="#{autorizacion.anexo4.id}"/>
                                </p:column>
                                <p:column  headerText="Prestador" sortBy="#{autorizacion.razonSocialPrestador}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.razonSocialPrestador}" title="#{autorizacion.razonSocialPrestador}"/>
                                </p:column>
                                <p:column  headerText="Nit Prestador" sortBy="#{autorizacion.nitPrestador}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.nitPrestador}" title="#{autorizacion.nitPrestador}"/>
                                </p:column>
                                <p:column  headerText="Pago Anticipo" sortBy="#{autorizacion.anexo4.pagoAnticipado}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.anexo4.pagoAnticipado ? 'Si' :'No'}" title="#{autorizacion.anexo4.pagoAnticipado? 'Si' :'No'}"/>
                                </p:column>
                                <p:column  headerText="Fecha Autorización" sortBy="#{autorizacion.fechaAutorizacion}">
                                    <h:outputText value="#{autorizacion.fechaAutorizacion}" title="#{autorizacion.fechaAutorizacion}"/>
                                </p:column>                                                          
                            </p:dataTable>
                        </p:panel>
                        
                        <p:panel id="panelVerContratos" header="Descuento Capita" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                             <p:dataTable var="descuentoC" value="#{cmAuditoriaMasivaBean.registrosAuditoriaCapitaDescuento}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaCapitaDescuento" lazy="false"
                                         widgetVar="tablaWidgetCapitaDescuento"
                                         style="font-size:11px;"
                                         rowKey="#{descuentoC.id}" >

                                <p:column  headerText="Número contrato" style="text-align: center">
                                    <h:outputText value="#{descuentoC.contrato}" title="#{descuentoC.contrato}"/>
                                </p:column>

                                <p:column  headerText="Nit" style="text-align: center">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}" title="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}"/>
                                </p:column>

                                <p:column  headerText="Razón social">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.razonSocial}" title="#{descuentoC.cntContrato.cntPrestador.razonSocial}"/>
                                </p:column>

                                <p:column  headerText="Representante legal">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.nombreRepresentanteLegal}" title="#{descuentoC.cntContrato.cntPrestador.nombreRepresentanteLegal}"/>
                                </p:column>

                                <p:column  headerText="Número documento prestador">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}" title="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}"/>
                                </p:column>
                                <p:column  headerText="Estado contrato" style="text-align: center">
                                    <h:outputText value="#{descuentoC.cntContrato.maeEstadoContratoValor}" title="#{descuentoC.cntContrato.maeEstadoContratoValor}"/>
                                </p:column>
                                <p:column  headerText="Marcación" style="text-align: center">
                                    <h:outputText value="#{descuentoC.marcacionStr}" title="#{descuentoC.cntContrato.diasLimitePago}"/>
                                </p:column>
                                <p:column  headerText="Fecha Inicio">
                                    <h:outputText value="#{descuentoC.cntContrato.fechaInicio}" title="#{descuentoC.cntContrato.fechaInicio}"/>
                                </p:column>
                                <p:column  headerText="Fecha Fin">
                                    <h:outputText value="#{descuentoC.cntContrato.fechaFin}" title="#{descuentoC.cntContrato.fechaFin}"/>
                                </p:column>
                                <p:column  headerText="Observación">
                                    <h:outputText value="#{descuentoC.observacionCorto}" />
                                    <p:commandButton rendered="#{descuentoC.observacionCorto.length() > 1 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(descuentoC.observacion)}" icon="ui-icon-comment" title="Ver completo"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        
                        <p:panel widgetVar="panelVerAdjuntosCmDetalles" id="panelVerAdjuntosCmDetalles" header="Adjuntos Detalle" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaAdjuntosCmDetalles" var="adjunto" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAdjutoCmDetalle}" widgetVar="tablaWidgetAdjuntosCmDetalles" scrollable="true" emptyMessage="No se encontraron registros">
                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton rendered="#{adjunto.id != null}" title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cmAuditoriaMasivaBean.descargarAdjunto(adjunto)}" />
                                    </p:commandButton>  
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{adjunto.archivoNombre}"/>
                                </p:column>
                                <p:column headerText="Tipo"  style="text-align: center;">
                                    <h:outputText value="#{adjunto.tipoStr}"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{adjunto.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="F.H. Crea"  style="text-align: center;">
                                    <h:outputText value="#{adjunto.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVerAuditoriaServicio').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Descripción" widgetVar="dlgMsg" minHeight="50" appendTo="@(body)" modal="true"  width="80%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:100px">
                    <h:form id="frmObservacion"> 
                        <h:outputText id="mensaje" value="#{cmAuditoriaMasivaBean.descripcionGenerica}" />
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dlgMsg').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form> 
                </p:scrollPanel>
            </p:dialog>

            <p:dialog widgetVar="dialogoGestionAuditoriaMasivaAutorizacion" header="Gestionar Auditoría Masiva Autorización" appendTo="@(body)" responsive="true" modal="true" width="100%">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmGestionAuditoriaMasivaAutorizacion">
                        <p:panel widgetVar="panelVerAutorizaciones" id="panelVerAutorizaciones" header="Autorización" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:toolbar>
                                <f:facet name="left" >
                                    <p:commandButton title="Agregar Autorización" rendered="#{cmAuditoriaMasivaBean.registrosAuditoriaAutorizacion.size() == 0}" actionListener="#{cmAuditoriaMasivaBean.verListarAnexo4()}" immediate="true" icon="ui-icon-document"/>
                                </f:facet>
                                <f:facet name="right">
                                </f:facet>
                            </p:toolbar>
                            <p:dataTable var="autorizacion" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAutorizacion}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaAutorizaciones" lazy="false"
                                         widgetVar="tablaWidgetAutorizacion"
                                         style="font-size:11px;"
                                         rowKey="#{autorizacion.id}" >

                                <p:column style="text-align: center;" exportable="false">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>
                                    <p:commandButton title="Borrar" action="#{cmAuditoriaMasivaBean.retirarAutorizacion(autorizacion.posInsertar)}" icon="ui-icon-trash">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column> 
                                <p:column  headerText="Código servicio" sortBy="#{autorizacion.codigoServicio}">
                                    <h:outputText value="#{autorizacion.codigoServicio}" title="#{autorizacion.codigoServicio}"/>
                                </p:column>
                                <p:column  headerText="Número autorización" sortBy="#{autorizacion.numeroAutorizacion}">
                                    <h:outputText value="#{autorizacion.numeroAutorizacion}" title="#{autorizacion.numeroAutorizacion}"/>
                                </p:column>
                                <p:column  headerText="Nombre del servicio" sortBy="#{autorizacion.nombreServicio}">
                                    <h:outputText value="#{autorizacion.nombreServicio}" title="#{autorizacion.nombreServicio}"/>
                                </p:column>
                                <p:column  headerText="Prestador" sortBy="#{autorizacion.razonSocialPrestador}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.razonSocialPrestador}" title="#{autorizacion.razonSocialPrestador}"/>
                                </p:column>
                                <p:column  headerText="Nit Prestador" sortBy="#{autorizacion.nitPrestador}" style="text-align: center">
                                    <h:outputText value="#{autorizacion.nitPrestador}" title="#{autorizacion.nitPrestador}"/>
                                </p:column>
                                <p:column headerText="Pago Anticipado" sortBy="#{autorizacion.pagoAnticipado}" style="text-align: center;">
                                    <h:outputText value="#{autorizacion.isPagoAnticipado() ? 'Si':'No'}"/>
                                </p:column>
                                <p:column  headerText="Fecha Autorización" sortBy="#{autorizacion.fechaAutorizacion}">
                                    <h:outputText value="#{autorizacion.fechaAutorizacion}" title="#{autorizacion.fechaAutorizacion}"/>
                                </p:column>                                                          
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Guardar Cambios" immediate="true" action="#{cmAuditoriaMasivaBean.guardarAuditoriaMasivaAutorizaciones()}" style="margin-left: 5px;"/>  
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoGestionAuditoriaMasivaAutorizacion').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>  
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Consultar Anexo4" widgetVar="dialogoListarAnexo4" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 550px;">
                    <h:form id="frmListarAnexo4">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cmAuditoriaMasivaBean.refrescarListaAnexos4()}" oncomplete="PF('tablaWidgetListarAnexo4').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelListaAnexo4" columns="1" layout="grid">
                            <p:row>
                                <p:dataTable id="tablaListarAnexo4" widgetVar="tablaWidgetListarAnexo4" var="objAnexo4" value="#{cmAuditoriaMasivaBean.lazyAnexo4}" rowKey="#{objAnexo4.id}"
                                             rows="#{cmAuditoriaMasivaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage="No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cmAuditoriaMasivaBean.eventowSeleccionAutorizacion}" />

                                    <p:column style="text-align: center;" exportable="false">
                                        <f:facet name="header">
                                            <h:outputText value="Acciones"/>
                                        </f:facet>    
                                        <p:commandButton title="Ver detalles" actionListener="#{cmAuditoriaMasivaBean.verListarAnexo4Items(objAnexo4.id)}" icon="ui-icon-search"/>
                                    </p:column>

                                    <p:column headerText="Número autorización" filterBy="#{objAnexo4.id}">
                                        <f:facet name="filter">
                                            <p:inputText label="Número autorización" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.id}"/>
                                    </p:column>

                                    <p:column headerText="Régimen" filterBy="#{objAnexo4.maeRegimenValor}">
                                        <f:facet name="filter">
                                            <p:inputText label="Régimen" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.maeRegimenValor}"/>
                                    </p:column>

                                    <p:column headerText="Especialidad" filterBy="#{objAnexo4.maEspecialidadValor}">
                                        <f:facet name="filter">
                                            <p:inputText label="Especialidad" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.maEspecialidadValor}"/>
                                    </p:column>
                                    <p:column headerText="Prestador" filterBy="#{objAnexo4.cntPrestadorSedeId.cntPrestador.razonSocial}">
                                        <f:facet name="filter">
                                            <p:inputText label="Prestador" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.cntPrestadorSedeId.cntPrestador.razonSocial}"/>
                                    </p:column>                                 
                                    <p:column headerText="Nit Prestador" filterBy="#{objAnexo4.cntPrestadorSedeId.cntPrestador.numeroDocumento}">
                                        <f:facet name="filter">
                                            <p:inputText label="Nit Prestador" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.cntPrestadorSedeId.cntPrestador.numeroDocumento}"/>
                                    </p:column>
                                    <p:column headerText="Ámbito atención" filterBy="#{objAnexo4.maeAmbitoAtencionValor}">
                                        <f:facet name="filter">
                                            <p:inputText label="Ámbito atención" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.maeAmbitoAtencionValor}"/>
                                    </p:column>
                                    <p:column headerText="Pago Anticipado" filterBy="#{objAnexo4.pagoAnticipado}" style="text-align: center;">
                                        <f:facet name="filter">
                                            <p:selectOneMenu style="width: 70%;" onchange="PF('tablaWidgetListarAnexo4').filter()">
                                                <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItem itemLabel="Si" itemValue="1"/>
                                                <f:selectItem itemLabel="No" itemValue="0"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.isPagoAnticipado() ? 'Si':'No'}"/>
                                    </p:column>
                                    <p:column headerText="Servicio habilitado" filterBy="#{objAnexo4.maServicioHabilitadoValor}">
                                        <f:facet name="filter">
                                            <p:inputText label="Servicio habilitado" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4.maServicioHabilitadoValor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:row>
                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoListarAnexo4').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Consultar Anexo4 Items" widgetVar="dialogoListarAnexo4Items" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 550px;">
                    <h:form id="frmListarAnexo4Items">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cmAuditoriaMasivaBean.refrescarListaAnexos4Items()}" oncomplete="PF('tablaWidgetListarAnexo4Items').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelListaAnexo4Items" style="height:auto;" columns="1" layout="grid">
                                <p:dataTable id="tablaListarAnexo4Items" widgetVar="tablaWidgetListarAnexo4Items" var="objAnexo4Item" value="#{cmAuditoriaMasivaBean.lazyAnexo4Items}" rowKey="#{objAnexo4Item.id}"
                                             rows="#{cmAuditoriaMasivaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage="No se encontraron registros" selectionMode="single">

                                    <p:column headerText="Número autorización">
                                        <h:outputText value="#{objAnexo4Item.auAnexo4Id.id}"/>
                                    </p:column>

                                    <p:column headerText="Id Item" filterBy="#{objAnexo4Item.id}">
                                        <f:facet name="filter">
                                            <p:inputText label="Id Item" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4Items').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4Item.id}"/>
                                    </p:column>

                                    <p:column headerText="Fecha autorización" sortBy="#{objAnexo4Item.auAnexo4Id.fechaAutorizacion}" >
                                        <h:outputText value="#{objAnexo4Item.auAnexo4Id.fechaAutorizacion}" title="#{objAnexo4Item.auAnexo4Id.fechaAutorizacion}"/>
                                    </p:column>

                                    <p:column headerText="Prestador" filterBy="#{objAnexo4Item.auAnexo4Id.cntPrestadorSedeId.nombreSede}">
                                        <f:facet name="filter">
                                            <p:inputText label="Prestador" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4Items').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4Item.auAnexo4Id.cntPrestadorSedeId.nombreSede}" title="#{objAnexo4Item.auAnexo4Id.cntPrestadorSedeId.nombreSede}"/>
                                    </p:column>

                                    <p:column headerText="Código servicio" filterBy="#{objAnexo4Item.maTecnologiaCodigo}">
                                        <f:facet name="filter">
                                            <p:inputText label="Código servicio" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4Items').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4Item.maTecnologiaCodigo}" title="#{objAnexo4Item.maTecnologiaCodigo}"/>
                                    </p:column>

                                    <p:column headerText="Servicio" filterBy="#{objAnexo4Item.maTecnologiaValor}">
                                        <f:facet name="filter">
                                            <p:inputText label="Servicio" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4Items').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4Item.maTecnologiaValor}" title="#{objAnexo4Item.maTecnologiaValor}"/>
                                    </p:column>

                                    <p:column headerText="Cantidad" filterBy="#{objAnexo4Item.cantidadAutorizada}">
                                        <f:facet name="filter">
                                            <p:inputText label="Cantidad" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4Items').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4Item.cantidadAutorizada}" title="#{objAnexo4Item.cantidadAutorizada}"/>
                                    </p:column>

                                    <p:column headerText="Costo servicio" filterBy="#{objAnexo4Item.costoServicio}">
                                        <f:facet name="filter">
                                            <p:inputText label="Costo servicio" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarAnexo4Items').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{objAnexo4Item.costoServicio}" title="#{objAnexo4Item.costoServicio}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoListarAnexo4Items').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Confirmar selección autorización" widgetVar="dialogoEditarAutorizacion" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 550px;">
                    <h:form id="frmEditarAutorizacion">
                        <p:panelGrid id="panelAutorizacion" columns="2" layout="grid" styleClass="showcase-text-align-center" >

                            <p:outputLabel value="Código Servicio" style="font-weight:bold"/>
                            <h:outputText value="#{cmAuditoriaMasivaBean.cmAuditoriaAutorizacion.codigoServicio}"/>

                            <p:outputLabel value="Servicio" style="font-weight:bold"/>
                            <h:outputText value="#{cmAuditoriaMasivaBean.cmAuditoriaAutorizacion.nombreServicio}"/>

                            <p:outputLabel value="Número autorización" style="font-weight:bold"/>
                            <h:outputText value="#{cmAuditoriaMasivaBean.cmAuditoriaAutorizacion.anexo4.id}"/>

                            <p:outputLabel value="Fecha autorización" style="font-weight:bold"/>
                            <h:outputText value="#{cmAuditoriaMasivaBean.cmAuditoriaAutorizacion.fechaAutorizacion}"/>

                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Agregar" actionListener="#{cmAuditoriaMasivaBean.agregarAutorizacion()}" />
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoEditarAutorizacion').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>  

            <p:dialog widgetVar="dialogoGestionAuditoriaMasiva" header="Gestionar Auditoría Masiva" appendTo="@(body)" responsive="true" modal="true" width="100%">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmGestionAuditoriaMasiva">                    
                        <p:panel id="panelGestionAuditoriaContable" header="Conceptos Contables" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:toolbar>
                                <f:facet name="left" >
                                    <p:commandButton title="Agregar Concepto Contable" actionListener="#{cmAuditoriaMasivaBean.verCrearConceptoContable()}" immediate="true" icon="ui-icon-document"/>
                                </f:facet>
                                <f:facet name="right">
                                </f:facet>
                            </p:toolbar>
                            <p:dataTable var="concepto" value="#{cmAuditoriaMasivaBean.registrosConceptoContable}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaConceptos" lazy="false"
                                         widgetVar="tablaWidgetConceptos"
                                         style="font-size:11px;"
                                         rowKey="#{concepto.id}" >

                                <p:column style="text-align: center;" exportable="false">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>
                                    <p:commandButton title="Borrar" actionListener="#{cmAuditoriaMasivaBean.retirarConceptoContable(concepto.posInsertar)}" icon="ui-icon-trash" update="tablaConceptos">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                                <p:column  headerText="Concepto Contable" sortBy="#{concepto.maestroConceptos.id}">
                                    <h:outputText value="#{concepto.maestroConceptos.nombre}" title="#{concepto.maestroConceptos.nombre}"/>
                                </p:column>
                                <p:column  headerText="Centro Costo">
                                    <h:outputText value="#{concepto.maestroCentroCosto.nombre}" title="#{concepto.maestroCentroCosto.nombre}"/>
                                </p:column>
                                <p:column  headerText="Ubicación" sortBy="#{concepto.municipioAfiliado}">
                                    <h:outputText value="#{concepto.municipioAfiliado}" title="#{concepto.municipioAfiliado}"/>
                                </p:column>
                                <p:column  headerText="Porcentaje" sortBy="#{concepto.porcentaje}">
                                    <h:outputText value="#{concepto.porcentaje}" title="#{concepto.porcentaje}">
                                        <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                    </h:outputText>
                                </p:column>  
                            </p:dataTable>
                        </p:panel>
                        
                         <p:panel id="panelGestionRecobroItem" header="Recobro" style="margin-bottom:10px; text-align:center;" collapsed="false" toggleable="false">
                            <p:outputLabel value="Aplica Recobro" style="font-weight:bold; margin-right:20px;"  for="aplicaRecobro"/>
                            <p:selectBooleanButton id="aplicaRecobro" value="#{cmAuditoriaMasivaBean.aplicaRecobro}" onLabel="Si" offLabel="No"  onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px" >
                                <p:ajax  event="change" update="panelGestionRecobroItem" />
                            </p:selectBooleanButton>                                
                        </p:panel>

                        <p:panel id="panelDiagnostico" header="Diagnósticos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <div align="left"> 
                                <p:commandButton immediate="true" action="#{cmAuditoriaMasivaBean.verListaMaDiagnosticos()}" icon="ui-icon-clipboard" title="Agregar Diagnostico"/>
                            </div>        
                            <p:dataTable var="diagnostico" value="#{cmAuditoriaMasivaBean.registrosAuditoriaDiagnostico}" paginator="false" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaDiagnosticosCrear" lazy="false"
                                         widgetVar="tablaWidgetListaDiagnosticos"
                                         style="font-size:11px;"
                                         rowKey="#{diagnostico.id}" >
                                <p:column style="text-align: center;" exportable="false">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>
                                    <p:commandButton title="Borrar" action="#{cmAuditoriaMasivaBean.retirarDiagnostico(diagnostico.posInsertar)}" immediate="true" icon="ui-icon-trash">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column> 
                                <p:column headerText="Código">
                                    <h:outputText value="#{diagnostico.maDiagnosticoCodigo}" />
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{diagnostico.maDiagnosticoValor}" />
                                </p:column>
                                <p:column headerText="Es principal">
                                    <h:outputText value="#{diagnostico.principalStr}" />
                                </p:column>
                                <p:column headerText="Usuario crea">
                                    <h:outputText value="#{diagnostico.usuarioCrea}" />
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panel id="panelVerMotivos" header="Motivos" style="margin-bottom:10px;" collapsed="false" toggleable="true">  
                            <p:toolbar>
                                <f:facet name="left" >
                                    <p:commandButton title="Agregar Motivo" actionListener="#{cmAuditoriaMasivaBean.verCrearMotivo()}" immediate="true" icon="ui-icon-document"/>
                                </f:facet>
                                <f:facet name="right">
                                </f:facet>
                            </p:toolbar>
                            <p:dataTable var="motivo" value="#{cmAuditoriaMasivaBean.registrosAuditoriaMotivoGlosa}" paginator="false" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaMotivos" lazy="false"
                                         widgetVar="tablaWidgetMotivos"
                                         style="font-size:11px;"
                                         rowKey="#{motivo.id}" >
                                <p:column style="text-align: center;" exportable="false">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet>
                                    <p:commandButton title="Borrar" actionListener="#{cmAuditoriaMasivaBean.retirarMotivo(motivo.posInsertar)}" icon="ui-icon-trash" update="tablaMotivos">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                </p:column>
                                <p:column  headerText="Motivo glosa" sortBy="#{motivo.maestroMotivo.nombre}">
                                    <h:outputText value="#{motivo.maestroMotivo.nombre}" title="#{motivo.maestroMotivo.nombre}"/>
                                </p:column>
                                <p:column  headerText="Motivo específico" sortBy="#{motivo.maestroMotivoEspecifico.nombre}">
                                    <h:outputText value="#{motivo.maestroMotivoEspecifico.nombre}" title="#{motivo.maestroMotivoEspecifico.nombre}"/>
                                </p:column>
                                 <p:column  headerText="Motivo aplicación" sortBy="#{motivo.maestroMotivoAplicacion.nombre}">
                                     <h:outputText value="#{motivo.motivoAplicacionCorto}" title="#{motivo.motivoAplicacionCorto}"/>
                                     <p:commandButton rendered="#{motivo.esMotivoAplicacionExtenso}" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(motivo.motivoAplicacionCompleto)}" icon="ui-icon-comment" title="Ver completo"/> 
                                </p:column>
                                <p:column  headerText="Porcentaje" sortBy="#{motivo.porcentaje}">
                                    <h:outputText value="#{motivo.porcentaje}" title="#{motivo.porcentaje}">
                                        <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                    </h:outputText>
                                </p:column>  
                                <p:column  headerText="Observación">
                                    <h:outputText value="#{motivo.observacionCorto}" title="#{motivo.observacionCorto}"/>
                                    <p:commandButton rendered="#{motivo.observacionCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(motivo.observacion)}" icon="ui-icon-comment" title="Ver completo"/> 
                                </p:column>
                            </p:dataTable>
                        </p:panel>  

                        <p:panel widgetVar="panelVerAdjuntosCmDetalles" id="panelVerAdjuntosCmDetalles" header="Adjuntos Detalle" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable id="tablaAdjuntosCmDetalles" var="adjunto" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAdjutoCmDetalle}" widgetVar="tablaWidgetAdjuntosCmDetalles" scrollable="true" emptyMessage="No se encontraron registros">
                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Borrar" action="#{cmAuditoriaMasivaBean.retirarAdjuntoCmDetalle(adjunto.posInsertar)}" icon="ui-icon-trash" update="tablaAdjuntosCmDetalles" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton>
                                    <p:commandButton rendered="#{adjunto.id != null}" title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cmAuditoriaMasivaBean.descargarAdjunto(adjunto)}" />
                                    </p:commandButton>  
                                </p:column>
                                <p:column headerText="Nombre">
                                    <h:outputText value="#{adjunto.archivoNombre}"/>
                                </p:column>
                                <p:column headerText="Tipo"  style="text-align: center;">
                                    <h:outputText value="#{adjunto.tipoStr}"/>
                                </p:column>
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{adjunto.usuarioCrea}"/>
                                </p:column>
                                <p:column headerText="F.H. Crea"  style="text-align: center;">
                                    <h:outputText value="#{adjunto.fechaHoraCrea}">
                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                    </h:outputText>
                                </p:column>

                            </p:dataTable>
                            <p:fileUpload id="anexo" label="Agregar archivo" uploadLabel="Subir" cancelLabel="Cancelar"
                                          fileLimitMessage="Máximo número de archivos excedido"
                                          invalidFileMessage="Tipo de archivo inválido, extensiones válidas (gif|png|pdf|doc|docx|xls)"
                                          invalidSizeMessage="El Tamaño de archivo permitido es hasta 15M"
                                          listener="#{cmAuditoriaMasivaBean.agregarAdjuntoCmDetalle}"
                                          mode="advanced"
                                          update="tablaAdjuntosCmDetalles"
                                          dragDropSupport="true" auto="true" multiple="true"
                                          fileLimit="5" sizeLimit="15000000"
                                          allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|doc|docx|xls|xlsx)$/" />

                        </p:panel>


                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Guardar Cambios" immediate="true" rendered="#{cmAuditoriaMasivaBean.objeto.procesamientoPorDetalles}" action="#{cmAuditoriaMasivaBean.guardarAuditoriaDetalles()}" style="margin-left: 5px;"/>
                                            <p:commandButton value="Cerrar" type="button" rendered="#{cmAuditoriaMasivaBean.objeto.procesamientoPorDetalles}"  onclick="PF('dialogoGestionAuditoriaMasiva').hide()" immediate="true" style="margin-left: 5px;"/>
                                            <p:commandButton value="Aceptar" type="button" rendered="#{ ! cmAuditoriaMasivaBean.objeto.procesamientoPorDetalles}" onclick="PF('dialogoGestionAuditoriaMasiva').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Agregar Concepto Contable" id="dialogoAgregarConcepto" widgetVar="dialogoAgregarConcepto" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:300px">
                    <h:form id="frmAgregarConcepto">
                        <p:panel id="panelDatosAgregarConcepto" toggleable="true" header="Agregar Concepto" style="margin-bottom:10px;">
                            <p:panelGrid columns="2"
                                         layout="grid" >

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6">
                                        <p:outputLabel value="Concepto Contable" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-6" >
                                        <p:selectOneMenu value="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.maestroConceptos}" filter="true"  style="width: 95%"  filterMatchMode="contains" converter="maestroConceptoConverterAuditoriaMasiva" required="true" requiredMessage="Concepto Contable : Este campo es obligatorio.">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeConceptos}" var="concepto" itemValue="#{concepto}" itemLabel="#{concepto.descripcion}" itemDescription="#{concepto.descripcion}" />
                                            <p:ajax listener="#{cmAuditoriaMasivaBean.mostrarCentroCostosPorAltoCosto}" update="frmAgregarConcepto"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                                
                                <p:row rendered="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.mostrarCentroCosto}">
                                    <p:column styleClass="ui-widget-header ui-g-6">
                                        <p:outputLabel value="Centro Costo" style="font-weight:bold" rendered="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.mostrarCentroCosto}"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-6" >
                                        <p:selectOneMenu value="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.maestroCentroCosto}" converter="maestroCentroCostosConverterAuditoriaMasiva" style="width: 95%" rendered="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.mostrarCentroCosto}">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeCentrosCostos}" var="centroC" itemValue="#{centroC}" itemLabel="#{centroC.descripcion}" itemDescription="#{centroC.descripcion}" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                                                               
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6">
                                        <p:outputLabel value="Porcentaje" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-6" >
                                        <p:inputNumber minValue="0" decimalPlaces="0" value="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.porcentaje}" maxValue="100" symbol="%" symbolPosition="s" required="true" requiredMessage="Porcentaje : Este campo es obligatorio."></p:inputNumber>
                                    </p:column>
                                </p:row>
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6">
                                        <p:outputLabel value="Ubicación" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-6" >
                                        <p:autoComplete id="municipioConcepto" styleClass="claseMunicipio" dropdown="false" value="#{cmAuditoriaMasivaBean.cmAuditoriaConceptoContable.ubicacionMunicipio}"  completeMethod="#{cmAuditoriaMasivaBean.completarUbicacion}" 
                                                        var="ubica" itemLabel="#{cmAuditoriaMasivaBean.getUbicacionRecursiva(ubica.id)}" itemValue="#{ubica}" converter="ubicacionConverterAuditoriaMasiva" forceSelection="true" required="true" requiredMessage="Ubicación : Este campo es obligatorio."> 
                                        </p:autoComplete>
                                    </p:column>
                                </p:row>
                                
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Agregar Concepto" type="button" onclick="guardarConceptoRemote()" validateClient="true"/>
                                            <p:remoteCommand name="guardarConceptoRemote" action="#{cmAuditoriaMasivaBean.agregarConceptoContable()}" update="panelDatosAgregarConcepto" />
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoAgregarConcepto').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog> 

            <p:dialog header="Agregar diagnóstico" widgetVar="dialogoAgregarDiagnostico" appendTo="@(body)" modal="true"  width="75%" style="max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 550px;">
                    <h:form id="frmAgregarDiagnostico">
                        <p:panelGrid id="panelDiagnosticoLista" columns="4"
                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                     layout="grid"
                                     styleClass="ui-panelgrid-blank ui-fluid" >

                            <p:outputLabel value="Código" for="codigoEditarDiangostico" style="font-weight:bold"/>
                            <p:inputText id="codigoEditarDiangostico" label="Código" value="#{cmAuditoriaMasivaBean.cmAuditoriaDiagnostico.maDiagnosticoCodigo}" size="20" maxlength="62" disabled="true"></p:inputText>

                            <p:outputLabel value="Nombre" for="nombreEditarDiangostico" style="font-weight:bold"/>
                            <p:inputText id="nombreEditarDiangostico" label="Nombre" value="#{cmAuditoriaMasivaBean.cmAuditoriaDiagnostico.maDiagnosticoValor}" size="70" maxlength="62" disabled="true"></p:inputText>

                            <p:outputLabel value="Categoría nombre" for="tipDiagEditarDiangostico" style="font-weight:bold"/>
                            <p:inputText id="tipDiagEditarDiangostico" label="Categoría nombre" value="#{cmAuditoriaMasivaBean.cmAuditoriaDiagnostico.maDiagnosticoCaretoriaNombre}" size="50" maxlength="62" disabled="true"></p:inputText>

                            <p:outputLabel value="Principal" for="principalEditarDiangostico" style="font-weight:bold"/>
                            <p:selectBooleanCheckbox id="principalEditarDiangostico" label="Es Principal" value="#{cmAuditoriaMasivaBean.cmAuditoriaDiagnostico.principal}"/>

                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Agregar" actionListener="#{cmAuditoriaMasivaBean.agregarDiagnostico()}"/>
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoAgregarDiagnostico').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Agregar Motivo" id="dialogoAgregarMotivo" widgetVar="dialogoAgregarMotivo" appendTo="@(body)" modal="true"  width="90%" dynamic="true">
                <p:scrollPanel mode="native" style="height:400px">
                    <h:form id="frmAgregarMotivo">
                        <p:panel id="panelDatosAgregarMotivo" toggleable="true" header="Agregar Motivo" style="margin-bottom:10px;">
                            <p:panelGrid columns="2" layout="grid" styleClass="showcase-text-align-center">
                                                               
                                <p:row rendered="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.esValorUnificado}"  >
                                    <p:column styleClass="ui-widget-header ui-g-6" colspan="2" >
                                        <p:outputLabel value="Valor común detalles :" style="font-weight:bold" rendered="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.esValorUnificado}"  />
                                    </p:column>
                                    <p:column colspan="2" styleClass="ui-g-6">
                                        <h:outputText value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.valorMotivoMaximo}" title="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.valorMotivoMaximo}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6" colspan="2" >
                                        <p:outputLabel value="Nombre motivo" for="motivoSelect" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="ui-g-6">
                                        <p:selectOneMenu id="motivoSelect" style="width: 95%" value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.maestroMotivo}" converter="maestroMotivoConverterAuditoriaMasiva" required="true" requiredMessage="Nombre Motivo : Este campo es obligatorio.">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeMotivos}" var="motivoObj" itemValue="#{motivoObj}" itemLabel="#{motivoObj.nombre}" itemDescription="#{motivoObj.valor} - #{motivoObj.descripcion}" />
                                            <p:ajax listener="#{cmAuditoriaMasivaBean.listarMotivosEspecificosRelacionados()}" update="motivoesSelect,motivoAplSelect" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6" colspan="2" >
                                        <p:outputLabel value="Nombre motivo específico" for="motivoesSelect" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="ui-g-6">
                                        <p:selectOneMenu id="motivoesSelect" style="width: 95%" filter="true" filterMatchMode="contains" value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.maestroMotivoEspecifico}" converter="maestroMotivoEspecificoConverterAuditoriaMasiva" required="true" requiredMessage="Nombre Motivo Específico : Este campo es obligatorio.">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeMotivosEspecificos}" var="motivoEsp" itemValue="#{motivoEsp}" itemLabel="#{motivoEsp.nombre}" itemDescription="#{motivoEsp.valor} - #{motivoEsp.descripcion}" />
                                            <p:ajax listener="#{cmAuditoriaMasivaBean.mostrarMotivosAplicacionRelacionados()}" update="motivoAplSelect" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6" colspan="2" >
                                        <p:outputLabel value="Nombre motivo aplicación" for="motivoAplSelect" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="ui-g-6">
                                        <p:selectOneMenu id="motivoAplSelect" style="width: 95%" filter="true" filterMatchMode="contains" value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.maestroMotivoAplicacion}" converter="maestroMotivoAplicacionConverterAuditoriaMasiva" required="true" requiredMessage="Nombre Motivo Aplicación : Este campo es obligatorio.">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeMotivosAplicacion}" var="motivoApl" itemValue="#{motivoApl}" itemLabel="#{motivoApl.nombre}" itemDescription="#{motivoApl.valor} - #{motivoApl.descripcion}" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6" >
                                        <p:outputLabel value="Porcentaje" for="valorM" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="ui-g-6">
                                        <p:inputNumber id="valorM" minValue="0" decimalPlaces="2" value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.porcentaje}" maxValue="100" symbol="%" symbolPosition="s" required="true" requiredMessage="Porcentaje : Este campo es obligatorio."> 
                                            <p:ajax event="keyup" update="porcentajeM" listener="#{cmAuditoriaMasivaBean.calcularPorcentaje()}" /> 
                                        </p:inputNumber>
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.esValorUnificado}">
                                    <p:column styleClass="ui-widget-header ui-g-6" >
                                        <p:outputLabel value="Valor motivo" style="font-weight:bold" rendered="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.esValorUnificado}"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-6">
                                        <p:inputNumber id="porcentajeM" minValue="0" decimalPlaces="4" value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.valorMotivo}" symbolPosition="s" rendered="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.esValorUnificado}">
                                            <p:ajax event="keyup" update="valorM" listener="#{cmAuditoriaMasivaBean.conversionPorcentaje()}" /> 
                                        </p:inputNumber>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6" colspan="2" >
                                        <p:outputLabel value="Observación " for="observacion" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="ui-g-6">
                                        <h:inputTextarea id="observacion" value="#{cmAuditoriaMasivaBean.cmAuditoriaMotivoGlosa.observacion}" style="width: 100%;" required="true" requiredMessage="Observación : Este campo es obligatorio."/>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Agregar Motivo" type="button" onclick="guardarMotivoRemote()" validateClient="true"/>
                                            <p:remoteCommand name="guardarMotivoRemote" action="#{cmAuditoriaMasivaBean.agregarMotivo()}" update="panelDatosAgregarMotivo" />
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoAgregarMotivo').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog widgetVar="dialogoCapitaDescuento" header="Descuento Capita" appendTo="@(body)" responsive="true" modal="true" width="100%">
                <p:scrollPanel mode="native" style="max-height: 530px;">
                    <h:form id="frmListaAuditoriaCapitaDescuento">
                        <p:panel id="panelVerContratos" header="Contratos" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:toolbar>
                                <f:facet name="left" >
                                    <p:commandButton title="Agregar Autorizacion" rendered="#{cmAuditoriaMasivaBean.registrosAuditoriaCapitaDescuento.size() == 0}" actionListener="#{cmAuditoriaMasivaBean.verListaCntContratros()}" immediate="true" icon="ui-icon-clipboard"/>
                                </f:facet>
                            </p:toolbar>
                            <p:dataTable var="descuentoC" value="#{cmAuditoriaMasivaBean.registrosAuditoriaCapitaDescuento}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaCapitaDescuento" lazy="false"
                                         widgetVar="tablaWidgetCapitaDescuento"
                                         style="font-size:11px;"
                                         rowKey="#{descuentoC.id}" >

                                <p:column headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Borrar" action="#{cmAuditoriaMasivaBean.retirarCapitaDescuento(descuentoC.posInsertar)}" icon="ui-icon-trash" immediate="true">
                                        <p:confirm header="Confirmación" message="Está seguro que desea eliminar?" icon="ui-icon-alert" />
                                    </p:commandButton> 
                                </p:column>

                                <p:column  headerText="Número contrato">
                                    <h:outputText value="#{descuentoC.contrato}" title="#{descuentoC.contrato}"/>
                                </p:column>

                                <p:column  headerText="Nit">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}" title="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}"/>
                                </p:column>

                                <p:column  headerText="Razón social">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.razonSocial}" title="#{descuentoC.cntContrato.cntPrestador.razonSocial}"/>
                                </p:column>

                                <p:column  headerText="Representante legal">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.nombreRepresentanteLegal}" title="#{descuentoC.cntContrato.cntPrestador.nombreRepresentanteLegal}"/>
                                </p:column>

                                <p:column  headerText="Número documento prestador">
                                    <h:outputText value="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}" title="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}"/>
                                </p:column>
                                <p:column  headerText="Estado contrato">
                                    <h:outputText value="#{descuentoC.cntContrato.maeEstadoContratoValor}" title="#{descuentoC.cntContrato.maeEstadoContratoValor}"/>
                                </p:column>
                                <p:column  headerText="Marcación">
                                    <h:outputText value="#{descuentoC.marcacionStr}" title="#{descuentoC.cntContrato.diasLimitePago}"/>
                                </p:column>
                                <p:column  headerText="Días límite de pago">
                                    <h:outputText value="#{descuentoC.cntContrato.diasLimitePago}" title="#{descuentoC.cntContrato.diasLimitePago}"/>
                                </p:column>
                                <p:column  headerText="Fecha Inicio">
                                    <h:outputText value="#{descuentoC.cntContrato.fechaInicio}" title="#{descuentoC.cntContrato.fechaInicio}"/>
                                </p:column>
                                <p:column  headerText="Fecha Fin">
                                    <h:outputText value="#{descuentoC.cntContrato.fechaFin}" title="#{descuentoC.cntContrato.fechaFin}"/>
                                </p:column>
                                <p:column  headerText="Observación">
                                    <h:outputText value="#{descuentoC.observacionCorto}" />
                                    <p:commandButton rendered="#{descuentoC.observacionCorto.length() > 1 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(descuentoC.observacion)}" icon="ui-icon-comment" title="Ver completo"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>

                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Aceptar" type="button" onclick="PF('dialogoCapitaDescuento').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Consultar Contratos" widgetVar="dialogoListarCntContratos" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true" onShow="PF('tablaWidgetListarCntContratos').filter()">
                <p:scrollPanel mode="native" style="max-height: 550px;">
                    <h:form id="frmListarCntContratos">
                        <div align="right">
                            <p:commandButton title="Refrescar" actionListener="#{cmAuditoriaMasivaBean.refrescarCntContratos()}" oncomplete="PF('tablaWidgetListarCntContratos').filter()" icon="ui-icon-refresh"/>
                        </div>
                        <p:panelGrid id="panelListaAnexo4" style="height:auto;" columns="1" layout="grid">
                                <p:dataTable id="tablaListarCntContratos" widgetVar="tablaWidgetListarCntContratos" var="cntContrato" value="#{cmAuditoriaMasivaBean.lazyCntContratos}" rowKey="#{cntContrato.id}"
                                             rows="#{cmAuditoriaMasivaBean.tamanoPagina}" paginator="true" lazy="true" reflow="true"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,30,50,100" 
                                             emptyMessage="No se encontraron registros" selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{cmAuditoriaMasivaBean.eventoSelectCntContratos}" />


                                    <p:column style="text-align: center;">
                                        <f:facet name="header">
                                            <h:outputText value="Acciones"/>
                                        </f:facet>    
                                        <p:commandButton  title="Ver Contrato Sedes" actionListener="#{cmAuditoriaMasivaBean.verContratoSedes(cntContrato.id)}" icon="ui-icon-search"/>
                                    </p:column>

                                    <p:column headerText="Id contato" sortBy="#{cntContrato.id}" style="text-align: center">
                                        <h:outputText value="#{cntContrato.id}"/>
                                    </p:column>

                                    <p:column headerText="Representante legal" filterBy="#{cntContrato.cntPrestador.nombreRepresentanteLegal}" sortBy="#{cntContrato.cntPrestador.nombreRepresentanteLegal}">
                                        <f:facet name="filter">
                                            <p:inputText label="Representante legal" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarCntContratos').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{cntContrato.cntPrestador.nombreRepresentanteLegal}"/>
                                    </p:column>

                                    <p:column headerText="Nit" filterBy="#{cntContrato.cntPrestador.numeroDocumento}" sortBy="#{cntContrato.cntPrestador.numeroDocumento}">
                                        <f:facet name="filter">
                                            <p:inputText label="Nit" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarCntContratos').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{cntContrato.cntPrestador.numeroDocumento}"/>
                                    </p:column>

                                    <p:column headerText="Razón social" filterBy="#{cntContrato.cntPrestador.razonSocial}" sortBy="#{cntContrato.cntPrestador.razonSocial}">
                                        <f:facet name="filter">
                                            <p:inputText label="Razón social" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarCntContratos').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{cntContrato.cntPrestador.razonSocial}"/>
                                    </p:column>

                                    <p:column headerText="Contrato" filterBy="#{cntContrato.contrato}" sortBy="#{cntContrato.contrato}" style="text-align: center">
                                        <f:facet name="filter">
                                            <p:inputText label="Contrato" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarCntContratos').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{cntContrato.contrato}"/>
                                    </p:column>

                                    <p:column headerText="Estado Contrato" filterBy="#{cntContrato.maeEstadoContratoValor}" sortBy="#{cntContrato.maeEstadoContratoValor}" style="text-align: center">
                                        <f:facet name="filter">
                                            <p:inputText label="Estado Contrato" maxlength="128" style="width: 95%;" onchange="PF('tablaWidgetListarCntContratos').filter()"/>
                                        </f:facet>
                                        <h:outputText value="#{cntContrato.maeEstadoContratoValor}"/>
                                    </p:column>

                                    <p:column headerText="Activo" style="text-align: center">
                                        <h:outputText value="#{cntContrato.activoStr}"/>
                                    </p:column>
                                </p:dataTable>
                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoListarCntContratos').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Agregar Descuento Capita" widgetVar="dialogoAgregarCapitaDescuento" appendTo="@(body)" modal="true" style="max-width: 90%;max-height: 90%;" dynamic="true">
                <p:scrollPanel mode="native" style="max-height: 500px;">
                    <h:form id="frmAgregarCapitaDescuento">
                        <p:panelGrid id="panelDiagnosticoLista" columns="2" layout="grid" styleClass="showcase-text-align-center" >

                            <p:outputLabel value="Id contrato" for="idContrato"  style="font-weight:bold"/>
                            <p:inputText id="idContrato" label="Id contrato" value="#{cmAuditoriaMasivaBean.cmAuditoriaCapitaDescuento.cntContrato.id}" size="20" maxlength="62" disabled="true"></p:inputText>

                            <p:outputLabel value="Contrato" for="contrato"  style="font-weight:bold"/>
                            <p:inputText id="contrato" label="Contrato" value="#{cmAuditoriaMasivaBean.cmAuditoriaCapitaDescuento.contrato}" size="20" maxlength="62" disabled="true"></p:inputText>

                            <p:outputLabel value="Observación " for="observacion"  style="font-weight:bold"/>
                            <h:inputTextarea id="observacion" value="#{cmAuditoriaMasivaBean.cmAuditoriaCapitaDescuento.observacion}" style="width: 100%;"/>

                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Agregar" actionListener="#{cmAuditoriaMasivaBean.agregarCapitaDescuento()}"/>
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoAgregarCapitaDescuento').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog widgetVar="dialogoDevolucionFactura" header="Devolución Masiva Facturas" appendTo="@(body)" responsive="true" modal="true" width="100%">
                <p:ajax event="close" listener="#{cmAuditoriaMasivaBean.eventoCerrarVentanaOperacionMasiva}" form="frmDevolucionFactura" />
                <p:scrollPanel mode="native">
                    <h:form id="frmDevolucionFactura">
                        <p:panel id="panelVerFacturaDevolucion" header="Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <f:facet name="header">
                                <h:outputLabel value="Información Devolución"></h:outputLabel>
                            </f:facet>
                            <p:panel id="panelFacturaParaAuditarDevolucion" toggleable="true" header="Facturas Seleccionadas" style="margin-bottom:10px;"> 
                                <p:dataTable var="factura" value="#{cmAuditoriaMasivaBean.registrosFacturasSeleccionadas}" 
                                             paginator="true"
                                             rows="50"
                                             currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             emptyMessage="No se encontraron registros"
                                             rowsPerPageTemplate="50,100,200,200" 
                                             id="tablaRegistros" lazy="false"
                                             widgetVar="tablaWidgetFacturasSeleccionadasD"
                                             scrollable="true"
                                             scrollWidth="99%"
                                             scrollHeight="250"
                                             editable="true"
                                             style="font-size:12px;"
                                             rowKey="#{factura.id}">
                                    <p:column  headerText="Id facura"  sortBy="#{factura.id}" filterBy="#{factura.id}">
                                        <h:outputText value="#{factura.id}" title="#{factura.id}"/>
                                    </p:column>
                                    <p:column  headerText="Número Radicado"  sortBy="#{factura.numeroRadicado}" filterBy="#{factura.numeroRadicado}" style="text-align: center;">
                                        <h:outputText value="#{factura.numeroRadicado}" title="#{factura.numeroRadicado}"/>
                                    </p:column>
                                    <p:column  headerText="Número Facturado"  sortBy="#{factura.numeroFacturado}" filterBy="#{factura.numeroFacturado}" style="text-align: center;">
                                        <h:outputText value="#{factura.numeroFacturado}" title="#{factura.numeroFacturado}"/>
                                    </p:column>
                                    <p:column  headerText="Prestador" sortBy="#{factura.cntPrestador.razonSocial}" filterBy="#{factura.cntPrestador.razonSocial}">
                                        <h:outputText value="#{factura.cntPrestador.razonSocial}" title="#{factura.cntPrestador.razonSocial}"/>
                                    </p:column>
                                    <p:column  headerText="Nit" sortBy="#{factura.nit}" filterBy="#{factura.nit}" style="text-align: center;">
                                        <h:outputText value="#{factura.nit}" title="#{factura.nit}"/>
                                    </p:column>

                                    <p:column  headerText="IPS" sortBy="#{factura.ips}" filterBy="#{factura.ips}" >
                                        <h:outputText value="#{factura.ips}" title="#{factura.ips}"/>
                                    </p:column>
                                    
                                    <p:column  headerText="Versión" style="text-align: center;">
                                        <h:outputText value="#{factura.versionStr}" title="#{factura.versionStr}"/>
                                    </p:column>
                                    
                                    <p:column  headerText="Pbs" style="text-align: center;">
                                        <h:outputText value="#{factura.pbs ? 'Si' : 'No'}" title="#{factura.pbs ? 'Si' : 'No'}"/>
                                    </p:column>

                                    <p:column  headerText="Valor factura" sortBy="#{factura.valorFactura}">
                                        <h:outputText value="#{factura.valorFactura}" title="#{factura.valorFactura}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column  headerText="Valor inicial glosa" sortBy="#{factura.valorInicialGlosa}">
                                        <h:outputText value="#{factura.valorInicialGlosa}" title="#{factura.valorInicialGlosa}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column  headerText="Valor pendiente actual" sortBy="#{factura.valorPendienteActual}">
                                        <h:outputText value="#{factura.valorPendienteActual}" title="#{factura.valorPendienteActual}">
                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                        </h:outputText>
                                    </p:column>         
                                </p:dataTable> 
                            </p:panel>
                            <p:panelGrid id="panelInfoDevolucion" columns="2" layout="grid" styleClass="showcase-text-align-center">
                                <p:outputLabel value="Motivo Devolución" for="motivoSelect"  style="font-weight:bold"/>
                                <p:selectOneMenu id="motivoSelect" style="width: 95%" filter="true" filterMatchMode="contains" value="#{cmAuditoriaMasivaBean.cmAuditoriaDevolucion.maestroMotivoDevolucion}" converter="maestroMotivoDevolucionConverterAuditoriaMasiva" required="true" requiredMessage="Motivo Devolución : Este campo es obligatorio.">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeMotivoDevolucion}" var="motivoDev" itemValue="#{motivoDev}" itemLabel="#{motivoDev.nombre}" itemDescription="#{motivoDev.valor} - #{motivoDev.descripcion}" />
                                    <p:ajax listener="#{cmAuditoriaMasivaBean.mostrarMotivosEspecificosDevolucion()}" update="motivoSelectEspecifico" />
                                </p:selectOneMenu>
                                
                                <p:outputLabel value="Motivo Devolución Específico" for="motivoSelectEspecifico" style="font-weight:bold"/>
                                <p:selectOneMenu id="motivoSelectEspecifico" filter="true" filterMatchMode="contains"  style=" width: 95%"  value="#{cmAuditoriaMasivaBean.cmAuditoriaDevolucion.maestroMotivoDevolucionEspecifico}" converter="maestroMotivoDevolucionEspecificaConverterAuditoriaMasiva" required="true" requiredMessage="Motivo Devolución Específico: Este campo es obligatorio.">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{cmAuditoriaMasivaBean.listaMaeMotivoDevolucionEspecifico}" var="motivoDev" itemValue="#{motivoDev}" itemLabel="#{motivoDev.nombre}" itemDescription="#{motivoDev.valor} - #{motivoDev.descripcion}" />
                                </p:selectOneMenu>

                                <p:outputLabel value="Observación" for="observacionDevolucion"  style="font-weight:bold"/>
                                <p:inputTextarea id="observacionDevolucion" style="width: 100%;" value="#{cmAuditoriaMasivaBean.cmAuditoriaDevolucion.observacion}" required="true" requiredMessage="Observación: Este campo es obligatorio."/>
                            </p:panelGrid>
                        </p:panel>

                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Generar Devolución" action="#{cmAuditoriaMasivaBean.guardarDevolcionFactura()}"  style="margin-left: 5px;" update="panelInfoDevolucion"/>
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoDevolucionFactura').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog  widgetVar="dialogoVerSeleccionOperacionMasiva" header="Selección operación masiva facturas" appendTo="@(body)" responsive="true" modal="true" width="50%">
                <p:scrollPanel mode="native" style="height:300px">
                    <h:form id="frmVerSeleccionOperacionMasiva">
                        <p:panel id="pUsuarios" style="margin-bottom:10px;" collapsed="false" toggleable="false">
                            <f:facet name="header">
                                <h:outputLabel value="Seleccionar tipo operación masiva facturas"></h:outputLabel>
                            </f:facet>
                            <p:panelGrid id="panelSeleccionOperacion" columns="2" layout="grid" styleClass="showcase-text-align-center">

                                <p:outputLabel value="Tipo Operación" for="tipoOperacion" style="font-weight:bold"/>
                                <p:selectOneMenu id="tipoOperacion" value="#{cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion}" required="true" requiredMessage="Tipo Operación : Este campo es obligatorio.">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Gestión Auditoría Masiva" itemValue="7" />
                                    <f:selectItem itemLabel="Gestión Descuento Capita Masiva" itemValue="2" />
                                    <f:selectItem itemLabel="Levantamiento Motivos" itemValue="3" />
                                    <f:selectItem itemLabel="Levantamiento Motivos Específicos" itemValue="13" />
                                    <f:selectItem itemLabel="Levantamiento Conceptos Contables" itemValue="4" />
                                    <f:selectItem itemLabel="Levantamiento Diagnósticos" itemValue="6" />
                                    <f:selectItem itemLabel="Levantamiento Autorizaciones" itemValue="9" />
                                    <f:selectItem itemLabel="Levantamiento Descuento Capita" itemValue="11" />
                                    <p:ajax update="frmVerSeleccionOperacionMasiva:panelControlOperacionesMasiva" />
                                </p:selectOneMenu>

                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelControlOperacionesMasiva" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Realizar Operación" process="@form" 
                                                         action="#{cmAuditoriaMasivaBean.ejercutarOperacionMasiva()}" style="margin-left: 5px;" 
                                                         rendered="#{cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 7 or 
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 2 }"/>

                                        <p:commandButton title="Realizar Levantamiento" process="@form"  action="#{cmAuditoriaMasivaBean.ejercutarOperacionMasiva()}" value="Realizar Levantamiento" icon="ui-icon-trash"
                                                         rendered="#{cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 3 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 4 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 6 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 9 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 11 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasiva.tipoOperacion == 13 }" >
                                            <p:confirm header="Confirmación" message="Está seguro que desea realizar el levantamiento?" icon="ui-icon-alert" />
                                        </p:commandButton>

                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVerSeleccionOperacionMasiva').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog  widgetVar="dialogoConfirmarCierreFaltanAutorizaciones" header="Confirmar Auditoría" appendTo="@(body)" responsive="true" modal="true" width="80%">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmConfirmarCierre">

                        <p:dataTable id="facturasSinAutorizacion" rowsPerPageTemplate="10,30,50,100" paginator="true" rows="10"  var="facturaSinAutorizacion"  widgetVar="detalles" value="#{cmAuditoriaMasivaBean.registrosFacturasSinAutorizaciones}" scrollHeight="250" scrollable="true"  style="margin-bottom:20px; font-size:13px;">
                            <f:facet name="header">
                                Facturas con detalles sin autorización
                            </f:facet>
                            <p:column headerText="Número Radicado Factura">
                                <h:outputText value="#{facturaSinAutorizacion.numeroRadicado}" />
                            </p:column>
                            <p:column headerText="Número Factura">
                                <h:outputText value="#{facturaSinAutorizacion.numeroFactuado}" />
                            </p:column>
                            <p:column headerText="Documento - Usuario Sin Autorización">
                                <h:outputText value="#{facturaSinAutorizacion.documentoNombreCliente}" />
                            </p:column>
                        </p:dataTable>

                        <p:panelGrid id="panelFooterCierre" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton title="Realizar Cierre Auditoría" process="@form"  action="#{cmAuditoriaMasivaBean.guardarEstadoCierre()}" value="Realizar Cierre Auditoría" icon="ui-icon-script">
                                            <p:confirm header="Confirmación" message="Está seguro que desea cerrar auditoría?" icon="ui-icon-alert" />
                                        </p:commandButton>
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoConfirmarCierreFaltanAutorizaciones').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog  widgetVar="dialogoVerSeleccionOperacionMasivaDetalles" header="Selección operación masiva detalles" appendTo="@(body)" responsive="true" modal="true" width="50%">
                <p:scrollPanel mode="native" style="height:300px">
                    <h:form id="frmVerSeleccionOperacionMasivaDetalles">
                        <p:panel id="pOperacion" style="margin-bottom:10px;" collapsed="false" toggleable="false">
                            <f:facet name="header">
                                <h:outputLabel value="Seleccionar tipo operación masiva detalles"></h:outputLabel>
                            </f:facet>
                            <p:panelGrid id="panelSeleccionOperacionDetalle" columns="2" layout="grid" style="margin-left: auto; margin-right: auto;">
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-6">
                                        <p:outputLabel value="Tipo Operación" for="tipoOperacionDetalle" />
                                    </p:column>
                                    <p:column styleClass="ui-g-6">
                                        <p:selectOneMenu id="tipoOperacionDetalle" value="#{cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion}" required="true" requiredMessage="Tipo Operación : Este campo es obligatorio.">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="Gestión Detalle" itemValue="1" />
                                            <f:selectItem itemLabel="Gestión Autorizaciones" itemValue="10" />
                                            <f:selectItem itemLabel="Levantamiento Motivos" itemValue="3" />
                                            <f:selectItem itemLabel="Levantamiento Motivos Específicos" itemValue="12" />
                                            <f:selectItem itemLabel="Levantamiento Conceptos Contables" itemValue="4" />
                                            <f:selectItem itemLabel="Levantamiento Diagnósticos" itemValue="6" />
                                            <f:selectItem itemLabel="Levantamiento Autorizaciones" itemValue="9" />
                                            <f:selectItem itemLabel="Levantamiento Descuento Capita" itemValue="11" />
                                            <f:selectItem itemLabel="Copago No Efectivo - Marcar " itemValue="14" />
                                            <f:selectItem itemLabel="Copago No Efectivo - Desmarcar " itemValue="15" />
                                            <p:ajax update="frmVerSeleccionOperacionMasivaDetalles:panelControlOperacionesMasivaDetalle" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:panel>
                        <p:panelGrid id="panelControlOperacionesMasivaDetalle" style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Realizar Operación" process="@form" 
                                                         action="#{cmAuditoriaMasivaBean.ejercutarOperacionMasivaDetalles()}" style="margin-left: 5px;" 
                                                         rendered="#{cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 1 or 
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 14 or 
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 15 or 
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 10}"/>

                                        <p:commandButton title="Realizar Levantamiento" process="@form"  action="#{cmAuditoriaMasivaBean.ejercutarOperacionMasivaDetalles()}" value="Realizar Levantamiento" icon="ui-icon-trash"
                                                         rendered="#{cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 3 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 4 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 6 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 9 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 11 or
                                                                     cmAuditoriaMasivaBean.cmSelectorOperacionaMasivaDetalles.tipoOperacion == 12}" >
                                            <p:confirm header="Confirmación" message="Está seguro que desea realizar el levantamiento?" icon="ui-icon-alert" />
                                        </p:commandButton>

                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVerSeleccionOperacionMasivaDetalles').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Ver Programa " id="dialogoVerProgramaEspecifico" widgetVar="dialogoVerProgramaEspecifico" appendTo="@(body)" modal="true" dynamic="true" width="50%" >
                <p:scrollPanel mode="native" style="height:400px">
                    <h:form id="frmVerProgramaEspecifico" style="height: 400px;">
                        <p:panel id="pnlMatricula" header="Matricula Programa Especial" style="margin-bottom:10px;" toggleable="true">
                            <p:panelGrid id="panelAfiliado" columns="4"
                                         layout="grid" >
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Programa Especial - Código"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.pePrograma.descripcionPrograma} - 
                                               #{cmAuditoriaMasivaBean.peAfiliadosPrograma.pePrograma.codigoPrograma}"/>                                        
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Responsable Programa"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.gnUsuario.nombre}" />
                                    </p:column>
                                </p:row>
                                                            
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Ips Programa"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.cntPrestadorSede.nombreSede}"  />
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha Inicio Programa"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.fechaInicioPrograma}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                </p:row>
                                                           
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha Fin Programa"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.fechaFinPrograma}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Diagnósticos"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText style="cursor: help;" value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.maDiagnosticoPrincipal.maeDiagnosticoCategoriaValor}" title="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.maDiagnosticoPrincipal.maeDiagnosticoCategoriaValor}" />
                                    </p:column>
                                </p:row>
                                                                                                                           
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Fecha Diagnóstico"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <h:outputText value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.fechaDiagnostico}">
                                            <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Región Corporal"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.maeRegionCorporalValor}"/>
                                    </p:column>
                                </p:row>
                                                              
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Medio Diagnóstico"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.maeMedioDxValor}"/>
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Activo"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-3" >
                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.activo == true? 'Si':'No'}"/>
                                    </p:column>
                                </p:row>
                                                              
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3">
                                        <p:outputLabel value="Causa"  style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass=" ui-g-6" >
                                        <p:outputLabel rendered="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.activo}" value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.maeCausaActivoValor}"/>
                                        <p:outputLabel rendered="#{!cmAuditoriaMasivaBean.peAfiliadosPrograma.activo}" value="#{cmAuditoriaMasivaBean.peAfiliadosPrograma.maeCausaInactivoValor}"/>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>                        
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerProgramaEspecifico').hide()" immediate="true"/>
                                    </p:column>
                                </p:row>
                            </f:facet>  
                        </p:panelGrid> 
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Novedades Generales" id="dialogoConfiguracionesGenerales" widgetVar="dialogoConfiguracionesGenerales" appendTo="@(body)" modal="true" dynamic="true" width="100%">
                <p:scrollPanel mode="native" style="height:600px">
                    <p:tabView id="TabAuditoria">
                        <p:ajax event="tabChange" listener="#{cmAuditoriaMasivaBean.onTabChange}"/>
                        <p:tab title="Ver Novedades de Servicio" id ="Tab1_Novedades_Servicio">
                            <p:scrollPanel mode="native" style="height:500px">
                                <h:form id="frmVerAuditoriaServicio">
                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" style="left:25%"/>
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" style="left:25%"/>
                                    </p:confirmDialog>
                                    <p:panel id="panelVerFacturaItem" rendered="#{cmAuditoriaMasivaBean.objetoFactura.id != null and cmAuditoriaMasivaBean.objetoFactura.id != 0}" header="Factura" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <f:facet name="header">
                                            <h:outputLabel value="Ver Factura"></h:outputLabel>
                                        </f:facet>
                                        <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                            <p:commandButton  class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(cmAuditoriaMasivaBean.objetoFactura.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                        </p:outputPanel>
                                        <p:panelGrid id="panelDatosFactura" columns="4"
                                                     layout="grid" >
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Estado Factura" style="font-weight:bold" />
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.estadoFacturaStr}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Número radicado"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroRadicado}"/>
                                                </p:column>
                                            </p:row>
                                                                                     
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Número factura"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.numeroFacturado}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Fecha radicación"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.fechaRadicacion}"/>
                                                </p:column>
                                            </p:row>
                                                                                      
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Fecha prestación"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.fechaPrestacion}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Tipo contrato"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.maeTipoContratoValor}"/>
                                                </p:column>
                                            </p:row>
                                                                                       
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor factura"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorFactura}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorFactura}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor copago"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorCopago}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorCopago}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:row>
                                                                                                                              
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor bruto"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorBruto}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorBruto}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Cuota moderadora"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoFactura.valorCuotaModeradora}" title="#{cmAuditoriaMasivaBean.objetoFactura.valorCuotaModeradora}">
                                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:row>
                                                                                      
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Responsable del pago"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.responsablePago}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Régimen"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoFactura.maeRegimenValor}"/>
                                                </p:column>
                                            </p:row>

                                        </p:panelGrid>
                                    </p:panel>
                                    <p:panel id="panelVerServicio" header="Servicio" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <f:facet name="header">
                                            <h:outputLabel value="Servicio"></h:outputLabel>
                                        </f:facet>
                                        <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                            <p:commandButton  class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(cmAuditoriaMasivaBean.objetoDetalleServicio.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                        </p:outputPanel>
                                        <p:panelGrid id="panelDatosServicio" columns="4"
                                                     layout="grid">
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Tipo documento"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maeTipoDocumentoValor}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Documento"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.documento}"/>
                                                </p:column>
                                            </p:row>
                                                                                    
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Nombre completo"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.nombreCompletoAfiliado}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Consecutivo item"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.consecutivoItem}"/>
                                                </p:column>
                                            </p:row>
                                                                                       
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Código servicio"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maServicioCodigo}"/>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Nombre servicio"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maServicioValor}"/>
                                                </p:column>
                                            </p:row>

                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor facturado"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorFacturado}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorFacturado}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor pagado"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPagado}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPagado}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:row>
                                                                                   
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor pendiente"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendiente}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendiente}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Valor pendiente actual"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendienteActual}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendienteActual}">
                                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:row>
                                                                                        
                                            <p:row>
                                                <p:column styleClass="ui-widget-header ui-g-3">
                                                    <p:outputLabel value="Fecha prestación"  style="font-weight:bold"/>
                                                </p:column>
                                                <p:column styleClass=" ui-g-3" >
                                                    <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.fechaPrestacion}"/>
                                                </p:column>
                                            </p:row>                                          
                                        </p:panelGrid>
                                    </p:panel>
                                    <p:panel id="panelGestionAuditoriaConcepto" header="Conceptos Contables" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <p:dataTable var="concepto" value="#{cmAuditoriaMasivaBean.registrosConceptoContable}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                     emptyMessage="No se encontraron registros"
                                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,30,50,100" id="tablaConceptos" lazy="false"
                                                     widgetVar="tablaWidgetConceptos"
                                                     style="font-size:11px;"
                                                     rowKey="#{concepto.id}" >
                                            <p:column  headerText="Concepto Contable" sortBy="#{concepto.maestroConceptos.id}">
                                                <h:outputText value="#{concepto.maestroConceptos.nombre}" title="#{concepto.maestroConceptos.nombre}"/>
                                            </p:column>
                                            <p:column  headerText="Centro Costo">
                                                <h:outputText value="#{concepto.maestroCentroCosto.nombre}" title="#{concepto.maestroCentroCosto.nombre}"/>
                                            </p:column>
                                            <p:column  headerText="Ubicación" sortBy="#{concepto.municipioAfiliado}">
                                                <h:outputText value="#{concepto.municipioAfiliado}" title="#{concepto.municipioAfiliado}"/>
                                            </p:column>
                                            <p:column  headerText="Porcentaje" sortBy="#{concepto.porcentaje}">
                                                <h:outputText value="#{concepto.porcentaje}" title="#{concepto.porcentaje}">
                                                    <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                                </h:outputText>
                                            </p:column>  
                                            <p:column  headerText="Auditoría" style="text-align: center;">
                                                <p:commandButton class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(concepto.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                            </p:column> 
                                        </p:dataTable>
                                    </p:panel>
                                    <p:panel id="panelDiagnostico" header="Diagnóstico" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <f:facet name="header">
                                            <h:outputLabel value="Diagnóstico"></h:outputLabel>
                                        </f:facet>
                                        <p:panel id="pDiagnosticoCrear" header="Diagnósticos Opcionales" style="margin-bottom:10px;" collapsed="false" toggleable="true">        
                                            <p:dataTable var="diagnostico" value="#{cmAuditoriaMasivaBean.registrosAuditoriaDiagnostico}" paginator="false" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                         emptyMessage="No se encontraron registros"
                                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaDiagnosticosCrear" lazy="false"
                                                         widgetVar="tablaWidgetListaDiagnosticos"
                                                         style="font-size:11px;"
                                                         rowKey="#{diagnostico.id}" >
                                                <p:column headerText="Código">
                                                    <h:outputText value="#{diagnostico.maDiagnosticoCodigo}" />
                                                </p:column>
                                                <p:column headerText="Nombre">
                                                    <h:outputText value="#{diagnostico.maDiagnosticoValor}" />
                                                </p:column>
                                                <p:column headerText="Es principal">
                                                    <h:outputText value="#{diagnostico.principalStr}" />
                                                </p:column>
                                                <p:column headerText="Auditoría" style="text-align: center;">
                                                    <p:commandButton class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(diagnostico.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                                </p:column>
                                            </p:dataTable>
                                        </p:panel>
                                    </p:panel>

                                    <p:panel id="panelVerMotivos" header="Motivos" style="margin-bottom:10px;" collapsed="false" toggleable="true">  
                                        <p:dataTable var="motivo" value="#{cmAuditoriaMasivaBean.registrosAuditoriaMotivoGlosa}" paginator="false" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                     emptyMessage="No se encontraron registros"
                                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,30,50,100" id="tablaMotivos" lazy="false"
                                                     widgetVar="tablaWidgetMotivos"
                                                     style="font-size:11px;"
                                                     rowKey="#{motivo.id}" >     
                                            <p:column  headerText="Motivo glosa" sortBy="#{motivo.maestroMotivo.nombre}">
                                                <h:outputText value="#{motivo.maestroMotivo.nombre}" title="#{motivo.maestroMotivo.nombre}"/>
                                            </p:column>
                                            <p:column  headerText="Motivo específico" sortBy="#{motivo.maestroMotivoEspecifico.nombre}">
                                                <h:outputText value="#{motivo.maestroMotivoEspecifico.nombre}" title="#{motivo.maestroMotivoEspecifico.nombre}"/>
                                            </p:column>

                                            <p:column  headerText="Motivo aplicación" sortBy="#{motivo.maestroMotivoAplicacion.nombre}">
                                                <h:outputText value="#{motivo.motivoAplicacionCorto}" title="#{motivo.motivoAplicacionCorto}"/>
                                                <p:commandButton rendered="#{motivo.esMotivoAplicacionExtenso}" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(motivo.motivoAplicacionCompleto)}" icon="ui-icon-comment" title="Ver completo"/> 
                                            </p:column>

                                            <p:column  headerText="Tipología" sortBy="#{motivo.tipologia}" style="text-align: center;">
                                                <h:outputText value="#{motivo.tipologiaStr}" title="#{motivo.tipologiaStr}"/>
                                            </p:column> 

                                            <p:column  headerText="Porcentaje" sortBy="#{motivo.porcentaje}" style="text-align: center;">
                                                <h:outputText value="#{motivo.porcentaje}" title="#{motivo.porcentaje}">
                                                    <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                                </h:outputText>
                                            </p:column>  

                                            <p:column  headerText="Observación">
                                                <h:outputText value="#{motivo.observacionCorto}" title="#{motivo.observacionCorto}"/>
                                                <p:commandButton rendered="#{motivo.observacionCorto.length() > 0 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(motivo.observacion)}" icon="ui-icon-comment" title="Ver completo"/> 
                                            </p:column>

                                            <p:column headerText="Auditoría" style="text-align: center;">
                                                <p:commandButton class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(motivo.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />  
                                            </p:column>

                                        </p:dataTable>
                                    </p:panel>                        

                                    <p:panel id="panelVerAutorizaciones" header="Autorización" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <p:dataTable var="autorizacion" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAutorizacion}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                     emptyMessage="No se encontraron registros"
                                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,30,50,100" id="tablaAutorizaciones" lazy="false"
                                                     widgetVar="tablaWidgetAutorizacion"
                                                     style="font-size:11px;"
                                                     rowKey="#{autorizacion.id}" >

                                            <p:column  headerText="Código servicio" sortBy="#{autorizacion.codigoServicio}">
                                                <h:outputText value="#{autorizacion.codigoServicio}" title="#{autorizacion.codigoServicio}"/>
                                            </p:column>
                                            <p:column  headerText="Número autorización" sortBy="#{autorizacion.numeroAutorizacion}">
                                                <h:outputText value="#{autorizacion.numeroAutorizacion}" title="#{autorizacion.numeroAutorizacion}"/>
                                            </p:column>
                                            <p:column  headerText="Nombre del servicio" sortBy="#{autorizacion.nombreServicio}">
                                                <h:outputText value="#{autorizacion.nombreServicio}" title="#{autorizacion.nombreServicio}"/>
                                            </p:column>
                                            <p:column  headerText="Id anexo 4" sortBy="#{autorizacion.anexo4.id}">
                                                <h:outputText value="#{autorizacion.anexo4.id}" title="#{autorizacion.anexo4.id}"/>
                                            </p:column>
                                            <p:column  headerText="Prestador" sortBy="#{autorizacion.razonSocialPrestador}" style="text-align: center">
                                                <h:outputText value="#{autorizacion.razonSocialPrestador}" title="#{autorizacion.razonSocialPrestador}"/>
                                            </p:column>
                                            <p:column  headerText="Nit Prestador" sortBy="#{autorizacion.nitPrestador}" style="text-align: center">
                                                <h:outputText value="#{autorizacion.nitPrestador}" title="#{autorizacion.nitPrestador}"/>
                                            </p:column>
                                            <p:column  headerText="Pago Anticipo" sortBy="#{autorizacion.anexo4.pagoAnticipado}" style="text-align: center">
                                                <h:outputText value="#{autorizacion.anexo4.pagoAnticipado ? 'Si' :'No'}" title="#{autorizacion.anexo4.pagoAnticipado? 'Si' :'No'}"/>
                                            </p:column>
                                            <p:column  headerText="Fecha Autorización" sortBy="#{autorizacion.fechaAutorizacion}">
                                                <h:outputText value="#{autorizacion.fechaAutorizacion}" title="#{autorizacion.fechaAutorizacion}"/>
                                            </p:column>                                                          
                                        </p:dataTable>
                                    </p:panel>
                                    
                                    <p:panel id="panelVerContratos" header="Descuento Capita" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <p:dataTable var="descuentoC" value="#{cmAuditoriaMasivaBean.registrosAuditoriaCapitaDescuento}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                     emptyMessage="No se encontraron registros"
                                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,30,50,100" id="tablaCapitaDescuento" lazy="false"
                                                     widgetVar="tablaWidgetCapitaDescuento"
                                                     style="font-size:11px;"
                                                     rowKey="#{descuentoC.id}" >

                                            <p:column  headerText="Número contrato" style="text-align: center">
                                                <h:outputText value="#{descuentoC.contrato}" title="#{descuentoC.contrato}"/>
                                            </p:column>

                                            <p:column  headerText="Nit" style="text-align: center">
                                                <h:outputText value="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}" title="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}"/>
                                            </p:column>

                                            <p:column  headerText="Razón social">
                                                <h:outputText value="#{descuentoC.cntContrato.cntPrestador.razonSocial}" title="#{descuentoC.cntContrato.cntPrestador.razonSocial}"/>
                                            </p:column>

                                            <p:column  headerText="Representante legal">
                                                <h:outputText value="#{descuentoC.cntContrato.cntPrestador.nombreRepresentanteLegal}" title="#{descuentoC.cntContrato.cntPrestador.nombreRepresentanteLegal}"/>
                                            </p:column>

                                            <p:column  headerText="Número documento prestador">
                                                <h:outputText value="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}" title="#{descuentoC.cntContrato.cntPrestador.numeroDocumento}"/>
                                            </p:column>
                                            <p:column  headerText="Estado contrato" style="text-align: center">
                                                <h:outputText value="#{descuentoC.cntContrato.maeEstadoContratoValor}" title="#{descuentoC.cntContrato.maeEstadoContratoValor}"/>
                                            </p:column>
                                            <p:column  headerText="Marcación" style="text-align: center">
                                                <h:outputText value="#{descuentoC.marcacionStr}" title="#{descuentoC.cntContrato.diasLimitePago}"/>
                                            </p:column>
                                            <p:column  headerText="Fecha Inicio">
                                                <h:outputText value="#{descuentoC.cntContrato.fechaInicio}" title="#{descuentoC.cntContrato.fechaInicio}"/>
                                            </p:column>
                                            <p:column  headerText="Fecha Fin">
                                                <h:outputText value="#{descuentoC.cntContrato.fechaFin}" title="#{descuentoC.cntContrato.fechaFin}"/>
                                            </p:column>
                                            <p:column  headerText="Observación">
                                                <h:outputText value="#{descuentoC.observacionCorto}" />
                                                <p:commandButton rendered="#{descuentoC.observacionCorto.length() > 1 }" actionListener="#{cmAuditoriaMasivaBean.mostrarMensaje(descuentoC.observacion)}" icon="ui-icon-comment" title="Ver completo"/>
                                            </p:column>
                                        </p:dataTable>
                                    </p:panel>

                                    <p:panel widgetVar="panelVerAdjuntosCmDetalles" id="panelVerAdjuntosCmDetalles" header="Adjuntos Detalle" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <p:dataTable id="tablaAdjuntosCmDetalles" var="adjunto" value="#{cmAuditoriaMasivaBean.registrosAuditoriaAdjutoCmDetalle}" widgetVar="tablaWidgetAdjuntosCmDetalles" scrollable="true" emptyMessage="No se encontraron registros">
                                            <p:column headerText="Acciones" style="text-align: center;">
                                                <p:commandButton rendered="#{adjunto.id != null}" title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                                    <p:fileDownload value="#{cmAuditoriaMasivaBean.descargarAdjunto(adjunto)}" />
                                                </p:commandButton>  
                                            </p:column>
                                            <p:column headerText="Nombre">
                                                <h:outputText value="#{adjunto.archivoNombre}"/>
                                            </p:column>
                                            <p:column headerText="Tipo"  style="text-align: center;">
                                                <h:outputText value="#{adjunto.tipoStr}"/>
                                            </p:column>
                                            <p:column headerText="Usuario">
                                                <h:outputText value="#{adjunto.usuarioCrea}"/>
                                            </p:column>
                                            <p:column headerText="F.H. Crea"  style="text-align: center;">
                                                <h:outputText value="#{adjunto.fechaHoraCrea}">
                                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"/>
                                                </h:outputText>
                                            </p:column>
                                        </p:dataTable>
                                    </p:panel> 

                                    <p:panelGrid  style="width:100%;margin:10px 0px">
                                        <f:facet name="footer">
                                            <p:row>
                                                <p:column colspan="4" style="text-align: center">
                                                    <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoConfiguracionesGenerales').hide()" immediate="true" style="margin-left: 5px;"/>
                                                </p:column>
                                            </p:row>
                                        </f:facet>
                                    </p:panelGrid>
                                </h:form>
                            </p:scrollPanel>
                        </p:tab>
                        <p:tab title="Ver Programas Especiales" titleStyleClass="color_rojo" id ="Tab2_Programas" >
                            <p:scrollPanel mode="native" style="height:400px">
                                <h:form id="frmVerProgramasTab" style="height: 400px;">
                                    <p:panel id="panelVerInfoBasica" header="Novedades" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <f:facet name="header">
                                            <h:outputLabel value="Información básica"></h:outputLabel>
                                        </f:facet>

                                        <p:panel id="pnlAfiliado" header="Datos afiliado" style="margin-bottom:10px;" toggleable="true" rendered="#{cmAuditoriaMasivaBean.afiliadoCompleto.id > 0}" >
                                            <p:panelGrid id="panelAfiliado" style="width: 100%;">

                                                <p:outputLabel value="Tipo Documento"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.maeTipoDocumentoValor}"/>                                        

                                                <p:outputLabel value="Número Documento" for="txtNumeroDocumento"  style="font-weight:bold"/>
                                                <p:outputLabel id="txtNumeroDocumento" value="#{cmAuditoriaMasivaBean.afiliadoCompleto.numeroDocumento}" style="width: 181px;"/>

                                                <p:outputLabel value="Fecha Nacimiento"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.fechaNacimiento}">
                                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                                </p:outputLabel>

                                                <p:outputLabel value="Nombres"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.nombres}"/>

                                                <p:outputLabel value="Apellidos"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.apellidos}"/>

                                                <p:outputLabel value="Género"  style="font-weight:bold"/>
                                                <h:outputText value="#{cmAuditoriaMasivaBean.afiliadoCompleto.maeGeneroValor}"/>

                                                <p:outputLabel value="Régimen"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.maeRegimenValor}"/>

                                                <p:outputLabel value="Estado Afiliación"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.maeEstadoAfiliacionValor}"/>

                                                <p:outputLabel value="Dirección"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.direccionResidencia}"/>

                                                <p:outputLabel value="Teléfono"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.telefonoFijo}"/>

                                                <p:outputLabel value="Celular"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.afiliadoCompleto.telefonoMovil}"/>

                                                <p:outputLabel value="Municipio Afiliación"  style="font-weight:bold"/>
                                                <p:outputLabel value="#{cmAuditoriaMasivaBean.getUbicacionRecursiva(cmAuditoriaMasivaBean.afiliadoCompleto.afiliacionUbicacion.id)}"/>

                                            </p:panelGrid>
                                        </p:panel>  
                                        <p:panel id="panelAfiliadoPrograma" header="Programas Especiales" style="margin-bottom:10px; color: red;" collapsed="false" toggleable="true">
                                            <p:dataTable var="obj" value="#{cmAuditoriaMasivaBean.lazyAfiliadosPrograma}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                         emptyMessage="No se encontraron registros"
                                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaRegistros" lazy="true"
                                                         widgetVar="tablaWidget"
                                                         style="font-size:11px;"
                                                         scrollable="true"
                                                         scrollWidth="100%"
                                                         rowKey="#{obj.id}" reflow="true">
                                                <p:column headerText="Acciones" style="text-align: center;">
                                                    <p:commandButton  title="Ver información programa" actionListener="#{cmAuditoriaMasivaBean.verProgramaEspecificoPorAfiliado(obj)}" icon="ui-icon-search"/>
                                                </p:column>
                                                <p:column headerText="Programa Especial" style="text-align: center;">
                                                    <h:outputText value="#{obj.pePrograma.descripcionPrograma} - #{obj.pePrograma.codigoPrograma}" title="#{obj.pePrograma.descripcionPrograma} - #{obj.pePrograma.codigoPrograma}"/>
                                                </p:column>
                                                <p:column headerText="Activo" style="text-align: center;">                                            
                                                    <h:outputText value="#{obj.activo == true? 'Si':'No'}" title="#{obj.activo == true? 'Si':'No'}"/>
                                                </p:column>
                                                <p:column headerText="Categoría" style="text-align: center;">                    
                                                    <h:outputText value="#{obj.pePrograma.maeCategoriaValor}" title="#{obj.pePrograma.maeCategoriaValor}"/>
                                                </p:column>
                                                <p:column headerText="Fecha Ingreso" style="text-align: center;">                    
                                                    <h:outputText value="#{obj.fechaInicioPrograma}">
                                                        <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:dataTable>
                                        </p:panel>
                                        <p:panelGrid  style="width:100%;margin:10px 0px">
                                            <f:facet name="footer">
                                                <p:row>
                                                    <p:column colspan="4" style="text-align: center">
                                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoConfiguracionesGenerales').hide()" immediate="true"/>
                                                    </p:column>
                                                </p:row>
                                            </f:facet>  
                                        </p:panelGrid>                            
                                    </p:panel>

                                </h:form>
                            </p:scrollPanel>
                        </p:tab>
                        <p:tab title="Ver Novedades Afiliado" id ="Tab3_Novedades">
                            <p:scrollPanel mode="native" style="height:500px">
                                <h:form id="frmNovedadesTab">
                                    <p:panel id="panelVerInfoBasica" header="Novedades" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <f:facet name="header">
                                            <h:outputLabel value="Información básica"></h:outputLabel>
                                        </f:facet>
                                        <p:panel id="panelVerServicio" header="Servicio" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                            <f:facet name="header">
                                                <h:outputLabel value="Servicio"></h:outputLabel>
                                            </f:facet>
                                            <p:outputPanel class="frmAuditoria" style="margin-top: -5px; text-align: right;">
                                                <p:commandButton  class="btnAuditoria" action="#{cmAuditoriaMasivaBean.getAuditoria(cmAuditoriaMasivaBean.objetoDetalleServicio.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                            </p:outputPanel>
                                            <p:panelGrid id="panelDatosServicio" columns="4"
                                                         layout="grid">
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Tipo documento"  style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maeTipoDocumentoValor}"/>
                                                    </p:column>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Documento"  style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.documento}"/>
                                                    </p:column>
                                                </p:row>
                                                                                                
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Nombre completo"  style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.nombreCompletoAfiliado}"/>
                                                    </p:column>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Consecutivo item" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.consecutivoItem}"/>
                                                    </p:column>
                                                </p:row>
                                                                                            
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Código servicio" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maServicioCodigo}"/>
                                                    </p:column>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Nombre servicio" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.maServicioValor}"/>
                                                    </p:column>
                                                </p:row>
                                                                                             
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Valor facturado" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorFacturado}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorFacturado}">
                                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Valor pagado" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPagado}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPagado}">
                                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                        </h:outputText>
                                                    </p:column>
                                                </p:row>
                                                                                           
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Valor pendiente" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendiente}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendiente}">
                                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Valor glosa" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorGlosa}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorGlosa}">
                                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                        </h:outputText>
                                                    </p:column>
                                                </p:row>
                                                                                              
                                                <p:row>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Valor pendiente actual" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <h:outputText value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendienteActual}" title="#{cmAuditoriaMasivaBean.objetoDetalleServicio.valorPendienteActual}">
                                                            <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column styleClass="ui-widget-header ui-g-3">
                                                        <p:outputLabel value="Fecha prestación" style="font-weight:bold"/>
                                                    </p:column>
                                                    <p:column styleClass=" ui-g-3" >
                                                        <p:outputLabel value="#{cmAuditoriaMasivaBean.objetoDetalleServicio.fechaPrestacion}"/>
                                                    </p:column>
                                                </p:row>
                                                
                                            </p:panelGrid>
                                        </p:panel>
                                    </p:panel>
                                    <p:panel id="panelNovedades" header="Novedades" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                                        <p:dataTable var="novedad" value="#{cmAuditoriaMasivaBean.lazyAseguramientoNovedadHistorial}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                                     emptyMessage="No se encontraron registros"
                                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,30,50,100" id="tablaNovedades" lazy="true"
                                                     widgetVar="tablaWidgetNovedades"
                                                     rowStyleClass="#{cmAuditoriaMasivaBean.asignarColorNovedadFechaPrestacion(novedad,cmAuditoriaMasivaBean.objetoDetalleServicio)}"
                                                     style="font-size:11px;"
                                                     rowKey="#{novedad.id}" reflow="true">

                                            <p:column headerText="Código" sortBy="#{novedad.asegMaNovedad.codigoNovedad}" filterBy="#{novedad.asegMaNovedad.codigoNovedad}"  style="text-align: center;">
                                                <f:facet name="filter">
                                                    <p:inputText label="Código" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                                onchange();
                                                                return false;
                                                            }"  onchange="PF('tablaWidgetNovedades').filter()" />
                                                </f:facet>
                                                <h:outputText value="#{novedad.asegMaNovedad.codigoNovedad}" title="#{novedad.asegMaNovedad.codigoNovedad}"/>
                                            </p:column>                            
                                            <p:column headerText="Descripción" sortBy="#{novedad.asegMaNovedad.descripcionNovedad}" filterBy="#{novedad.asegMaNovedad.descripcionNovedad}">
                                                <f:facet name="filter">
                                                    <p:inputText label="Descripción" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                                onchange();
                                                                return false;
                                                            }"  onchange="PF('tablaWidgetNovedades').filter()" />
                                                </f:facet>
                                                <h:outputText value="#{novedad.asegMaNovedad.descripcionNovedad}" title="#{novedad.asegMaNovedad.descripcionNovedad}"/>
                                            </p:column>
                                            <p:column headerText="Radicado" sortBy="#{novedad.radicadoNovedad.id}" filterBy="#{novedad.radicadoNovedad.id}"  style="text-align: center;">
                                                <f:facet name="filter">
                                                    <p:inputText label="Radicado" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                                onchange();
                                                                return false;
                                                            }"  onchange="PF('tablaWidgetNovedades').filter()" />
                                                </f:facet>
                                                <h:outputText value="#{novedad.radicadoNovedad.id}" title="#{novedad.radicadoNovedad.id}"/>
                                            </p:column>
                                            <p:column headerText="Fecha Novedad" sortBy="#{novedad.fechaNovedad}">
                                                <h:outputText value="#{novedad.fechaNovedad}" title="#{novedad.fechaNovedad}">
                                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Valor Anterior" sortBy="#{novedad.descripcionValorAnterior}" filterBy="#{novedad.descripcionValorAnterior}">
                                                <f:facet name="filter">
                                                    <p:inputText label="Valor Anterior" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                                onchange();
                                                                return false;
                                                            }"  onchange="PF('tablaWidgetNovedades').filter()" />
                                                </f:facet>
                                                <h:outputText value="#{novedad.descripcionValorAnterior}" title="#{novedad.descripcionValorAnterior}"/>
                                            </p:column>
                                            <p:column headerText="Valor Nuevo" sortBy="#{novedad.descripcionValorNuevo}" filterBy="#{novedad.descripcionValorNuevo}">
                                                <f:facet name="filter">
                                                    <p:inputText label="Valor Nuevo" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                                onchange();
                                                                return false;
                                                            }"  onchange="PF('tablaWidgetNovedades').filter()" />
                                                </f:facet>
                                                <h:outputText value="#{novedad.descripcionValorNuevo}" title="#{novedad.descripcionValorNuevo}"/>
                                            </p:column>
                                            <p:column headerText="Observación" >
                                                <h:outputText value="#{novedad.observacion}" title="#{novedad.observacion}"/>
                                            </p:column>
                                            <p:column headerText="Fecha Registro" sortBy="#{novedad.fechaHoraCrea}">
                                                <h:outputText value="#{novedad.fechaHoraCrea}" title="#{novedad.fechaHoraCrea}">
                                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Usuario" sortBy="#{novedad.usuarioCrea}" filterBy="#{novedad.usuarioCrea}">
                                                <f:facet name="filter">
                                                    <p:inputText label="Usuario" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                                                onchange();
                                                                return false;
                                                            }"  onchange="PF('tablaWidgetNovedades').filter()" />
                                                </f:facet>
                                                <h:outputText value="#{novedad.usuarioCrea}" title="#{novedad.usuarioCrea}"/>
                                            </p:column>
                                            <p:column headerText="Fecha Reporte BDUA" sortBy="#{novedad.fechaMarcacion}">
                                                <h:outputText value="#{novedad.fechaMarcacion}" title="#{novedad.fechaMarcacion}">
                                                    <f:convertDateTime type="date" pattern="yyyy-MM-dd" timeZone="America/Bogota"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Id BDUA" >
                                                <h:outputText value="#{novedad.asegInformesIdMarcacion}" title="#{novedad.asegInformesIdMarcacion}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </p:panel>
                                    <p:panelGrid  style="width:100%;margin:10px 0px">
                                        <f:facet name="footer">
                                            <p:row>
                                                <p:column colspan="4" style="text-align: center">
                                                    <p:commandButton value="Salir" type="button" onclick="PF('dialogoConfiguracionesGenerales').hide()" immediate="true"/>
                                                </p:column>
                                            </p:row>
                                        </f:facet>  
                                    </p:panelGrid> 
                                </h:form>
                            </p:scrollPanel>
                        </p:tab>
                    </p:tabView>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Levantamiento Motivos Específicos" id="dialogoEliminarMotivo" widgetVar="dialogoEliminarMotivo" appendTo="@(body)" modal="true" dynamic="true" width="50%">
                <p:scrollPanel mode="native" style="height:150px">
                    <h:form id="frmEliminarMotivo">
                        <p:panelGrid id="panelEliminarMotivo"  columns="2" layout="grid" styleClass="showcase-text-align-center" >

                            <h:outputText value="Seleccione Motivos Para Eliminar" style="font-weight:bold"/>
                            <p:selectCheckboxMenu id="menu" value="#{cmAuditoriaMasivaBean.motivosEspecificosSeleccionados}" label="Motivos"
                                                  filter="true" filterMatchMode="startsWith" 
                                                  dynamic="true">
                                <f:selectItems value="#{cmAuditoriaMasivaBean.listaMotivosEspecificosEncontrados}" var="motivo" itemValue="#{motivo.maeMotivoEspecificoId}" itemLabel="#{motivo.maeMotivoEspecificoValor}"/>
                            </p:selectCheckboxMenu>

                            <f:facet name="footer">
                                <p:row>
                                    <p:column  style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoEliminarMotivo').hide()" immediate="true"/>
                                    </p:column>
                                    <p:column  style="text-align: center">
                                        <p:commandButton value="Eliminar" actionListener="#{cmAuditoriaMasivaBean.guardarBorradoMotivosEspecificos()}" />
                                    </p:column>
                                </p:row>
                            </f:facet>  
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Ver Contrato Sedes" id="dialogoVerContratoSedes" widgetVar="dialogoVerContratoSedes" appendTo="@(body)" modal="true" dynamic="true" width="90%">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmVerContratosSedes">
                        <p:panel header="Sedes" style="margin-bottom:10px;" toggleable="true">
                            <p:dataTable id="tablaSedes" var="sede" value="#{cmAuditoriaMasivaBean.contratoConSedes.listaContratoSedes}" widgetVar="tablaWidgetSedes" 
                                         scrollable="true" emptyMessage="No se encontraron registros" rows="10" paginator="true" reflow="true"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" >
                                <p:column headerText="Código Habilitación" style="text-align: center">
                                    <h:outputText value="#{sede.cntPrestadorSede.codigoHabilitacionSede}"/>
                                </p:column>
                                <p:column headerText="Nombre" style="width: 280px;">
                                    <h:outputText value="#{sede.cntPrestadorSede.nombreSede}"/>
                                </p:column>
                                <p:column headerText="Nivel de Atención" style="text-align: center">
                                    <h:outputText value="#{sede.cntPrestadorSede.nivelAtencion}"/>
                                </p:column>
                                <p:column headerText="Modalidad Contrato Sede" style="text-align: center">
                                    <h:outputText value="#{sede.maeModalidadContratoValor}"/>
                                </p:column>
                                <p:column headerText="Observación" style="width: 240px;">
                                    <h:outputText value="#{sede.observacion}"/>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerContratoSedes').hide()" immediate="true" />
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>
            
            <p:dialog widgetVar="dialogoSoportes" header="Soportes" appendTo="@(body)" responsive="true" modal="true" width="90%">
                <p:scrollPanel mode="native" style="max-height:350px">
                    <h:form id="frmVerSoportes" style="padding: 10px;">
                        <p:panel id="panelSoportes" header="Soportes" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                            <p:dataTable var="soporte" value="#{cmAuditoriaMasivaBean.lazySoportes}" paginator="true" rows="#{cmAuditoriaMasivaBean.tamanoPagina}" 
                                         emptyMessage="No se encontraron registros"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,30,50,100" id="tablaSoportes" lazy="true"
                                         widgetVar="tablaWidgetSoportes"
                                         style="font-size:11px;"
                                         rowKey="#{soporte.id}" >

                                <p:column  headerText="Nombre" style="text-align: center;" filterBy="#{soporte.archivoNombre}">
                                     <f:facet name="filter">
                                        <p:inputText label="Nombre" maxlength="128" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }" style="width: 95%;" onchange="PF('tablaWidgetSoportes').filter()"/>
                                    </f:facet>
                                    <h:outputText value="#{soporte.archivoNombre}" title="#{soporte.archivoNombre}"/>
                                </p:column>
                                <p:column  headerText="Tipo Soporte" style="text-align: center;" filterBy="#{soporte.maeTipoSoporteId}">
                                    <f:facet name="filter">
                                       <p:selectOneMenu id="soporteSelect" filter="true" filterMatchMode="contains" class="mae-select" onchange="PF('tablaWidgetSoportes').filter()" style="width: 90%;" >
                                           <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true"  />
                                           <f:selectItems value="#{cmAuditoriaMasivaBean.hashTipoSoporte.entrySet()}" 
                                                           itemValue="#{soporteItem.key}" 
                                                           itemLabel="#{cmAuditoriaMasivaBean.getMapMaestroValue(cmAuditoriaMasivaBean.hashTipoSoporte, soporteItem.key).valor} -
                                                           #{cmAuditoriaMasivaBean.getMapMaestroValue(cmAuditoriaMasivaBean.hashTipoSoporte, soporteItem.key).nombre}" 
                                                           var="soporteItem"> 
                                            </f:selectItems>
                                        </p:selectOneMenu>  
                                    </f:facet>
                                    <h:outputText value="#{soporte.maeTipoSoporteCodigo}-#{soporte.maeTipoSoporteValor}" 
                                                  title="#{soporte.maeTipoSoporteCodigo}-#{soporte.maeTipoSoporteValor}"/>
                                </p:column>
                                <p:column  headerText="Fecha Creación" style="text-align: center;" >
                                     <h:outputText value="#{soporte.fechaHoraCrea}" title="#{soporte.fechaHoraCrea}">
                                        <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" timeZone="America/Bogota"  />
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Usuario Crea" style="text-align: center;">
                                    <h:outputText value="#{soporte.usuarioCrea}" title="#{soporte.usuarioCrea}"/>
                                </p:column> 
                                <p:column  headerText="Acciones" style="text-align: center;">
                                    <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                        <p:fileDownload value="#{cmAuditoriaMasivaBean.descargarSoporte(soporte)}" />
                                    </p:commandButton>
                                    <p:commandButton id="auditoriaSoporte" class="btnAuditoriaSoporte" action="#{cmAuditoriaMasivaBean.getAuditoria(soporte.auditoriaStrHTML)}" icon="ui-icon-comment" title="Auditoría" />
                                    <p:commandButton  title="Ver" actionListener="#{cmAuditoriaMasivaBean.verPdf(soporte)}" icon="ui-icon-search"/>
                                </p:column>  
                            </p:dataTable>
                        </p:panel>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoSoportes').hide()" immediate="true" style="margin-left: 5px;"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <ui:include src="../../maestro/seleccion/sel_diagnosticos.xhtml" />           
            <h:form id="exit">
                <p:remoteCommand  id="limpiarRender" name="limpiarRender" action="#{cmAuditoriaMasivaBean.limpiarRender()}"/>
            </h:form>          
        </center>
    </ui:define>
</ui:composition>
