<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/home.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="bodyJR"> 
        <style type="text/css">
            .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                /* border: 1px solid #e5e2e2;*/
            }
            .ui-panelgrid .ui-panelgrid-footer {
               text-align: center;
                padding: 2px 5px;
            }
            .old {
                background-color: #fca752 !important;
                background-image: none !important;
                color: #000000 !important;
            }
            .yellow{
                background-color: #ffff00 !important;
                background-image: none !important;
                color: #000000 !important;
            }
            .green{
                background-color: #009900 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .red{
                background-color: #ff0000 !important;
                background-image: none !important;
                color: #ffffff !important;
            }
            .red  .ui-row-editor, .green .ui-row-editor{
                display: none;
            }
            .red_circle{color:red;}
        </style>
        <center>

            <h:form id="frmCargaMasiva">
                <p:toolbar>
                    <f:facet name="left" >
                        <span title="#{cargaMasivaConciliacionBean.modulo.descripcion}">#{cargaMasivaConciliacionBean.modulo.nombre}</span>
                    </f:facet>
                    <f:facet name="right">
                        <p:remoteCommand name="abrirVentanaCargaMasiva" action="#{cargaMasivaConciliacionBean.verFormularioCargaMasiva()}" />
                        <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionCrear}" title="Cargar Conciliaciones Masivas"  onmouseup="abrirVentanaCargaMasiva();" icon="ui-icon-circle-arrow-n"/>
                        <p:commandButton title="Refrescar" ajax="false" actionListener="#{cargaMasivaConciliacionBean.refrescar()}" icon="ui-icon-refresh"/>
                    </f:facet>
                </p:toolbar>        
            </h:form>

            <p:panel id="panelConsultaConcilicionMasivaConciliacion" header="Consulta Conciliaciónes Masivas" style="margin-bottom:10px;">
                <h:form id="frmConsultaCargaMasiva">
                    <p:dataTable var="obj" value="#{cargaMasivaConciliacionBean.lazyConciliaciones}" paginator="true" rows="#{cargaMasivaConciliacionBean.tamanoPagina}" 
                                 emptyMessage="No se encontraron registros"
                                 currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="30,50,100" id="tablaRegistros" lazy="true"
                                 widgetVar="tablaWidget"
                                 scrollWidth="120%"
                                 scrollable="true"
                                 style="font-size:11px;"
                                 rowKey="#{obj.id}" reflow="true">

                        <p:column style="text-align: center;">
                            <f:facet name="header">
                                <h:outputText value="Acciones"/>
                            </f:facet>    
                            <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionAdicional1 and cargaMasivaConciliacionBean.habilitarDescargaReporteConciliacion(obj)}"  title="Generar Reporte" ajax="true" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-document">
                                <p:fileDownload value="#{cargaMasivaConciliacionBean.generarReportePorConciliacion(obj)}" />
                            </p:commandButton>

                            <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionAdicional4 and cargaMasivaConciliacionBean.habilitarDescargaReporteErrores(obj)}"  title="Generar Reporte Errores" ajax="true" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-calculator">
                                <p:fileDownload value="#{cargaMasivaConciliacionBean.generarReporteErrores(obj)}" />
                            </p:commandButton>    

                            <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionAdicional3}" title="Ver WS Factuas" actionListener="#{cargaMasivaConciliacionBean.verSincronizaciones(obj.cmRadicado.id)}" icon="ui-icon-search"/>

                            <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionAdicional5}" title="Ver adjuntos" actionListener="#{cargaMasivaConciliacionBean.verAdjuntos(obj.id)}" icon="ui-icon-circle-arrow-s"/>

                        </p:column>

                        <p:column headerText="Id Conciliación" sortBy="#{obj.id}" filterBy="#{obj.id}" style="text-align: center;">   
                            <f:facet name="filter">
                                <p:inputText label="Id Conciliación" maxlength="64" style="width: 95%;" onkeypress="if (event.keyCode === 13) {
                                            onchange();
                                            return false;
                                        }"  onchange="PF('tablaWidget').filter()" />
                            </f:facet>
                            <h:outputText value="#{obj.id}" title="#{obj.id}"/>
                        </p:column>

                        <p:column headerText="Estado" sortBy="#{obj.estadoProceso}" filterBy="#{obj.estadoProceso}">
                            <f:facet name="filter">
                                <p:selectOneMenu style="width: 70%;" onchange="PF('tablaWidget').filter()">
                                    <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItem itemLabel="En proceso" itemValue="0" />
                                    <f:selectItem itemLabel="Registrada" itemValue="1" />
                                </p:selectOneMenu>
                            </f:facet>
                            <h:outputText value="#{obj.estadoProcesoStr}"/>
                            <i class="#{cargaMasivaConciliacionBean.asignarStyleSegunEstado(obj)}"/>
                        </p:column>

                        <p:column headerText="Nit">
                            <h:outputText value="#{obj.nit}" title="#{obj.nit}"/>
                        </p:column>

                        <p:column headerText="Ips">
                            <h:outputText value="#{obj.ips}" title="#{obj.ips}"/>
                        </p:column>

                        <p:column headerText="Facturas contenidas" sortBy="#{obj.cantidadFacturas}" style="text-align: center;">
                            <h:outputText value="#{obj.cantidadFacturas}" title="#{obj.cantidadFacturas}"/>
                        </p:column>

                        <p:column headerText="Facturas Registradas Exitosamente" style="text-align: center;">
                            <h:outputText value="#{obj.cantidadFacturasRegistradas}" title="#{obj.cantidadFacturasRegistradas}"/>
                        </p:column>

                        <p:column headerText="Seguimiento Proceso">
                            <h:outputText value="#{obj.descripcionFacturasSincronizadas}" title="#{obj.descripcionFacturasSincronizadas}"/>
                        </p:column>

                        <p:column headerText="Usuario Crea" sortBy="#{obj.usuarioCrea}">
                            <h:outputText value="#{obj.usuarioCrea}" title="#{obj.usuarioCrea}"/>
                        </p:column>

                        <p:column headerText="Fecha Creación" sortBy="#{obj.fechaHoraCrea}">                        
                            <h:outputText value="#{obj.fechaHoraCrea}" title="#{obj.fechaHoraCrea}"/>
                        </p:column>

                        <p:column headerText="Fecha Fin Procesamiento" sortBy="#{obj.horaFinalizacionRegistro}">                        
                            <h:outputText value="#{obj.horaFinalizacionRegistro}" title="#{obj.horaFinalizacionRegistro}"/>
                        </p:column>  

                        <p:column headerText="Valor">                        
                            <h:outputText value="#{obj.valor}" title="#{obj.valor}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Valor Pagado EPS">                        
                            <h:outputText value="#{obj.valorPagadoEps}" title="#{obj.valorPagadoEps}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Valor Aceptado IPS">                        
                            <h:outputText value="#{obj.valorAceptadoIps}" title="#{obj.valorAceptadoIps}">
                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                            </h:outputText>
                        </p:column>

                    </p:dataTable>
                </h:form>
            </p:panel>

            <p:dialog header="Conciliaciones Masivas" id="dialogoResponderConciliaciones" widgetVar="dialogoGestionarConciliaciones" appendTo="@(body)" modal="true"  width="95%" dynamic="true">
                <p:ajax event="open" oncomplete="PF('tablaWidgetDetallesResponder').filter();" form="frmResponderConciliaciones"/>
                <p:ajax event="close" oncomplete="" listener="#{cargaMasivaConciliacionBean.cerrarVentanaConciliacionMasiva}" form="frmResponderConciliaciones" />
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmResponderConciliaciones">
                        <p:panel id="pDetalles" toggleable="true" header="Facturas Seleccionadas" style="margin-bottom:10px;">                               
                            <p:dataTable var="obj" value="#{cargaMasivaConciliacionBean.facturasEncontradas}" 
                                         paginator="true"
                                         rows="50"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowStyleClass="#{obj.valorPendienteActual le 0 ? 'red' : null}"
                                         emptyMessage="No se encontraron registros"
                                         rowsPerPageTemplate="50,100,200,200" 
                                         id="tablaRegistros" lazy="false"
                                         widgetVar="tablaWidgetDetallesResponder"
                                         scrollable="true"
                                         scrollWidth="99%"
                                         scrollHeight="250"
                                         editable="true"
                                         rowKey="#{obj.id}">
                                <p:ajax event="rowEdit" listener="#{cargaMasivaConciliacionBean.onRowEditFactura}" />
                                <p:column  headerText="Numero Radicado"  sortBy="#{obj.numeroRadicado}" filterBy="#{obj.numeroRadicado}">
                                    <h:outputText value="#{obj.numeroRadicado}" title="#{obj.numeroRadicado}"/>
                                </p:column>
                                <p:column  headerText="Valor pendiente actual" sortBy="#{obj.valorPendienteActual}">
                                    <h:outputText value="#{obj.valorPendienteActual}" title="#{obj.valorPendienteActual}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Número Facturado" style="text-align: center">
                                    <h:outputText value="#{obj.numeroFacturado}" title="#{obj.numeroFacturado}"/>
                                </p:column>
                                <p:column  headerText="Pbs" style="text-align: center">
                                    <h:outputText value="#{obj.pbs ? 'Si':'No'}" title="#{obj.pbs ? 'Si':'No'}"/>
                                </p:column>
                                <p:column  headerText="Valor pagado EPS" sortBy="#{obj.valorPagadoEPS}">
                                    <p:cellEditor>       
                                        <f:facet name="output">
                                            <h:outputText value="#{obj.valorPagadoEPS}" title="#{obj.valorPagadoEPS}">
                                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                            </h:outputText>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:inputText  value="#{obj.valorPagadoEPS}" style="width:100%" onkeypress="if (event.keyCode === 13) {
                                                        return false;
                                                    }"
                                                          validatorMessage="Ingreso solo números positivos"
                                                          converterMessage="Ingrese números positivos y decimales separados por punto, hasta 4 decimales Ej:12.9876">
                                                <f:validateLongRange minimum="0"  />  
                                            </p:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column  headerText="Porcentaje pagado EPS" sortBy="#{obj.porcentajePagadoEPS}">
                                    <p:cellEditor id="nombreCell">       
                                        <f:facet name="output">
                                            <h:outputText value="#{obj.porcentajePagadoEPS}" title="#{obj.porcentajePagadoEPS}">
                                                <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                            </h:outputText>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:inputNumber minValue="0" decimalPlaces="2" value="#{obj.porcentajePagadoEPS}" maxValue="100" symbol="%" symbolPosition="s" onkeypress="if (event.keyCode === 13) {
                                                        return false;
                                                    }" ></p:inputNumber>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column  headerText="Valor aceptado IPS" sortBy="#{obj.valorAceptadoIPS}">
                                    <p:cellEditor>       
                                        <f:facet name="output">
                                            <h:outputText value="#{obj.valorAceptadoIPS}" title="#{obj.valorAceptadoIPS}">
                                                <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                            </h:outputText>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:inputText  value="#{obj.valorAceptadoIPS}" style="width:100%" 
                                                          onkeypress="if (event.keyCode === 13) {
                                                                      return false;
                                                                  }"
                                                          validatorMessage="Ingreso solo números positivos"
                                                          converterMessage="Ingrese números positivos y decimales separados por punto, hasta 4 decimales Ej:12.9876">
                                                <f:validateLongRange minimum="0"  />   
                                            </p:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column  headerText="Porcentaje aceptado IPS" sortBy="#{obj.porcentajeAceptadoIPS}">
                                    <p:cellEditor>       
                                        <f:facet name="output">
                                            <h:outputText value="#{obj.porcentajeAceptadoIPS}" title="#{obj.porcentajeAceptadoIPS}">
                                                <f:convertNumber locale="es_CO" currencySymbol="%" type="currency" maxFractionDigits="2"/>
                                            </h:outputText>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:inputNumber minValue="0" decimalPlaces="2" value="#{obj.porcentajeAceptadoIPS}" maxValue="100" symbol="%" symbolPosition="s" onkeypress="if (event.keyCode === 13) {
                                                        return false;
                                                    }"  >
                                            </p:inputNumber>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column> 

                                <p:column  headerText="Observación" sortBy="#{obj.observacion}">
                                    <p:cellEditor>       
                                        <f:facet name="output">
                                            <h:outputText value="#{obj.observacionCorto}" title="#{obj.observacionCorto}"/> 
                                        </f:facet>
                                        <f:facet name="input">
                                            <h:inputTextarea value="#{obj.observacion}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column style="width:35px">
                                    <p:rowEditor />
                                </p:column>
                            </p:dataTable> 
                            <h:panelGroup id="pBotonConciliarMasivo" style="display:block; text-align:center; margin-top: 10px;">
                                <p:remoteCommand name="abrirVentanaResponderMasiva" action="#{cargaMasivaConciliacionBean.verReponderConciliacionMasiva( )}" />
                                <p:commandButton value="Conciliar Facturas" type="button" process="@form" onclick="abrirVentanaResponderMasiva()"  rendered="#{cargaMasivaConciliacionBean.facturasEncontradas.size() > 0}"/>
                            </h:panelGroup>
                        </p:panel>

                        <p:panel id="panelgNota" style="width:100%;margin:10px">
                            Nota : Las facturas en rojo no serán tenidas en cuenta en la conciliación por poseer valor pendiente actual en cero.
                        </p:panel>

                        <p:panel id="pFacturaSumatoria" toggleable="true" header="Sumatoria Valores Facturas" style="margin-bottom:10px;">                               
                            <p:panelGrid id="panelgFacturaSumatoria" columns="2" layout="grid" styleClass="showcase-text-align-center">

                                <p:outputLabel value="Valor suma pendiente actual total"  style="font-weight:bold"/>
                                <h:outputText value="#{cargaMasivaConciliacionBean.cmConciliacion.valorFacturasPendienteActualPrecalculado}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$ " type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel value="Valor suma pagado EPS" style="font-weight:bold"/>
                                <h:outputText value="#{cargaMasivaConciliacionBean.cmConciliacion.valorFacturasPagadoEpsPrecalculado}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$ " type="currency" maxFractionDigits="4"/>
                                </h:outputText>

                                <p:outputLabel value="Valor suma aceptado IPS" style="font-weight:bold" />
                                <h:outputText value="#{cargaMasivaConciliacionBean.cmConciliacion.valorFacturasAceptadoIpsPrecalculado}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$ " type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:panelGrid>
                        </p:panel>

                        <p:panel id="pDatosRepresentates" toggleable="true" header="Representantes" style="margin-bottom:10px;">
                            <p:panelGrid id="panelRepresentantes" columns="2" layout="grid" styleClass="showcase-text-align-center">

                                <p:outputLabel value="Representante Savia Salud EPS" for="representanteEPS" style="font-weight:bold"/>
                                <p:inputText id="representanteEPS" label="Representante Savia Salud EPS" value="#{cargaMasivaConciliacionBean.cmConciliacion.representanteEps}" maxlength="128" required="true" requiredMessage="Representante Savia Salud EPS: Este campo es obligatorio.">
                                    <p:keyFilter regEx="/[A-ZÀ-ÿ\s\-\,]/i" />
                                </p:inputText>

                                <p:outputLabel value="Representante IPS" for="representanteIPS" style="font-weight:bold" />
                                <p:inputText id="representanteIPS" label="Representante IPS" value="#{cargaMasivaConciliacionBean.cmConciliacion.representanteIps}" maxlength="128" required="true" requiredMessage="Representante IPS: Este campo es obligatorio.">
                                    <p:keyFilter regEx="/[A-ZÀ-ÿ\s\-\,]/i" />
                                </p:inputText>

                            </p:panelGrid>                          
                        </p:panel>

                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoGestionarConciliaciones').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Registrar Conciliación Masiva" widgetVar="dialogoRegistrarConciliacionMasiva" appendTo="@(body)" modal="true"  width="50%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:250px">
                    <h:form id="frmReponderConciliacionMasiva" style="padding: 10px;">   
                        <p:panelGrid id="panelRegistrar" columns="2" layout="grid" styleClass="showcase-text-align-center">
                     
                                    <p:outputLabel value="Estado" for="estadoRespuesta" style="font-weight:bold" />
                                    <p:selectOneMenu id="estadoRespuesta" value="#{cargaMasivaConciliacionBean.cmConciliacion.tipoEstadoRespuesta}"  editable="false" style="width: 64px;" required="true" requiredMessage="Estado : Este campo es obligatorio." >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="Conciliación" itemValue="2" />
                                    </p:selectOneMenu>
                            
                                    <p:outputLabel value="Observación" for="observacionRespuesta" style="font-weight:bold" />
                                    <h:inputTextarea id="observacionRespuesta" value="#{cargaMasivaConciliacionBean.cmConciliacion.observacion}" required="true" requiredMessage="Observación : Este campo es obligatorio." style="width: 100%;"/>
                        
                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;">   
                                            <p:commandButton value="Registrar Respuesta"  actionListener="#{cargaMasivaConciliacionBean.responderConciliacionMasiva()}" />
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoRegistrarConciliacionMasiva').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Final Proceso Conciliación" widgetVar="dialogoFinProcesoConciliacionMasiva" appendTo="@(body)" modal="true"  width="50%" dynamic="true">           
                <p:scrollPanel mode="native" style="height:200px">
                    <h:form id="frmFinProcesoConciliacionMasiva" style="padding: 10px;">   
                        <p:panelGrid id="panelFinProcesoConciliacionMasiva" columns="2" layout="grid" styleClass="showcase-text-align-center">

                            <p:outputLabel value="Estado proceso"  style="font-weight:bold"/>
                            <p:outputLabel value="#{cargaMasivaConciliacionBean.mensajeGeneral}"/>

                            <p:outputLabel value="Descargar"  style="font-weight:bold"/>
                            <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionAdicional1}"  title="Generar Reporte" ajax="true" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-document">
                                <p:fileDownload value="#{cargaMasivaConciliacionBean.generarReporteConciliacion()}" />
                            </p:commandButton>

                        </p:panelGrid>
                        <p:panelGrid  style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column style="text-align: center">
                                        <h:panelGroup style="display:block; text-align:center;"> 
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoFinProcesoConciliacionMasiva').hide()" immediate="true"/>
                                        </h:panelGroup>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Ver Sincronización Encabezado" id="dialogoVerSincronizacionEncabezado" widgetVar="dialogoVerSincronizacionEncabezado" appendTo="@(body)" modal="true"  width="100%" dynamic="true">
                <p:ajax event="open" oncomplete="PF('tablaWidgetSincronizacionEncabezado').filter();"  form="frmVerSincronizacionEncabezado"/>     
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmVerSincronizacionEncabezado">
                        <p:panel id="pSumatoria" toggleable="true" header="Sumatorias Encabezados Procesados" style="margin-bottom:10px;">                         
                            <p:dataTable id="sumatoria" widgetVar="sumatoria" var="sumatoria" value="#{cargaMasivaConciliacionBean.listaCmSincronizaconEncabezadoResumen}" scrollable="true"  style="margin-bottom:20px"  emptyMessage="No se encontraron registros">
                                <p:column headerText="Sumatoria Valor Documento" style="text-align: center;">
                                    <h:outputText value="#{sumatoria.valorDocumento}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="2"/>
                                    </h:outputText> 
                                </p:column>
                                <p:column headerText="Sumatoria Valor Glosado" style="text-align: center;" >
                                    <h:outputText value="#{sumatoria.valorGlosado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="2"/>
                                    </h:outputText> 
                                </p:column>
                                <p:column headerText="Sumatoria Valor Pagado" style="text-align: center;">
                                    <h:outputText value="#{sumatoria.valorPagado}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="2"/>
                                    </h:outputText> 
                                </p:column>
                                <p:column headerText="Estado" style="text-align: center;">
                                    <h:outputText value="#{sumatoria.tipoEstadoStr}" />
                                </p:column>               
                            </p:dataTable>
                        </p:panel>
                        <p:panel id="pSincronizacionEncabezado" header="Encabezados" style="margin-bottom:10px;"> 
                            <p:dataTable var="obj" value="#{cargaMasivaConciliacionBean.lazySincEncabezado}" 
                                         paginator="true"
                                         rows="50"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         emptyMessage="No se encontraron registros"
                                         rowsPerPageTemplate="50,100,200,200" 
                                         id="tablaRegistrosEncabezado" 
                                         lazy="true"
                                         widgetVar="tablaWidgetSincronizacionEncabezado"
                                         scrollable="true"
                                         scrollWidth="99%"
                                         editable="true"
                                         reflow="true"
                                         style="font-size:12px;"
                                         rowKey="#{obj.id}">

                                <p:column style="text-align: center;">
                                    <f:facet name="header">
                                        <h:outputText value="Acciones"/>
                                    </f:facet> 
                                    <p:commandButton rendered="#{cargaMasivaConciliacionBean.accionAdicional3 and obj.poseeConceptosContables}" title="Ver Cuentas Contables " actionListener="#{cargaMasivaConciliacionBean.verCuentasContables(obj.id)}" icon="ui-icon-search"/>
                                </p:column>

                                <p:column headerText="Id Radicado">   
                                    <h:outputText value="#{obj.cmRadicadosId.id}" title="#{obj.cmRadicadosId.id}"/>
                                </p:column>

                                <p:column headerText="Id Sincronización" sortBy="#{obj.id}">
                                    <h:outputText value="#{obj.id}" title="#{obj.id}"/>
                                </p:column>

                                <p:column headerText="Estado" sortBy="#{obj.estado}" filterBy="#{obj.estado}">    
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetSincronizacionEncabezado').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="En proceso" itemValue="0" />
                                            <f:selectItem itemLabel="Sin conceptos contables" itemValue="2" />
                                            <f:selectItem itemLabel="Sin valores EPS" itemValue="3" />
                                            <f:selectItem itemLabel="Finalizado" itemValue="1" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{obj.estadoStr}" title="#{obj.estadoStr}"/>
                                </p:column>

                                <p:column headerText="Número Documento" sortBy="#{obj.numeroDocumento}">
                                    <h:outputText value="#{obj.numeroDocumento}" title="#{obj.numeroDocumento}"/>
                                </p:column>

                                <p:column headerText="Número Radicado" sortBy="#{obj.numeroRadicado}">
                                    <h:outputText value="#{obj.numeroRadicado}" title="#{obj.numeroRadicado}"/>
                                </p:column>

                                <p:column headerText="Régimen" sortBy="#{obj.regimen}" filterBy="#{obj.regimen}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('tablaWidgetSincronizacionEncabezado').filter()">
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItem itemLabel="SUBSIDIADO" itemValue="SUBSIDIADO" />
                                            <f:selectItem itemLabel="CONTRIBUTIVO" itemValue="CONTRIBUTIVO" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{obj.regimen}" title="#{obj.regimen}"/>
                                </p:column>

                                <p:column headerText="Valor" sortBy="#{obj.valorDocumento}">
                                    <h:outputText value="#{obj.valorDocumento}" title="#{obj.valorDocumento}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Usuario Crea" sortBy="#{obj.usuarioCrea}">
                                    <h:outputText value="#{obj.usuarioCrea}" title="#{obj.usuarioCrea}"/>
                                </p:column>

                            </p:dataTable>
                            <p:panelGrid style="width:100%;margin:10px 0px">
                                <f:facet name="footer">
                                    <p:row>
                                        <p:column colspan="4" style="text-align: center">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerSincronizacionEncabezado').hide()" immediate="true"/>
                                        </p:column>
                                    </p:row>
                                </f:facet>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Ver Cuentas Contables" id="dialogoVerCuentasContables" widgetVar="dialogoVerCuentasContables" appendTo="@(body)" modal="true"  width="100%" dynamic="true">
                <p:scrollPanel mode="native" style="height:500px">
                    <h:form id="frmVerCuentasContables">
                        <p:panel id="pCuentasContables" header="Cuentas Contables" style="margin-bottom:10px;"> 
                            <p:dataTable var="obj" value="#{cargaMasivaConciliacionBean.lazySincDetalle}" 
                                         paginator="true"
                                         rows="50"
                                         currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         emptyMessage="No se encontraron registros"
                                         rowsPerPageTemplate="50,100,200,200" 
                                         id="tablaCuentasContables" 
                                         lazy="true"
                                         widgetVar="tablaWidgetCuentasContables"
                                         scrollable="true"
                                         scrollWidth="99%"
                                         editable="true"
                                         reflow="true"
                                         style="font-size:12px;"
                                         rowKey="#{obj.id}">

                                <p:column headerText="Id Encabezado">            
                                    <h:outputText value="#{obj.cmSincronizacionEncabezadosId.id}" title="#{obj.cmSincronizacionEncabezadosId.id}"/>
                                </p:column>

                                <p:column headerText="Código Municipio" sortBy="#{obj.codigoMunicipio}">   
                                    <h:outputText value="#{obj.codigoMunicipio}" title="#{obj.codigoMunicipio}"/>
                                </p:column>

                                <p:column headerText="Concepto Contable" sortBy="#{obj.conceptoContable}">
                                    <h:outputText value="#{obj.conceptoContable}" title="#{obj.conceptoContable}"/>
                                </p:column>

                                <p:column headerText="Valor Operación" sortBy="#{obj.valorOperacion}">
                                    <h:outputText value="#{obj.valorOperacion}" title="#{obj.valorOperacion}">
                                        <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                    </h:outputText>
                                </p:column>

                                <p:column headerText="Usuario Crea" sortBy="#{obj.usuarioCrea}">
                                    <h:outputText value="#{obj.usuarioCrea}" title="#{obj.usuarioCrea}"/>
                                </p:column>

                                <p:column headerText="Fecha Hora Crea" sortBy="#{obj.fechaHoraCrea}">
                                    <h:outputText value="#{obj.fechaHoraCrea}" title="#{obj.fechaHoraCrea}"/>
                                </p:column>

                            </p:dataTable>
                            <p:panelGrid style="width:100%;margin:10px 0px">
                                <f:facet name="footer">
                                    <p:row>
                                        <p:column colspan="4" style="text-align: center">
                                            <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerCuentasContables').hide()" immediate="true"/>
                                        </p:column>
                                    </p:row>
                                </f:facet>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Carga Masiva" id="dialogoSubirCargaMasiva" widgetVar="dialogoSubirCargaMasiva" appendTo="@(body)" modal="true" dynamic="true" >
                <p:scrollPanel mode="native" style="height:330px">
                    <h:form id="frmSubirCargaMasiva">
                        <p:panel id="panelCargaMasivaConciliacion" header="Cargar Conciliación Masiva" style="margin-bottom:10px;" >         
                            
                            <p:panelGrid id="panelGridCargaMasivaConciliacion" columns="4" layout="grid" style="width: 100%">
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-2" >
                                        <p:outputLabel value="Nit"  for="nit"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-4">
                                        <p:inputText id="nit" label="Nit" value="#{cargaMasivaConciliacionBean.objeto.nit}"
                                                     maxlength="13"  >
                                        </p:inputText>     
                                    </p:column>
                                    <p:column styleClass="ui-widget-header ui-g-2" >
                                        <p:outputLabel value="Razón Social" for="razonsocial"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-4">
                                        <p:inputText id="razonsocial" label="Razón Social" value="#{cargaMasivaConciliacionBean.objeto.razonSocial}"
                                                     maxlength="200" >
                                            <p:keyFilter regEx="/[A-ZÀ-ÿ\s]/i" />
                                        </p:inputText>  
                                    </p:column>                
                                </p:row>

                                <p:row>
                                    <p:column styleClass="ui-g-12" style="text-align: center;">
                                        <p:commandButton value="Buscar Ips" type="button" onclick="buscarRemote()" validateClient="true" style="margin: 0 auto;"/>
                                        <p:remoteCommand name="buscarRemote" action ="#{cargaMasivaConciliacionBean.buscarIps}" update="panelCargaMasivaConciliacion"/>
                                    </p:column>
                                </p:row>
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-3" >
                                        <p:outputLabel value="Ips Encontradas *" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-9">
                                        <p:selectOneMenu id="ips" label="Ips " value="#{cargaMasivaConciliacionBean.objeto.ips}" >                                    
                                            <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cargaMasivaConciliacionBean.listaIps.entrySet()}" var="entry" itemValue="#{entry.key}" itemLabel="#{entry.value}"/>
                                            <p:ajax update="panelGridCargaMasivaConciliacion" />
                                        </p:selectOneMenu>
                                    </p:column>
                                </p:row>
                                
                                <p:row>
                                    <p:column styleClass="ui-widget-header ui-g-2" >
                                         <p:outputLabel value="Archivo a conciliar" style="font-weight:bold"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-10">
                                         <p:fileUpload id="fileUploadConciliacion"
                                              label="Agregar Documento Conciliar"  mode="advanced" dragDropSupport="false" 
                                              listener="#{cargaMasivaConciliacionBean.cargarArchivoConciliar}"
                                              uploadLabel="Conciliar Archivo" 
                                              cancelLabel="Cancelar"
                                              invalidFileMessage="Tipo inválido de archivo, el formato debe ser (.txt)."  
                                              fileLimitMessage="Máximo número de archivos excedido, los permitidos son: 1" 
                                              sizeLimit="10000000" fileLimit="1" allowTypes="/(\.|\/)(txt|TXT)$/" />
                                    </p:column>
                                </p:row>
                                
                                <p:row rendered="#{cargaMasivaConciliacionBean.hayDescargaErrores}">
                                    <p:column styleClass="ui-widget-header ui-g-6" >
                                        <p:outputLabel value="Descargar Errores " style="font-weight:bold" rendered="#{cargaMasivaConciliacionBean.hayDescargaErrores}"/>
                                    </p:column>
                                    <p:column styleClass="ui-g-6">
                                        <p:commandButton title="Descargar Errores" ajax="true" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-circle-arrow-s">
                                            <p:fileDownload value="#{cargaMasivaConciliacionBean.generarArchivoErroresCargaArchivo()}" />
                                        </p:commandButton>
                                    </p:column>
                                </p:row>
                               
                            </p:panelGrid>

                            <p:panelGrid style="width:100%;margin:10px 0px;" >
                                <f:facet name="footer" >
                                    <p:row>
                                        <p:column style="text-align: center;">
                                            <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoSubirCargaMasiva').hide()" immediate="true"/>
                                        </p:column>
                                    </p:row>
                                </f:facet>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>  
            <p:dialog header="Archivos Conciliacion" id="dialogoVerAdjuntos" widgetVar="dialogoVerAdjuntos" appendTo="@(body)" 
                      modal="true"  width="95%;overflow-x:hidden;" draggable="false" dynamic="true" style="max-width:1600px;">
                <h:form id="frmVerAdjuntos">
                    <p:panel id="pAdjuntos" header="Descargar" style="margin-bottom:10px;" collapsed="false" toggleable="true">
                        <p:dataTable id="tablaAdjuntos" var="adjunto" value="#{cargaMasivaConciliacionBean.listaAnexos}" 
                                     widgetVar="tablaWidgetAdjuntos" 
                                     scrollable="true" 
                                     emptyMessage="No se encontraron rips">
                            <p:column headerText="Nombre">
                                <h:outputText value="#{adjunto.archivo}"/>
                            </p:column>
                            <p:column headerText="Ruta">
                                <h:outputText value="#{adjunto.archivoRuta}"/>
                            </p:column>
                            <p:column headerText="Acciones" style="text-align: center;">
                                <p:commandButton title="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthickstop-1-s">
                                    <p:fileDownload value="#{cargaMasivaConciliacionBean.descargarAdjunto(adjunto)}" />
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                    <p:panelGrid  style="width:100%;margin:10px 0px 6px 0px">
                        <f:facet name="footer">
                            <p:row>
                                <p:column style="text-align: center">
                                    <h:panelGroup style="display:block; text-align:center;">
                                        <p:commandButton value="Cerrar" type="button" onclick="PF('dialogoVerAdjuntos').hide()" 
                                                         immediate="true" style="margin-left: 5px;"/>
                                    </h:panelGroup>
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog header="Ver Ws Facturas" widgetVar="dialogoVerWsFacturas" id="dialogoVerWsFacturas" appendTo="@(body)"  position="center" width="80%" modal="true" style="max-height:80%;overflow:scroll;">
                <p:scrollPanel mode="native" style="height:600px">                     
                    <h:form id="frmVerWsFacturas">
                        <p:dataTable var="wsfacturas" value="#{cargaMasivaConciliacionBean.lazyWsCmFacturas}" 
                                     paginator="true" rows="#{cargaMasivaConciliacionBean.tamanoPagina}" 
                                     emptyMessage="No se encontraron registros"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="30,50,100,200" lazy="true"
                                     widgetVar="tablaWidgetWsFactura"
                                     id="tablaWsFacturas" 
                                     rowIndexVar="rowIndex"
                                     style="font-size:12px;"
                                     rowKey="#{wsfacturas.id}" reflow="true">

                            <p:column width="80" style="text-align: center;" exportable="false">
                                <f:facet name="header">
                                    <h:outputText value="Acciones"/>
                                </f:facet>
                                <p:commandButton title="Ver WS Factura Detalles" actionListener="#{cargaMasivaConciliacionBean.verWsCmFacturaDetalles(wsfacturas.id)}" icon="ui-icon-search"/>
                            </p:column>
                            <p:column headerText="Ws Factura Id" sortBy="#{wsfacturas.id}">
                                <h:outputText value="#{wsfacturas.id}" title="#{wsfacturas.id}"/>
                            </p:column>
                            <p:column headerText="Estado Ws Factura" sortBy="#{wsfacturas.estado}" filterBy="#{wsfacturas.estado}" >
                                <f:facet name="filter">
                                    <p:selectOneMenu  style="width: 70%;" onchange="PF('tablaWidgetWsFactura').filter()" >
                                        <f:selectItem itemLabel=" -- " itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="En Creacion" itemValue="1" />
                                        <f:selectItem itemLabel="Creada" itemValue="2" />
                                        <f:selectItem itemLabel="Exitoso" itemValue="3" />
                                        <f:selectItem itemLabel="Reintento" itemValue="4" />
                                        <f:selectItem itemLabel="Reconstruccion" itemValue="5" />
                                        <f:selectItem itemLabel="Sin Valores Eps" itemValue="6" />
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{wsfacturas.estadoStr}" title="#{wsfacturas.estadoStr}"/>
                                <i class="#{cargaMasivaConciliacionBean.asignarStyleSegunEstadoParaWsFactura(wsfacturas)}"/>
                            </p:column>
                            <p:column headerText="Contrato" sortBy="#{wsfacturas.contrato}">
                                <h:outputText value="#{wsfacturas.contrato}" title="#{wsfacturas.contrato}"/>
                            </p:column>
                            <p:column headerText="Proveedor" sortBy="#{wsfacturas.proveedorNit}">
                                <h:outputText value="#{wsfacturas.proveedorNit}" title="#{wsfacturas.proveedorNit}"/>
                            </p:column>
                            <p:column headerText="Número Facturado" sortBy="#{wsfacturas.numeroDocumento}"  filterBy="#{wsfacturas.numeroDocumento}">
                                <f:facet name="filter">
                                    <p:inputText maxlength="32" style="width: 95%;" onkeypress="
                                            if (event.keyCode === 13) {
                                                onchange();
                                                return false;
                                            }" onchange="PF('tablaWidgetWsFactura').filter()" />
                                </f:facet>
                                <h:outputText value="#{wsfacturas.numeroDocumento}" title="#{wsfacturas.numeroDocumento}"/>
                            </p:column>
                            <p:column headerText="Régimen" sortBy="#{wsfacturas.regimen}">
                                <h:outputText value="#{wsfacturas.regimen}" title="#{wsfacturas.regimen}"/>
                            </p:column>  
                            <p:column headerText="Estado WS Factura" sortBy="#{wsfacturas.estado}">
                                <h:outputText value="#{wsfacturas.estadoStr}" title="#{wsfacturas.estadoStr}"/>
                            </p:column>  
                            <p:column headerText="Valor Documento" sortBy="#{wsfacturas.valorDocumento}">
                                <h:outputText value="#{wsfacturas.valorDocumento}" title="#{wsfacturas.valorDocumento}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Valor Pagado" sortBy="#{wsfacturas.valorPagado}">
                                <h:outputText value="#{wsfacturas.valorPagado}" title="#{wsfacturas.valorPagado}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Valor Glosado" sortBy="#{wsfacturas.valorGlosado}">
                                <h:outputText value="#{wsfacturas.valorGlosado}" title="#{wsfacturas.valorGlosado}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Valor Copago" sortBy="#{wsfacturas.valorCopago}">
                                <h:outputText value="#{wsfacturas.valorCopago}" title="#{wsfacturas.valorCopago}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Cuota Moderadora" sortBy="#{wsfacturas.cuotaModeradora}">
                                <h:outputText value="#{wsfacturas.cuotaModeradora}" title="#{wsfacturas.cuotaModeradora}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Fecha Hora Crea" sortBy="#{wsfacturas.fechaHoraCrea}">
                                <h:outputText value="#{wsfacturas.fechaHoraCrea}" title="#{wsfacturas.fechaHoraCrea}"/>
                            </p:column>
                        </p:dataTable>
                        <p:panelGrid style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerWsFacturas').hide()" immediate="true"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

            <p:dialog header="Ver WsFactura Detalles" widgetVar="dialogoVerWsFacturaDetalles" id="dialogoVerWsFacturaDetalles" appendTo="@(body)" position="center" width="70%" modal="true" style="max-height:73%;overflow:scroll;">
                <p:scrollPanel mode="native" style="height:600px">
                    <h:form id="frmVerWsFacturaDetalles">
                        <p:dataTable var="wsfacturaDetalles" value="#{cargaMasivaConciliacionBean.lazyWsCmFacturaDetalles}" 
                                     paginator="true" rows="#{cargaMasivaConciliacionBean.tamanoPagina}" 
                                     emptyMessage="No se encontraron registros"
                                     currentPageReportTemplate="Registros del {startRecord} al {endRecord} de {totalRecords}, Página {currentPage} de {totalPages}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="30,50,100,200" lazy="true"
                                     widgetVar="tablaWidgetWsFacturaDetalles"
                                     id="tablaWsFacturaDetalles" 
                                     rowIndexVar="rowIndex"
                                     style="font-size:12px;"
                                     rowKey="#{wsfacturas.id}" reflow="true">                          

                            <p:column headerText="Tipología" sortBy="#{wsfacturaDetalles.tipologiaStr}" style="text-align: center;">
                                <h:outputText value="#{wsfacturaDetalles.tipologiaStr}" title="#{wsfacturaDetalles.tipologiaStr}"/>
                            </p:column>
                            <p:column headerText="Código Municipio" sortBy="#{wsfacturaDetalles.codigoMunicipio}" style="text-align: center;">
                                <h:outputText value="#{wsfacturaDetalles.codigoMunicipio}" title="#{wsfacturaDetalles.codigoMunicipio}"/>
                            </p:column>
                            <p:column headerText="Concepto Contable" sortBy="#{wsfacturaDetalles.conceptoContable}" style="text-align: center;">
                                <h:outputText value="#{wsfacturaDetalles.conceptoContable}" title="#{wsfacturaDetalles.conceptoContable}"/>
                            </p:column>
                            <p:column headerText="Valor Operación" style="text-align: center;">
                                <h:outputText value="#{wsfacturaDetalles.valorOperacion}" title="#{wsfacturas.valorOperacion}">
                                    <f:convertNumber locale="es_CO" currencySymbol="$" type="currency" maxFractionDigits="4"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Usuario Crea">
                                <h:outputText value="#{wsfacturaDetalles.usuarioCrea}" title="#{wsfacturaDetalles.usuarioCrea}"/>
                            </p:column>
                        </p:dataTable>
                        <p:panelGrid style="width:100%;margin:10px 0px">
                            <f:facet name="footer">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center">
                                        <p:commandButton value="Salir" type="button" onclick="PF('dialogoVerWsFacturaDetalles').hide()" immediate="true"/>
                                    </p:column>
                                </p:row>
                            </f:facet>
                        </p:panelGrid>
                    </h:form>
                </p:scrollPanel>
            </p:dialog>

        </center>
    </ui:define>
</ui:composition>
